import{B as rp,a as ap,C as cp,E as lp,F as sh,K as xp,R as dp,S as up,b as fp,T as hp,c as mp,d as gp,e as bp,V as pp,f as wp,g as _p,h as vp,i as yp,j as Cp,k as kp,l as Tp,m as wr,n as Ap,o as oh,p as Ep,q as _r,r as Ye,s as Sp,t as Ip,u as Pp,v as Rp,w as Vp,x as Bp,y as Op,z as rh,A as Lp,D as Mp,G as Fp,H as Np,I as Dp,J as zp,L as Hp,M as $p,N as Up,O as Wp,P as jp,Q as qp,U as Gp,W as Kp,X as Jp,Y as Zp,Z as Yp,_ as Xp,$ as Qp,a0 as e5,a1 as t5,a2 as n5,a3 as i5,a4 as s5,a5 as o5,a6 as r5,a7 as a5,a8 as c5,a9 as l5,aa as x5,ab as d5,ac as u5,ad as f5,ae as h5,af as m5,ag as g5,ah as b5,ai as p5,aj as ah,ak as w5,al as _5,am as v5,an as Tc,ao as y5,ap as C5,aq as k5,ar as T5,as as A5,at as E5,au as S5,av as I5,aw as P5,ax as R5,ay as V5,az as Ps,aA as B5,aB as O5,aC as L5,aD as M5,aE as F5,aF as N5,aG as D5,aH as Ts,aI as z5,aJ as H5,aK as $5,aL as U5,aM as W5,aN as j5,aO as q5,aP as G5,aQ as K5,aR as J5,aS as Z5,aT as Y5,aU as X5,aV as Q5,aW as e7,aX as t7,aY as n7,aZ as i7,a_ as b0,a$ as s7,b0 as o7,b1 as r7,b2 as a7,b3 as c7,b4 as l7,b5 as x7,b6 as d7,b7 as $s,b8 as u7,b9 as f7,ba as h7,bb as m7,bc as g7,bd as b7,be as p7,bf as w7,bg as _7,bh as v7,bi as y7,bj as C7,bk as k7,bl as T7,bm as A7,bn as E7,bo as S7,bp as I7,bq as P7,br as R7,bs as V7,bt as B7,bu as O7,bv as L7,bw as M7,bx as F7,by as N7,bz as D7,bA as Vo,bB as Ac,bC as z7,bD as H7,bE as $7}from"./index-ueWDR8qX.js";function U7(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in i)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(i,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}const W7=()=>{},j7=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:rp,BaseTransitionPropsValidators:ap,Comment:cp,EffectScope:lp,Fragment:sh,KeepAlive:xp,ReactiveEffect:dp,Static:up,Suspense:fp,Teleport:hp,Text:mp,Transition:gp,TransitionGroup:bp,VueElement:pp,assertNumber:wp,callWithAsyncErrorHandling:_p,callWithErrorHandling:vp,camelize:yp,capitalize:Cp,cloneVNode:kp,compatUtils:Tp,compile:W7,computed:wr,createApp:Ap,createBlock:oh,createCommentVNode:Ep,createElementBlock:_r,createElementVNode:Ye,createHydrationRenderer:Sp,createPropsRestProxy:Ip,createRenderer:Pp,createSSRApp:Rp,createSlots:Vp,createStaticVNode:Bp,createTextVNode:Op,createVNode:rh,customRef:Lp,defineAsyncComponent:Mp,defineComponent:Fp,defineCustomElement:Np,defineEmits:Dp,defineExpose:zp,defineModel:Hp,defineOptions:$p,defineProps:Up,defineSSRCustomElement:Wp,defineSlots:jp,get devtools(){return qp},effect:Gp,effectScope:Kp,getCurrentInstance:Jp,getCurrentScope:Zp,getTransitionRawChildren:Yp,guardReactiveProps:Xp,h:Qp,handleError:e5,hasInjectionContext:t5,hydrate:n5,initCustomFormatter:i5,initDirectivesForSSR:s5,inject:o5,isMemoSame:r5,isProxy:a5,isReactive:c5,isReadonly:l5,isRef:x5,isRuntimeOnly:d5,isShallow:u5,isVNode:f5,markRaw:h5,mergeDefaults:m5,mergeModels:g5,mergeProps:b5,nextTick:p5,normalizeClass:ah,normalizeProps:w5,normalizeStyle:_5,onActivated:v5,onBeforeMount:Tc,onBeforeUnmount:y5,onBeforeUpdate:C5,onDeactivated:k5,onErrorCaptured:T5,onMounted:A5,onRenderTracked:E5,onRenderTriggered:S5,onScopeDispose:I5,onServerPrefetch:P5,onUnmounted:R5,onUpdated:V5,openBlock:Ps,popScopeId:B5,provide:O5,proxyRefs:L5,pushScopeId:M5,queuePostFlushCb:F5,reactive:N5,readonly:D5,ref:Ts,registerRuntimeCompiler:z5,render:H5,renderList:$5,renderSlot:U5,resolveComponent:W5,resolveDirective:j5,resolveDynamicComponent:q5,resolveFilter:G5,resolveTransitionHooks:K5,setBlockTracking:J5,setDevtoolsHook:Z5,setTransitionHooks:Y5,shallowReactive:X5,shallowReadonly:Q5,shallowRef:e7,ssrContextKey:t7,ssrUtils:n7,stop:i7,toDisplayString:b0,toHandlerKey:s7,toHandlers:o7,toRaw:r7,toRef:a7,toRefs:c7,toValue:l7,transformVNodeArgs:x7,triggerRef:d7,unref:$s,useAttrs:u7,useCssModule:f7,useCssVars:h7,useModel:m7,useSSRContext:g7,useSlots:b7,useTransitionState:p7,vModelCheckbox:w7,vModelDynamic:_7,vModelRadio:v7,vModelSelect:y7,vModelText:C7,vShow:k7,version:T7,warn:A7,watch:E7,watchEffect:S7,watchPostEffect:I7,watchSyncEffect:P7,withAsyncContext:R7,withCtx:V7,withDefaults:B7,withDirectives:O7,withKeys:L7,withMemo:M7,withModifiers:F7,withScopeId:N7},Symbol.toStringTag,{value:"Module"}));function ch(i,e){return function(){return i.apply(e,arguments)}}const{toString:q7}=Object.prototype,{getPrototypeOf:Ec}=Object,Wr=(i=>e=>{const t=q7.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),hn=i=>(i=i.toLowerCase(),e=>Wr(e)===i),jr=i=>e=>typeof e===i,{isArray:os}=Array,Us=jr("undefined");function G7(i){return i!==null&&!Us(i)&&i.constructor!==null&&!Us(i.constructor)&&Ft(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const lh=hn("ArrayBuffer");function K7(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&lh(i.buffer),e}const J7=jr("string"),Ft=jr("function"),xh=jr("number"),qr=i=>i!==null&&typeof i=="object",Z7=i=>i===!0||i===!1,sr=i=>{if(Wr(i)!=="object")return!1;const e=Ec(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Y7=hn("Date"),X7=hn("File"),Q7=hn("Blob"),e2=hn("FileList"),t2=i=>qr(i)&&Ft(i.pipe),n2=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||Ft(i.append)&&((e=Wr(i))==="formdata"||e==="object"&&Ft(i.toString)&&i.toString()==="[object FormData]"))},i2=hn("URLSearchParams"),s2=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fo(i,e,{allOwnKeys:t=!1}={}){if(i===null||typeof i>"u")return;let n,s;if(typeof i!="object"&&(i=[i]),os(i))for(n=0,s=i.length;n<s;n++)e.call(null,i[n],n,i);else{const o=t?Object.getOwnPropertyNames(i):Object.keys(i),r=o.length;let a;for(n=0;n<r;n++)a=o[n],e.call(null,i[a],a,i)}}function dh(i,e){e=e.toLowerCase();const t=Object.keys(i);let n=t.length,s;for(;n-- >0;)if(s=t[n],e===s.toLowerCase())return s;return null}const uh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fh=i=>!Us(i)&&i!==uh;function p0(){const{caseless:i}=fh(this)&&this||{},e={},t=(n,s)=>{const o=i&&dh(e,s)||s;sr(e[o])&&sr(n)?e[o]=p0(e[o],n):sr(n)?e[o]=p0({},n):os(n)?e[o]=n.slice():e[o]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&fo(arguments[n],t);return e}const o2=(i,e,t,{allOwnKeys:n}={})=>(fo(e,(s,o)=>{t&&Ft(s)?i[o]=ch(s,t):i[o]=s},{allOwnKeys:n}),i),r2=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),a2=(i,e,t,n)=>{i.prototype=Object.create(e.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),t&&Object.assign(i.prototype,t)},c2=(i,e,t,n)=>{let s,o,r;const a={};if(e=e||{},i==null)return e;do{for(s=Object.getOwnPropertyNames(i),o=s.length;o-- >0;)r=s[o],(!n||n(r,i,e))&&!a[r]&&(e[r]=i[r],a[r]=!0);i=t!==!1&&Ec(i)}while(i&&(!t||t(i,e))&&i!==Object.prototype);return e},l2=(i,e,t)=>{i=String(i),(t===void 0||t>i.length)&&(t=i.length),t-=e.length;const n=i.indexOf(e,t);return n!==-1&&n===t},x2=i=>{if(!i)return null;if(os(i))return i;let e=i.length;if(!xh(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=i[e];return t},d2=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&Ec(Uint8Array)),u2=(i,e)=>{const n=(i&&i[Symbol.iterator]).call(i);let s;for(;(s=n.next())&&!s.done;){const o=s.value;e.call(i,o[0],o[1])}},f2=(i,e)=>{let t;const n=[];for(;(t=i.exec(e))!==null;)n.push(t);return n},h2=hn("HTMLFormElement"),m2=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,s){return n.toUpperCase()+s}),zl=(({hasOwnProperty:i})=>(e,t)=>i.call(e,t))(Object.prototype),g2=hn("RegExp"),hh=(i,e)=>{const t=Object.getOwnPropertyDescriptors(i),n={};fo(t,(s,o)=>{let r;(r=e(s,o,i))!==!1&&(n[o]=r||s)}),Object.defineProperties(i,n)},b2=i=>{hh(i,(e,t)=>{if(Ft(i)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=i[t];if(Ft(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},p2=(i,e)=>{const t={},n=s=>{s.forEach(o=>{t[o]=!0})};return os(i)?n(i):n(String(i).split(e)),t},w2=()=>{},_2=(i,e)=>(i=+i,Number.isFinite(i)?i:e),va="abcdefghijklmnopqrstuvwxyz",Hl="0123456789",mh={DIGIT:Hl,ALPHA:va,ALPHA_DIGIT:va+va.toUpperCase()+Hl},v2=(i=16,e=mh.ALPHA_DIGIT)=>{let t="";const{length:n}=e;for(;i--;)t+=e[Math.random()*n|0];return t};function y2(i){return!!(i&&Ft(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const C2=i=>{const e=new Array(10),t=(n,s)=>{if(qr(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const o=os(n)?[]:{};return fo(n,(r,a)=>{const c=t(r,s+1);!Us(c)&&(o[a]=c)}),e[s]=void 0,o}}return n};return t(i,0)},k2=hn("AsyncFunction"),T2=i=>i&&(qr(i)||Ft(i))&&Ft(i.then)&&Ft(i.catch),B={isArray:os,isArrayBuffer:lh,isBuffer:G7,isFormData:n2,isArrayBufferView:K7,isString:J7,isNumber:xh,isBoolean:Z7,isObject:qr,isPlainObject:sr,isUndefined:Us,isDate:Y7,isFile:X7,isBlob:Q7,isRegExp:g2,isFunction:Ft,isStream:t2,isURLSearchParams:i2,isTypedArray:d2,isFileList:e2,forEach:fo,merge:p0,extend:o2,trim:s2,stripBOM:r2,inherits:a2,toFlatObject:c2,kindOf:Wr,kindOfTest:hn,endsWith:l2,toArray:x2,forEachEntry:u2,matchAll:f2,isHTMLForm:h2,hasOwnProperty:zl,hasOwnProp:zl,reduceDescriptors:hh,freezeMethods:b2,toObjectSet:p2,toCamelCase:m2,noop:w2,toFiniteNumber:_2,findKey:dh,global:uh,isContextDefined:fh,ALPHABET:mh,generateString:v2,isSpecCompliantForm:y2,toJSONObject:C2,isAsyncFn:k2,isThenable:T2};function ce(i,e,t,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),s&&(this.response=s)}B.inherits(ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const gh=ce.prototype,bh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{bh[i]={value:i}});Object.defineProperties(ce,bh);Object.defineProperty(gh,"isAxiosError",{value:!0});ce.from=(i,e,t,n,s,o)=>{const r=Object.create(gh);return B.toFlatObject(i,r,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),ce.call(r,i.message,e,t,n,s),r.cause=i,r.name=i.name,o&&Object.assign(r,o),r};const A2=null;function w0(i){return B.isPlainObject(i)||B.isArray(i)}function ph(i){return B.endsWith(i,"[]")?i.slice(0,-2):i}function $l(i,e,t){return i?i.concat(e).map(function(s,o){return s=ph(s),!t&&o?"["+s+"]":s}).join(t?".":""):e}function E2(i){return B.isArray(i)&&!i.some(w0)}const S2=B.toFlatObject(B,{},null,function(e){return/^is[A-Z]/.test(e)});function Gr(i,e,t){if(!B.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,t=B.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,p){return!B.isUndefined(p[b])});const n=t.metaTokens,s=t.visitor||x,o=t.dots,r=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(e);if(!B.isFunction(s))throw new TypeError("visitor must be a function");function l(m){if(m===null)return"";if(B.isDate(m))return m.toISOString();if(!c&&B.isBlob(m))throw new ce("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(m)||B.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function x(m,b,p){let C=m;if(m&&!p&&typeof m=="object"){if(B.endsWith(b,"{}"))b=n?b:b.slice(0,-2),m=JSON.stringify(m);else if(B.isArray(m)&&E2(m)||(B.isFileList(m)||B.endsWith(b,"[]"))&&(C=B.toArray(m)))return b=ph(b),C.forEach(function(R,P){!(B.isUndefined(R)||R===null)&&e.append(r===!0?$l([b],P,o):r===null?b:b+"[]",l(R))}),!1}return w0(m)?!0:(e.append($l(p,b,o),l(m)),!1)}const d=[],u=Object.assign(S2,{defaultVisitor:x,convertValue:l,isVisitable:w0});function f(m,b){if(!B.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+b.join("."));d.push(m),B.forEach(m,function(C,_){(!(B.isUndefined(C)||C===null)&&s.call(e,C,B.isString(_)?_.trim():_,b,u))===!0&&f(C,b?b.concat(_):[_])}),d.pop()}}if(!B.isObject(i))throw new TypeError("data must be an object");return f(i),e}function Ul(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Sc(i,e){this._pairs=[],i&&Gr(i,this,e)}const wh=Sc.prototype;wh.append=function(e,t){this._pairs.push([e,t])};wh.toString=function(e){const t=e?function(n){return e.call(this,n,Ul)}:Ul;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function I2(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _h(i,e,t){if(!e)return i;const n=t&&t.encode||I2,s=t&&t.serialize;let o;if(s?o=s(e,t):o=B.isURLSearchParams(e)?e.toString():new Sc(e,t).toString(n),o){const r=i.indexOf("#");r!==-1&&(i=i.slice(0,r)),i+=(i.indexOf("?")===-1?"?":"&")+o}return i}class P2{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){B.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Wl=P2,vh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},R2=typeof URLSearchParams<"u"?URLSearchParams:Sc,V2=typeof FormData<"u"?FormData:null,B2=typeof Blob<"u"?Blob:null,O2={isBrowser:!0,classes:{URLSearchParams:R2,FormData:V2,Blob:B2},protocols:["http","https","file","blob","url","data"]},yh=typeof window<"u"&&typeof document<"u",L2=(i=>yh&&["ReactNative","NativeScript","NS"].indexOf(i)<0)(typeof navigator<"u"&&navigator.product),M2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",F2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:yh,hasStandardBrowserEnv:L2,hasStandardBrowserWebWorkerEnv:M2},Symbol.toStringTag,{value:"Module"})),an={...F2,...O2};function N2(i,e){return Gr(i,new an.classes.URLSearchParams,Object.assign({visitor:function(t,n,s,o){return an.isNode&&B.isBuffer(t)?(this.append(n,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function D2(i){return B.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function z2(i){const e={},t=Object.keys(i);let n;const s=t.length;let o;for(n=0;n<s;n++)o=t[n],e[o]=i[o];return e}function Ch(i){function e(t,n,s,o){let r=t[o++];const a=Number.isFinite(+r),c=o>=t.length;return r=!r&&B.isArray(s)?s.length:r,c?(B.hasOwnProp(s,r)?s[r]=[s[r],n]:s[r]=n,!a):((!s[r]||!B.isObject(s[r]))&&(s[r]=[]),e(t,n,s[r],o)&&B.isArray(s[r])&&(s[r]=z2(s[r])),!a)}if(B.isFormData(i)&&B.isFunction(i.entries)){const t={};return B.forEachEntry(i,(n,s)=>{e(D2(n),s,t,0)}),t}return null}function H2(i,e,t){if(B.isString(i))try{return(e||JSON.parse)(i),B.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(i)}const Ic={transitional:vh,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,o=B.isObject(e);if(o&&B.isHTMLForm(e)&&(e=new FormData(e)),B.isFormData(e))return s&&s?JSON.stringify(Ch(e)):e;if(B.isArrayBuffer(e)||B.isBuffer(e)||B.isStream(e)||B.isFile(e)||B.isBlob(e))return e;if(B.isArrayBufferView(e))return e.buffer;if(B.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return N2(e,this.formSerializer).toString();if((a=B.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Gr(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return o||s?(t.setContentType("application/json",!1),H2(e)):e}],transformResponse:[function(e){const t=this.transitional||Ic.transitional,n=t&&t.forcedJSONParsing,s=this.responseType==="json";if(e&&B.isString(e)&&(n&&!this.responseType||s)){const r=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(r)throw a.name==="SyntaxError"?ce.from(a,ce.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:an.classes.FormData,Blob:an.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],i=>{Ic.headers[i]={}});const Pc=Ic,$2=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),U2=i=>{const e={};let t,n,s;return i&&i.split(`
`).forEach(function(r){s=r.indexOf(":"),t=r.substring(0,s).trim().toLowerCase(),n=r.substring(s+1).trim(),!(!t||e[t]&&$2[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},jl=Symbol("internals");function hs(i){return i&&String(i).trim().toLowerCase()}function or(i){return i===!1||i==null?i:B.isArray(i)?i.map(or):String(i)}function W2(i){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(i);)e[n[1]]=n[2];return e}const j2=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function ya(i,e,t,n,s){if(B.isFunction(n))return n.call(this,e,t);if(s&&(e=t),!!B.isString(e)){if(B.isString(n))return e.indexOf(n)!==-1;if(B.isRegExp(n))return n.test(e)}}function q2(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function G2(i,e){const t=B.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+t,{value:function(s,o,r){return this[n].call(this,e,s,o,r)},configurable:!0})})}class Kr{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function o(a,c,l){const x=hs(c);if(!x)throw new Error("header name must be a non-empty string");const d=B.findKey(s,x);(!d||s[d]===void 0||l===!0||l===void 0&&s[d]!==!1)&&(s[d||c]=or(a))}const r=(a,c)=>B.forEach(a,(l,x)=>o(l,x,c));return B.isPlainObject(e)||e instanceof this.constructor?r(e,t):B.isString(e)&&(e=e.trim())&&!j2(e)?r(U2(e),t):e!=null&&o(t,e,n),this}get(e,t){if(e=hs(e),e){const n=B.findKey(this,e);if(n){const s=this[n];if(!t)return s;if(t===!0)return W2(s);if(B.isFunction(t))return t.call(this,s,n);if(B.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=hs(e),e){const n=B.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||ya(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let s=!1;function o(r){if(r=hs(r),r){const a=B.findKey(n,r);a&&(!t||ya(n,n[a],a,t))&&(delete n[a],s=!0)}}return B.isArray(e)?e.forEach(o):o(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const o=t[n];(!e||ya(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const t=this,n={};return B.forEach(this,(s,o)=>{const r=B.findKey(n,o);if(r){t[r]=or(s),delete t[o];return}const a=e?q2(o):String(o).trim();a!==o&&delete t[o],t[a]=or(s),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return B.forEach(this,(n,s)=>{n!=null&&n!==!1&&(t[s]=e&&B.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[jl]=this[jl]={accessors:{}}).accessors,s=this.prototype;function o(r){const a=hs(r);n[a]||(G2(s,r),n[a]=!0)}return B.isArray(e)?e.forEach(o):o(e),this}}Kr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);B.reduceDescriptors(Kr.prototype,({value:i},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(n){this[t]=n}}});B.freezeMethods(Kr);const En=Kr;function Ca(i,e){const t=this||Pc,n=e||t,s=En.from(n.headers);let o=n.data;return B.forEach(i,function(a){o=a.call(t,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function kh(i){return!!(i&&i.__CANCEL__)}function ho(i,e,t){ce.call(this,i??"canceled",ce.ERR_CANCELED,e,t),this.name="CanceledError"}B.inherits(ho,ce,{__CANCEL__:!0});function K2(i,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?i(t):e(new ce("Request failed with status code "+t.status,[ce.ERR_BAD_REQUEST,ce.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}const J2=an.hasStandardBrowserEnv?{write(i,e,t,n,s,o){const r=[i+"="+encodeURIComponent(e)];B.isNumber(t)&&r.push("expires="+new Date(t).toGMTString()),B.isString(n)&&r.push("path="+n),B.isString(s)&&r.push("domain="+s),o===!0&&r.push("secure"),document.cookie=r.join("; ")},read(i){const e=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Z2(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function Y2(i,e){return e?i.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):i}function Th(i,e){return i&&!Z2(e)?Y2(i,e):e}const X2=an.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function s(o){let r=o;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=s(window.location.href),function(r){const a=B.isString(r)?s(r):r;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function Q2(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function e4(i,e){i=i||10;const t=new Array(i),n=new Array(i);let s=0,o=0,r;return e=e!==void 0?e:1e3,function(c){const l=Date.now(),x=n[o];r||(r=l),t[s]=c,n[s]=l;let d=o,u=0;for(;d!==s;)u+=t[d++],d=d%i;if(s=(s+1)%i,s===o&&(o=(o+1)%i),l-r<e)return;const f=x&&l-x;return f?Math.round(u*1e3/f):void 0}}function ql(i,e){let t=0;const n=e4(50,250);return s=>{const o=s.loaded,r=s.lengthComputable?s.total:void 0,a=o-t,c=n(a),l=o<=r;t=o;const x={loaded:o,total:r,progress:r?o/r:void 0,bytes:a,rate:c||void 0,estimated:c&&r&&l?(r-o)/c:void 0,event:s};x[e?"download":"upload"]=!0,i(x)}}const t4=typeof XMLHttpRequest<"u",n4=t4&&function(i){return new Promise(function(t,n){let s=i.data;const o=En.from(i.headers).normalize();let{responseType:r,withXSRFToken:a}=i,c;function l(){i.cancelToken&&i.cancelToken.unsubscribe(c),i.signal&&i.signal.removeEventListener("abort",c)}let x;if(B.isFormData(s)){if(an.hasStandardBrowserEnv||an.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((x=o.getContentType())!==!1){const[b,...p]=x?x.split(";").map(C=>C.trim()).filter(Boolean):[];o.setContentType([b||"multipart/form-data",...p].join("; "))}}let d=new XMLHttpRequest;if(i.auth){const b=i.auth.username||"",p=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";o.set("Authorization","Basic "+btoa(b+":"+p))}const u=Th(i.baseURL,i.url);d.open(i.method.toUpperCase(),_h(u,i.params,i.paramsSerializer),!0),d.timeout=i.timeout;function f(){if(!d)return;const b=En.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),C={data:!r||r==="text"||r==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:b,config:i,request:d};K2(function(R){t(R),l()},function(R){n(R),l()},C),d=null}if("onloadend"in d?d.onloadend=f:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(f)},d.onabort=function(){d&&(n(new ce("Request aborted",ce.ECONNABORTED,i,d)),d=null)},d.onerror=function(){n(new ce("Network Error",ce.ERR_NETWORK,i,d)),d=null},d.ontimeout=function(){let p=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const C=i.transitional||vh;i.timeoutErrorMessage&&(p=i.timeoutErrorMessage),n(new ce(p,C.clarifyTimeoutError?ce.ETIMEDOUT:ce.ECONNABORTED,i,d)),d=null},an.hasStandardBrowserEnv&&(a&&B.isFunction(a)&&(a=a(i)),a||a!==!1&&X2(u))){const b=i.xsrfHeaderName&&i.xsrfCookieName&&J2.read(i.xsrfCookieName);b&&o.set(i.xsrfHeaderName,b)}s===void 0&&o.setContentType(null),"setRequestHeader"in d&&B.forEach(o.toJSON(),function(p,C){d.setRequestHeader(C,p)}),B.isUndefined(i.withCredentials)||(d.withCredentials=!!i.withCredentials),r&&r!=="json"&&(d.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&d.addEventListener("progress",ql(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",ql(i.onUploadProgress)),(i.cancelToken||i.signal)&&(c=b=>{d&&(n(!b||b.type?new ho(null,i,d):b),d.abort(),d=null)},i.cancelToken&&i.cancelToken.subscribe(c),i.signal&&(i.signal.aborted?c():i.signal.addEventListener("abort",c)));const m=Q2(u);if(m&&an.protocols.indexOf(m)===-1){n(new ce("Unsupported protocol "+m+":",ce.ERR_BAD_REQUEST,i));return}d.send(s||null)})},_0={http:A2,xhr:n4};B.forEach(_0,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const Gl=i=>`- ${i}`,i4=i=>B.isFunction(i)||i===null||i===!1,Ah={getAdapter:i=>{i=B.isArray(i)?i:[i];const{length:e}=i;let t,n;const s={};for(let o=0;o<e;o++){t=i[o];let r;if(n=t,!i4(t)&&(n=_0[(r=String(t)).toLowerCase()],n===void 0))throw new ce(`Unknown adapter '${r}'`);if(n)break;s[r||"#"+o]=n}if(!n){const o=Object.entries(s).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let r=e?o.length>1?`since :
`+o.map(Gl).join(`
`):" "+Gl(o[0]):"as no adapter specified";throw new ce("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return n},adapters:_0};function ka(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new ho(null,i)}function Kl(i){return ka(i),i.headers=En.from(i.headers),i.data=Ca.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),Ah.getAdapter(i.adapter||Pc.adapter)(i).then(function(n){return ka(i),n.data=Ca.call(i,i.transformResponse,n),n.headers=En.from(n.headers),n},function(n){return kh(n)||(ka(i),n&&n.response&&(n.response.data=Ca.call(i,i.transformResponse,n.response),n.response.headers=En.from(n.response.headers))),Promise.reject(n)})}const Jl=i=>i instanceof En?i.toJSON():i;function Ki(i,e){e=e||{};const t={};function n(l,x,d){return B.isPlainObject(l)&&B.isPlainObject(x)?B.merge.call({caseless:d},l,x):B.isPlainObject(x)?B.merge({},x):B.isArray(x)?x.slice():x}function s(l,x,d){if(B.isUndefined(x)){if(!B.isUndefined(l))return n(void 0,l,d)}else return n(l,x,d)}function o(l,x){if(!B.isUndefined(x))return n(void 0,x)}function r(l,x){if(B.isUndefined(x)){if(!B.isUndefined(l))return n(void 0,l)}else return n(void 0,x)}function a(l,x,d){if(d in e)return n(l,x);if(d in i)return n(void 0,l)}const c={url:o,method:o,data:o,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(l,x)=>s(Jl(l),Jl(x),!0)};return B.forEach(Object.keys(Object.assign({},i,e)),function(x){const d=c[x]||s,u=d(i[x],e[x],x);B.isUndefined(u)&&d!==a||(t[x]=u)}),t}const Eh="1.6.2",Rc={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{Rc[i]=function(n){return typeof n===i||"a"+(e<1?"n ":" ")+i}});const Zl={};Rc.transitional=function(e,t,n){function s(o,r){return"[Axios v"+Eh+"] Transitional option '"+o+"'"+r+(n?". "+n:"")}return(o,r,a)=>{if(e===!1)throw new ce(s(r," has been removed"+(t?" in "+t:"")),ce.ERR_DEPRECATED);return t&&!Zl[r]&&(Zl[r]=!0,console.warn(s(r," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,r,a):!0}};function s4(i,e,t){if(typeof i!="object")throw new ce("options must be an object",ce.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let s=n.length;for(;s-- >0;){const o=n[s],r=e[o];if(r){const a=i[o],c=a===void 0||r(a,o,i);if(c!==!0)throw new ce("option "+o+" must be "+c,ce.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ce("Unknown option "+o,ce.ERR_BAD_OPTION)}}const v0={assertOptions:s4,validators:Rc},Nn=v0.validators;class vr{constructor(e){this.defaults=e,this.interceptors={request:new Wl,response:new Wl}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ki(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:o}=t;n!==void 0&&v0.assertOptions(n,{silentJSONParsing:Nn.transitional(Nn.boolean),forcedJSONParsing:Nn.transitional(Nn.boolean),clarifyTimeoutError:Nn.transitional(Nn.boolean)},!1),s!=null&&(B.isFunction(s)?t.paramsSerializer={serialize:s}:v0.assertOptions(s,{encode:Nn.function,serialize:Nn.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=o&&B.merge(o.common,o[t.method]);o&&B.forEach(["delete","get","head","post","put","patch","common"],m=>{delete o[m]}),t.headers=En.concat(r,o);const a=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(t)===!1||(c=c&&b.synchronous,a.unshift(b.fulfilled,b.rejected))});const l=[];this.interceptors.response.forEach(function(b){l.push(b.fulfilled,b.rejected)});let x,d=0,u;if(!c){const m=[Kl.bind(this),void 0];for(m.unshift.apply(m,a),m.push.apply(m,l),u=m.length,x=Promise.resolve(t);d<u;)x=x.then(m[d++],m[d++]);return x}u=a.length;let f=t;for(d=0;d<u;){const m=a[d++],b=a[d++];try{f=m(f)}catch(p){b.call(this,p);break}}try{x=Kl.call(this,f)}catch(m){return Promise.reject(m)}for(d=0,u=l.length;d<u;)x=x.then(l[d++],l[d++]);return x}getUri(e){e=Ki(this.defaults,e);const t=Th(e.baseURL,e.url);return _h(t,e.params,e.paramsSerializer)}}B.forEach(["delete","get","head","options"],function(e){vr.prototype[e]=function(t,n){return this.request(Ki(n||{},{method:e,url:t,data:(n||{}).data}))}});B.forEach(["post","put","patch"],function(e){function t(n){return function(o,r,a){return this.request(Ki(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:r}))}}vr.prototype[e]=t(),vr.prototype[e+"Form"]=t(!0)});const rr=vr;class Vc{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const r=new Promise(a=>{n.subscribe(a),o=a}).then(s);return r.cancel=function(){n.unsubscribe(o)},r},e(function(o,r,a){n.reason||(n.reason=new ho(o,r,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new Vc(function(s){e=s}),cancel:e}}}const o4=Vc;function r4(i){return function(t){return i.apply(null,t)}}function a4(i){return B.isObject(i)&&i.isAxiosError===!0}const y0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(y0).forEach(([i,e])=>{y0[e]=i});const c4=y0;function Sh(i){const e=new rr(i),t=ch(rr.prototype.request,e);return B.extend(t,rr.prototype,e,{allOwnKeys:!0}),B.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return Sh(Ki(i,s))},t}const Ze=Sh(Pc);Ze.Axios=rr;Ze.CanceledError=ho;Ze.CancelToken=o4;Ze.isCancel=kh;Ze.VERSION=Eh;Ze.toFormData=Gr;Ze.AxiosError=ce;Ze.Cancel=Ze.CanceledError;Ze.all=function(e){return Promise.all(e)};Ze.spread=r4;Ze.isAxiosError=a4;Ze.mergeConfig=Ki;Ze.AxiosHeaders=En;Ze.formToJSON=i=>Ch(B.isHTMLForm(i)?new FormData(i):i);Ze.getAdapter=Ah.getAdapter;Ze.HttpStatusCode=c4;Ze.default=Ze;const Yl=Ze;var Ih={exports:{}};const l4=D7(j7);/*!
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */(function(i,e){(function(t,n){i.exports=n(l4)})(self,t=>(()=>{var n={976:a=>{a.exports=t}},s={};function o(a){var c=s[a];if(c!==void 0)return c.exports;var l=s[a]={exports:{}};return n[a](l,l.exports,o),l.exports}o.d=(a,c)=>{for(var l in c)o.o(c,l)&&!o.o(a,l)&&Object.defineProperty(a,l,{enumerable:!0,get:c[l]})},o.o=(a,c)=>Object.prototype.hasOwnProperty.call(a,c);var r={};return(()=>{o.d(r,{default:()=>wn});var a=o(976);const c=function(h){var g=typeof h;return h!=null&&(g=="object"||g=="function")},l=typeof Vo=="object"&&Vo&&Vo.Object===Object&&Vo;var x=typeof self=="object"&&self&&self.Object===Object&&self;const d=l||x||Function("return this")(),u=function(){return d.Date.now()};var f=/\s/;const m=function(h){for(var g=h.length;g--&&f.test(h.charAt(g)););return g};var b=/^\s+/;const p=function(h){return h&&h.slice(0,m(h)+1).replace(b,"")},C=d.Symbol;var _=Object.prototype,R=_.hasOwnProperty,P=_.toString,I=C?C.toStringTag:void 0;const V=function(h){var g=R.call(h,I),v=h[I];try{h[I]=void 0;var E=!0}catch{}var O=P.call(h);return E&&(g?h[I]=v:delete h[I]),O};var A=Object.prototype.toString;const k=function(h){return A.call(h)};var M=C?C.toStringTag:void 0;const F=function(h){return h==null?h===void 0?"[object Undefined]":"[object Null]":M&&M in Object(h)?V(h):k(h)},N=function(h){return h!=null&&typeof h=="object"},xe=function(h){return typeof h=="symbol"||N(h)&&F(h)=="[object Symbol]"};var J=/^[-+]0x[0-9a-f]+$/i,ze=/^0b[01]+$/i,oe=/^0o[0-7]+$/i,bn=parseInt;const Xt=function(h){if(typeof h=="number")return h;if(xe(h))return NaN;if(c(h)){var g=typeof h.valueOf=="function"?h.valueOf():h;h=c(g)?g+"":g}if(typeof h!="string")return h===0?h:+h;h=p(h);var v=ze.test(h);return v||oe.test(h)?bn(h.slice(2),v?2:8):J.test(h)?NaN:+h};var pn=Math.max,W=Math.min;const z=function(h,g,v){var E,O,Z,He,we,ft,Ie=0,en=!1,rt=!1,T=!0;if(typeof h!="function")throw new TypeError("Expected a function");function $(at){var _n=E,Ro=O;return E=O=void 0,Ie=at,He=h.apply(Ro,_n)}function $e(at){return Ie=at,we=setTimeout(Ve,g),en?$(at):He}function ke(at){var _n=at-ft;return ft===void 0||_n>=g||_n<0||rt&&at-Ie>=Z}function Ve(){var at=u();if(ke(at))return Xe(at);we=setTimeout(Ve,function(_n){var Ro=g-(_n-ft);return rt?W(Ro,Z-(_n-Ie)):Ro}(at))}function Xe(at){return we=void 0,T&&E?$(at):(E=O=void 0,He)}function _a(){var at=u(),_n=ke(at);if(E=arguments,O=this,ft=at,_n){if(we===void 0)return $e(ft);if(rt)return clearTimeout(we),we=setTimeout(Ve,g),$(ft)}return we===void 0&&(we=setTimeout(Ve,g)),He}return g=Xt(g)||0,c(v)&&(en=!!v.leading,Z=(rt="maxWait"in v)?pn(Xt(v.maxWait)||0,g):Z,T="trailing"in v?!!v.trailing:T),_a.cancel=function(){we!==void 0&&clearTimeout(we),Ie=0,E=ft=O=we=void 0},_a.flush=function(){return we===void 0?He:Xe(u())},_a},Qt=(0,a.defineComponent)({name:"Ckeditor",model:{prop:"modelValue",event:"update:modelValue"},props:{editor:{type:Function,required:!0},config:{type:Object,default:()=>({})},modelValue:{type:String,default:""},tagName:{type:String,default:"div"},disabled:{type:Boolean,default:!1},disableTwoWayDataBinding:{type:Boolean,default:!1}},emits:["ready","destroy","blur","focus","input","update:modelValue"],data:()=>({instance:null,lastEditorData:null}),watch:{modelValue(h){this.instance&&h!==this.lastEditorData&&this.instance.data.set(h)},disabled(h){h?this.instance.enableReadOnlyMode("Integration Sample"):this.instance.disableReadOnlyMode("Integration Sample")}},created(){const{CKEDITOR_VERSION:h}=window;if(h){const[g]=h.split(".").map(Number);g<37&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 37 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')},mounted(){const h=Object.assign({},this.config);this.modelValue&&(h.initialData=this.modelValue),this.editor.create(this.$el,h).then(g=>{this.instance=(0,a.markRaw)(g),this.setUpEditorEvents(),this.modelValue!==h.initialData&&g.data.set(this.modelValue),this.disabled&&g.enableReadOnlyMode("Integration Sample"),this.$emit("ready",g)}).catch(g=>{console.error(g)})},beforeUnmount(){this.instance&&(this.instance.destroy(),this.instance=null),this.$emit("destroy",this.instance)},methods:{setUpEditorEvents(){const h=this.instance,g=z(v=>{if(this.disableTwoWayDataBinding)return;const E=this.lastEditorData=h.data.get();this.$emit("update:modelValue",E,v,h),this.$emit("input",E,v,h)},300,{leading:!0});h.model.document.on("change:data",g),h.editing.view.document.on("focus",v=>{this.$emit("focus",v,h)}),h.editing.view.document.on("blur",v=>{this.$emit("blur",v,h)})}},render(){return(0,a.h)(this.tagName)}});if(!a.version||!a.version.startsWith("3."))throw new Error("The CKEditor plugin works only with Vue 3+. For more information, please refer to https://ckeditor.com/docs/ckeditor5/latest/builds/guides/integration/frameworks/vuejs-v3.html");const wn={install(h){h.component("Ckeditor",Qt)},component:Qt}})(),r=r.default})())})(Ih);var x4=Ih.exports;const d4=Ac(x4);/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function rs({emitter:i,activator:e,callback:t,contextElements:n}){i.listenTo(document,"mousedown",(s,o)=>{if(!e())return;const r=typeof o.composedPath=="function"?o.composedPath():[],a=typeof n=="function"?n():n;for(const c of a)if(c.contains(o.target)||r.includes(c))return;t()})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Jr(i){class e extends i{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...n){super(...n),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function as({view:i}){i.listenTo(i.element,"submit",(e,t)=>{t.preventDefault(),i.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function mo({keystrokeHandler:i,focusTracker:e,gridItems:t,numberOfColumns:n,uiLanguageDirection:s}){const o=typeof n=="number"?()=>n:n;i.set("arrowright",r((l,x)=>s==="rtl"?c(l,x.length):a(l,x.length))),i.set("arrowleft",r((l,x)=>s==="rtl"?a(l,x.length):c(l,x.length))),i.set("arrowup",r((l,x)=>{let d=l-o();return d<0&&(d=l+o()*Math.floor(x.length/o()),d>x.length-1&&(d-=o())),d})),i.set("arrowdown",r((l,x)=>{let d=l+o();return d>x.length-1&&(d=l%o()),d}));function r(l){return x=>{const d=t.find(m=>m.element===e.focusedElement),u=t.getIndex(d),f=l(u,t);t.get(f).focus(),x.stopPropagation(),x.preventDefault()}}function a(l,x){return l===x-1?0:l+1}function c(l,x){return l===0?x-1:l-1}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function u4(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const Xn=u4(),ee={isMac:Ph(Xn),isWindows:f4(Xn),isGecko:h4(Xn),isSafari:m4(Xn),isiOS:g4(Xn),isAndroid:b4(Xn),isBlink:p4(Xn),features:{isRegExpUnicodePropertySupported:w4()}};function Ph(i){return i.indexOf("macintosh")>-1}function f4(i){return i.indexOf("windows")>-1}function h4(i){return!!i.match(/gecko\/\d+/)}function m4(i){return i.indexOf(" applewebkit/")>-1&&i.indexOf("chrome")===-1}function g4(i){return!!i.match(/iphone|ipad/i)||Ph(i)&&navigator.maxTouchPoints>0}function b4(i){return i.indexOf("android")>-1}function p4(i){return i.indexOf("chrome/")>-1&&i.indexOf("edge/")<0}function w4(){let i=!1;try{i="ć".search(new RegExp("[\\p{L}]","u"))===0}catch{}return i}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Rh(i,e,t,n){t=t||function(c,l){return c===l};const s=Array.isArray(i)?i:Array.prototype.slice.call(i),o=Array.isArray(e)?e:Array.prototype.slice.call(e),r=_4(s,o,t);return n?y4(r,o.length):v4(o,r)}function _4(i,e,t){const n=Xl(i,e,t);if(n===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const s=Ql(i,n),o=Ql(e,n),r=Xl(s,o,t),a=i.length-r,c=e.length-r;return{firstIndex:n,lastIndexOld:a,lastIndexNew:c}}function Xl(i,e,t){for(let n=0;n<Math.max(i.length,e.length);n++)if(i[n]===void 0||e[n]===void 0||!t(i[n],e[n]))return n;return-1}function Ql(i,e){return i.slice(e).reverse()}function v4(i,e){const t=[],{firstIndex:n,lastIndexOld:s,lastIndexNew:o}=e;return o-n>0&&t.push({index:n,type:"insert",values:i.slice(n,o)}),s-n>0&&t.push({index:n+(o-n),type:"delete",howMany:s-n}),t}function y4(i,e){const{firstIndex:t,lastIndexOld:n,lastIndexNew:s}=i;if(t===-1)return Array(e).fill("equal");let o=[];return t>0&&(o=o.concat(Array(t).fill("equal"))),s-t>0&&(o=o.concat(Array(s-t).fill("insert"))),n-t>0&&(o=o.concat(Array(n-t).fill("delete"))),s<e&&(o=o.concat(Array(e-s).fill("equal"))),o}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Rs(i,e,t){t=t||function(b,p){return b===p};const n=i.length,s=e.length;if(n>200||s>200||n+s>300)return Rs.fastDiff(i,e,t,!0);let o,r;if(s<n){const b=i;i=e,e=b,o="delete",r="insert"}else o="insert",r="delete";const a=i.length,c=e.length,l=c-a,x={},d={};function u(b){const p=(d[b-1]!==void 0?d[b-1]:-1)+1,C=d[b+1]!==void 0?d[b+1]:-1,_=p>C?-1:1;x[b+_]&&(x[b]=x[b+_].slice(0)),x[b]||(x[b]=[]),x[b].push(p>C?o:r);let R=Math.max(p,C),P=R-b;for(;P<a&&R<c&&t(i[P],e[R]);)P++,R++,x[b].push("equal");return R}let f=0,m;do{for(m=-f;m<l;m++)d[m]=u(m);for(m=l+f;m>l;m--)d[m]=u(m);d[l]=u(l),f++}while(d[l]!==c);return x[l].slice(1)}Rs.fastDiff=Rh;/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ex(){return function i(){i.called=!0}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pn{constructor(e,t){this.source=e,this.name=t,this.path=[],this.stop=ex(),this.off=ex()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ct=new Array(256).fill("").map((i,e)=>("0"+e.toString(16)).slice(-2));function Vt(){const i=Math.random()*4294967296>>>0,e=Math.random()*4294967296>>>0,t=Math.random()*4294967296>>>0,n=Math.random()*4294967296>>>0;return"e"+ct[i>>0&255]+ct[i>>8&255]+ct[i>>16&255]+ct[i>>24&255]+ct[e>>0&255]+ct[e>>8&255]+ct[e>>16&255]+ct[e>>24&255]+ct[t>>0&255]+ct[t>>8&255]+ct[t>>16&255]+ct[t>>24&255]+ct[n>>0&255]+ct[n>>8&255]+ct[n>>16&255]+ct[n>>24&255]}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const _t={get(i="normal"){return typeof i!="number"?this[i]||this.normal:i},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Vh(i,e){const t=_t.get(e.priority);for(let n=0;n<i.length;n++)if(_t.get(i[n].priority)<t){i.splice(n,0,e);return}i.push(e)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const C4="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class w extends Error{constructor(e,t,n){super(k4(e,n)),this.name="CKEditorError",this.context=t,this.data=n}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;const n=new w(e.message,t);throw n.stack=e.stack,n}}function be(i,e){console.warn(...T4(i,e))}function Bh(i){return`
Read more: ${C4}#error-${i}`}function k4(i,e){const t=new WeakSet,s=e?` ${JSON.stringify(e,(r,a)=>{if(typeof a=="object"&&a!==null){if(t.has(a))return`[object ${a.constructor.name}]`;t.add(a)}return a})}`:"",o=Bh(i);return i+s+o}function T4(i,e){const t=Bh(i);return e?[i,e,t]:[i,t]}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const A4="40.1.0",E4=new Date(2023,10,15);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new w("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=A4;/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ni=Symbol("listeningTo"),C0=Symbol("emitterId"),vn=Symbol("delegations"),Oh=ye(Object);function ye(i){if(!i)return Oh;class e extends i{on(n,s,o){this.listenTo(this,n,s,o)}once(n,s,o){let r=!1;const a=(c,...l)=>{r||(r=!0,c.off(),s.call(this,c,...l))};this.listenTo(this,n,a,o)}off(n,s){this.stopListening(this,n,s)}listenTo(n,s,o,r={}){let a,c;this[Ni]||(this[Ni]={});const l=this[Ni];Ta(n)||Lh(n);const x=Ta(n);(a=l[x])||(a=l[x]={emitter:n,callbacks:{}}),(c=a.callbacks[s])||(c=a.callbacks[s]=[]),c.push(o),R4(this,n,s,o,r)}stopListening(n,s,o){const r=this[Ni];let a=n&&Ta(n);const c=r&&a?r[a]:void 0,l=c&&s?c.callbacks[s]:void 0;if(!(!r||n&&!c||s&&!l))if(o)Aa(this,n,s,o),l.indexOf(o)!==-1&&(l.length===1?delete c.callbacks[s]:Aa(this,n,s,o));else if(l){for(;o=l.pop();)Aa(this,n,s,o);delete c.callbacks[s]}else if(c){for(s in c.callbacks)this.stopListening(n,s);delete r[a]}else{for(a in r)this.stopListening(r[a].emitter);delete this[Ni]}}fire(n,...s){try{const o=n instanceof Pn?n:new Pn(this,n),r=o.name;let a=Fh(this,r);if(o.path.push(this),a){const l=[o,...s];a=Array.from(a);for(let x=0;x<a.length&&(a[x].callback.apply(this,l),o.off.called&&(delete o.off.called,this._removeEventListener(r,a[x].callback)),!o.stop.called);x++);}const c=this[vn];if(c){const l=c.get(r),x=c.get("*");l&&tx(l,o,s),x&&tx(x,o,s)}return o.return}catch(o){/* istanbul ignore next -- @preserve */w.rethrowUnexpectedError(o,this)}}delegate(...n){return{to:(s,o)=>{this[vn]||(this[vn]=new Map),n.forEach(r=>{const a=this[vn].get(r);a?a.set(s,o):this[vn].set(r,new Map([[s,o]]))})}}}stopDelegating(n,s){if(this[vn])if(!n)this[vn].clear();else if(!s)this[vn].delete(n);else{const o=this[vn].get(n);o&&o.delete(s)}}_addEventListener(n,s,o){P4(this,n);const r=k0(this,n),a=_t.get(o.priority),c={callback:s,priority:a};for(const l of r)Vh(l,c)}_removeEventListener(n,s){const o=k0(this,n);for(const r of o)for(let a=0;a<r.length;a++)r[a].callback==s&&(r.splice(a,1),a--)}}return e}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{ye[i]=Oh.prototype[i]});function S4(i,e){const t=i[Ni];return t&&t[e]?t[e].emitter:null}function Lh(i,e){i[C0]||(i[C0]=e||Vt())}function Ta(i){return i[C0]}function Mh(i){return i._events||Object.defineProperty(i,"_events",{value:{}}),i._events}function I4(){return{callbacks:[],childEvents:[]}}function P4(i,e){const t=Mh(i);if(t[e])return;let n=e,s=null;const o=[];for(;n!==""&&!t[n];)t[n]=I4(),o.push(t[n]),s&&t[n].childEvents.push(s),s=n,n=n.substr(0,n.lastIndexOf(":"));if(n!==""){for(const r of o)r.callbacks=t[n].callbacks.slice();t[n].childEvents.push(s)}}function k0(i,e){const t=Mh(i)[e];if(!t)return[];let n=[t.callbacks];for(let s=0;s<t.childEvents.length;s++){const o=k0(i,t.childEvents[s]);n=n.concat(o)}return n}function Fh(i,e){let t;return!i._events||!(t=i._events[e])||!t.callbacks.length?e.indexOf(":")>-1?Fh(i,e.substr(0,e.lastIndexOf(":"))):null:t.callbacks}function tx(i,e,t){for(let[n,s]of i){s?typeof s=="function"&&(s=s(e.name)):s=e.name;const o=new Pn(e.source,s);o.path=[...e.path],n.fire(o,...t)}}function R4(i,e,t,n,s){e._addEventListener?e._addEventListener(t,n,s):i._addEventListener.call(e,t,n,s)}function Aa(i,e,t,n){e._removeEventListener?e._removeEventListener(t,n):i._removeEventListener.call(e,t,n)}var V4=typeof global=="object"&&global&&global.Object===Object&&global;const Nh=V4;var B4=typeof self=="object"&&self&&self.Object===Object&&self,O4=Nh||B4||Function("return this")();const Yt=O4;var L4=Yt.Symbol;const dn=L4;var Dh=Object.prototype,M4=Dh.hasOwnProperty,F4=Dh.toString,ms=dn?dn.toStringTag:void 0;function N4(i){var e=M4.call(i,ms),t=i[ms];try{i[ms]=void 0;var n=!0}catch{}var s=F4.call(i);return n&&(e?i[ms]=t:delete i[ms]),s}var D4=Object.prototype,z4=D4.toString;function H4(i){return z4.call(i)}var $4="[object Null]",U4="[object Undefined]",nx=dn?dn.toStringTag:void 0;function Kn(i){return i==null?i===void 0?U4:$4:nx&&nx in Object(i)?N4(i):H4(i)}function Dt(i){return i!=null&&typeof i=="object"}var W4="[object Symbol]";function Zr(i){return typeof i=="symbol"||Dt(i)&&Kn(i)==W4}function zh(i,e){for(var t=-1,n=i==null?0:i.length,s=Array(n);++t<n;)s[t]=e(i[t],t,i);return s}var j4=Array.isArray;const mt=j4;var q4=1/0,ix=dn?dn.prototype:void 0,sx=ix?ix.toString:void 0;function Hh(i){if(typeof i=="string")return i;if(mt(i))return zh(i,Hh)+"";if(Zr(i))return sx?sx.call(i):"";var e=i+"";return e=="0"&&1/i==-q4?"-0":e}var G4=/\s/;function K4(i){for(var e=i.length;e--&&G4.test(i.charAt(e)););return e}var J4=/^\s+/;function Z4(i){return i&&i.slice(0,K4(i)+1).replace(J4,"")}function Ee(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var ox=NaN,Y4=/^[-+]0x[0-9a-f]+$/i,X4=/^0b[01]+$/i,Q4=/^0o[0-7]+$/i,e3=parseInt;function rx(i){if(typeof i=="number")return i;if(Zr(i))return ox;if(Ee(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=Ee(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=Z4(i);var t=X4.test(i);return t||Q4.test(i)?e3(i.slice(2),t?2:8):Y4.test(i)?ox:+i}function oi(i){return i}var t3="[object AsyncFunction]",n3="[object Function]",i3="[object GeneratorFunction]",s3="[object Proxy]";function fi(i){if(!Ee(i))return!1;var e=Kn(i);return e==n3||e==i3||e==t3||e==s3}var o3=Yt["__core-js_shared__"];const Ea=o3;var ax=function(){var i=/[^.]+$/.exec(Ea&&Ea.keys&&Ea.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function r3(i){return!!ax&&ax in i}var a3=Function.prototype,c3=a3.toString;function wi(i){if(i!=null){try{return c3.call(i)}catch{}try{return i+""}catch{}}return""}var l3=/[\\^$.*+?()[\]{}|]/g,x3=/^\[object .+?Constructor\]$/,d3=Function.prototype,u3=Object.prototype,f3=d3.toString,h3=u3.hasOwnProperty,m3=RegExp("^"+f3.call(h3).replace(l3,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function g3(i){if(!Ee(i)||r3(i))return!1;var e=fi(i)?m3:x3;return e.test(wi(i))}function b3(i,e){return i==null?void 0:i[e]}function _i(i,e){var t=b3(i,e);return g3(t)?t:void 0}var p3=_i(Yt,"WeakMap");const T0=p3;var cx=Object.create,w3=function(){function i(){}return function(e){if(!Ee(e))return{};if(cx)return cx(e);i.prototype=e;var t=new i;return i.prototype=void 0,t}}();const _3=w3;function v3(i,e,t){switch(t.length){case 0:return i.call(e);case 1:return i.call(e,t[0]);case 2:return i.call(e,t[0],t[1]);case 3:return i.call(e,t[0],t[1],t[2])}return i.apply(e,t)}function Bc(i,e){var t=-1,n=i.length;for(e||(e=Array(n));++t<n;)e[t]=i[t];return e}var y3=800,C3=16,k3=Date.now;function T3(i){var e=0,t=0;return function(){var n=k3(),s=C3-(n-t);if(t=n,s>0){if(++e>=y3)return arguments[0]}else e=0;return i.apply(void 0,arguments)}}function A3(i){return function(){return i}}var E3=function(){try{var i=_i(Object,"defineProperty");return i({},"",{}),i}catch{}}();const yr=E3;var S3=yr?function(i,e){return yr(i,"toString",{configurable:!0,enumerable:!1,value:A3(e),writable:!0})}:oi;const I3=S3;var P3=T3(I3);const R3=P3;function V3(i,e){for(var t=-1,n=i==null?0:i.length;++t<n&&e(i[t],t,i)!==!1;);return i}function B3(i,e,t,n){for(var s=i.length,o=t+(n?1:-1);n?o--:++o<s;)if(e(i[o],o,i))return o;return-1}function O3(i){return i!==i}function L3(i,e,t){for(var n=t-1,s=i.length;++n<s;)if(i[n]===e)return n;return-1}function M3(i,e,t){return e===e?L3(i,e,t):B3(i,O3,t)}var F3=9007199254740991,N3=/^(?:0|[1-9]\d*)$/;function Oc(i,e){var t=typeof i;return e=e??F3,!!e&&(t=="number"||t!="symbol"&&N3.test(i))&&i>-1&&i%1==0&&i<e}function Lc(i,e,t){e=="__proto__"&&yr?yr(i,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):i[e]=t}function go(i,e){return i===e||i!==i&&e!==e}var D3=Object.prototype,z3=D3.hasOwnProperty;function Mc(i,e,t){var n=i[e];(!(z3.call(i,e)&&go(n,t))||t===void 0&&!(e in i))&&Lc(i,e,t)}function cs(i,e,t,n){var s=!t;t||(t={});for(var o=-1,r=e.length;++o<r;){var a=e[o],c=n?n(t[a],i[a],a,t,i):void 0;c===void 0&&(c=i[a]),s?Lc(t,a,c):Mc(t,a,c)}return t}var lx=Math.max;function H3(i,e,t){return e=lx(e===void 0?i.length-1:e,0),function(){for(var n=arguments,s=-1,o=lx(n.length-e,0),r=Array(o);++s<o;)r[s]=n[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=n[s];return a[e]=t(r),v3(i,this,a)}}function $h(i,e){return R3(H3(i,e,oi),i+"")}var $3=9007199254740991;function Uh(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=$3}function Yr(i){return i!=null&&Uh(i.length)&&!fi(i)}function U3(i,e,t){if(!Ee(t))return!1;var n=typeof e;return(n=="number"?Yr(t)&&Oc(e,t.length):n=="string"&&e in t)?go(t[e],i):!1}function Fc(i){return $h(function(e,t){var n=-1,s=t.length,o=s>1?t[s-1]:void 0,r=s>2?t[2]:void 0;for(o=i.length>3&&typeof o=="function"?(s--,o):void 0,r&&U3(t[0],t[1],r)&&(o=s<3?void 0:o,s=1),e=Object(e);++n<s;){var a=t[n];a&&i(e,a,n,o)}return e})}var W3=Object.prototype;function Nc(i){var e=i&&i.constructor,t=typeof e=="function"&&e.prototype||W3;return i===t}function j3(i,e){for(var t=-1,n=Array(i);++t<i;)n[t]=e(t);return n}var q3="[object Arguments]";function xx(i){return Dt(i)&&Kn(i)==q3}var Wh=Object.prototype,G3=Wh.hasOwnProperty,K3=Wh.propertyIsEnumerable,J3=xx(function(){return arguments}())?xx:function(i){return Dt(i)&&G3.call(i,"callee")&&!K3.call(i,"callee")};const A0=J3;function Z3(){return!1}var jh=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dx=jh&&typeof module=="object"&&module&&!module.nodeType&&module,Y3=dx&&dx.exports===jh,ux=Y3?Yt.Buffer:void 0,X3=ux?ux.isBuffer:void 0,Q3=X3||Z3;const Ws=Q3;var ew="[object Arguments]",tw="[object Array]",nw="[object Boolean]",iw="[object Date]",sw="[object Error]",ow="[object Function]",rw="[object Map]",aw="[object Number]",cw="[object Object]",lw="[object RegExp]",xw="[object Set]",dw="[object String]",uw="[object WeakMap]",fw="[object ArrayBuffer]",hw="[object DataView]",mw="[object Float32Array]",gw="[object Float64Array]",bw="[object Int8Array]",pw="[object Int16Array]",ww="[object Int32Array]",_w="[object Uint8Array]",vw="[object Uint8ClampedArray]",yw="[object Uint16Array]",Cw="[object Uint32Array]",Pe={};Pe[mw]=Pe[gw]=Pe[bw]=Pe[pw]=Pe[ww]=Pe[_w]=Pe[vw]=Pe[yw]=Pe[Cw]=!0;Pe[ew]=Pe[tw]=Pe[fw]=Pe[nw]=Pe[hw]=Pe[iw]=Pe[sw]=Pe[ow]=Pe[rw]=Pe[aw]=Pe[cw]=Pe[lw]=Pe[xw]=Pe[dw]=Pe[uw]=!1;function kw(i){return Dt(i)&&Uh(i.length)&&!!Pe[Kn(i)]}function Xr(i){return function(e){return i(e)}}var qh=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Vs=qh&&typeof module=="object"&&module&&!module.nodeType&&module,Tw=Vs&&Vs.exports===qh,Sa=Tw&&Nh.process,Aw=function(){try{var i=Vs&&Vs.require&&Vs.require("util").types;return i||Sa&&Sa.binding&&Sa.binding("util")}catch{}}();const Ji=Aw;var fx=Ji&&Ji.isTypedArray,Ew=fx?Xr(fx):kw;const Dc=Ew;var Sw=Object.prototype,Iw=Sw.hasOwnProperty;function Gh(i,e){var t=mt(i),n=!t&&A0(i),s=!t&&!n&&Ws(i),o=!t&&!n&&!s&&Dc(i),r=t||n||s||o,a=r?j3(i.length,String):[],c=a.length;for(var l in i)(e||Iw.call(i,l))&&!(r&&(l=="length"||s&&(l=="offset"||l=="parent")||o&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||Oc(l,c)))&&a.push(l);return a}function Kh(i,e){return function(t){return i(e(t))}}var Pw=Kh(Object.keys,Object);const Rw=Pw;var Vw=Object.prototype,Bw=Vw.hasOwnProperty;function Ow(i){if(!Nc(i))return Rw(i);var e=[];for(var t in Object(i))Bw.call(i,t)&&t!="constructor"&&e.push(t);return e}function zc(i){return Yr(i)?Gh(i):Ow(i)}function Lw(i){var e=[];if(i!=null)for(var t in Object(i))e.push(t);return e}var Mw=Object.prototype,Fw=Mw.hasOwnProperty;function Nw(i){if(!Ee(i))return Lw(i);var e=Nc(i),t=[];for(var n in i)n=="constructor"&&(e||!Fw.call(i,n))||t.push(n);return t}function ls(i){return Yr(i)?Gh(i,!0):Nw(i)}var Dw=Fc(function(i,e){cs(e,ls(e),i)});const Jh=Dw;var zw=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hw=/^\w*$/;function $w(i,e){if(mt(i))return!1;var t=typeof i;return t=="number"||t=="symbol"||t=="boolean"||i==null||Zr(i)?!0:Hw.test(i)||!zw.test(i)||e!=null&&i in Object(e)}var Uw=_i(Object,"create");const js=Uw;function Ww(){this.__data__=js?js(null):{},this.size=0}function jw(i){var e=this.has(i)&&delete this.__data__[i];return this.size-=e?1:0,e}var qw="__lodash_hash_undefined__",Gw=Object.prototype,Kw=Gw.hasOwnProperty;function Jw(i){var e=this.__data__;if(js){var t=e[i];return t===qw?void 0:t}return Kw.call(e,i)?e[i]:void 0}var Zw=Object.prototype,Yw=Zw.hasOwnProperty;function Xw(i){var e=this.__data__;return js?e[i]!==void 0:Yw.call(e,i)}var Qw="__lodash_hash_undefined__";function e9(i,e){var t=this.__data__;return this.size+=this.has(i)?0:1,t[i]=js&&e===void 0?Qw:e,this}function hi(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}hi.prototype.clear=Ww;hi.prototype.delete=jw;hi.prototype.get=Jw;hi.prototype.has=Xw;hi.prototype.set=e9;function t9(){this.__data__=[],this.size=0}function Qr(i,e){for(var t=i.length;t--;)if(go(i[t][0],e))return t;return-1}var n9=Array.prototype,i9=n9.splice;function s9(i){var e=this.__data__,t=Qr(e,i);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():i9.call(e,t,1),--this.size,!0}function o9(i){var e=this.__data__,t=Qr(e,i);return t<0?void 0:e[t][1]}function r9(i){return Qr(this.__data__,i)>-1}function a9(i,e){var t=this.__data__,n=Qr(t,i);return n<0?(++this.size,t.push([i,e])):t[n][1]=e,this}function Bn(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}Bn.prototype.clear=t9;Bn.prototype.delete=s9;Bn.prototype.get=o9;Bn.prototype.has=r9;Bn.prototype.set=a9;var c9=_i(Yt,"Map");const qs=c9;function l9(){this.size=0,this.__data__={hash:new hi,map:new(qs||Bn),string:new hi}}function x9(i){var e=typeof i;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?i!=="__proto__":i===null}function ea(i,e){var t=i.__data__;return x9(e)?t[typeof e=="string"?"string":"hash"]:t.map}function d9(i){var e=ea(this,i).delete(i);return this.size-=e?1:0,e}function u9(i){return ea(this,i).get(i)}function f9(i){return ea(this,i).has(i)}function h9(i,e){var t=ea(this,i),n=t.size;return t.set(i,e),this.size+=t.size==n?0:1,this}function On(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}On.prototype.clear=l9;On.prototype.delete=d9;On.prototype.get=u9;On.prototype.has=f9;On.prototype.set=h9;var m9="Expected a function";function Hc(i,e){if(typeof i!="function"||e!=null&&typeof e!="function")throw new TypeError(m9);var t=function(){var n=arguments,s=e?e.apply(this,n):n[0],o=t.cache;if(o.has(s))return o.get(s);var r=i.apply(this,n);return t.cache=o.set(s,r)||o,r};return t.cache=new(Hc.Cache||On),t}Hc.Cache=On;var g9=500;function b9(i){var e=Hc(i,function(n){return t.size===g9&&t.clear(),n}),t=e.cache;return e}var p9=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,w9=/\\(\\)?/g,_9=b9(function(i){var e=[];return i.charCodeAt(0)===46&&e.push(""),i.replace(p9,function(t,n,s,o){e.push(s?o.replace(w9,"$1"):n||t)}),e});const v9=_9;function xs(i){return i==null?"":Hh(i)}function $c(i,e){return mt(i)?i:$w(i,e)?[i]:v9(xs(i))}var y9=1/0;function Uc(i){if(typeof i=="string"||Zr(i))return i;var e=i+"";return e=="0"&&1/i==-y9?"-0":e}function Zh(i,e){e=$c(e,i);for(var t=0,n=e.length;i!=null&&t<n;)i=i[Uc(e[t++])];return t&&t==n?i:void 0}function Cr(i,e,t){var n=i==null?void 0:Zh(i,e);return n===void 0?t:n}function Yh(i,e){for(var t=-1,n=e.length,s=i.length;++t<n;)i[s+t]=e[t];return i}var C9=Kh(Object.getPrototypeOf,Object);const Wc=C9;var k9="[object Object]",T9=Function.prototype,A9=Object.prototype,Xh=T9.toString,E9=A9.hasOwnProperty,S9=Xh.call(Object);function wt(i){if(!Dt(i)||Kn(i)!=k9)return!1;var e=Wc(i);if(e===null)return!0;var t=E9.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Xh.call(t)==S9}function Qh(i,e,t){var n=-1,s=i.length;e<0&&(e=-e>s?0:s+e),t=t>s?s:t,t<0&&(t+=s),s=e>t?0:t-e>>>0,e>>>=0;for(var o=Array(s);++n<s;)o[n]=i[n+e];return o}function I9(i,e,t){var n=i.length;return t=t===void 0?n:t,!e&&t>=n?i:Qh(i,e,t)}var P9="\\ud800-\\udfff",R9="\\u0300-\\u036f",V9="\\ufe20-\\ufe2f",B9="\\u20d0-\\u20ff",O9=R9+V9+B9,L9="\\ufe0e\\ufe0f",M9="\\u200d",F9=RegExp("["+M9+P9+O9+L9+"]");function em(i){return F9.test(i)}function N9(i){return i.split("")}var tm="\\ud800-\\udfff",D9="\\u0300-\\u036f",z9="\\ufe20-\\ufe2f",H9="\\u20d0-\\u20ff",$9=D9+z9+H9,U9="\\ufe0e\\ufe0f",W9="["+tm+"]",E0="["+$9+"]",S0="\\ud83c[\\udffb-\\udfff]",j9="(?:"+E0+"|"+S0+")",nm="[^"+tm+"]",im="(?:\\ud83c[\\udde6-\\uddff]){2}",sm="[\\ud800-\\udbff][\\udc00-\\udfff]",q9="\\u200d",om=j9+"?",rm="["+U9+"]?",G9="(?:"+q9+"(?:"+[nm,im,sm].join("|")+")"+rm+om+")*",K9=rm+om+G9,J9="(?:"+[nm+E0+"?",E0,im,sm,W9].join("|")+")",Z9=RegExp(S0+"(?="+S0+")|"+J9+K9,"g");function Y9(i){return i.match(Z9)||[]}function X9(i){return em(i)?Y9(i):N9(i)}function Q9(i){return function(e){e=xs(e);var t=em(e)?X9(e):void 0,n=t?t[0]:e.charAt(0),s=t?I9(t,1).join(""):e.slice(1);return n[i]()+s}}var e8=Q9("toUpperCase");const am=e8;function t8(i,e,t,n){var s=-1,o=i==null?0:i.length;for(n&&o&&(t=i[++s]);++s<o;)t=e(t,i[s],s,i);return t}function cm(i){return function(e){return i==null?void 0:i[e]}}var n8={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},i8=cm(n8);const s8=i8;var o8=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,r8="\\u0300-\\u036f",a8="\\ufe20-\\ufe2f",c8="\\u20d0-\\u20ff",l8=r8+a8+c8,x8="["+l8+"]",d8=RegExp(x8,"g");function u8(i){return i=xs(i),i&&i.replace(o8,s8).replace(d8,"")}var f8=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function h8(i){return i.match(f8)||[]}var m8=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function g8(i){return m8.test(i)}var lm="\\ud800-\\udfff",b8="\\u0300-\\u036f",p8="\\ufe20-\\ufe2f",w8="\\u20d0-\\u20ff",_8=b8+p8+w8,xm="\\u2700-\\u27bf",dm="a-z\\xdf-\\xf6\\xf8-\\xff",v8="\\xac\\xb1\\xd7\\xf7",y8="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",C8="\\u2000-\\u206f",k8=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",um="A-Z\\xc0-\\xd6\\xd8-\\xde",T8="\\ufe0e\\ufe0f",fm=v8+y8+C8+k8,hm="['’]",hx="["+fm+"]",A8="["+_8+"]",mm="\\d+",E8="["+xm+"]",gm="["+dm+"]",bm="[^"+lm+fm+mm+xm+dm+um+"]",S8="\\ud83c[\\udffb-\\udfff]",I8="(?:"+A8+"|"+S8+")",P8="[^"+lm+"]",pm="(?:\\ud83c[\\udde6-\\uddff]){2}",wm="[\\ud800-\\udbff][\\udc00-\\udfff]",Di="["+um+"]",R8="\\u200d",mx="(?:"+gm+"|"+bm+")",V8="(?:"+Di+"|"+bm+")",gx="(?:"+hm+"(?:d|ll|m|re|s|t|ve))?",bx="(?:"+hm+"(?:D|LL|M|RE|S|T|VE))?",_m=I8+"?",vm="["+T8+"]?",B8="(?:"+R8+"(?:"+[P8,pm,wm].join("|")+")"+vm+_m+")*",O8="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",L8="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",M8=vm+_m+B8,F8="(?:"+[E8,pm,wm].join("|")+")"+M8,N8=RegExp([Di+"?"+gm+"+"+gx+"(?="+[hx,Di,"$"].join("|")+")",V8+"+"+bx+"(?="+[hx,Di+mx,"$"].join("|")+")",Di+"?"+mx+"+"+gx,Di+"+"+bx,L8,O8,mm,F8].join("|"),"g");function D8(i){return i.match(N8)||[]}function z8(i,e,t){return i=xs(i),e=t?void 0:e,e===void 0?g8(i)?D8(i):h8(i):i.match(e)||[]}var H8="['’]",$8=RegExp(H8,"g");function U8(i){return function(e){return t8(z8(u8(e).replace($8,"")),i,"")}}function W8(){this.__data__=new Bn,this.size=0}function j8(i){var e=this.__data__,t=e.delete(i);return this.size=e.size,t}function q8(i){return this.__data__.get(i)}function G8(i){return this.__data__.has(i)}var K8=200;function J8(i,e){var t=this.__data__;if(t instanceof Bn){var n=t.__data__;if(!qs||n.length<K8-1)return n.push([i,e]),this.size=++t.size,this;t=this.__data__=new On(n)}return t.set(i,e),this.size=t.size,this}function cn(i){var e=this.__data__=new Bn(i);this.size=e.size}cn.prototype.clear=W8;cn.prototype.delete=j8;cn.prototype.get=q8;cn.prototype.has=G8;cn.prototype.set=J8;function Z8(i,e){return i&&cs(e,zc(e),i)}function Y8(i,e){return i&&cs(e,ls(e),i)}var ym=typeof exports=="object"&&exports&&!exports.nodeType&&exports,px=ym&&typeof module=="object"&&module&&!module.nodeType&&module,X8=px&&px.exports===ym,wx=X8?Yt.Buffer:void 0,_x=wx?wx.allocUnsafe:void 0;function Cm(i,e){if(e)return i.slice();var t=i.length,n=_x?_x(t):new i.constructor(t);return i.copy(n),n}function Q8(i,e){for(var t=-1,n=i==null?0:i.length,s=0,o=[];++t<n;){var r=i[t];e(r,t,i)&&(o[s++]=r)}return o}function km(){return[]}var e_=Object.prototype,t_=e_.propertyIsEnumerable,vx=Object.getOwnPropertySymbols,n_=vx?function(i){return i==null?[]:(i=Object(i),Q8(vx(i),function(e){return t_.call(i,e)}))}:km;const jc=n_;function i_(i,e){return cs(i,jc(i),e)}var s_=Object.getOwnPropertySymbols,o_=s_?function(i){for(var e=[];i;)Yh(e,jc(i)),i=Wc(i);return e}:km;const Tm=o_;function r_(i,e){return cs(i,Tm(i),e)}function Am(i,e,t){var n=e(i);return mt(i)?n:Yh(n,t(i))}function I0(i){return Am(i,zc,jc)}function a_(i){return Am(i,ls,Tm)}var c_=_i(Yt,"DataView");const P0=c_;var l_=_i(Yt,"Promise");const R0=l_;var x_=_i(Yt,"Set");const V0=x_;var yx="[object Map]",d_="[object Object]",Cx="[object Promise]",kx="[object Set]",Tx="[object WeakMap]",Ax="[object DataView]",u_=wi(P0),f_=wi(qs),h_=wi(R0),m_=wi(V0),g_=wi(T0),si=Kn;(P0&&si(new P0(new ArrayBuffer(1)))!=Ax||qs&&si(new qs)!=yx||R0&&si(R0.resolve())!=Cx||V0&&si(new V0)!=kx||T0&&si(new T0)!=Tx)&&(si=function(i){var e=Kn(i),t=e==d_?i.constructor:void 0,n=t?wi(t):"";if(n)switch(n){case u_:return Ax;case f_:return yx;case h_:return Cx;case m_:return kx;case g_:return Tx}return e});const Gs=si;var b_=Object.prototype,p_=b_.hasOwnProperty;function w_(i){var e=i.length,t=new i.constructor(e);return e&&typeof i[0]=="string"&&p_.call(i,"index")&&(t.index=i.index,t.input=i.input),t}var __=Yt.Uint8Array;const kr=__;function qc(i){var e=new i.constructor(i.byteLength);return new kr(e).set(new kr(i)),e}function v_(i,e){var t=e?qc(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.byteLength)}var y_=/\w*$/;function C_(i){var e=new i.constructor(i.source,y_.exec(i));return e.lastIndex=i.lastIndex,e}var Ex=dn?dn.prototype:void 0,Sx=Ex?Ex.valueOf:void 0;function k_(i){return Sx?Object(Sx.call(i)):{}}function Em(i,e){var t=e?qc(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.length)}var T_="[object Boolean]",A_="[object Date]",E_="[object Map]",S_="[object Number]",I_="[object RegExp]",P_="[object Set]",R_="[object String]",V_="[object Symbol]",B_="[object ArrayBuffer]",O_="[object DataView]",L_="[object Float32Array]",M_="[object Float64Array]",F_="[object Int8Array]",N_="[object Int16Array]",D_="[object Int32Array]",z_="[object Uint8Array]",H_="[object Uint8ClampedArray]",$_="[object Uint16Array]",U_="[object Uint32Array]";function W_(i,e,t){var n=i.constructor;switch(e){case B_:return qc(i);case T_:case A_:return new n(+i);case O_:return v_(i,t);case L_:case M_:case F_:case N_:case D_:case z_:case H_:case $_:case U_:return Em(i,t);case E_:return new n;case S_:case R_:return new n(i);case I_:return C_(i);case P_:return new n;case V_:return k_(i)}}function Sm(i){return typeof i.constructor=="function"&&!Nc(i)?_3(Wc(i)):{}}var j_="[object Map]";function q_(i){return Dt(i)&&Gs(i)==j_}var Ix=Ji&&Ji.isMap,G_=Ix?Xr(Ix):q_;const K_=G_;var J_="[object Set]";function Z_(i){return Dt(i)&&Gs(i)==J_}var Px=Ji&&Ji.isSet,Y_=Px?Xr(Px):Z_;const X_=Y_;var Q_=1,ev=2,tv=4,Im="[object Arguments]",nv="[object Array]",iv="[object Boolean]",sv="[object Date]",ov="[object Error]",Pm="[object Function]",rv="[object GeneratorFunction]",av="[object Map]",cv="[object Number]",Rm="[object Object]",lv="[object RegExp]",xv="[object Set]",dv="[object String]",uv="[object Symbol]",fv="[object WeakMap]",hv="[object ArrayBuffer]",mv="[object DataView]",gv="[object Float32Array]",bv="[object Float64Array]",pv="[object Int8Array]",wv="[object Int16Array]",_v="[object Int32Array]",vv="[object Uint8Array]",yv="[object Uint8ClampedArray]",Cv="[object Uint16Array]",kv="[object Uint32Array]",Te={};Te[Im]=Te[nv]=Te[hv]=Te[mv]=Te[iv]=Te[sv]=Te[gv]=Te[bv]=Te[pv]=Te[wv]=Te[_v]=Te[av]=Te[cv]=Te[Rm]=Te[lv]=Te[xv]=Te[dv]=Te[uv]=Te[vv]=Te[yv]=Te[Cv]=Te[kv]=!0;Te[ov]=Te[Pm]=Te[fv]=!1;function qi(i,e,t,n,s,o){var r,a=e&Q_,c=e&ev,l=e&tv;if(t&&(r=s?t(i,n,s,o):t(i)),r!==void 0)return r;if(!Ee(i))return i;var x=mt(i);if(x){if(r=w_(i),!a)return Bc(i,r)}else{var d=Gs(i),u=d==Pm||d==rv;if(Ws(i))return Cm(i,a);if(d==Rm||d==Im||u&&!s){if(r=c||u?{}:Sm(i),!a)return c?r_(i,Y8(r,i)):i_(i,Z8(r,i))}else{if(!Te[d])return s?i:{};r=W_(i,d,a)}}o||(o=new cn);var f=o.get(i);if(f)return f;o.set(i,r),X_(i)?i.forEach(function(p){r.add(qi(p,e,t,p,i,o))}):K_(i)&&i.forEach(function(p,C){r.set(C,qi(p,e,t,C,i,o))});var m=l?c?a_:I0:c?ls:zc,b=x?void 0:m(i);return V3(b||i,function(p,C){b&&(C=p,p=i[C]),Mc(r,C,qi(p,e,t,C,i,o))}),r}var Tv=4;function Vm(i){return qi(i,Tv)}var Av=1,Ev=4;function Ln(i){return qi(i,Av|Ev)}var Sv=1,Iv=4;function Gc(i,e){return e=typeof e=="function"?e:void 0,qi(i,Sv|Iv,e)}var Pv="__lodash_hash_undefined__";function Rv(i){return this.__data__.set(i,Pv),this}function Vv(i){return this.__data__.has(i)}function Tr(i){var e=-1,t=i==null?0:i.length;for(this.__data__=new On;++e<t;)this.add(i[e])}Tr.prototype.add=Tr.prototype.push=Rv;Tr.prototype.has=Vv;function Bv(i,e){for(var t=-1,n=i==null?0:i.length;++t<n;)if(e(i[t],t,i))return!0;return!1}function Ov(i,e){return i.has(e)}var Lv=1,Mv=2;function Bm(i,e,t,n,s,o){var r=t&Lv,a=i.length,c=e.length;if(a!=c&&!(r&&c>a))return!1;var l=o.get(i),x=o.get(e);if(l&&x)return l==e&&x==i;var d=-1,u=!0,f=t&Mv?new Tr:void 0;for(o.set(i,e),o.set(e,i);++d<a;){var m=i[d],b=e[d];if(n)var p=r?n(b,m,d,e,i,o):n(m,b,d,i,e,o);if(p!==void 0){if(p)continue;u=!1;break}if(f){if(!Bv(e,function(C,_){if(!Ov(f,_)&&(m===C||s(m,C,t,n,o)))return f.push(_)})){u=!1;break}}else if(!(m===b||s(m,b,t,n,o))){u=!1;break}}return o.delete(i),o.delete(e),u}function Fv(i){var e=-1,t=Array(i.size);return i.forEach(function(n,s){t[++e]=[s,n]}),t}function Nv(i){var e=-1,t=Array(i.size);return i.forEach(function(n){t[++e]=n}),t}var Dv=1,zv=2,Hv="[object Boolean]",$v="[object Date]",Uv="[object Error]",Wv="[object Map]",jv="[object Number]",qv="[object RegExp]",Gv="[object Set]",Kv="[object String]",Jv="[object Symbol]",Zv="[object ArrayBuffer]",Yv="[object DataView]",Rx=dn?dn.prototype:void 0,Ia=Rx?Rx.valueOf:void 0;function Xv(i,e,t,n,s,o,r){switch(t){case Yv:if(i.byteLength!=e.byteLength||i.byteOffset!=e.byteOffset)return!1;i=i.buffer,e=e.buffer;case Zv:return!(i.byteLength!=e.byteLength||!o(new kr(i),new kr(e)));case Hv:case $v:case jv:return go(+i,+e);case Uv:return i.name==e.name&&i.message==e.message;case qv:case Kv:return i==e+"";case Wv:var a=Fv;case Gv:var c=n&Dv;if(a||(a=Nv),i.size!=e.size&&!c)return!1;var l=r.get(i);if(l)return l==e;n|=zv,r.set(i,e);var x=Bm(a(i),a(e),n,s,o,r);return r.delete(i),x;case Jv:if(Ia)return Ia.call(i)==Ia.call(e)}return!1}var Qv=1,ey=Object.prototype,ty=ey.hasOwnProperty;function ny(i,e,t,n,s,o){var r=t&Qv,a=I0(i),c=a.length,l=I0(e),x=l.length;if(c!=x&&!r)return!1;for(var d=c;d--;){var u=a[d];if(!(r?u in e:ty.call(e,u)))return!1}var f=o.get(i),m=o.get(e);if(f&&m)return f==e&&m==i;var b=!0;o.set(i,e),o.set(e,i);for(var p=r;++d<c;){u=a[d];var C=i[u],_=e[u];if(n)var R=r?n(_,C,u,e,i,o):n(C,_,u,i,e,o);if(!(R===void 0?C===_||s(C,_,t,n,o):R)){b=!1;break}p||(p=u=="constructor")}if(b&&!p){var P=i.constructor,I=e.constructor;P!=I&&"constructor"in i&&"constructor"in e&&!(typeof P=="function"&&P instanceof P&&typeof I=="function"&&I instanceof I)&&(b=!1)}return o.delete(i),o.delete(e),b}var iy=1,Vx="[object Arguments]",Bx="[object Array]",Bo="[object Object]",sy=Object.prototype,Ox=sy.hasOwnProperty;function oy(i,e,t,n,s,o){var r=mt(i),a=mt(e),c=r?Bx:Gs(i),l=a?Bx:Gs(e);c=c==Vx?Bo:c,l=l==Vx?Bo:l;var x=c==Bo,d=l==Bo,u=c==l;if(u&&Ws(i)){if(!Ws(e))return!1;r=!0,x=!1}if(u&&!x)return o||(o=new cn),r||Dc(i)?Bm(i,e,t,n,s,o):Xv(i,e,c,t,n,s,o);if(!(t&iy)){var f=x&&Ox.call(i,"__wrapped__"),m=d&&Ox.call(e,"__wrapped__");if(f||m){var b=f?i.value():i,p=m?e.value():e;return o||(o=new cn),s(b,p,t,n,o)}}return u?(o||(o=new cn),ny(i,e,t,n,s,o)):!1}function Kc(i,e,t,n,s){return i===e?!0:i==null||e==null||!Dt(i)&&!Dt(e)?i!==i&&e!==e:oy(i,e,t,n,Kc,s)}function ry(i){return function(e,t,n){for(var s=-1,o=Object(e),r=n(e),a=r.length;a--;){var c=r[i?a:++s];if(t(o[c],c,o)===!1)break}return e}}var ay=ry();const cy=ay;var ly=function(){return Yt.Date.now()};const Pa=ly;var xy="Expected a function",dy=Math.max,uy=Math.min;function un(i,e,t){var n,s,o,r,a,c,l=0,x=!1,d=!1,u=!0;if(typeof i!="function")throw new TypeError(xy);e=rx(e)||0,Ee(t)&&(x=!!t.leading,d="maxWait"in t,o=d?dy(rx(t.maxWait)||0,e):o,u="trailing"in t?!!t.trailing:u);function f(V){var A=n,k=s;return n=s=void 0,l=V,r=i.apply(k,A),r}function m(V){return l=V,a=setTimeout(C,e),x?f(V):r}function b(V){var A=V-c,k=V-l,M=e-A;return d?uy(M,o-k):M}function p(V){var A=V-c,k=V-l;return c===void 0||A>=e||A<0||d&&k>=o}function C(){var V=Pa();if(p(V))return _(V);a=setTimeout(C,b(V))}function _(V){return a=void 0,u&&n?f(V):(n=s=void 0,r)}function R(){a!==void 0&&clearTimeout(a),l=0,n=c=s=a=void 0}function P(){return a===void 0?r:_(Pa())}function I(){var V=Pa(),A=p(V);if(n=arguments,s=this,c=V,A){if(a===void 0)return m(c);if(d)return clearTimeout(a),a=setTimeout(C,e),f(c)}return a===void 0&&(a=setTimeout(C,e)),r}return I.cancel=R,I.flush=P,I}function B0(i,e,t){(t!==void 0&&!go(i[e],t)||t===void 0&&!(e in i))&&Lc(i,e,t)}function fy(i){return Dt(i)&&Yr(i)}function O0(i,e){if(!(e==="constructor"&&typeof i[e]=="function")&&e!="__proto__")return i[e]}function hy(i){return cs(i,ls(i))}function my(i,e,t,n,s,o,r){var a=O0(i,t),c=O0(e,t),l=r.get(c);if(l){B0(i,t,l);return}var x=o?o(a,c,t+"",i,e,r):void 0,d=x===void 0;if(d){var u=mt(c),f=!u&&Ws(c),m=!u&&!f&&Dc(c);x=c,u||f||m?mt(a)?x=a:fy(a)?x=Bc(a):f?(d=!1,x=Cm(c,!0)):m?(d=!1,x=Em(c,!0)):x=[]:wt(c)||A0(c)?(x=a,A0(a)?x=hy(a):(!Ee(a)||fi(a))&&(x=Sm(c))):d=!1}d&&(r.set(c,x),s(x,c,n,o,r),r.delete(c)),B0(i,t,x)}function Jc(i,e,t,n,s){i!==e&&cy(e,function(o,r){if(s||(s=new cn),Ee(o))my(i,e,r,t,Jc,n,s);else{var a=n?n(O0(i,r),o,r+"",i,e,s):void 0;a===void 0&&(a=o),B0(i,r,a)}},ls)}var gy=Fc(function(i,e,t,n){Jc(i,e,t,n)});const by=gy;function py(i){var e=i==null?0:i.length;return e?i[e-1]:void 0}var wy={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},_y=cm(wy);const vy=_y;var Om=/[&<>"']/g,yy=RegExp(Om.source);function Lx(i){return i=xs(i),i&&yy.test(i)?i.replace(Om,vy):i}var Lm=/[\\^$.*+?()[\]{}|]/g,Cy=RegExp(Lm.source);function Mm(i){return i=xs(i),i&&Cy.test(i)?i.replace(Lm,"\\$&"):i}var ky="[object String]";function Mx(i){return typeof i=="string"||!mt(i)&&Dt(i)&&Kn(i)==ky}function Ty(i,e){return e.length<2?i:Zh(i,Qh(e,0,-1))}function Un(i){return Dt(i)&&i.nodeType===1&&!wt(i)}function Zi(i,e){return Kc(i,e)}function Ay(i,e,t){t=typeof t=="function"?t:void 0;var n=t?t(i,e):void 0;return n===void 0?Kc(i,e,void 0,t):!!n}var Ey=Fc(function(i,e,t){Jc(i,e,t)});const Fm=Ey;function Sy(i,e){return e=$c(e,i),i=Ty(i,e),i==null||delete i[Uc(py(e))]}function Iy(i,e,t,n){if(!Ee(i))return i;e=$c(e,i);for(var s=-1,o=e.length,r=o-1,a=i;a!=null&&++s<o;){var c=Uc(e[s]),l=t;if(c==="__proto__"||c==="constructor"||c==="prototype")return i;if(s!=r){var x=a[c];l=n?n(x,c,a):void 0,l===void 0&&(l=Ee(x)?x:Oc(e[s+1])?[]:{})}Mc(a,c,l),a=a[c]}return i}function Py(i,e,t,n){for(var s=t-1,o=i.length;++s<o;)if(n(i[s],e))return s;return-1}var Ry=Array.prototype,Fx=Ry.splice;function Vy(i,e,t,n){var s=n?Py:M3,o=-1,r=e.length,a=i;for(i===e&&(e=Bc(e)),t&&(a=zh(i,Xr(t)));++o<r;)for(var c=0,l=e[o],x=t?t(l):l;(c=s(a,x,c,n))>-1;)a!==i&&Fx.call(a,c,1),Fx.call(i,c,1);return i}function By(i,e){return i&&i.length&&e&&e.length?Vy(i,e):i}var Oy=$h(By);const Ly=Oy;function My(i,e,t){return i==null?i:Iy(i,e,t)}var Fy=U8(function(i,e,t){return i+(t?" ":"")+am(e)});const Ny=Fy;var Dy="Expected a function";function mi(i,e,t){var n=!0,s=!0;if(typeof i!="function")throw new TypeError(Dy);return Ee(t)&&(n="leading"in t?!!t.leading:n,s="trailing"in t?!!t.trailing:s),un(i,e,{leading:n,maxWait:e,trailing:s})}function zy(i,e){return i==null?!0:Sy(i,e)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ar=Symbol("observableProperties"),ta=Symbol("boundObservables"),Er=Symbol("boundProperties"),Pi=Symbol("decoratedMethods"),Nx=Symbol("decoratedOriginal"),Nm=ue(ye());function ue(i){if(!i)return Nm;class e extends i{set(n,s){if(Ee(n)){Object.keys(n).forEach(r=>{this.set(r,n[r])},this);return}Ra(this);const o=this[Ar];if(n in this&&!o.has(n))throw new w("observable-set-cannot-override",this);Object.defineProperty(this,n,{enumerable:!0,configurable:!0,get(){return o.get(n)},set(r){const a=o.get(n);let c=this.fire(`set:${n}`,n,r,a);c===void 0&&(c=r),(a!==c||!o.has(n))&&(o.set(n,c),this.fire(`change:${n}`,n,c,a))}}),this[n]=s}bind(...n){if(!n.length||!Dx(n))throw new w("observable-bind-wrong-properties",this);if(new Set(n).size!==n.length)throw new w("observable-bind-duplicate-properties",this);Ra(this);const s=this[Er];n.forEach(r=>{if(s.has(r))throw new w("observable-bind-rebind",this)});const o=new Map;return n.forEach(r=>{const a={property:r,to:[]};s.set(r,a),o.set(r,a)}),{to:Hy,toMany:$y,_observable:this,_bindProperties:n,_to:[],_bindings:o}}unbind(...n){if(!this[Ar])return;const s=this[Er],o=this[ta];if(n.length){if(!Dx(n))throw new w("observable-unbind-wrong-properties",this);n.forEach(r=>{const a=s.get(r);a&&(a.to.forEach(([c,l])=>{const x=o.get(c),d=x[l];d.delete(a),d.size||delete x[l],Object.keys(x).length||(o.delete(c),this.stopListening(c,"change"))}),s.delete(r))})}else o.forEach((r,a)=>{this.stopListening(a,"change")}),o.clear(),s.clear()}decorate(n){Ra(this);const s=this[n];if(!s)throw new w("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:n});this.on(n,(o,r)=>{o.return=s.apply(this,r)}),this[n]=function(...o){return this.fire(n,o)},this[n][Nx]=s,this[Pi]||(this[Pi]=[]),this[Pi].push(n)}stopListening(n,s,o){if(!n&&this[Pi]){for(const r of this[Pi])this[r]=this[r][Nx];delete this[Pi]}super.stopListening(n,s,o)}}return e}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{ue[i]=Nm.prototype[i]});function Ra(i){i[Ar]||(Object.defineProperty(i,Ar,{value:new Map}),Object.defineProperty(i,ta,{value:new Map}),Object.defineProperty(i,Er,{value:new Map}))}function Hy(...i){const e=Wy(...i),t=Array.from(this._bindings.keys()),n=t.length;if(!e.callback&&e.to.length>1)throw new w("observable-bind-to-no-callback",this);if(n>1&&e.callback)throw new w("observable-bind-to-extra-callback",this);e.to.forEach(s=>{if(s.properties.length&&s.properties.length!==n)throw new w("observable-bind-to-properties-length",this);s.properties.length||(s.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(t[0]).callback=e.callback),Gy(this._observable,this._to),qy(this),this._bindProperties.forEach(s=>{Dm(this._observable,s)})}function $y(i,e,t){if(this._bindings.size>1)throw new w("observable-bind-to-many-not-one-binding",this);this.to(...Uy(i,e),t)}function Uy(i,e){const t=i.map(n=>[n,e]);return Array.prototype.concat.apply([],t)}function Dx(i){return i.every(e=>typeof e=="string")}function Wy(...i){if(!i.length)throw new w("observable-bind-to-parse-error",null);const e={to:[]};let t;return typeof i[i.length-1]=="function"&&(e.callback=i.pop()),i.forEach(n=>{if(typeof n=="string")t.properties.push(n);else if(typeof n=="object")t={observable:n,properties:[]},e.to.push(t);else throw new w("observable-bind-to-parse-error",null)}),e}function jy(i,e,t,n){const s=i[ta],o=s.get(t),r=o||{};r[n]||(r[n]=new Set),r[n].add(e),o||s.set(t,r)}function qy(i){let e;i._bindings.forEach((t,n)=>{i._to.forEach(s=>{e=s.properties[t.callback?0:i._bindProperties.indexOf(n)],t.to.push([s.observable,e]),jy(i._observable,t,s.observable,e)})})}function Dm(i,e){const n=i[Er].get(e);let s;n.callback?s=n.callback.apply(i,n.to.map(o=>o[0][o[1]])):(s=n.to[0],s=s[0][s[1]]),Object.prototype.hasOwnProperty.call(i,e)?i[e]=s:i.set(e,s)}function Gy(i,e){e.forEach(t=>{const n=i[ta];let s;n.get(t.observable)||i.listenTo(t.observable,"change",(o,r)=>{s=n.get(t.observable)[r],s&&s.forEach(a=>{Dm(i,a.property)})})})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ky{constructor(){this._replacedElements=[]}replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}restore(){this._replacedElements.forEach(({element:e,newElement:t})=>{e.style.display="",t&&t.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function L0(i){let e=0;for(const t of i)e++;return e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function xt(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)if(i[n]!=e[n])return n;return i.length==e.length?"same":i.length<e.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Bt(i){return!!(i&&i[Symbol.iterator])}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Hn(i,e,t={},n=[]){const s=t&&t.xmlns,o=s?i.createElementNS(s,e):i.createElement(e);for(const r in t)o.setAttribute(r,t[r]);(Mx(n)||!Bt(n))&&(n=[n]);for(let r of n)Mx(r)&&(r=i.createTextNode(r)),o.appendChild(r);return o}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zm{constructor(e,t){this._config={},t&&this.define(zx(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(const e of Object.keys(this._config))yield e}_setToTarget(e,t,n,s=!1){if(wt(t)){this._setObjectToTarget(e,t,s);return}const o=t.split(".");t=o.pop();for(const r of o)wt(e[r])||(e[r]={}),e=e[r];if(wt(n)){wt(e[t])||(e[t]={}),e=e[t],this._setObjectToTarget(e,n,s);return}s&&typeof e[t]<"u"||(e[t]=n)}_getFromSource(e,t){const n=t.split(".");t=n.pop();for(const s of n){if(!wt(e[s])){e=null;break}e=e[s]}return e?zx(e[t]):void 0}_setObjectToTarget(e,t,n){Object.keys(t).forEach(s=>{this._setToTarget(e,s,t[s],n)})}}function zx(i){return Gc(i,Jy)}function Jy(i){return Un(i)||typeof i=="function"?i:void 0}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Wn(i){if(i){if(i.defaultView)return i instanceof i.defaultView.Document;if(i.ownerDocument&&i.ownerDocument.defaultView)return i instanceof i.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Sr(i){const e=Object.prototype.toString.apply(i);return e=="[object Window]"||e=="[object global]"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Hm=bt(ye());function bt(i){if(!i)return Hm;class e extends i{listenTo(n,s,o,r={}){if(Wn(n)||Sr(n)){const a={capture:!!r.useCapture,passive:!!r.usePassive},c=this._getProxyEmitter(n,a)||new Zy(n,a);this.listenTo(c,s,o,r)}else super.listenTo(n,s,o,r)}stopListening(n,s,o){if(Wn(n)||Sr(n)){const r=this._getAllProxyEmitters(n);for(const a of r)this.stopListening(a,s,o)}else super.stopListening(n,s,o)}_getProxyEmitter(n,s){return S4(this,$m(n,s))}_getAllProxyEmitters(n){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(s=>this._getProxyEmitter(n,s)).filter(s=>!!s)}}return e}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(i=>{bt[i]=Hm.prototype[i]});class Zy extends ye(){constructor(e,t){super(),Lh(this,$m(e,t)),this._domNode=e,this._options=t}attach(e){if(this._domListeners&&this._domListeners[e])return;const t=this._createDomListener(e);this._domNode.addEventListener(e,t,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=t}detach(e){let t;this._domListeners[e]&&(!(t=this._events[e])||!t.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,t,n){this.attach(e),ye().prototype._addEventListener.call(this,e,t,n)}_removeEventListener(e,t){ye().prototype._removeEventListener.call(this,e,t),this.detach(e)}_createDomListener(e){const t=n=>{this.fire(e,n)};return t.removeListener=()=>{this._domNode.removeEventListener(e,t,this._options),delete this._domListeners[e]},t}}function Yy(i){return i["data-ck-expando"]||(i["data-ck-expando"]=Vt())}function $m(i,e){let t=Yy(i);for(const n of Object.keys(e).sort())e[n]&&(t+="-"+n);return t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let M0;try{M0={window,document}}catch{/* istanbul ignore next -- @preserve */M0={window:{},document:{}}}const U=M0;/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Xy(i){const e=[];let t=i;for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)e.unshift(t),t=t.parentNode;return e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Qy(i){return i instanceof HTMLTextAreaElement?i.value:i.innerHTML}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Um(i){const e=i.ownerDocument.defaultView.getComputedStyle(i);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function qe(i){return Object.prototype.toString.call(i)=="[object Text]"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function na(i){return Object.prototype.toString.apply(i)=="[object Range]"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Wm(i){return!i||!i.parentNode||i.offsetParent===U.document.body?null:i.offsetParent}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const jm=["top","right","bottom","left","width","height"];class te{constructor(e){const t=na(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),F0(e)||t)if(t){const n=te.getDomRangeRects(e);Oo(this,te.getBoundingRect(n))}else Oo(this,e.getBoundingClientRect());else if(Sr(e)){const{innerWidth:n,innerHeight:s}=e;Oo(this,{top:0,right:n,bottom:s,left:0,width:n,height:s})}else Oo(this,e)}clone(){return new te(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){const t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left),width:0,height:0};if(t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0)return null;{const n=new te(t);return n._source=this._source,n}}getIntersectionArea(e){const t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const e=this._source;let t=this.clone();if(Hx(e))return t;let n=e,s=e.parentNode||e.commonAncestorContainer,o;for(;s&&!Hx(s);){const r=eC(s)==="visible";n instanceof HTMLElement&&$x(n)==="absolute"&&(o=n);const a=$x(s);if(r||o&&(a==="relative"&&r||a!=="relative")){n=s,s=s.parentNode;continue}const c=new te(s),l=t.getIntersection(c);if(l)l.getArea()<t.getArea()&&(t=l);else return null;n=s,s=s.parentNode}return t}isEqual(e){for(const t of jm)if(this[t]!==e[t])return!1;return!0}contains(e){const t=this.getIntersection(e);return!!(t&&t.isEqual(e))}toAbsoluteRect(){const{scrollX:e,scrollY:t}=U.window,n=this.clone().moveBy(e,t);if(F0(n._source)){const s=Wm(n._source);s&&tC(n,s)}return n}excludeScrollbarsAndBorders(){const e=this._source;let t,n,s;if(Sr(e))t=e.innerWidth-e.document.documentElement.clientWidth,n=e.innerHeight-e.document.documentElement.clientHeight,s=e.getComputedStyle(e.document.documentElement).direction;else{const o=Um(e);t=e.offsetWidth-e.clientWidth-o.left-o.right,n=e.offsetHeight-e.clientHeight-o.top-o.bottom,s=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=o.left,this.top+=o.top,this.right-=o.right,this.bottom-=o.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,s==="ltr"?this.right-=t:this.left+=t,this.height-=n,this.bottom-=n,this}static getDomRangeRects(e){const t=[],n=Array.from(e.getClientRects());if(n.length)for(const s of n)t.push(new te(s));else{let s=e.startContainer;qe(s)&&(s=s.parentNode);const o=new te(s.getBoundingClientRect());o.right=o.left,o.width=0,t.push(o)}return t}static getBoundingRect(e){const t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let n=0;for(const s of e)n++,t.left=Math.min(t.left,s.left),t.top=Math.min(t.top,s.top),t.right=Math.max(t.right,s.right),t.bottom=Math.max(t.bottom,s.bottom);return n==0?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new te(t))}}function Oo(i,e){for(const t of jm)i[t]=e[t]}function Hx(i){return F0(i)?i===i.ownerDocument.body:!1}function F0(i){return i!==null&&typeof i=="object"&&i.nodeType===1&&typeof i.getBoundingClientRect=="function"}function $x(i){return i instanceof HTMLElement?i.ownerDocument.defaultView.getComputedStyle(i).position:"static"}function eC(i){return i instanceof HTMLElement?i.ownerDocument.defaultView.getComputedStyle(i).overflow:"visible"}function tC(i,e){const t=new te(e),n=Um(e);let s=0,o=0;s-=t.left,o-=t.top,s+=e.scrollLeft,o+=e.scrollTop,s-=n.left,o-=n.top,i.moveBy(s,o)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ae{constructor(e,t){Ae._observerInstance||Ae._createObserver(),this._element=e,this._callback=t,Ae._addElementCallback(e,t),Ae._observerInstance.observe(e)}get element(){return this._element}destroy(){Ae._deleteElementCallback(this._element,this._callback)}static _addElementCallback(e,t){Ae._elementCallbacks||(Ae._elementCallbacks=new Map);let n=Ae._elementCallbacks.get(e);n||(n=new Set,Ae._elementCallbacks.set(e,n)),n.add(t)}static _deleteElementCallback(e,t){const n=Ae._getElementCallbacks(e);n&&(n.delete(t),n.size||(Ae._elementCallbacks.delete(e),Ae._observerInstance.unobserve(e))),Ae._elementCallbacks&&!Ae._elementCallbacks.size&&(Ae._observerInstance=null,Ae._elementCallbacks=null)}static _getElementCallbacks(e){return Ae._elementCallbacks?Ae._elementCallbacks.get(e):null}static _createObserver(){Ae._observerInstance=new U.window.ResizeObserver(e=>{for(const t of e){const n=Ae._getElementCallbacks(t.target);if(n)for(const s of n)s(t)}})}}Ae._observerInstance=null;Ae._elementCallbacks=null;/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ux(i,e){i instanceof HTMLTextAreaElement&&(i.value=e),i.innerHTML=e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function bo(i){return e=>e+i}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Lo(i){let e=0;for(;i.previousSibling;)i=i.previousSibling,e++;return e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function qm(i,e,t){i.insertBefore(t,i.childNodes[e]||null)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Bs(i){return i&&i.nodeType===Node.COMMENT_NODE}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Gm(i){try{U.document.createAttribute(i)}catch{return!1}return!0}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function jn(i){return!!(i&&i.getClientRects&&i.getClientRects().length)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Zc({element:i,target:e,positions:t,limiter:n,fitInViewport:s,viewportOffsetConfig:o}){fi(e)&&(e=e()),fi(n)&&(n=n());const r=Wm(i),a=nC(o),c=new te(i),l=Wx(e,a);let x;if(!l||!a.getIntersection(l))return null;const d={targetRect:l,elementRect:c,positionedElementAncestor:r,viewportRect:a};if(!n&&!s)x=new Km(t[0],d);else{if(n){const u=Wx(n,a);u&&(d.limiterRect=u)}x=iC(t,d)}return x}function Wx(i,e){const t=new te(i).getVisible();return t?t.getIntersection(e):null}function nC(i){i=Object.assign({top:0,bottom:0,left:0,right:0},i);const e=new te(U.window);return e.top+=i.top,e.height-=i.top,e.bottom-=i.bottom,e.height-=i.bottom,e}function iC(i,e){const{elementRect:t}=e,n=t.getArea(),s=i.map(a=>new Km(a,e)).filter(a=>!!a.name);let o=0,r=null;for(const a of s){const{limiterIntersectionArea:c,viewportIntersectionArea:l}=a;if(c===n)return a;const x=l**2+c**2;x>o&&(o=x,r=a)}return r}class Km{constructor(e,t){const n=e(t.targetRect,t.elementRect,t.viewportRect,t.limiterRect);if(!n)return;const{left:s,top:o,name:r,config:a}=n;this.name=r,this.config=a,this._positioningFunctionCoordinates={left:s,top:o},this._options=t}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const e=this._options.limiterRect;return e?e.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function jx(i){const e=i.parentNode;e&&e.removeChild(i)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Jm({target:i,viewportOffset:e=0,ancestorOffset:t=0,alignToTop:n,forceScroll:s}){const o=Yc(i);let r=o,a=null;for(e=rC(e);r;){let c;r==o?c=qx(i):c=qx(a),oC({parent:c,getRect:()=>Gx(i,r),alignToTop:n,ancestorOffset:t,forceScroll:s});const l=Gx(i,r);if(sC({window:r,rect:l,viewportOffset:e,alignToTop:n,forceScroll:s}),r.parent!=r){if(a=r.frameElement,r=r.parent,!a)return}else r=null}}function sC({window:i,rect:e,alignToTop:t,forceScroll:n,viewportOffset:s}){const o=e.clone().moveBy(0,s.bottom),r=e.clone().moveBy(0,-s.top),a=new te(i).excludeScrollbarsAndBorders(),c=[r,o],l=t&&n,x=c.every(b=>a.contains(b));let{scrollX:d,scrollY:u}=i;const f=d,m=u;l?u-=a.top-e.top+s.top:x||(Ym(r,a)?u-=a.top-e.top+s.top:Zm(o,a)&&(t?u+=e.top-a.top-s.top:u+=e.bottom-a.bottom+s.bottom)),x||(Xm(e,a)?d-=a.left-e.left+s.left:Qm(e,a)&&(d+=e.right-a.right+s.right)),(d!=f||u!==m)&&i.scrollTo(d,u)}function oC({parent:i,getRect:e,alignToTop:t,forceScroll:n,ancestorOffset:s=0,limiterElement:o}){const r=Yc(i),a=t&&n;let c,l,x;const d=o||r.document.body;for(;i!=d;)l=e(),c=new te(i).excludeScrollbarsAndBorders(),x=c.contains(l),a?i.scrollTop-=c.top-l.top+s:x||(Ym(l,c)?i.scrollTop-=c.top-l.top+s:Zm(l,c)&&(t?i.scrollTop+=l.top-c.top-s:i.scrollTop+=l.bottom-c.bottom+s)),x||(Xm(l,c)?i.scrollLeft-=c.left-l.left+s:Qm(l,c)&&(i.scrollLeft+=l.right-c.right+s)),i=i.parentNode}function Zm(i,e){return i.bottom>e.bottom}function Ym(i,e){return i.top<e.top}function Xm(i,e){return i.left<e.left}function Qm(i,e){return i.right>e.right}function Yc(i){return na(i)?i.startContainer.ownerDocument.defaultView:i.ownerDocument.defaultView}function qx(i){if(na(i)){let e=i.commonAncestorContainer;return qe(e)&&(e=e.parentNode),e}else return i.parentNode}function Gx(i,e){const t=Yc(i),n=new te(i);if(t===e)return n;{let s=t;for(;s!=e;){const o=s.frameElement,r=new te(o).excludeScrollbarsAndBorders();n.moveBy(r.left,r.top),s=s.parent}}return n}function rC(i){return typeof i=="number"?{top:i,bottom:i,left:i,right:i}:i}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const aC={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},cC={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},se=fC(),lC=Object.fromEntries(Object.entries(se).map(([i,e])=>[e,i.charAt(0).toUpperCase()+i.slice(1)]));function Yi(i){let e;if(typeof i=="string"){if(e=se[i.toLowerCase()],!e)throw new w("keyboard-unknown-key",null,{key:i})}else e=i.keyCode+(i.altKey?se.alt:0)+(i.ctrlKey?se.ctrl:0)+(i.shiftKey?se.shift:0)+(i.metaKey?se.cmd:0);return e}function po(i){return typeof i=="string"&&(i=hC(i)),i.map(e=>typeof e=="string"?dC(e):e).reduce((e,t)=>t+e,0)}function Kx(i){let e=po(i);return Object.entries(ee.isMac||ee.isiOS?aC:cC).reduce((s,[o,r])=>(e&se[o]&&(e&=~se[o],s+=r),s),"")+(e?lC[e]:"")}function xC(i){return i==se.arrowright||i==se.arrowleft||i==se.arrowup||i==se.arrowdown}function Xc(i,e){const t=e==="ltr";switch(i){case se.arrowleft:return t?"left":"right";case se.arrowright:return t?"right":"left";case se.arrowup:return"up";case se.arrowdown:return"down"}}function dC(i){if(i.endsWith("!"))return Yi(i.slice(0,-1));const e=Yi(i);return(ee.isMac||ee.isiOS)&&e==se.ctrl?se.cmd:e}function uC(i,e){const t=Xc(i,e);return t==="down"||t==="right"}function fC(){const i={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){const t=String.fromCharCode(e);i[t.toLowerCase()]=e}for(let e=48;e<=57;e++)i[e-48]=e;for(let e=112;e<=123;e++)i["f"+(e-111)]=e;for(const e of"`-=[];',./\\")i[e]=e.charCodeAt(0);return i}function hC(i){return i.split("+").map(e=>e.trim())}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const mC=["ar","ara","fa","per","fas","he","heb","ku","kur","ug","uig"];function Jx(i){return mC.includes(i)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ge(i){return Array.isArray(i)?i:[i]}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//* istanbul ignore else -- @preserve */U.window.CKEDITOR_TRANSLATIONS||(U.window.CKEDITOR_TRANSLATIONS={});function gC(i,e,t=1){if(typeof t!="number")throw new w("translation-service-quantity-not-a-number",null,{quantity:t});const n=pC();n===1&&(i=Object.keys(U.window.CKEDITOR_TRANSLATIONS)[0]);const s=e.id||e.string;if(n===0||!bC(i,s))return t!==1?e.plural:e.string;const o=U.window.CKEDITOR_TRANSLATIONS[i].dictionary,r=U.window.CKEDITOR_TRANSLATIONS[i].getPluralForm||(l=>l===1?0:1),a=o[s];if(typeof a=="string")return a;const c=Number(r(t));return a[c]}function bC(i,e){return!!U.window.CKEDITOR_TRANSLATIONS[i]&&!!U.window.CKEDITOR_TRANSLATIONS[i].dictionary[e]}function pC(){return Object.keys(U.window.CKEDITOR_TRANSLATIONS).length}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wC{constructor({uiLanguage:e="en",contentLanguage:t}={}){this.uiLanguage=e,this.contentLanguage=t||this.uiLanguage,this.uiLanguageDirection=Jx(this.uiLanguage),this.contentLanguageDirection=Jx(this.contentLanguage),this.t=(n,s)=>this._t(n,s)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,t=[]){t=ge(t),typeof e=="string"&&(e={string:e});const s=!!e.plural?t[0]:1,o=gC(this.uiLanguage,e,s);return _C(o,t)}}function _C(i,e){return i.replace(/%(\d+)/g,(t,n)=>n<e.length?e[n]:t)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class De extends ye(){constructor(e={},t={}){super();const n=Bt(e);if(n||(t=e),this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],n)for(const s of e)this._items.push(s),this._itemMap.set(this._getItemIdBeforeAdding(s),s)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,t){return this.addMany([e],t)}addMany(e,t){if(t===void 0)t=this._items.length;else if(t>this._items.length||t<0)throw new w("collection-add-item-invalid-index",this);let n=0;for(const s of e){const o=this._getItemIdBeforeAdding(s),r=t+n;this._items.splice(r,0,s),this._itemMap.set(o,s),this.fire("add",s,r),n++}return this.fire("change",{added:e,removed:[],index:t}),this}get(e){let t;if(typeof e=="string")t=this._itemMap.get(e);else if(typeof e=="number")t=this._items[e];else throw new w("collection-get-invalid-arg",this);return t||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const t=this._idProperty,n=e[t];return n&&this._itemMap.has(n)}}getIndex(e){let t;return typeof e=="string"?t=this._itemMap.get(e):t=e,t?this._items.indexOf(t):-1}remove(e){const[t,n]=this._remove(e);return this.fire("change",{added:[],removed:[t],index:n}),t}map(e,t){return this._items.map(e,t)}forEach(e,t){this._items.forEach(e,t)}find(e,t){return this._items.find(e,t)}filter(e,t){return this._items.filter(e,t)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new w("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:t=>{this._setUpBindToBinding(n=>new t(n))},using:t=>{typeof t=="function"?this._setUpBindToBinding(t):this._setUpBindToBinding(n=>n[t])}}}_setUpBindToBinding(e){const t=this._bindToCollection,n=(s,o,r)=>{const a=t._bindToCollection==this,c=t._bindToInternalToExternalMap.get(o);if(a&&c)this._bindToExternalToInternalMap.set(o,c),this._bindToInternalToExternalMap.set(c,o);else{const l=e(o);if(!l){this._skippedIndexesFromExternal.push(r);return}let x=r;for(const d of this._skippedIndexesFromExternal)r>d&&x--;for(const d of t._skippedIndexesFromExternal)x>=d&&x++;this._bindToExternalToInternalMap.set(o,l),this._bindToInternalToExternalMap.set(l,o),this.add(l,x);for(let d=0;d<t._skippedIndexesFromExternal.length;d++)x<=t._skippedIndexesFromExternal[d]&&t._skippedIndexesFromExternal[d]++}};for(const s of t)n(null,s,t.getIndex(s));this.listenTo(t,"add",n),this.listenTo(t,"remove",(s,o,r)=>{const a=this._bindToExternalToInternalMap.get(o);a&&this.remove(a),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((c,l)=>(r<l&&c.push(l-1),r>l&&c.push(l),c),[])})}_getItemIdBeforeAdding(e){const t=this._idProperty;let n;if(t in e){if(n=e[t],typeof n!="string")throw new w("collection-add-invalid-id",this);if(this.get(n))throw new w("collection-add-item-already-exists",this)}else e[t]=n=Vt();return n}_remove(e){let t,n,s,o=!1;const r=this._idProperty;if(typeof e=="string"?(n=e,s=this._itemMap.get(n),o=!s,s&&(t=this._items.indexOf(s))):typeof e=="number"?(t=e,s=this._items[t],o=!s,s&&(n=s[r])):(s=e,n=s[r],t=this._items.indexOf(s),o=t==-1||!this._itemMap.get(n)),o)throw new w("collection-remove-404",this);this._items.splice(t,1),this._itemMap.delete(n);const a=this._bindToInternalToExternalMap.get(s);return this._bindToInternalToExternalMap.delete(s),this._bindToExternalToInternalMap.delete(a),this.fire("remove",s,t),[s,t]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Be(i){const e=i.next();return e.done?null:e.value}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Se extends bt(ue()){constructor(){super(),this._elements=new Set,this._nextEventLoopTimeout=null,this.set("isFocused",!1),this.set("focusedElement",null)}add(e){if(this._elements.has(e))throw new w("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>this._focus(e),{useCapture:!0}),this.listenTo(e,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(e)}remove(e){e===this.focusedElement&&this._blur(),this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e))}destroy(){this.stopListening()}_focus(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Le{constructor(){this._listener=new(bt())}listenTo(e){this._listener.listenTo(e,"keydown",(t,n)=>{this._listener.fire("_keydown:"+Yi(n),n)})}set(e,t,n={}){const s=po(e),o=n.priority;this._listener.listenTo(this._listener,"_keydown:"+s,(r,a)=>{t(a,()=>{a.preventDefault(),a.stopPropagation(),r.stop()}),r.return=!0},{priority:o})}press(e){return!!this._listener.fire("_keydown:"+Yi(e),e)}stopListening(e){this._listener.stopListening(e)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function vC(i){const e=new Map;for(const t in i)e.set(t,i[t]);return e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Gt(i){return Bt(i)?new Map(i):vC(i)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const yC=1e4;function CC(i,e,t,n){if(Math.max(e.length,i.length)>yC)return i.slice(0,t).concat(e).concat(i.slice(t+n,i.length));{const s=Array.from(i);return s.splice(t,n,...e),s}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Qc(i,e){let t;function n(...s){n.cancel(),t=setTimeout(()=>i(...s),e)}return n.cancel=()=>{clearTimeout(t)},n}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kC(i){function e(d){return d.length>=40&&d.length<=255?"VALID":"INVALID"}if(!i)return"INVALID";let t="";try{t=atob(i)}catch{return"INVALID"}const n=t.split("-"),s=n[0],o=n[1];if(!o)return e(i);try{atob(o)}catch{try{if(atob(s),!atob(s).length)return e(i)}catch{return e(i)}}if(s.length<40||s.length>255)return"INVALID";let r="";try{atob(s),r=atob(o)}catch{return"INVALID"}if(r.length!==8)return"INVALID";const a=Number(r.substring(0,4)),c=Number(r.substring(4,6))-1,l=Number(r.substring(6,8)),x=new Date(a,c,l);return x<E4||isNaN(Number(x))?"INVALID":"VALID"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function TC(i){return!!i&&i.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(i)}function AC(i){return!!i&&i.length==1&&/[\ud800-\udbff]/.test(i)}function EC(i){return!!i&&i.length==1&&/[\udc00-\udfff]/.test(i)}function el(i,e){return AC(i.charAt(e-1))&&EC(i.charAt(e))}function tl(i,e){return TC(i.charAt(e))}const SC=IC();function e6(i,e){const t=String(i).matchAll(SC);return Array.from(t).some(n=>n.index<e&&e<n.index+n[0].length)}function IC(){const i=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],e=new RegExp("\\p{Regional_Indicator}{2}","u").source,t="(?:"+i.map(s=>s.source).join("|")+")",n=`${e}|${t}(?:‍${t})*`;return new RegExp(n,"ug")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dt extends De{constructor(e=[]){super(e,{idProperty:"viewUid"}),this.on("add",(t,n,s)=>{this._renderViewIntoCollectionParent(n,s)}),this.on("remove",(t,n)=>{n.element&&this._parentElement&&n.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const t of this)this._renderViewIntoCollectionParent(t)}delegate(...e){if(!e.length||!PC(e))throw new w("ui-viewcollection-delegate-wrong-events",this);return{to:t=>{for(const n of this)for(const s of e)n.delegate(s).to(t);this.on("add",(n,s)=>{for(const o of e)s.delegate(o).to(t)}),this.on("remove",(n,s)=>{for(const o of e)s.stopDelegating(o,t)})}}}_renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}remove(e){return super.remove(e)}}function PC(i){return i.every(e=>typeof e=="string")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let D=class extends bt(ue()){constructor(e){super(),this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new De,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(t,n)=>{n.locale=e,n.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=gt.bind(this,this)}createCollection(e){const t=new dt(e);return this._viewCollections.add(t),t}registerChild(e){Bt(e)||(e=[e]);for(const t of e)this._unboundChildren.add(t)}deregisterChild(e){Bt(e)||(e=[e]);for(const t of e)this._unboundChildren.remove(t)}setTemplate(e){this.template=new gt(e)}extendTemplate(e){gt.extend(this.template,e)}render(){if(this.isRendered)throw new w("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const RC="http://www.w3.org/1999/xhtml";class gt extends ye(){constructor(e){super(),Object.assign(this,Yx(Zx(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=ed(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new w("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(t){if(t.children)for(const n of t.children)Ir(n)?yield n:nl(n)&&(yield*e(n))}yield*e(this)}static bind(e,t){return{to(n,s){return new VC({eventNameOrFunction:n,attribute:n,observable:e,emitter:t,callback:s})},if(n,s,o){return new t6({observable:e,emitter:t,attribute:n,valueIfTrue:s,callback:o})}}}static extend(e,t){if(e._isRendered)throw new w("template-extend-render",[this,e]);o6(e,Yx(Zx(t)))}_renderNode(e){let t;if(e.node?t=this.tag&&this.text:t=this.tag?this.text:!this.text,t)throw new w("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let t=e.node;return t||(t=e.node=document.createElementNS(this.ns||RC,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}_renderText(e){let t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),ar(this.text)?this._bindToObservable({schema:this.text,updater:OC(t),data:e}):t.textContent=this.text.join(""),t}_renderAttributes(e){if(!this.attributes)return;const t=e.node,n=e.revertData;for(const s in this.attributes){const o=t.getAttribute(s),r=this.attributes[s];n&&(n.attributes[s]=o);const a=Qx(r)?r[0].ns:null;if(ar(r)){const c=Qx(r)?r[0].value:r;n&&td(s)&&c.unshift(o),this._bindToObservable({schema:c,updater:LC(t,s,a),data:e})}else if(s=="style"&&typeof r[0]!="string")this._renderStyleAttribute(r[0],e);else{n&&o&&td(s)&&r.unshift(o);const c=r.map(l=>l&&(l.value||l)).reduce((l,x)=>l.concat(x),[]).reduce(s6,"");Xi(c)||t.setAttributeNS(a,s,c)}}}_renderStyleAttribute(e,t){const n=t.node;for(const s in e){const o=e[s];ar(o)?this._bindToObservable({schema:[o],updater:MC(n,s),data:t}):n.style[s]=o}}_renderElementChildren(e){const t=e.node,n=e.intoFragment?document.createDocumentFragment():t,s=e.isApplying;let o=0;for(const r of this.children)if(il(r)){if(!s){r.setParent(t);for(const a of r)n.appendChild(a.element)}}else if(Ir(r))s||(r.isRendered||r.render(),n.appendChild(r.element));else if(Wn(r))n.appendChild(r);else if(s){const a=e.revertData,c=ed();a.children.push(c),r._renderNode({intoFragment:!1,node:n.childNodes[o++],isApplying:!0,revertData:c})}else n.appendChild(r.render());e.intoFragment&&t.appendChild(n)}_setUpListeners(e){if(this.eventListeners)for(const t in this.eventListeners){const n=this.eventListeners[t].map(s=>{const[o,r]=t.split("@");return s.activateDomEventListener(o,r,e)});e.revertData&&e.revertData.bindings.push(n)}}_bindToObservable({schema:e,updater:t,data:n}){const s=n.revertData;n6(e,t,n);const o=e.filter(r=>!Xi(r)).filter(r=>r.observable).map(r=>r.activateAttributeListener(e,t,n));s&&s.bindings.push(o)}_revertTemplateFromNode(e,t){for(const s of t.bindings)for(const o of s)o();if(t.text){e.textContent=t.text;return}const n=e;for(const s in t.attributes){const o=t.attributes[s];o===null?n.removeAttribute(s):n.setAttribute(s,o)}for(let s=0;s<t.children.length;++s)this._revertTemplateFromNode(n.childNodes[s],t.children[s])}}class wo{constructor(e){this.attribute=e.attribute,this.observable=e.observable,this.emitter=e.emitter,this.callback=e.callback}getValue(e){const t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,n){const s=()=>n6(e,t,n);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,s),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,s)}}}class VC extends wo{constructor(e){super(e),this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,t,n){const s=(o,r)=>{(!t||r.target.matches(t))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(r):this.observable.fire(this.eventNameOrFunction,r))};return this.emitter.listenTo(n.node,e,s),()=>{this.emitter.stopListening(n.node,e,s)}}}class t6 extends wo{constructor(e){super(e),this.valueIfTrue=e.valueIfTrue}getValue(e){const t=super.getValue(e);return Xi(t)?!1:this.valueIfTrue||!0}}function ar(i){return i?(i.value&&(i=i.value),Array.isArray(i)?i.some(ar):i instanceof wo):!1}function BC(i,e){return i.map(t=>t instanceof wo?t.getValue(e):t)}function n6(i,e,{node:t}){const n=BC(i,t);let s;i.length==1&&i[0]instanceof t6?s=n[0]:s=n.reduce(s6,""),Xi(s)?e.remove():e.set(s)}function OC(i){return{set(e){i.textContent=e},remove(){i.textContent=""}}}function LC(i,e,t){return{set(n){i.setAttributeNS(t,e,n)},remove(){i.removeAttributeNS(t,e)}}}function MC(i,e){return{set(t){i.style[e]=t},remove(){i.style[e]=null}}}function Zx(i){return Gc(i,t=>{if(t&&(t instanceof wo||nl(t)||Ir(t)||il(t)))return t})}function Yx(i){if(typeof i=="string"?i=DC(i):i.text&&zC(i),i.on&&(i.eventListeners=NC(i.on),delete i.on),!i.text){i.attributes&&FC(i.attributes);const e=[];if(i.children)if(il(i.children))e.push(i.children);else for(const t of i.children)nl(t)||Ir(t)||Wn(t)?e.push(t):e.push(new gt(t));i.children=e}return i}function FC(i){for(const e in i)i[e].value&&(i[e].value=ge(i[e].value)),i6(i,e)}function NC(i){for(const e in i)i6(i,e);return i}function DC(i){return{text:[i]}}function zC(i){i.text=ge(i.text)}function i6(i,e){i[e]=ge(i[e])}function s6(i,e){return Xi(e)?i:Xi(i)?e:`${i} ${e}`}function Xx(i,e){for(const t in e)i[t]?i[t].push(...e[t]):i[t]=e[t]}function o6(i,e){if(e.attributes&&(i.attributes||(i.attributes={}),Xx(i.attributes,e.attributes)),e.eventListeners&&(i.eventListeners||(i.eventListeners={}),Xx(i.eventListeners,e.eventListeners)),e.text&&i.text.push(...e.text),e.children&&e.children.length){if(i.children.length!=e.children.length)throw new w("ui-template-extend-children-mismatch",i);let t=0;for(const n of e.children)o6(i.children[t++],n)}}function Xi(i){return!i&&i!==0}function Ir(i){return i instanceof D}function nl(i){return i instanceof gt}function il(i){return i instanceof dt}function Qx(i){return Ee(i[0])&&i[0].ns}function ed(){return{children:[],bindings:[],attributes:{}}}function td(i){return i=="class"||i=="style"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class HC extends dt{constructor(e,t=[]){super(t),this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new gt({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();let e=document.querySelector(".ck-body-wrapper");e||(e=Hn(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const e=document.querySelector(".ck-body-wrapper");e&&e.childElementCount==0&&e.remove()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mn extends D{constructor(){super();const e=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",e.if("isVisible","ck-hidden",t=>!t),"ck-reset_all-excluded",e.if("isColorInherited","ck-icon_inherit-color")],viewBox:e.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const t=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),n=t.getAttribute("viewBox");n&&(this.viewBox=n);for(const{name:s,value:o}of Array.from(t.attributes))mn.presentationalAttributeNames.includes(s)&&this.element.setAttribute(s,o);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(e=>{e.style.fill=this.fillColor})}}mn.presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $C extends D{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:e.to("style"),id:e.to("id")},children:[{text:e.to("text")}]})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class G extends D{constructor(e,t=new $C){super(e),this._focusDelayed=null;const n=this.bindTemplate,s=Vt();this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${s}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(t),this.iconView=new mn,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const o={tag:"button",attributes:{class:["ck","ck-button",n.to("class"),n.if("isEnabled","ck-disabled",r=>!r),n.if("isVisible","ck-hidden",r=>!r),n.to("isOn",r=>r?"ck-on":"ck-off"),n.if("withText","ck-button_with-text"),n.if("withKeystroke","ck-button_with-keystroke")],role:n.to("role"),type:n.to("type",r=>r||"button"),tabindex:n.to("tabindex"),"aria-label":n.to("ariaLabel"),"aria-labelledby":n.to("ariaLabelledBy"),"aria-disabled":n.if("isEnabled",!0,r=>!r),"aria-pressed":n.to("isOn",r=>this.isToggleable?String(!!r):!1),"data-cke-tooltip-text":n.to("_tooltipString"),"data-cke-tooltip-position":n.to("tooltipPosition")},children:this.children,on:{click:n.to(r=>{this.isEnabled?this.fire("execute"):r.preventDefault()})}};ee.isSafari&&(this._focusDelayed||(this._focusDelayed=Qc(()=>this.focus(),0)),o.on.mousedown=n.to(()=>{this._focusDelayed()}),o.on.mouseup=n.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(o)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){const e=new D;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",t=>Kx(t))}]}),e}_getTooltipString(e,t,n){return e?typeof e=="string"?e:(n&&(n=Kx(n)),e instanceof Function?e(t,n):`${t}${n?` (${n})`:""}`):""}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _o extends G{constructor(e){super(e),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new D;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ks(i,e){const t=i.t,n={Black:t("Black"),"Dim grey":t("Dim grey"),Grey:t("Grey"),"Light grey":t("Light grey"),White:t("White"),Red:t("Red"),Orange:t("Orange"),Yellow:t("Yellow"),"Light green":t("Light green"),Green:t("Green"),Aquamarine:t("Aquamarine"),Turquoise:t("Turquoise"),"Light blue":t("Light blue"),Blue:t("Blue"),Purple:t("Purple")};return e.map(s=>{const o=n[s.label];return o&&o!=s.label&&(s.label=o),s})}function Js(i){return i.map(UC).filter(e=>!!e)}function UC(i){return typeof i=="string"?{model:i,label:i,hasBorder:!1,view:{name:"span",styles:{color:i}}}:{model:i.color,label:i.label||i.color,hasBorder:i.hasBorder===void 0?!1:i.hasBorder,view:{name:"span",styles:{color:`${i.color}`}}}}const WC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class r6 extends G{constructor(e){super(e);const t=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=WC,this.extendTemplate({attributes:{style:{backgroundColor:t.to("color")},class:["ck","ck-color-grid__tile",t.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nd extends D{constructor(e,t){super(e);const n=t&&t.colorDefinitions?t.colorDefinitions:[];this.columns=t&&t.columns?t.columns:5;const s={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new Se,this.keystrokes=new Le,this.items.on("add",(o,r)=>{r.isOn=r.color===this.selectedColor}),n.forEach(o=>{const r=new r6;r.set({color:o.color,label:o.label,tooltip:!0,hasBorder:o.options.hasBorder}),r.on("execute",()=>{this.fire("execute",{value:o.color,hasBorder:o.options.hasBorder,label:o.label})}),this.items.add(r)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:s}}),this.on("change:selectedColor",(o,r,a)=>{for(const c of this.items)c.isOn=c.color===a})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element),mo({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}var a6={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const id=Ac(a6);var sd={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function od(i){var e,t=[],n=1,s;if(typeof i=="string")if(id[i])t=id[i].slice(),s="rgb";else if(i==="transparent")n=0,s="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(i)){var o=i.slice(1),r=o.length,a=r<=4;n=1,a?(t=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],r===4&&(n=parseInt(o[3]+o[3],16)/255)):(t=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],r===8&&(n=parseInt(o[6]+o[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),s="rgb"}else if(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(i)){var c=e[1],l=c==="rgb",o=c.replace(/a$/,"");s=o;var r=o==="cmyk"?4:o==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(u,f){if(/%$/.test(u))return f===r?parseFloat(u)/100:o==="rgb"?parseFloat(u)*255/100:parseFloat(u);if(o[f]==="h"){if(/deg$/.test(u))return parseFloat(u);if(sd[u]!==void 0)return sd[u]}return parseFloat(u)}),c===o&&t.push(1),n=l||t[r]===void 0?1:t[r],t=t.slice(0,r)}else i.length>10&&/[0-9](?:\s|\/)/.test(i)&&(t=i.match(/([0-9]+)/g).map(function(x){return parseFloat(x)}),s=i.match(/([a-z])/ig).join("").toLowerCase());else isNaN(i)?Array.isArray(i)||i.length?(t=[i[0],i[1],i[2]],s="rgb",n=i.length===4?i[3]:1):i instanceof Object&&(i.r!=null||i.red!=null||i.R!=null?(s="rgb",t=[i.r||i.red||i.R||0,i.g||i.green||i.G||0,i.b||i.blue||i.B||0]):(s="hsl",t=[i.h||i.hue||i.H||0,i.s||i.saturation||i.S||0,i.l||i.lightness||i.L||i.b||i.brightness]),n=i.a||i.alpha||i.opacity||1,i.opacity!=null&&(n/=100)):(s="rgb",t=[i>>>16,(i&65280)>>>8,i&255]);return{space:s,values:t,alpha:n}}const Zs=a6,c6={};for(const i of Object.keys(Zs))c6[Zs[i]]=i;const j={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var l6=j;for(const i of Object.keys(j)){if(!("channels"in j[i]))throw new Error("missing channels property: "+i);if(!("labels"in j[i]))throw new Error("missing channel labels property: "+i);if(j[i].labels.length!==j[i].channels)throw new Error("channel and label counts mismatch: "+i);const{channels:e,labels:t}=j[i];delete j[i].channels,delete j[i].labels,Object.defineProperty(j[i],"channels",{value:e}),Object.defineProperty(j[i],"labels",{value:t})}j.rgb.hsl=function(i){const e=i[0]/255,t=i[1]/255,n=i[2]/255,s=Math.min(e,t,n),o=Math.max(e,t,n),r=o-s;let a,c;o===s?a=0:e===o?a=(t-n)/r:t===o?a=2+(n-e)/r:n===o&&(a=4+(e-t)/r),a=Math.min(a*60,360),a<0&&(a+=360);const l=(s+o)/2;return o===s?c=0:l<=.5?c=r/(o+s):c=r/(2-o-s),[a,c*100,l*100]};j.rgb.hsv=function(i){let e,t,n,s,o;const r=i[0]/255,a=i[1]/255,c=i[2]/255,l=Math.max(r,a,c),x=l-Math.min(r,a,c),d=function(u){return(l-u)/6/x+1/2};return x===0?(s=0,o=0):(o=x/l,e=d(r),t=d(a),n=d(c),r===l?s=n-t:a===l?s=1/3+e-n:c===l&&(s=2/3+t-e),s<0?s+=1:s>1&&(s-=1)),[s*360,o*100,l*100]};j.rgb.hwb=function(i){const e=i[0],t=i[1];let n=i[2];const s=j.rgb.hsl(i)[0],o=1/255*Math.min(e,Math.min(t,n));return n=1-1/255*Math.max(e,Math.max(t,n)),[s,o*100,n*100]};j.rgb.cmyk=function(i){const e=i[0]/255,t=i[1]/255,n=i[2]/255,s=Math.min(1-e,1-t,1-n),o=(1-e-s)/(1-s)||0,r=(1-t-s)/(1-s)||0,a=(1-n-s)/(1-s)||0;return[o*100,r*100,a*100,s*100]};function jC(i,e){return(i[0]-e[0])**2+(i[1]-e[1])**2+(i[2]-e[2])**2}j.rgb.keyword=function(i){const e=c6[i];if(e)return e;let t=1/0,n;for(const s of Object.keys(Zs)){const o=Zs[s],r=jC(i,o);r<t&&(t=r,n=s)}return n};j.keyword.rgb=function(i){return Zs[i]};j.rgb.xyz=function(i){let e=i[0]/255,t=i[1]/255,n=i[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;const s=e*.4124+t*.3576+n*.1805,o=e*.2126+t*.7152+n*.0722,r=e*.0193+t*.1192+n*.9505;return[s*100,o*100,r*100]};j.rgb.lab=function(i){const e=j.rgb.xyz(i);let t=e[0],n=e[1],s=e[2];t/=95.047,n/=100,s/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;const o=116*n-16,r=500*(t-n),a=200*(n-s);return[o,r,a]};j.hsl.rgb=function(i){const e=i[0]/360,t=i[1]/100,n=i[2]/100;let s,o,r;if(t===0)return r=n*255,[r,r,r];n<.5?s=n*(1+t):s=n+t-n*t;const a=2*n-s,c=[0,0,0];for(let l=0;l<3;l++)o=e+1/3*-(l-1),o<0&&o++,o>1&&o--,6*o<1?r=a+(s-a)*6*o:2*o<1?r=s:3*o<2?r=a+(s-a)*(2/3-o)*6:r=a,c[l]=r*255;return c};j.hsl.hsv=function(i){const e=i[0];let t=i[1]/100,n=i[2]/100,s=t;const o=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,s*=o<=1?o:2-o;const r=(n+t)/2,a=n===0?2*s/(o+s):2*t/(n+t);return[e,a*100,r*100]};j.hsv.rgb=function(i){const e=i[0]/60,t=i[1]/100;let n=i[2]/100;const s=Math.floor(e)%6,o=e-Math.floor(e),r=255*n*(1-t),a=255*n*(1-t*o),c=255*n*(1-t*(1-o));switch(n*=255,s){case 0:return[n,c,r];case 1:return[a,n,r];case 2:return[r,n,c];case 3:return[r,a,n];case 4:return[c,r,n];case 5:return[n,r,a]}};j.hsv.hsl=function(i){const e=i[0],t=i[1]/100,n=i[2]/100,s=Math.max(n,.01);let o,r;r=(2-t)*n;const a=(2-t)*s;return o=t*s,o/=a<=1?a:2-a,o=o||0,r/=2,[e,o*100,r*100]};j.hwb.rgb=function(i){const e=i[0]/360;let t=i[1]/100,n=i[2]/100;const s=t+n;let o;s>1&&(t/=s,n/=s);const r=Math.floor(6*e),a=1-n;o=6*e-r,r&1&&(o=1-o);const c=t+o*(a-t);let l,x,d;switch(r){default:case 6:case 0:l=a,x=c,d=t;break;case 1:l=c,x=a,d=t;break;case 2:l=t,x=a,d=c;break;case 3:l=t,x=c,d=a;break;case 4:l=c,x=t,d=a;break;case 5:l=a,x=t,d=c;break}return[l*255,x*255,d*255]};j.cmyk.rgb=function(i){const e=i[0]/100,t=i[1]/100,n=i[2]/100,s=i[3]/100,o=1-Math.min(1,e*(1-s)+s),r=1-Math.min(1,t*(1-s)+s),a=1-Math.min(1,n*(1-s)+s);return[o*255,r*255,a*255]};j.xyz.rgb=function(i){const e=i[0]/100,t=i[1]/100,n=i[2]/100;let s,o,r;return s=e*3.2406+t*-1.5372+n*-.4986,o=e*-.9689+t*1.8758+n*.0415,r=e*.0557+t*-.204+n*1.057,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),r=Math.min(Math.max(0,r),1),[s*255,o*255,r*255]};j.xyz.lab=function(i){let e=i[0],t=i[1],n=i[2];e/=95.047,t/=100,n/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;const s=116*t-16,o=500*(e-t),r=200*(t-n);return[s,o,r]};j.lab.xyz=function(i){const e=i[0],t=i[1],n=i[2];let s,o,r;o=(e+16)/116,s=t/500+o,r=o-n/200;const a=o**3,c=s**3,l=r**3;return o=a>.008856?a:(o-16/116)/7.787,s=c>.008856?c:(s-16/116)/7.787,r=l>.008856?l:(r-16/116)/7.787,s*=95.047,o*=100,r*=108.883,[s,o,r]};j.lab.lch=function(i){const e=i[0],t=i[1],n=i[2];let s;s=Math.atan2(n,t)*360/2/Math.PI,s<0&&(s+=360);const r=Math.sqrt(t*t+n*n);return[e,r,s]};j.lch.lab=function(i){const e=i[0],t=i[1],s=i[2]/360*2*Math.PI,o=t*Math.cos(s),r=t*Math.sin(s);return[e,o,r]};j.rgb.ansi16=function(i,e=null){const[t,n,s]=i;let o=e===null?j.rgb.hsv(i)[2]:e;if(o=Math.round(o/50),o===0)return 30;let r=30+(Math.round(s/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return o===2&&(r+=60),r};j.hsv.ansi16=function(i){return j.rgb.ansi16(j.hsv.rgb(i),i[2])};j.rgb.ansi256=function(i){const e=i[0],t=i[1],n=i[2];return e===t&&t===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5)};j.ansi16.rgb=function(i){let e=i%10;if(e===0||e===7)return i>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(~~(i>50)+1)*.5,n=(e&1)*t*255,s=(e>>1&1)*t*255,o=(e>>2&1)*t*255;return[n,s,o]};j.ansi256.rgb=function(i){if(i>=232){const o=(i-232)*10+8;return[o,o,o]}i-=16;let e;const t=Math.floor(i/36)/5*255,n=Math.floor((e=i%36)/6)/5*255,s=e%6/5*255;return[t,n,s]};j.rgb.hex=function(i){const t=(((Math.round(i[0])&255)<<16)+((Math.round(i[1])&255)<<8)+(Math.round(i[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};j.hex.rgb=function(i){const e=i.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=t.split("").map(a=>a+a).join(""));const n=parseInt(t,16),s=n>>16&255,o=n>>8&255,r=n&255;return[s,o,r]};j.rgb.hcg=function(i){const e=i[0]/255,t=i[1]/255,n=i[2]/255,s=Math.max(Math.max(e,t),n),o=Math.min(Math.min(e,t),n),r=s-o;let a,c;return r<1?a=o/(1-r):a=0,r<=0?c=0:s===e?c=(t-n)/r%6:s===t?c=2+(n-e)/r:c=4+(e-t)/r,c/=6,c%=1,[c*360,r*100,a*100]};j.hsl.hcg=function(i){const e=i[1]/100,t=i[2]/100,n=t<.5?2*e*t:2*e*(1-t);let s=0;return n<1&&(s=(t-.5*n)/(1-n)),[i[0],n*100,s*100]};j.hsv.hcg=function(i){const e=i[1]/100,t=i[2]/100,n=e*t;let s=0;return n<1&&(s=(t-n)/(1-n)),[i[0],n*100,s*100]};j.hcg.rgb=function(i){const e=i[0]/360,t=i[1]/100,n=i[2]/100;if(t===0)return[n*255,n*255,n*255];const s=[0,0,0],o=e%1*6,r=o%1,a=1-r;let c=0;switch(Math.floor(o)){case 0:s[0]=1,s[1]=r,s[2]=0;break;case 1:s[0]=a,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=r;break;case 3:s[0]=0,s[1]=a,s[2]=1;break;case 4:s[0]=r,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=a}return c=(1-t)*n,[(t*s[0]+c)*255,(t*s[1]+c)*255,(t*s[2]+c)*255]};j.hcg.hsv=function(i){const e=i[1]/100,t=i[2]/100,n=e+t*(1-e);let s=0;return n>0&&(s=e/n),[i[0],s*100,n*100]};j.hcg.hsl=function(i){const e=i[1]/100,n=i[2]/100*(1-e)+.5*e;let s=0;return n>0&&n<.5?s=e/(2*n):n>=.5&&n<1&&(s=e/(2*(1-n))),[i[0],s*100,n*100]};j.hcg.hwb=function(i){const e=i[1]/100,t=i[2]/100,n=e+t*(1-e);return[i[0],(n-e)*100,(1-n)*100]};j.hwb.hcg=function(i){const e=i[1]/100,n=1-i[2]/100,s=n-e;let o=0;return s<1&&(o=(n-s)/(1-s)),[i[0],s*100,o*100]};j.apple.rgb=function(i){return[i[0]/65535*255,i[1]/65535*255,i[2]/65535*255]};j.rgb.apple=function(i){return[i[0]/255*65535,i[1]/255*65535,i[2]/255*65535]};j.gray.rgb=function(i){return[i[0]/100*255,i[0]/100*255,i[0]/100*255]};j.gray.hsl=function(i){return[0,0,i[0]]};j.gray.hsv=j.gray.hsl;j.gray.hwb=function(i){return[0,100,i[0]]};j.gray.cmyk=function(i){return[0,0,0,i[0]]};j.gray.lab=function(i){return[i[0],0,0]};j.gray.hex=function(i){const e=Math.round(i[0]/100*255)&255,n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n};j.rgb.gray=function(i){return[(i[0]+i[1]+i[2])/3/255*100]};const Pr=l6;function qC(){const i={},e=Object.keys(Pr);for(let t=e.length,n=0;n<t;n++)i[e[n]]={distance:-1,parent:null};return i}function GC(i){const e=qC(),t=[i];for(e[i].distance=0;t.length;){const n=t.pop(),s=Object.keys(Pr[n]);for(let o=s.length,r=0;r<o;r++){const a=s[r],c=e[a];c.distance===-1&&(c.distance=e[n].distance+1,c.parent=n,t.unshift(a))}}return e}function KC(i,e){return function(t){return e(i(t))}}function JC(i,e){const t=[e[i].parent,i];let n=Pr[e[i].parent][i],s=e[i].parent;for(;e[s].parent;)t.unshift(e[s].parent),n=KC(Pr[e[s].parent][s],n),s=e[s].parent;return n.conversion=t,n}var ZC=function(i){const e=GC(i),t={},n=Object.keys(e);for(let s=n.length,o=0;o<s;o++){const r=n[o];e[r].parent!==null&&(t[r]=JC(r,e))}return t};const N0=l6,YC=ZC,zi={},XC=Object.keys(N0);function QC(i){const e=function(...t){const n=t[0];return n==null?n:(n.length>1&&(t=n),i(t))};return"conversion"in i&&(e.conversion=i.conversion),e}function ek(i){const e=function(...t){const n=t[0];if(n==null)return n;n.length>1&&(t=n);const s=i(t);if(typeof s=="object")for(let o=s.length,r=0;r<o;r++)s[r]=Math.round(s[r]);return s};return"conversion"in i&&(e.conversion=i.conversion),e}XC.forEach(i=>{zi[i]={},Object.defineProperty(zi[i],"channels",{value:N0[i].channels}),Object.defineProperty(zi[i],"labels",{value:N0[i].labels});const e=YC(i);Object.keys(e).forEach(n=>{const s=e[n];zi[i][n]=ek(s),zi[i][n].raw=QC(s)})});var x6=zi;const tk=Ac(x6),d6=U7({__proto__:null,default:tk},[x6]);/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function u6(i,e){if(!i)return"";const t=f6(i);if(!t)return"";if(t.space===e)return i;if(!sk(t))return"";const s=d6[t.space][e];if(!s)return"";const o=s(t.space==="hex"?t.hexValue:t.values);return ik(o,e)}function nk(i){if(!i)return"";const e=f6(i);return e?e.space==="hex"?e.hexValue:u6(i,"hex"):"#000"}function ik(i,e){switch(e){case"hex":return`#${i}`;case"rgb":return`rgb( ${i[0]}, ${i[1]}, ${i[2]} )`;case"hsl":return`hsl( ${i[0]}, ${i[1]}%, ${i[2]}% )`;case"hwb":return`hwb( ${i[0]}, ${i[1]}, ${i[2]} )`;case"lab":return`lab( ${i[0]}% ${i[1]} ${i[2]} )`;case"lch":return`lch( ${i[0]}% ${i[1]} ${i[2]} )`;default:return""}}function f6(i){if(i.startsWith("#")){const t=od(i);return{space:"hex",values:t.values,hexValue:i,alpha:t.alpha}}const e=od(i);return e.space?e:null}function sk(i){return Object.keys(d6).includes(i.space)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pt extends D{constructor(e){super(e),this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${Vt()}`;const t=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:t.to("for")},children:[{text:t.to("text")}]})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ge extends D{constructor(e,t){super(e);const n=`ck-labeled-field-view-${Vt()}`,s=`ck-labeled-field-view-status-${Vt()}`;this.fieldView=t(this,n,s),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(n),this.statusView=this._createStatusView(s),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(r,a)=>r||a);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",o.to("class"),o.if("isEnabled","ck-disabled",r=>!r),o.if("isEmpty","ck-labeled-field-view_empty"),o.if("isFocused","ck-labeled-field-view_focused"),o.if("placeholder","ck-labeled-field-view_placeholder"),o.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){const t=new Pt(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}_createStatusView(e){const t=new D(this.locale),n=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",n.if("errorText","ck-labeled-field-view__status_error"),n.if("_statusText","ck-hidden",s=>!s)],id:e,role:n.if("errorText","alert")},children:[{text:n.to("_statusText")}]}),t}focus(e){this.fieldView.focus(e)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ok extends D{constructor(e){super(e),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.focusTracker=new Se,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",t.if("isFocused","ck-input_focused"),t.if("isEmpty","ck-input-text_empty"),t.if("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),readonly:t.to("isReadOnly"),"aria-invalid":t.if("hasError",!0),"aria-describedby":t.to("ariaDescribedById")},on:{input:t.to((...n)=>{this.fire("input",...n),this._updateIsEmpty()}),change:t.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,t,n)=>{this._setDomElementValue(n),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=rk(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}}function rk(i){return!i.value}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class h6 extends ok{constructor(e){super(e),this.set("inputMode","text");const t=this.bindTemplate;this.extendTemplate({attributes:{inputmode:t.to("inputMode")}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class m6 extends h6{constructor(e){super(e),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ak extends h6{constructor(e,{min:t,max:n,step:s}={}){super(e);const o=this.bindTemplate;this.set("min",t),this.set("max",n),this.set("step",s),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:o.to("min"),max:o.to("max"),step:o.to("step")}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ck extends D{constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",t.to("position",n=>`ck-dropdown__panel_${n}`),t.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:t.to(n=>{n.target.tagName.toLocaleLowerCase()!=="input"&&n.preventDefault()})}})}focus(){if(this.children.length){const e=this.children.first;typeof e.focus=="function"?e.focus():be("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qi extends D{constructor(e,t,n){super(e);const s=this.bindTemplate;this.buttonView=t,this.panelView=n,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Le,this.focusTracker=new Se,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",s.to("class"),s.if("isEnabled","ck-disabled",o=>!o)],id:s.to("id"),"aria-describedby":s.to("ariaDescribedById")},children:[t,n]}),t.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":s.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(t,n,s)=>{if(s)if(this.panelPosition==="auto"){const o=Qi._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=o?o.name:this._panelPositions[0].name}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const e=(t,n)=>{this.isOpen&&(this.isOpen=!1,n())};this.keystrokes.set("arrowdown",(t,n)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,n())}),this.keystrokes.set("arrowright",(t,n)=>{this.isOpen&&n()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:t,southEast:n,southWest:s,northEast:o,northWest:r,southMiddleEast:a,southMiddleWest:c,northMiddleEast:l,northMiddleWest:x}=Qi.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[n,s,a,c,e,o,r,l,x,t]:[s,n,c,a,e,r,o,x,l,t]}}Qi.defaultPanelPositions={south:(i,e)=>({top:i.bottom,left:i.left-(e.width-i.width)/2,name:"s"}),southEast:i=>({top:i.bottom,left:i.left,name:"se"}),southWest:(i,e)=>({top:i.bottom,left:i.left-e.width+i.width,name:"sw"}),southMiddleEast:(i,e)=>({top:i.bottom,left:i.left-(e.width-i.width)/4,name:"sme"}),southMiddleWest:(i,e)=>({top:i.bottom,left:i.left-(e.width-i.width)*3/4,name:"smw"}),north:(i,e)=>({top:i.top-e.height,left:i.left-(e.width-i.width)/2,name:"n"}),northEast:(i,e)=>({top:i.top-e.height,left:i.left,name:"ne"}),northWest:(i,e)=>({top:i.top-e.height,left:i.left-e.width+i.width,name:"nw"}),northMiddleEast:(i,e)=>({top:i.top-e.height,left:i.left-(e.width-i.width)/4,name:"nme"}),northMiddleWest:(i,e)=>({top:i.top-e.height,left:i.left-(e.width-i.width)*3/4,name:"nmw"})};Qi._getOptimalPosition=Zc;const sl='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class g6 extends G{constructor(e){super(e),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",t=>String(t))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new mn;return e.content=sl,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ut extends ye(){constructor(e){if(super(),this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(const t in e.actions){let n=e.actions[t];typeof n=="string"&&(n=[n]);for(const s of n)e.keystrokeHandler.set(s,(o,r)=>{this[t](),r()})}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(Va)||null}get last(){return this.focusables.filter(Va).slice(-1)[0]||null}get next(){return this._getFocusableItem(1)}get previous(){return this._getFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((t,n)=>{const s=t.element===this.focusTracker.focusedElement;return s&&(e=n),s}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const e=this.next;e&&this.focusables.getIndex(e)===this.current||(e===this.first?this.fire("forwardCycle"):this._focus(e,1))}focusPrevious(){const e=this.previous;e&&this.focusables.getIndex(e)===this.current||(e===this.last?this.fire("backwardCycle"):this._focus(e,-1))}_focus(e,t){e&&e.focus(t)}_getFocusableItem(e){const t=this.current,n=this.focusables.length;if(!n)return null;if(t===null)return this[e===1?"first":"last"];let s=(t+n+e)%n;do{const o=this.focusables.get(s);if(Va(o))return o;s=(s+n+e)%n}while(s!==t);return null}}function Va(i){return!!("focus"in i&&jn(i.element))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class b6 extends D{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lk extends D{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function xk(i){return i.bindTemplate.to(e=>{e.target===i.element&&e.preventDefault()})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function p6(i){if(Array.isArray(i))return{items:i,removeItems:[]};const e={items:[],removeItems:[]};return i?{...e,...i}:e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class y extends ue(){constructor(e){super(),this._disableStack=new Set,this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",rd,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",rd),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}function rd(i){i.return=!1,i.stop()}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class q extends ue(){constructor(e){super(),this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",t=>{if(!this.affectsData)return;const n=e.model.document.selection,o=!(n.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(n);(e.isReadOnly||this._isEnabledBasedOnSelection&&!o)&&(t.return=!1,t.stop())},{priority:"highest"}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",ad,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",ad),this.refresh())}execute(...e){}destroy(){this.stopListening()}}function ad(i){i.return=!1,i.stop()}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cd extends q{constructor(){super(...arguments),this._childCommandsDefinitions=[]}refresh(){}execute(...e){const t=this._getFirstEnabledCommand();return!!t&&t.execute(e)}registerChildCommand(e,t={}){Vh(this._childCommandsDefinitions,{command:e,priority:t.priority||"normal"}),e.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const e=this._childCommandsDefinitions.find(({command:t})=>t.isEnabled);return e&&e.command}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class w6 extends ye(){constructor(e,t=[],n=[]){super(),this._plugins=new Map,this._context=e,this._availablePlugins=new Map;for(const s of t)s.pluginName&&this._availablePlugins.set(s.pluginName,s);this._contextPlugins=new Map;for(const[s,o]of n)this._contextPlugins.set(s,o),this._contextPlugins.set(o,s),s.pluginName&&this._availablePlugins.set(s.pluginName,s)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const t=this._plugins.get(e);if(!t){let n=e;throw typeof e=="function"&&(n=e.pluginName||e.name),new w("plugincollection-plugin-not-loaded",this._context,{plugin:n})}return t}has(e){return this._plugins.has(e)}init(e,t=[],n=[]){const s=this,o=this._context;f(e),b(e);const r=e.filter(V=>!d(V,t)),a=[...m(r)];I(a,n);const c=R(a);return P(c,"init").then(()=>P(c,"afterInit")).then(()=>c);function l(V){return typeof V=="function"}function x(V){return l(V)&&!!V.isContextPlugin}function d(V,A){return A.some(k=>k===V||u(V)===k||u(k)===V)}function u(V){return l(V)?V.pluginName||V.name:V}function f(V,A=new Set){V.forEach(k=>{l(k)&&(A.has(k)||(A.add(k),k.pluginName&&!s._availablePlugins.has(k.pluginName)&&s._availablePlugins.set(k.pluginName,k),k.requires&&f(k.requires,A)))})}function m(V,A=new Set){return V.map(k=>l(k)?k:s._availablePlugins.get(k)).reduce((k,M)=>A.has(M)?k:(A.add(M),M.requires&&(b(M.requires,M),m(M.requires,A).forEach(F=>k.add(F))),k.add(M)),new Set)}function b(V,A=null){V.map(k=>l(k)?k:s._availablePlugins.get(k)||k).forEach(k=>{p(k,A),C(k,A),_(k,A)})}function p(V,A){if(!l(V))throw A?new w("plugincollection-soft-required",o,{missingPlugin:V,requiredBy:u(A)}):new w("plugincollection-plugin-not-found",o,{plugin:V})}function C(V,A){if(x(A)&&!x(V))throw new w("plugincollection-context-required",o,{plugin:u(V),requiredBy:u(A)})}function _(V,A){if(A&&d(V,t))throw new w("plugincollection-required",o,{plugin:u(V),requiredBy:u(A)})}function R(V){return V.map(A=>{let k=s._contextPlugins.get(A);return k=k||new A(o),s._add(A,k),k})}function P(V,A){return V.reduce((k,M)=>!M[A]||s._contextPlugins.has(M)?k:k.then(M[A].bind(M)),Promise.resolve())}function I(V,A){for(const k of A){if(typeof k!="function")throw new w("plugincollection-replace-plugin-invalid-type",null,{pluginItem:k});const M=k.pluginName;if(!M)throw new w("plugincollection-replace-plugin-missing-name",null,{pluginItem:k});if(k.requires&&k.requires.length)throw new w("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:M});const F=s._availablePlugins.get(M);if(!F)throw new w("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:M});const N=V.indexOf(F);if(N===-1){if(s._contextPlugins.has(F))return;throw new w("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:M})}if(F.requires&&F.requires.length)throw new w("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:M});V.splice(N,1,k),s._availablePlugins.set(M,k)}}}destroy(){const e=[];for(const[,t]of this)typeof t.destroy=="function"&&!this._contextPlugins.has(t)&&e.push(t.destroy());return Promise.all(e)}_add(e,t){this._plugins.set(e,t);const n=e.pluginName;if(n){if(this._plugins.has(n))throw new w("plugincollection-plugin-name-conflict",null,{pluginName:n,plugin1:this._plugins.get(n).constructor,plugin2:e});this._plugins.set(n,t)}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ds{constructor(e){this._contextOwner=null,this.config=new zm(e,this.constructor.defaultConfig);const t=this.constructor.builtinPlugins;this.config.define("plugins",t),this.plugins=new w6(this,t);const n=this.config.get("language")||{};this.locale=new wC({uiLanguage:typeof n=="string"?n:n.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.editors=new De}initPlugins(){const e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const n of e.concat(t)){if(typeof n!="function")throw new w("context-initplugins-constructor-only",null,{Plugin:n});if(n.isContextPlugin!==!0)throw new w("context-initplugins-invalid-plugin",null,{Plugin:n})}return this.plugins.init(e,[],t)}destroy(){return Promise.all(Array.from(this.editors,e=>e.destroy())).then(()=>this.plugins.destroy())}_addEditor(e,t){if(this._contextOwner)throw new w("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){const e={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(e[t]=this.config.get(t));return e}static create(e){return new Promise(t=>{const n=new this(e);t(n.initPlugins().then(()=>n))})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _6 extends ue(){constructor(e){super(),this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const cr=new WeakMap;let ld=!1;function ol({view:i,element:e,text:t,isDirectHost:n=!0,keepOnFocus:s=!1}){const o=i.document;cr.has(o)||(cr.set(o,new Map),o.registerPostFixer(a=>Ba(o,a)),o.on("change:isComposing",()=>{i.change(a=>Ba(o,a))},{priority:"high"})),e.is("editableElement")&&e.on("change:placeholder",(a,c,l)=>{r(l)}),e.placeholder?r(e.placeholder):t&&r(t),t&&mk();function r(a){cr.get(o).set(e,{text:a,isDirectHost:n,keepOnFocus:s,hostElement:n?e:null}),i.change(c=>Ba(o,c))}}function dk(i,e){return e.hasClass("ck-placeholder")?!1:(i.addClass("ck-placeholder",e),!0)}function uk(i,e){return e.hasClass("ck-placeholder")?(i.removeClass("ck-placeholder",e),!0):!1}function fk(i,e){if(!i.isAttached()||Array.from(i.getChildren()).some(r=>!r.is("uiElement")))return!1;const n=i.document,o=n.selection.anchor;return n.isComposing&&o&&o.parent===i?!1:e||!n.isFocused?!0:!!o&&o.parent!==i}function Ba(i,e){const t=cr.get(i),n=[];let s=!1;for(const[o,r]of t)r.isDirectHost&&(n.push(o),xd(e,o,r)&&(s=!0));for(const[o,r]of t){if(r.isDirectHost)continue;const a=hk(o);a&&(n.includes(a)||(r.hostElement=a,xd(e,o,r)&&(s=!0)))}return s}function xd(i,e,t){const{text:n,isDirectHost:s,hostElement:o}=t;let r=!1;return o.getAttribute("data-placeholder")!==n&&(i.setAttribute("data-placeholder",n,o),r=!0),(s||e.childCount==1)&&fk(o,t.keepOnFocus)?dk(i,o)&&(r=!0):uk(i,o)&&(r=!0),r}function hk(i){if(i.childCount){const e=i.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}function mk(){ld||be("enableplaceholder-deprecated-text-option"),ld=!0}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let vi=class{is(){throw new Error("is() method is abstract")}};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let yi=class extends ye(vi){constructor(e){super(),this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new w("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={}){const t=[];let n=e.includeSelf?this:this.parent;for(;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}getCommonAncestor(e,t={}){const n=this.getAncestors(t),s=e.getAncestors(t);let o=0;for(;n[o]==s[o]&&n[o];)o++;return o===0?null:n[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),n=e.getPath(),s=xt(t,n);switch(s){case"prefix":return!0;case"extension":return!1;default:return t[s]<n[s]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire(`change:${e}`,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){const e=Vm(this);return delete e.parent,e}};yi.prototype.is=function(i){return i==="node"||i==="view:node"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Re=class D0 extends yi{constructor(e,t){super(e),this._textData=t}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof D0?this===e||this.data===e.data:!1}_clone(){return new D0(this.document,this.data)}};Re.prototype.is=function(i){return i==="$text"||i==="view:$text"||i==="text"||i==="view:text"||i==="node"||i==="view:node"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let on=class extends vi{constructor(e,t,n){if(super(),this.textNode=e,t<0||t>e.data.length)throw new w("view-textproxy-wrong-offsetintext",this);if(n<0||t+n>e.data.length)throw new w("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+n),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const t=[];let n=e.includeSelf?this.textNode:this.parent;for(;n!==null;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}};on.prototype.is=function(i){return i==="$textProxy"||i==="view:$textProxy"||i==="textProxy"||i==="view:textProxy"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ct{constructor(...e){this._patterns=[],this.add(...e)}add(...e){for(let t of e)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(const t of e)for(const n of this._patterns){const s=dd(t,n);if(s)return{element:t,pattern:n,match:s}}return null}matchAll(...e){const t=[];for(const n of e)for(const s of this._patterns){const o=dd(n,s);o&&t.push({element:n,pattern:s,match:o})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;const e=this._patterns[0],t=e.name;return typeof e!="function"&&t&&!(t instanceof RegExp)?t:null}}function dd(i,e){if(typeof e=="function")return e(i);const t={};return e.name&&(t.name=gk(e.name,i.name),!t.name)||e.attributes&&(t.attributes=_k(e.attributes,i),!t.attributes)||e.classes&&(t.classes=vk(e.classes,i),!t.classes)||e.styles&&(t.styles=yk(e.styles,i),!t.styles)?null:t}function gk(i,e){return i instanceof RegExp?!!e.match(i):i===e}function rl(i,e,t){const n=bk(i),s=Array.from(e),o=[];if(n.forEach(([r,a])=>{s.forEach(c=>{pk(r,c)&&wk(a,c,t)&&o.push(c)})}),!(!n.length||o.length<n.length))return o}function bk(i){return Array.isArray(i)?i.map(e=>wt(e)?((e.key===void 0||e.value===void 0)&&be("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0]):wt(i)?Object.entries(i):[[i,!0]]}function pk(i,e){return i===!0||i===e||i instanceof RegExp&&e.match(i)}function wk(i,e,t){if(i===!0)return!0;const n=t(e);return i===n||i instanceof RegExp&&!!String(n).match(i)}function _k(i,e){const t=new Set(e.getAttributeKeys());return wt(i)?(i.style!==void 0&&be("matcher-pattern-deprecated-attributes-style-key",i),i.class!==void 0&&be("matcher-pattern-deprecated-attributes-class-key",i)):(t.delete("style"),t.delete("class")),rl(i,t,n=>e.getAttribute(n))}function vk(i,e){return rl(i,e.getClassNames(),()=>{})}function yk(i,e){return rl(i,e.getStyleNames(!0),t=>e.getStyle(t))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ck{constructor(e){this._styles={},this._styleProcessor=e}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();const t=Tk(e);for(const[n,s]of t)this._styleProcessor.toNormalizedForm(n,s,this._styles)}has(e){if(this.isEmpty)return!1;const n=this._styleProcessor.getReducedForm(e,this._styles).find(([s])=>s===e);return Array.isArray(n)}set(e,t){if(Ee(e))for(const[n,s]of Object.entries(e))this._styleProcessor.toNormalizedForm(n,s,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){const t=z0(e);zy(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this._getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!Ee(this._styles[e]))return this._styles[e];const n=this._styleProcessor.getReducedForm(e,this._styles).find(([s])=>s===e);if(Array.isArray(n))return n[1]}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this._getStylesEntries().map(([n])=>n)}clear(){this._styles={}}_getStylesEntries(){const e=[],t=Object.keys(this._styles);for(const n of t)e.push(...this._styleProcessor.getReducedForm(n,this._styles));return e}_cleanEmptyObjectsOnPath(e){const t=e.split(".");if(!(t.length>1))return;const s=t.splice(0,t.length-1).join("."),o=Cr(this._styles,s);if(!o)return;!Object.keys(o).length&&this.remove(s)}}class kk{constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,n){if(Ee(t)){Oa(n,z0(e),t);return}if(this._normalizers.has(e)){const s=this._normalizers.get(e),{path:o,value:r}=s(t);Oa(n,o,r)}else Oa(n,e,t)}getNormalized(e,t){if(!e)return Fm({},t);if(t[e]!==void 0)return t[e];if(this._extractors.has(e)){const n=this._extractors.get(e);if(typeof n=="string")return Cr(t,n);const s=n(e,t);if(s)return s}return Cr(t,z0(e))}getReducedForm(e,t){const n=this.getNormalized(e,t);return n===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(n):[[e,n]]}getStyleNames(e){const t=Array.from(this._consumables.keys()).filter(s=>{const o=this.getNormalized(s,e);return o&&typeof o=="object"?Object.keys(o).length:o}),n=new Set([...t,...Object.keys(e)]);return Array.from(n)}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(const n of t)this._mapStyleNames(n,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}}function Tk(i){let e=null,t=0,n=0,s=null;const o=new Map;if(i==="")return o;i.charAt(i.length-1)!=";"&&(i=i+";");for(let r=0;r<i.length;r++){const a=i.charAt(r);if(e===null)switch(a){case":":s||(s=i.substr(t,r-t),n=r+1);break;case'"':case"'":e=a;break;case";":{const c=i.substr(n,r-n);s&&o.set(s.trim(),c.trim()),s=null,t=r+1;break}}else a===e&&(e=null)}return o}function z0(i){return i.replace("-",".")}function Oa(i,e,t){let n=t;Ee(t)&&(n=Fm({},Cr(i,e),t)),My(i,e,n)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Kt=class v6 extends yi{constructor(e,t,n,s){if(super(e),this._unsafeAttributesToRender=[],this._customProperties=new Map,this.name=t,this._attrs=Ak(n),this._children=[],s&&this._insertChild(0,s),this._classes=new Set,this._attrs.has("class")){const o=this._attrs.get("class");ud(this._classes,o),this._attrs.delete("class")}this._styles=new Ck(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if(e=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(e=="style"){const t=this._styles.toString();return t==""?void 0:t}return this._attrs.get(e)}hasAttribute(e){return e=="class"?this._classes.size>0:e=="style"?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof v6))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(const[t,n]of this._attrs)if(!e._attrs.has(t)||e._attrs.get(t)!==n)return!1;for(const t of this._classes)if(!e._classes.has(t))return!1;for(const t of this._styles.getStyleNames())if(!e._styles.has(t)||e._styles.getAsString(t)!==this._styles.getAsString(t))return!1;return!0}hasClass(...e){for(const t of e)if(!this._classes.has(t))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e){return this._styles.getStyleNames(e)}hasStyle(...e){for(const t of e)if(!this._styles.has(t))return!1;return!0}findAncestor(...e){const t=new Ct(...e);let n=this.parent;for(;n&&!n.is("documentFragment");){if(t.match(n))return n;n=n.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),n=Array.from(this._attrs).map(s=>`${s[0]}="${s[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(t?` style="${t}"`:"")+(n==""?"":` ${n}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const t=[];if(e)for(const s of this.getChildren())t.push(s._clone(e));const n=new this.constructor(this.document,this.name,this._attrs,t);return n._classes=new Set(this._classes),n._styles.set(this._styles.getNormalized()),n._customProperties=new Map(this._customProperties),n.getFillerOffset=this.getFillerOffset,n._unsafeAttributesToRender=this._unsafeAttributesToRender,n}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this);let n=0;const s=Ek(this.document,t);for(const o of s)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,n++;return n}_removeChildren(e,t=1){this._fireChange("children",this);for(let n=e;n<e+t;n++)this._children[n].parent=null;return this._children.splice(e,t)}_setAttribute(e,t){const n=String(t);this._fireChange("attributes",this),e=="class"?ud(this._classes,n):e=="style"?this._styles.setTo(n):this._attrs.set(e,n)}_removeAttribute(e){return this._fireChange("attributes",this),e=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:e=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(const t of ge(e))this._classes.add(t)}_removeClass(e){this._fireChange("attributes",this);for(const t of ge(e))this._classes.delete(t)}_setStyle(e,t){this._fireChange("attributes",this),typeof e!="string"?this._styles.set(e):this._styles.set(e,t)}_removeStyle(e){this._fireChange("attributes",this);for(const t of ge(e))this._styles.remove(t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};Kt.prototype.is=function(i,e){return e?e===this.name&&(i==="element"||i==="view:element"):i==="element"||i==="view:element"||i==="node"||i==="view:node"};function Ak(i){const e=Gt(i);for(const[t,n]of e)n===null?e.delete(t):typeof n!="string"&&e.set(t,String(n));return e}function ud(i,e){const t=e.split(/\s+/);i.clear(),t.forEach(n=>i.add(n))}function Ek(i,e){return typeof e=="string"?[new Re(i,e)]:(Bt(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new Re(i,t):t instanceof on?new Re(i,t.data):t))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ys extends Kt{constructor(e,t,n,s){super(e,t,n,s),this.getFillerOffset=Sk}}Ys.prototype.is=function(i,e){return e?e===this.name&&(i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function Sk(){const i=[...this.getChildren()],e=i[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const t of i)if(!t.is("uiElement"))return null;return this.childCount}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ia extends ue(Ys){constructor(e,t,n,s){super(e,t,n,s),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",o=>o&&e.selection.editableElement==this),this.listenTo(e.selection,"change",()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this})}destroy(){this.stopListening()}}ia.prototype.is=function(i,e){return e?e===this.name&&(i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const fd=Symbol("rootName");class y6 extends ia{constructor(e,t){super(e,t),this.rootName="main"}get rootName(){return this.getCustomProperty(fd)}set rootName(e){this._setCustomProperty(fd,e)}set _name(e){this.name=e}}y6.prototype.is=function(i,e){return e?e===this.name&&(i==="rootElement"||i==="view:rootElement"||i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"):i==="rootElement"||i==="view:rootElement"||i==="editableElement"||i==="view:editableElement"||i==="containerElement"||i==="view:containerElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let ri=class{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new w("view-tree-walker-no-start-position",null);if(e.direction&&e.direction!="forward"&&e.direction!="backward")throw new w("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this._position=H._createAt(e.startPosition):this._position=H._createAt(e.boundaries[e.direction=="backward"?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,n;do n=this.position,t=this.next();while(!t.done&&e(t.value));t.done||(this._position=n)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position.clone();const t=this.position,n=e.parent;if(n.parent===null&&e.offset===n.childCount)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let s;if(n instanceof Re){if(e.isAtEnd)return this._position=H._createAfter(n),this._next();s=n.data[e.offset]}else s=n.getChild(e.offset);if(s instanceof Kt){if(!this.shallow)e=new H(s,0);else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,this._formatReturnValue("elementStart",s,t,e,1)}if(s instanceof Re){if(this.singleCharacters)return e=new H(s,0),this._position=e,this._next();let o=s.data.length,r;return s==this._boundaryEndParent?(o=this.boundaries.end.offset,r=new on(s,0,o),e=H._createAfter(r)):(r=new on(s,0,s.data.length),e.offset++),this._position=e,this._formatReturnValue("text",r,t,e,o)}if(typeof s=="string"){let o;this.singleCharacters?o=1:o=(n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length)-e.offset;const r=new on(n,e.offset,o);return e.offset+=o,this._position=e,this._formatReturnValue("text",r,t,e,o)}return e=H._createAfter(n),this._position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,t,e)}_previous(){let e=this.position.clone();const t=this.position,n=e.parent;if(n.parent===null&&e.offset===0)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let s;if(n instanceof Re){if(e.isAtStart)return this._position=H._createBefore(n),this._previous();s=n.data[e.offset-1]}else s=n.getChild(e.offset-1);if(s instanceof Kt)return this.shallow?(e.offset--,this._position=e,this._formatReturnValue("elementStart",s,t,e,1)):(e=new H(s,s.childCount),this._position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",s,t,e));if(s instanceof Re){if(this.singleCharacters)return e=new H(s,s.data.length),this._position=e,this._previous();let o=s.data.length,r;if(s==this._boundaryStartParent){const a=this.boundaries.start.offset;r=new on(s,a,s.data.length-a),o=r.data.length,e=H._createBefore(r)}else r=new on(s,0,s.data.length),e.offset--;return this._position=e,this._formatReturnValue("text",r,t,e,o)}if(typeof s=="string"){let o;if(this.singleCharacters)o=1;else{const a=n===this._boundaryStartParent?this.boundaries.start.offset:0;o=e.offset-a}e.offset-=o;const r=new on(n,e.offset,o);return this._position=e,this._formatReturnValue("text",r,t,e,o)}return e=H._createBefore(n),this._position=e,this._formatReturnValue("elementStart",n,t,e,1)}_formatReturnValue(e,t,n,s,o){return t instanceof on&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(s=H._createAfter(t.textNode),this._position=s):n=H._createAfter(t.textNode)),t.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(s=H._createBefore(t.textNode),this._position=s):n=H._createBefore(t.textNode))),{done:!1,value:{type:e,item:t,previousPosition:n,nextPosition:s,length:o}}}};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let H=class yn extends vi{constructor(e,t){super(),this.parent=e,this.offset=t}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof ia);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const t=yn._createAt(this),n=t.offset+e;return t.offset=n<0?0:n,t}getLastMatchingPosition(e,t={}){t.startPosition=this;const n=new ri(t);return n.skip(e),n.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const t=this.getAncestors(),n=e.getAncestors();let s=0;for(;t[s]==n[s]&&t[s];)s++;return s===0?null:t[s-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const t=this.parent.is("node")?this.parent.getPath():[],n=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),n.push(e.offset);const s=xt(t,n);switch(s){case"prefix":return"before";case"extension":return"after";default:return t[s]<n[s]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new ri(e)}clone(){return new yn(this.parent,this.offset)}static _createAt(e,t){if(e instanceof yn)return new this(e.parent,e.offset);{const n=e;if(t=="end")t=n.is("$text")?n.data.length:n.childCount;else{if(t=="before")return this._createBefore(n);if(t=="after")return this._createAfter(n);if(t!==0&&!t)throw new w("view-createpositionat-offset-required",n)}return new yn(n,t)}}static _createAfter(e){if(e.is("$textProxy"))return new yn(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new w("view-position-after-root",e,{root:e});return new yn(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new yn(e.textNode,e.offsetInText);if(!e.parent)throw new w("view-position-before-root",e,{root:e});return new yn(e.parent,e.index)}};H.prototype.is=function(i){return i==="position"||i==="view:position"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let re=class Dn extends vi{constructor(e,t=null){super(),this.start=e.clone(),this.end=t?t.clone():e.clone()}*[Symbol.iterator](){yield*new ri({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(Mo,{direction:"backward"}),t=this.end.getLastMatchingPosition(Mo);return e.parent.is("$text")&&e.isAtStart&&(e=H._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=H._createAfter(t.parent)),new Dn(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(Mo);if(e.isAfter(this.end)||e.isEqual(this.end))return new Dn(e,e);let t=this.end.getLastMatchingPosition(Mo,{direction:"backward"});const n=e.nodeAfter,s=t.nodeBefore;return n&&n.is("$text")&&(e=new H(n,0)),s&&s.is("$text")&&(t=new H(s,s.data.length)),new Dn(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const n=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),s=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return n&&s}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new Dn(this.start,e.start)),this.containsPosition(e.end)&&t.push(new Dn(e.end,this.end))):t.push(this.clone()),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,n=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(n=e.end),new Dn(t,n)}return null}getWalker(e={}){return e.boundaries=this,new ri(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new Dn(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new ri(e);for(const n of t)yield n.item}*getPositions(e={}){e.boundaries=this;const t=new ri(e);yield t.position;for(const n of t)yield n.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,t,n,s){return new this(new H(e,t),new H(n,s))}static _createFromPositionAndShift(e,t){const n=e,s=e.getShiftedBy(t);return t>0?new this(n,s):new this(s,n)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(H._createBefore(e),t)}};re.prototype.is=function(i){return i==="range"||i==="view:range"};function Mo(i){return!!(i.item.is("attributeElement")||i.item.is("uiElement"))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Sn=class C6 extends ye(vi){constructor(...e){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?e.clone():null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let n=!1;for(const s of e._ranges)if(t.isEqual(s)){n=!0;break}if(!n)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const t=L0(this.getRanges()),n=L0(e.getRanges());if(t!=n)return!1;if(t==0)return!0;for(let s of this.getRanges()){s=s.getTrimmed();let o=!1;for(let r of e.getRanges())if(r=r.getTrimmed(),s.start.isEqual(r.start)&&s.end.isEqual(r.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[t,n,s]=e;if(typeof n=="object"&&(s=n,n=void 0),t===null)this._setRanges([]),this._setFakeOptions(s);else if(t instanceof C6||t instanceof al)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof re)this._setRanges([t],s&&s.backward),this._setFakeOptions(s);else if(t instanceof H)this._setRanges([new re(t)]),this._setFakeOptions(s);else if(t instanceof yi){const o=!!s&&!!s.backward;let r;if(n===void 0)throw new w("view-selection-setto-required-second-parameter",this);n=="in"?r=re._createIn(t):n=="on"?r=re._createOn(t):r=new re(H._createAt(t,n)),this._setRanges([r],o),this._setFakeOptions(s)}else if(Bt(t))this._setRanges(t,s&&s.backward),this._setFakeOptions(s);else throw new w("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,t){if(this.anchor===null)throw new w("view-selection-setfocus-no-ranges",this);const n=H._createAt(e,t);if(n.compareWith(this.focus)=="same")return;const s=this.anchor;this._ranges.pop(),n.compareWith(s)=="before"?this._addRange(new re(n,s),!0):this._addRange(new re(s,n)),this.fire("change")}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(const n of e)this._addRange(n);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof re))throw new w("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(const t of this._ranges)if(e.isIntersecting(t))throw new w("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new re(e.start,e.end))}};Sn.prototype.is=function(i){return i==="selection"||i==="view:selection"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let al=class extends ye(vi){constructor(...e){super(),this._selection=new Sn,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,t){this._selection.setFocus(e,t)}};al.prototype.is=function(i){return i==="selection"||i=="documentSelection"||i=="view:selection"||i=="view:documentSelection"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class us extends Pn{constructor(e,t,n){super(e,t),this.startRange=n,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const La=Symbol("bubbling contexts");function H0(i){class e extends i{fire(n,...s){try{const o=n instanceof Pn?n:new Pn(this,n),r=Ma(this);if(!r.size)return;if(gs(o,"capturing",this),Ri(r,"$capture",o,...s))return o.return;const a=o.startRange||this.selection.getFirstRange(),c=a?a.getContainedElement():null,l=c?!!k6(r,c):!1;let x=c||Ik(a);if(gs(o,"atTarget",x),!l){if(Ri(r,"$text",o,...s))return o.return;gs(o,"bubbling",x)}for(;x;){if(x.is("rootElement")){if(Ri(r,"$root",o,...s))return o.return}else if(x.is("element")&&Ri(r,x.name,o,...s))return o.return;if(Ri(r,x,o,...s))return o.return;x=x.parent,gs(o,"bubbling",x)}return gs(o,"bubbling",this),Ri(r,"$document",o,...s),o.return}catch(o){/* istanbul ignore next -- @preserve */w.rethrowUnexpectedError(o,this)}}_addEventListener(n,s,o){const r=ge(o.context||"$document"),a=Ma(this);for(const c of r){let l=a.get(c);l||(l=new(ye()),a.set(c,l)),this.listenTo(l,n,s,o)}}_removeEventListener(n,s){const o=Ma(this);for(const r of o.values())this.stopListening(r,n,s)}}return e}{const i=H0(Object);["fire","_addEventListener","_removeEventListener"].forEach(e=>{H0[e]=i.prototype[e]})}function gs(i,e,t){i instanceof us&&(i._eventPhase=e,i._currentTarget=t)}function Ri(i,e,t,...n){const s=typeof e=="string"?i.get(e):k6(i,e);return s?(s.fire(t,...n),t.stop.called):!1}function k6(i,e){for(const[t,n]of i)if(typeof t=="function"&&t(e))return n;return null}function Ma(i){return i[La]||(i[La]=new Map),i[La]}function Ik(i){if(!i)return null;const e=i.start.parent,t=i.end.parent,n=e.getPath(),s=t.getPath();return n.length>s.length?e:t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let vo=class extends H0(ue()){constructor(e){super(),this._postFixers=new Set,this.selection=new al,this.roots=new De({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let t=!1;do for(const n of this._postFixers)if(t=n(e),t)break;while(t)}};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const T6=10;class ai extends Kt{constructor(e,t,n,s){super(e,t,n,s),this._priority=T6,this._id=null,this._clonesGroup=null,this.getFillerOffset=Pk}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new w("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const t=super._clone(e);return t._priority=this._priority,t._id=this._id,t}}ai.DEFAULT_PRIORITY=T6;ai.prototype.is=function(i,e){return e?e===this.name&&(i==="attributeElement"||i==="view:attributeElement"||i==="element"||i==="view:element"):i==="attributeElement"||i==="view:attributeElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function Pk(){if(Fa(this))return null;let i=this.parent;for(;i&&i.is("attributeElement");){if(Fa(i)>1)return null;i=i.parent}return!i||Fa(i)>1?null:this.childCount}function Fa(i){return Array.from(i.getChildren()).filter(e=>!e.is("uiElement")).length}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cl extends Kt{constructor(e,t,n,s){super(e,t,n,s),this.getFillerOffset=Rk}_insertChild(e,t){if(t&&(t instanceof yi||Array.from(t).length>0))throw new w("view-emptyelement-cannot-add",[this,t]);return 0}}cl.prototype.is=function(i,e){return e?e===this.name&&(i==="emptyElement"||i==="view:emptyElement"||i==="element"||i==="view:element"):i==="emptyElement"||i==="view:emptyElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function Rk(){return null}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sa extends Kt{constructor(e,t,n,s){super(e,t,n,s),this.getFillerOffset=Bk}_insertChild(e,t){if(t&&(t instanceof yi||Array.from(t).length>0))throw new w("view-uielement-cannot-add",[this,t]);return 0}render(e,t){return this.toDomElement(e)}toDomElement(e){const t=e.createElement(this.name);for(const n of this.getAttributeKeys())t.setAttribute(n,this.getAttribute(n));return t}}sa.prototype.is=function(i,e){return e?e===this.name&&(i==="uiElement"||i==="view:uiElement"||i==="element"||i==="view:element"):i==="uiElement"||i==="view:uiElement"||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function Vk(i){i.document.on("arrowKey",(e,t)=>Ok(e,t,i.domConverter),{priority:"low"})}function Bk(){return null}function Ok(i,e,t){if(e.keyCode==se.arrowright){const n=e.domTarget.ownerDocument.defaultView.getSelection(),s=n.rangeCount==1&&n.getRangeAt(0).collapsed;if(s||e.shiftKey){const o=n.focusNode,r=n.focusOffset,a=t.domPositionToView(o,r);if(a===null)return;let c=!1;const l=a.getLastMatchingPosition(x=>(x.item.is("uiElement")&&(c=!0),!!(x.item.is("uiElement")||x.item.is("attributeElement"))));if(c){const x=t.viewPositionToDom(l);s?n.collapse(x.parent,x.offset):n.extend(x.parent,x.offset)}}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ll extends Kt{constructor(e,t,n,s){super(e,t,n,s),this.getFillerOffset=Lk}_insertChild(e,t){if(t&&(t instanceof yi||Array.from(t).length>0))throw new w("view-rawelement-cannot-add",[this,t]);return 0}render(e,t){}}ll.prototype.is=function(i,e){return e?e===this.name&&(i==="rawElement"||i==="view:rawElement"||i==="element"||i==="view:element"):i==="rawElement"||i==="view:rawElement"||i===this.name||i==="view:"+this.name||i==="element"||i==="view:element"||i==="node"||i==="view:node"};function Lk(){return null}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let ci=class extends ye(vi){constructor(e,t){super(),this._children=[],this._customProperties=new Map,this.document=e,t&&this._insertChild(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this);let n=0;const s=Mk(this.document,t);for(const o of s)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(e,0,o),e++,n++;return n}_removeChildren(e,t=1){this._fireChange("children",this);for(let n=e;n<e+t;n++)this._children[n].parent=null;return this._children.splice(e,t)}_fireChange(e,t){this.fire("change:"+e,t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};ci.prototype.is=function(i){return i==="documentFragment"||i==="view:documentFragment"};function Mk(i,e){return typeof e=="string"?[new Re(i,e)]:(Bt(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new Re(i,t):t instanceof on?new Re(i,t.data):t))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class A6{constructor(e){this._cloneGroups=new Map,this._slotFactory=null,this.document=e}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new ci(this.document,e)}createText(e){return new Re(this.document,e)}createAttributeElement(e,t,n={}){const s=new ai(this.document,e,t);return typeof n.priority=="number"&&(s._priority=n.priority),n.id&&(s._id=n.id),n.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),s}createContainerElement(e,t,n={},s={}){let o=null;wt(n)?s=n:o=n;const r=new Ys(this.document,e,t,o);return s.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),r}createEditableElement(e,t,n={}){const s=new ia(this.document,e,t);return n.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),s}createEmptyElement(e,t,n={}){const s=new cl(this.document,e,t);return n.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),s}createUIElement(e,t,n){const s=new sa(this.document,e,t);return n&&(s.render=n),s}createRawElement(e,t,n,s={}){const o=new ll(this.document,e,t);return n&&(o.render=n),s.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),o}setAttribute(e,t,n){n._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,n){wt(e)&&n===void 0?t._setStyle(e):n._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,n){n._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof H?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const t=e.parent;if(!t.is("containerElement"))throw new w("view-writer-break-non-container-element",this.document);if(!t.parent)throw new w("view-writer-break-root",this.document);if(e.isAtStart)return H._createBefore(t);if(!e.isAtEnd){const n=t._clone(!1);this.insert(H._createAfter(t),n);const s=new re(e,H._createAt(t,"end")),o=new H(n,0);this.move(s,o)}return H._createAfter(t)}mergeAttributes(e){const t=e.offset,n=e.parent;if(n.is("$text"))return e;if(n.is("attributeElement")&&n.childCount===0){const r=n.parent,a=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new H(r,a))}const s=n.getChild(t-1),o=n.getChild(t);if(!s||!o)return e;if(s.is("$text")&&o.is("$text"))return md(s,o);if(s.is("attributeElement")&&o.is("attributeElement")&&s.isSimilar(o)){const r=s.childCount;return s._appendChild(o.getChildren()),o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new H(s,r))}return e}mergeContainers(e){const t=e.nodeBefore,n=e.nodeAfter;if(!t||!n||!t.is("containerElement")||!n.is("containerElement"))throw new w("view-writer-merge-containers-invalid-position",this.document);const s=t.getChild(t.childCount-1),o=s instanceof Re?H._createAt(s,"end"):H._createAt(t,"end");return this.move(re._createIn(n),H._createAt(t,"end")),this.remove(re._createOn(n)),o}insert(e,t){t=Bt(t)?[...t]:[t],E6(t,this.document);const n=t.reduce((r,a)=>{const c=r[r.length-1],l=!a.is("uiElement");return!c||c.breakAttributes!=l?r.push({breakAttributes:l,nodes:[a]}):c.nodes.push(a),r},[]);let s=null,o=e;for(const{nodes:r,breakAttributes:a}of n){const c=this._insertNodes(o,r,a);s||(s=c.start),o=c.end}return s?new re(s,o):new re(e)}remove(e){const t=e instanceof re?e:re._createOn(e);if(bs(t,this.document),t.isCollapsed)return new ci(this.document);const{start:n,end:s}=this._breakAttributesRange(t,!0),o=n.parent,r=s.offset-n.offset,a=o._removeChildren(n.offset,r);for(const l of a)this._removeFromClonedElementsGroup(l);const c=this.mergeAttributes(n);return t.start=c,t.end=c.clone(),new ci(this.document,a)}clear(e,t){bs(e,this.document);const n=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(const s of n){const o=s.item;let r;if(o.is("element")&&t.isSimilar(o))r=re._createOn(o);else if(!s.nextPosition.isAfter(e.start)&&o.is("$textProxy")){const a=o.getAncestors().find(c=>c.is("element")&&t.isSimilar(c));a&&(r=re._createIn(a))}r&&(r.end.isAfter(e.end)&&(r.end=e.end),r.start.isBefore(e.start)&&(r.start=e.start),this.remove(r))}}move(e,t){let n;if(t.isAfter(e.end)){t=this._breakAttributes(t,!0);const s=t.parent,o=s.childCount;e=this._breakAttributesRange(e,!0),n=this.remove(e),t.offset+=s.childCount-o}else n=this.remove(e);return this.insert(t,n)}wrap(e,t){if(!(t instanceof ai))throw new w("view-writer-wrap-invalid-attribute",this.document);if(bs(e,this.document),e.isCollapsed){let n=e.start;n.parent.is("element")&&!Fk(n.parent)&&(n=n.getLastMatchingPosition(o=>o.item.is("uiElement"))),n=this._wrapPosition(n,t);const s=this.document.selection;return s.isCollapsed&&s.getFirstPosition().isEqual(e.start)&&this.setSelection(n),new re(n)}else return this._wrapRange(e,t)}unwrap(e,t){if(!(t instanceof ai))throw new w("view-writer-unwrap-invalid-attribute",this.document);if(bs(e,this.document),e.isCollapsed)return e;const{start:n,end:s}=this._breakAttributesRange(e,!0),o=n.parent,r=this._unwrapChildren(o,n.offset,s.offset,t),a=this.mergeAttributes(r.start);a.isEqual(r.start)||r.end.offset--;const c=this.mergeAttributes(r.end);return new re(a,c)}rename(e,t){const n=new Ys(this.document,e,t.getAttributes());return this.insert(H._createAfter(t),n),this.move(re._createIn(t),H._createAt(n,0)),this.remove(re._createOn(t)),n}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return H._createAt(e,t)}createPositionAfter(e){return H._createAfter(e)}createPositionBefore(e){return H._createBefore(e)}createRange(e,t){return new re(e,t)}createRangeOn(e){return re._createOn(e)}createRangeIn(e){return re._createIn(e)}createSelection(...e){return new Sn(...e)}createSlot(e="children"){if(!this._slotFactory)throw new w("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,e)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,t,n){let s;if(n?s=$0(e):s=e.parent.is("$text")?e.parent.parent:e.parent,!s)throw new w("view-writer-invalid-position-container",this.document);let o;n?o=this._breakAttributes(e,!0):o=e.parent.is("$text")?Na(e):e;const r=s._insertChild(o.offset,t);for(const x of t)this._addToClonedElementsGroup(x);const a=o.getShiftedBy(r),c=this.mergeAttributes(o);c.isEqual(o)||a.offset--;const l=this.mergeAttributes(a);return new re(c,l)}_wrapChildren(e,t,n,s){let o=t;const r=[];for(;o<n;){const c=e.getChild(o),l=c.is("$text"),x=c.is("attributeElement");if(x&&this._wrapAttributeElement(s,c))r.push(new H(e,o));else if(l||!x||Nk(s,c)){const d=s._clone();c._remove(),d._appendChild(c),e._insertChild(o,d),this._addToClonedElementsGroup(d),r.push(new H(e,o))}else this._wrapChildren(c,0,c.childCount,s);o++}let a=0;for(const c of r){if(c.offset-=a,c.offset==t)continue;this.mergeAttributes(c).isEqual(c)||(a++,n--)}return re._createFromParentsAndOffsets(e,t,e,n)}_unwrapChildren(e,t,n,s){let o=t;const r=[];for(;o<n;){const c=e.getChild(o);if(!c.is("attributeElement")){o++;continue}if(c.isSimilar(s)){const l=c.getChildren(),x=c.childCount;c._remove(),e._insertChild(o,l),this._removeFromClonedElementsGroup(c),r.push(new H(e,o),new H(e,o+x)),o+=x,n+=x-1;continue}if(this._unwrapAttributeElement(s,c)){r.push(new H(e,o),new H(e,o+1)),o++;continue}this._unwrapChildren(c,0,c.childCount,s),o++}let a=0;for(const c of r){if(c.offset-=a,c.offset==t||c.offset==n)continue;this.mergeAttributes(c).isEqual(c)||(a++,n--)}return re._createFromParentsAndOffsets(e,t,e,n)}_wrapRange(e,t){const{start:n,end:s}=this._breakAttributesRange(e,!0),o=n.parent,r=this._wrapChildren(o,n.offset,s.offset,t),a=this.mergeAttributes(r.start);a.isEqual(r.start)||r.end.offset--;const c=this.mergeAttributes(r.end);return new re(a,c)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return hd(e.clone());e.parent.is("$text")&&(e=Na(e));const n=this.createAttributeElement("_wrapPosition-fake-element");n._priority=Number.POSITIVE_INFINITY,n.isSimilar=()=>!1,e.parent._insertChild(e.offset,n);const s=new re(e,e.getShiftedBy(1));this.wrap(s,t);const o=new H(n.parent,n.index);n._remove();const r=o.nodeBefore,a=o.nodeAfter;return r instanceof Re&&a instanceof Re?md(r,a):hd(o)}_wrapAttributeElement(e,t){if(!gd(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const n of e.getAttributeKeys())if(!(n==="class"||n==="style")&&t.hasAttribute(n)&&t.getAttribute(n)!==e.getAttribute(n))return!1;for(const n of e.getStyleNames())if(t.hasStyle(n)&&t.getStyle(n)!==e.getStyle(n))return!1;for(const n of e.getAttributeKeys())n==="class"||n==="style"||t.hasAttribute(n)||this.setAttribute(n,e.getAttribute(n),t);for(const n of e.getStyleNames())t.hasStyle(n)||this.setStyle(n,e.getStyle(n),t);for(const n of e.getClassNames())t.hasClass(n)||this.addClass(n,t);return!0}_unwrapAttributeElement(e,t){if(!gd(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const n of e.getAttributeKeys())if(!(n==="class"||n==="style")&&(!t.hasAttribute(n)||t.getAttribute(n)!==e.getAttribute(n)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(const n of e.getStyleNames())if(!t.hasStyle(n)||t.getStyle(n)!==e.getStyle(n))return!1;for(const n of e.getAttributeKeys())n==="class"||n==="style"||this.removeAttribute(n,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){const n=e.start,s=e.end;if(bs(e,this.document),e.isCollapsed){const c=this._breakAttributes(e.start,t);return new re(c,c)}const o=this._breakAttributes(s,t),r=o.parent.childCount,a=this._breakAttributes(n,t);return o.offset+=o.parent.childCount-r,new re(a,o)}_breakAttributes(e,t=!1){const n=e.offset,s=e.parent;if(e.parent.is("emptyElement"))throw new w("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new w("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new w("view-writer-cannot-break-raw-element",this.document);if(!t&&s.is("$text")&&U0(s.parent)||U0(s))return e.clone();if(s.is("$text"))return this._breakAttributes(Na(e),t);const o=s.childCount;if(n==o){const r=new H(s.parent,s.index+1);return this._breakAttributes(r,t)}else if(n===0){const r=new H(s.parent,s.index);return this._breakAttributes(r,t)}else{const r=s.index+1,a=s._clone();s.parent._insertChild(r,a),this._addToClonedElementsGroup(a);const c=s.childCount-n,l=s._removeChildren(n,c);a._appendChild(l);const x=new H(s.parent,r);return this._breakAttributes(x,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(const s of e.getChildren())this._addToClonedElementsGroup(s);const t=e.id;if(!t)return;let n=this._cloneGroups.get(t);n||(n=new Set,this._cloneGroups.set(t,n)),n.add(e),e._clonesGroup=n}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const s of e.getChildren())this._removeFromClonedElementsGroup(s);const t=e.id;if(!t)return;const n=this._cloneGroups.get(t);n&&n.delete(e)}}function Fk(i){return Array.from(i.getChildren()).some(e=>!e.is("uiElement"))}function $0(i){let e=i.parent;for(;!U0(e);){if(!e)return;e=e.parent}return e}function Nk(i,e){return i.priority<e.priority?!0:i.priority>e.priority?!1:i.getIdentity()<e.getIdentity()}function hd(i){const e=i.nodeBefore;if(e&&e.is("$text"))return new H(e,e.data.length);const t=i.nodeAfter;return t&&t.is("$text")?new H(t,0):i}function Na(i){if(i.offset==i.parent.data.length)return new H(i.parent.parent,i.parent.index+1);if(i.offset===0)return new H(i.parent.parent,i.parent.index);const e=i.parent.data.slice(i.offset);return i.parent._data=i.parent.data.slice(0,i.offset),i.parent.parent._insertChild(i.parent.index+1,new Re(i.root.document,e)),new H(i.parent.parent,i.parent.index+1)}function md(i,e){const t=i.data.length;return i._data+=e.data,e._remove(),new H(i,t)}const Dk=[Re,ai,Ys,cl,ll,sa];function E6(i,e){for(const t of i){if(!Dk.some(n=>t instanceof n))throw new w("view-writer-insert-invalid-node-type",e);t.is("$text")||E6(t.getChildren(),e)}}function U0(i){return i&&(i.is("containerElement")||i.is("documentFragment"))}function bs(i,e){const t=$0(i.start),n=$0(i.end);if(!t||!n||t!==n)throw new w("view-writer-invalid-range-container",e)}function gd(i,e){return i.id===null&&e.id===null}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const S6=i=>i.createTextNode(" "),I6=i=>{const e=i.createElement("span");return e.dataset.ckeFiller="true",e.innerText=" ",e},P6=i=>{const e=i.createElement("br");return e.dataset.ckeFiller="true",e},jt=7,Xs="⁠".repeat(jt);function St(i){return typeof i=="string"?i.substr(0,jt)===Xs:qe(i)&&i.data.substr(0,jt)===Xs}function As(i){return i.data.length==jt&&St(i)}function bd(i){const e=typeof i=="string"?i:i.data;return St(i)?e.slice(jt):e}function zk(i){i.document.on("arrowKey",Hk,{priority:"low"})}function Hk(i,e){if(e.keyCode==se.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){const n=t.getRangeAt(0).startContainer,s=t.getRangeAt(0).startOffset;St(n)&&s<=jt&&t.collapse(n,0)}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $k extends ue(){constructor(e,t){super(),this.domDocuments=new Set,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this._inlineFiller=null,this._fakeSelectionContainer=null,this.domConverter=e,this.selection=t,this.set("isFocused",!1),this.set("isSelecting",!1),ee.isBlink&&!ee.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()}),this.set("isComposing",!1),this.on("change:isComposing",()=>{this.isComposing||this.render()})}markToSync(e,t){if(e==="text")this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if(e==="attributes")this.markedAttributes.add(t);else if(e==="children")this.markedChildren.add(t);else throw new w("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!ee.isAndroid)return;let e=null;const t=ee.isBlink&&!ee.isAndroid?!this.isSelecting:!0;for(const n of this.markedChildren)this._updateChildrenMappings(n);t?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=H._createBefore(e.parent)));for(const n of this.markedAttributes)this._updateAttrs(n);for(const n of this.markedChildren)this._updateChildren(n,{inlineFillerPosition:e});for(const n of this.markedTexts)!this.markedChildren.has(n.parent)&&this.domConverter.mapViewToDom(n.parent)&&this._updateText(n,{inlineFillerPosition:e});if(t)if(e){const n=this.domConverter.viewPositionToDom(e),s=n.parent.ownerDocument;St(n.parent)?this._inlineFiller=n.parent:this._inlineFiller=pd(s,n.parent,n.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const n=Array.from(t.childNodes),s=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),o=this._diffNodeLists(n,s),r=this._findUpdateActions(o,n,s,Wk);if(r.indexOf("update")!==-1){const a={equal:0,insert:0,delete:0};for(const c of r)if(c==="update"){const l=a.equal+a.insert,x=a.equal+a.delete,d=e.getChild(l);d&&!d.is("uiElement")&&!d.is("rawElement")&&this._updateElementMappings(d,n[x]),jx(s[l]),a.equal++}else a[c]++}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?H._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&qe(t.parent)&&St(t.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!St(e))throw new w("view-renderer-filler-was-lost",this);As(e)?e.remove():e.data=e.data.substr(jt),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=e.parent,n=e.offset;if(!this.domConverter.mapViewToDom(t.root)||!t.is("element")||!Uk(t)||n===t.getFillerOffset())return!1;const s=e.nodeBefore,o=e.nodeAfter;return!(s instanceof Re||o instanceof Re||ee.isAndroid&&(s||o))}_updateText(e,t){const n=this.domConverter.findCorrespondingDomText(e);let o=this.domConverter.viewToDom(e).data;const r=t.inlineFillerPosition;r&&r.parent==e.parent&&r.offset==e.index&&(o=Xs+o),wd(n,o)}_updateAttrs(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const n=Array.from(t.attributes).map(o=>o.name),s=e.getAttributeKeys();for(const o of s)this.domConverter.setDomElementAttribute(t,o,e.getAttribute(o),e);for(const o of n)e.hasAttribute(o)||this.domConverter.removeDomElementAttribute(t,o)}_updateChildren(e,t){const n=this.domConverter.mapViewToDom(e);if(!n)return;if(ee.isAndroid){let d=null;for(const u of Array.from(n.childNodes)){if(d&&qe(d)&&qe(u)){n.normalize();break}d=u}}const s=t.inlineFillerPosition,o=n.childNodes,r=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));s&&s.parent===e&&pd(n.ownerDocument,r,s.offset);const a=this._diffNodeLists(o,r),c=this._findUpdateActions(a,o,r,jk);let l=0;const x=new Set;for(const d of c)d==="delete"?(x.add(o[l]),jx(o[l])):(d==="equal"||d==="update")&&l++;l=0;for(const d of c)d==="insert"?(qm(n,l,r[l]),l++):d==="update"?(wd(o[l],r[l].data),l++):d==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(r[l])),l++);for(const d of x)d.parentNode||this.domConverter.unbindDomElement(d)}_diffNodeLists(e,t){return e=Kk(e,this._fakeSelectionContainer),Rs(e,t,qk.bind(null,this.domConverter))}_findUpdateActions(e,t,n,s){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let o=[],r=[],a=[];const c={equal:0,insert:0,delete:0};for(const l of e)l==="insert"?a.push(n[c.equal+c.insert]):l==="delete"?r.push(t[c.equal+c.delete]):(o=o.concat(Rs(r,a,s).map(x=>x==="equal"?"update":x)),o.push("equal"),r=[],a=[]),c[l]++;return o.concat(Rs(r,a,s).map(l=>l==="equal"?"update":l))}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const t of e.getChildren())this._markDescendantTextToSync(t)}}_updateSelection(){if(ee.isBlink&&!ee.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const e=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!e||(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&ee.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){const t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=Jk(t));const n=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(n,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!n.parentElement||n.parentElement!=e)&&e.appendChild(n),n.textContent=this.selection.fakeSelectionLabel||" ";const s=t.getSelection(),o=t.createRange();s.removeAllRanges(),o.selectNodeContents(n),s.addRange(o)}_updateDomSelection(e){const t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;const n=this.domConverter.viewPositionToDom(this.selection.anchor),s=this.domConverter.viewPositionToDom(this.selection.focus);t.setBaseAndExtent(n.parent,n.offset,s.parent,s.offset),ee.isGecko&&Gk(s,t)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const t=e&&this.domConverter.domSelectionToView(e);return!(t&&this.selection.isEqual(t)||!this.selection.isCollapsed&&this.selection.isSimilar(t))}_fakeSelectionNeedsUpdate(e){const t=this._fakeSelectionContainer,n=e.ownerDocument.getSelection();return!t||t.parentElement!==e||n.anchorNode!==t&&!t.contains(n.anchorNode)?!0:t.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments){const t=e.getSelection();if(t.rangeCount){const n=e.activeElement,s=this.domConverter.mapDomToView(n);n&&s&&t.removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}function Uk(i){if(i.getAttribute("contenteditable")=="false")return!1;const e=i.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||e.getAttribute("contenteditable")=="true"}function pd(i,e,t){const n=e instanceof Array?e:e.childNodes,s=n[t];if(qe(s))return s.data=Xs+s.data,s;{const o=i.createTextNode(Xs);return Array.isArray(e)?n.splice(t,0,o):qm(e,t,o),o}}function Wk(i,e){return Wn(i)&&Wn(e)&&!qe(i)&&!qe(e)&&!Bs(i)&&!Bs(e)&&i.tagName.toLowerCase()===e.tagName.toLowerCase()}function jk(i,e){return Wn(i)&&Wn(e)&&qe(i)&&qe(e)}function qk(i,e,t){return e===t?!0:qe(e)&&qe(t)?e.data===t.data:!!(i.isBlockFiller(e)&&i.isBlockFiller(t))}function Gk(i,e){const t=i.parent;if(t.nodeType!=Node.ELEMENT_NODE||i.offset!=t.childNodes.length-1)return;const n=t.childNodes[i.offset];n&&n.tagName=="BR"&&e.addRange(e.getRangeAt(0))}function Kk(i,e){const t=Array.from(i);return t.length==0||!e||t[t.length-1]==e&&t.pop(),t}function Jk(i){const e=i.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent=" ",e}function wd(i,e){const t=i.data;if(t==e)return;const n=Rh(t,e);for(const s of n)s.type==="insert"?i.insertData(s.index,s.values.join("")):i.deleteData(s.index,s.howMany)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Zk=P6(U.document),Yk=S6(U.document),Xk=I6(U.document),Fo="data-ck-unsafe-attribute-",_d="data-ck-unsafe-element";class yo{constructor(e,{blockFillerMode:t,renderingMode:n="editing"}={}){this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new Ct,this._inlineObjectElementMatcher=new Ct,this._elementsWithTemporaryCustomProperties=new Set,this.document=e,this.renderingMode=n,this.blockFillerMode=t||(n==="editing"?"br":"nbsp"),this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?U.document:U.document.implementation.createHTMLDocument("")}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new Sn(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){const t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const n of Array.from(e.children))this.unbindDomElement(n)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,n){return this.renderingMode==="data"?!0:(e=e.toLowerCase(),e.startsWith("on")||e==="srcdoc"&&t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:n==="img"&&(e==="src"||e==="srcset")||n==="source"&&e==="srcset"?!0:!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if(this.renderingMode==="data"){e.innerHTML=t;return}const n=new DOMParser().parseFromString(t,"text/html"),s=n.createDocumentFragment(),o=n.body.childNodes;for(;o.length>0;)s.appendChild(o[0]);const r=n.createTreeWalker(s,NodeFilter.SHOW_ELEMENT),a=[];let c;for(;c=r.nextNode();)a.push(c);for(const l of a){for(const d of l.getAttributeNames())this.setDomElementAttribute(l,d,l.getAttribute(d));const x=l.tagName.toLowerCase();this._shouldRenameElement(x)&&(yd(x),l.replaceWith(this._createReplacementDomElement(x,l)))}for(;e.firstChild;)e.firstChild.remove();e.append(s)}viewToDom(e,t={}){if(e.is("$text")){const n=this._processDataFromViewText(e);return this._domDocument.createTextNode(n)}else{const n=e;if(this.mapViewToDom(n))if(n.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(n);else return this.mapViewToDom(n);let s;if(n.is("documentFragment"))s=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(s,n);else{if(n.is("uiElement"))return n.name==="$comment"?s=this._domDocument.createComment(n.getCustomProperty("$rawContent")):s=n.render(this._domDocument,this),t.bind&&this.bindElements(s,n),s;this._shouldRenameElement(n.name)?(yd(n.name),s=this._createReplacementDomElement(n.name)):n.hasAttribute("xmlns")?s=this._domDocument.createElementNS(n.getAttribute("xmlns"),n.name):s=this._domDocument.createElement(n.name),n.is("rawElement")&&n.render(s,this),t.bind&&this.bindElements(s,n);for(const o of n.getAttributeKeys())this.setDomElementAttribute(s,o,n.getAttribute(o),n)}if(t.withChildren!==!1)for(const o of this.viewChildrenToDom(n,t))s.appendChild(o);return s}}setDomElementAttribute(e,t,n,s){const o=this.shouldRenderAttribute(t,n,e.tagName.toLowerCase())||s&&s.shouldRenderUnsafeAttribute(t);if(o||be("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:n}),!Gm(t)){be("domconverter-invalid-attribute-detected",{domElement:e,key:t,value:n});return}e.hasAttribute(t)&&!o?e.removeAttribute(t):e.hasAttribute(Fo+t)&&o&&e.removeAttribute(Fo+t),e.setAttribute(o?t:Fo+t,n)}removeDomElementAttribute(e,t){t!=_d&&(e.removeAttribute(t),e.removeAttribute(Fo+t))}*viewChildrenToDom(e,t={}){const n=e.getFillerOffset&&e.getFillerOffset();let s=0;for(const o of e.getChildren()){n===s&&(yield this._getBlockFiller());const r=o.is("element")&&!!o.getCustomProperty("dataPipeline:transparentRendering")&&!Be(o.getAttributes());r&&this.renderingMode=="data"?yield*this.viewChildrenToDom(o,t):(r&&be("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:o}),yield this.viewToDom(o,t)),s++}n===s&&(yield this._getBlockFiller())}viewRangeToDom(e){const t=this.viewPositionToDom(e.start),n=this.viewPositionToDom(e.end),s=this._domDocument.createRange();return s.setStart(t.parent,t.offset),s.setEnd(n.parent,n.offset),s}viewPositionToDom(e){const t=e.parent;if(t.is("$text")){const n=this.findCorrespondingDomText(t);if(!n)return null;let s=e.offset;return St(n)&&(s+=jt),{parent:n,offset:s}}else{let n,s,o;if(e.offset===0){if(n=this.mapViewToDom(t),!n)return null;o=n.childNodes[0]}else{const a=e.nodeBefore;if(s=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!s)return null;n=s.parentNode,o=s.nextSibling}if(qe(o)&&St(o))return{parent:o,offset:jt};const r=s?Lo(s)+1:0;return{parent:n,offset:r}}}domToView(e,t={}){const n=[],s=this._domToView(e,t,n),o=s.next().value;return!o||(s.next(),this._processDomInlineNodes(null,n,t),o.is("$text")&&o.data.length==0)?null:o}*domChildrenToView(e,t={},n=[]){for(let s=0;s<e.childNodes.length;s++){const o=e.childNodes[s],r=this._domToView(o,t,n),a=r.next().value;a!==null&&(this._isBlockViewElement(a)&&this._processDomInlineNodes(e,n,t),yield a,r.next())}this._processDomInlineNodes(e,n,t)}domSelectionToView(e){if(tT(e))return new Sn([]);if(e.rangeCount===1){let s=e.getRangeAt(0).startContainer;qe(s)&&(s=s.parentNode);const o=this.fakeSelectionToView(s);if(o)return o}const t=this.isDomSelectionBackward(e),n=[];for(let s=0;s<e.rangeCount;s++){const o=e.getRangeAt(s),r=this.domRangeToView(o);r&&n.push(r)}return new Sn(n,{backward:t})}domRangeToView(e){const t=this.domPositionToView(e.startContainer,e.startOffset),n=this.domPositionToView(e.endContainer,e.endOffset);return t&&n?new re(t,n):null}domPositionToView(e,t=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,Lo(e));const n=this.mapDomToView(e);if(n&&(n.is("uiElement")||n.is("rawElement")))return H._createBefore(n);if(qe(e)){if(As(e))return this.domPositionToView(e.parentNode,Lo(e));const s=this.findCorrespondingViewText(e);let o=t;return s?(St(e)&&(o-=jt,o=o<0?0:o),new H(s,o)):null}else{if(t===0){const s=this.mapDomToView(e);if(s)return new H(s,0)}else{const s=e.childNodes[t-1];if(qe(s)&&As(s)||s&&this.isBlockFiller(s))return this.domPositionToView(s.parentNode,Lo(s));const o=qe(s)?this.findCorrespondingViewText(s):this.mapDomToView(s);if(o&&o.parent)return new H(o.parent,o.index+1)}return null}}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(As(e))return null;const t=this.getHostViewElement(e);if(t)return t;const n=e.previousSibling;if(n){if(!this.isElement(n))return null;const s=this.mapDomToView(n);if(s){const o=s.nextSibling;return o instanceof Re?o:null}}else{const s=this.mapDomToView(e.parentNode);if(s){const o=s.getChild(0);return o instanceof Re?o:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){const t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){const{scrollX:n,scrollY:s}=U.window,o=[];vd(t,r=>{const{scrollLeft:a,scrollTop:c}=r;o.push([a,c])}),t.focus(),vd(t,r=>{const[a,c]=o.shift();r.scrollLeft=a,r.scrollTop=c}),U.window.scrollTo(n,s)}}_clearDomSelection(){const e=this.mapViewToDom(this.document.selection.editableElement);if(!e)return;const t=e.ownerDocument.defaultView.getSelection(),n=this.domSelectionToView(t);n&&n.rangeCount>0&&t.removeAllRanges()}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(Zk):e.tagName==="BR"&&R6(e,this.blockElements)&&e.parentNode.childNodes.length===1?!0:e.isEqualNode(Xk)||eT(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const t=this._domDocument.createRange();try{t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset)}catch{return!1}const n=t.collapsed;return t.detach(),n}getHostViewElement(e){const t=Xy(e);for(t.pop();t.length;){const n=t.pop(),s=this._domToViewMapping.get(n);if(s&&(s.is("uiElement")||s.is("rawElement")))return s}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}registerInlineObjectMatcher(e){this._inlineObjectElementMatcher.add(e)}_clearTemporaryCustomProperties(){for(const e of this._elementsWithTemporaryCustomProperties)e._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return S6(this._domDocument);case"markedNbsp":return I6(this._domDocument);case"br":return P6(this._domDocument)}}_isDomSelectionPositionCorrect(e,t){if(qe(e)&&St(e)&&t<jt||this.isElement(e)&&St(e.childNodes[t]))return!1;const n=this.mapDomToView(e);return!(n&&(n.is("uiElement")||n.is("rawElement")))}*_domToView(e,t,n){if(this.isBlockFiller(e))return null;const s=this.getHostViewElement(e);if(s)return s;if(Bs(e)&&t.skipComments)return null;if(qe(e)){if(As(e))return null;{const o=e.data;if(o==="")return null;const r=new Re(this.document,o);return n.push(r),r}}else{let o=this.mapDomToView(e);if(o)return this._isInlineObjectElement(o)&&n.push(o),o;if(this.isDocumentFragment(e))o=new ci(this.document),t.bind&&this.bindDocumentFragments(e,o);else{o=this._createViewElement(e,t),t.bind&&this.bindElements(e,o);const a=e.attributes;if(a)for(let c=a.length,l=0;l<c;l++)o._setAttribute(a[l].name,a[l].value);if(this._isViewElementWithRawContent(o,t))return o._setCustomProperty("$rawContent",e.innerHTML),this._isBlockViewElement(o)||n.push(o),o;if(Bs(e))return o._setCustomProperty("$rawContent",e.data),o}yield o;const r=[];if(t.withChildren!==!1)for(const a of this.domChildrenToView(e,t,r))o._appendChild(a);if(this._isInlineObjectElement(o))n.push(o);else for(const a of r)n.push(a)}}_processDomInlineNodes(e,t,n){if(!t.length||e&&!this.isDocumentFragment(e)&&!this._isBlockDomElement(e))return;let s=!1;for(let o=0;o<t.length;o++){const r=t[o];if(!r.is("$text")){s=!1;continue}let a,c=!1;if(Qk(r,this.preElements))a=bd(r.data);else{a=r.data.replace(/[ \n\t\r]{1,}/g," "),c=/[^\S\u00A0]/.test(a.charAt(a.length-1));const l=o>0?t[o-1]:null,x=o+1<t.length?t[o+1]:null,d=!l||l.is("element")&&l.name=="br"||s,u=x?!1:!St(r.data);n.withChildren!==!1&&(d&&(a=a.replace(/^ /,"")),u&&(a=a.replace(/ $/,""))),a=bd(a),a=a.replace(/ \u00A0/g,"  ");const f=x&&x.is("element")&&x.name!="br",m=x&&x.is("$text")&&x.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!x||f||m)&&(a=a.replace(/\u00A0$/," ")),(d||l&&l.is("element")&&l.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&r.parent?(r._remove(),t.splice(o,1),o--):(r._data=a,s=c)}t.length=0}_processDataFromViewText(e){let t=e.data;if(e.getAncestors().some(n=>this.preElements.includes(n.name)))return t;if(t.charAt(0)==" "){const n=this._getTouchingInlineViewNode(e,!1);(n&&n.is("$textProxy")&&this._nodeEndsWithSpace(n)||!n)&&(t=" "+t.substr(1))}if(t.charAt(t.length-1)==" "){const n=this._getTouchingInlineViewNode(e,!0),s=n&&n.is("$textProxy")&&n.data.charAt(0)==" ";(t.charAt(t.length-2)==" "||!n||s)&&(t=t.substr(0,t.length-1)+" ")}return t.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(e){if(e.getAncestors().some(n=>this.preElements.includes(n.name)))return!1;const t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" "}_getTouchingInlineViewNode(e,t){const n=new ri({startPosition:t?H._createAfter(e):H._createBefore(e),direction:t?"forward":"backward"});for(const s of n){if(s.item.is("element","br"))return null;if(this._isInlineObjectElement(s.item))return s.item;if(s.item.is("containerElement"))return null;if(s.item.is("$textProxy"))return s.item}return null}_isBlockDomElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isBlockViewElement(e){return e.is("element")&&this.blockElements.includes(e.name)}_isInlineObjectElement(e){return e.is("element")?e.name=="br"||this.inlineObjectElements.includes(e.name)||!!this._inlineObjectElementMatcher.match(e):!1}_createViewElement(e,t){if(Bs(e))return new sa(this.document,"$comment");const n=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new Kt(this.document,n)}_isViewElementWithRawContent(e,t){return t.withChildren!==!1&&e.is("element")&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){const t=e.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(e,t){const n=this._domDocument.createElement("span");if(n.setAttribute(_d,e),t){for(;t.firstChild;)n.appendChild(t.firstChild);for(const s of t.getAttributeNames())n.setAttribute(s,t.getAttribute(s))}return n}}function Qk(i,e){return i.getAncestors().some(t=>t.is("element")&&e.includes(t.name))}function vd(i,e){let t=i;for(;t;)e(t),t=t.parentElement}function eT(i,e){return i.isEqualNode(Yk)&&R6(i,e)&&i.parentNode.childNodes.length===1}function R6(i,e){const t=i.parentNode;return!!t&&!!t.tagName&&e.includes(t.tagName.toLowerCase())}function yd(i){i==="script"&&be("domconverter-unsafe-script-element-detected"),i==="style"&&be("domconverter-unsafe-style-element-detected")}function tT(i){if(!ee.isGecko||!i.rangeCount)return!1;const e=i.getRangeAt(0).startContainer;try{Object.prototype.toString.call(e)}catch{return!0}return!1}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gn extends bt(){constructor(e){super(),this._isEnabled=!1,this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class es{constructor(e,t,n){this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,Jh(this,n)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Jn extends gn{constructor(){super(...arguments),this.useCapture=!1}observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(n=>{this.listenTo(e,n,(s,o)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(o.target)&&this.onDomEvent(o)},{useCapture:this.useCapture})})}stopObserving(e){this.stopListening(e)}fire(e,t,n){this.isEnabled&&this.document.fire(e,new es(this.view,t,n))}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nT extends Jn{constructor(){super(...arguments),this.domEventType=["keydown","keyup"]}onDomEvent(e){const t={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return Yi(this)}};this.fire(e.type,e,t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iT extends gn{constructor(e){super(e),this._fireSelectionChangeDoneDebounced=un(t=>{this.document.fire("selectionChangeDone",t)},200)}observe(){const e=this.document;e.on("arrowKey",(t,n)=>{e.selection.isFake&&this.isEnabled&&n.preventDefault()},{context:"$capture"}),e.on("arrowKey",(t,n)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(n.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const t=this.document.selection,n=new Sn(t.getRanges(),{backward:t.isBackward,fake:!1});(e==se.arrowleft||e==se.arrowup)&&n.setTo(n.getFirstPosition()),(e==se.arrowright||e==se.arrowdown)&&n.setTo(n.getLastPosition());const s={oldSelection:t,newSelection:n,domSelection:null};this.document.fire("selectionChange",s),this._fireSelectionChangeDoneDebounced(s)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class V6 extends gn{constructor(e){super(e),this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this.renderer=e._renderer,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const t=this.domConverter,n=new Set,s=new Set;for(const r of e){const a=t.mapDomToView(r.target);a&&(a.is("uiElement")||a.is("rawElement")||r.type==="childList"&&!this._isBogusBrMutation(r)&&s.add(a))}for(const r of e){const a=t.mapDomToView(r.target);if(!(a&&(a.is("uiElement")||a.is("rawElement")))&&r.type==="characterData"){const c=t.findCorrespondingViewText(r.target);c&&!s.has(c.parent)?n.add(c):!c&&St(r.target)&&s.add(t.mapDomToView(r.target.parentNode))}}let o=!1;for(const r of n)o=!0,this.renderer.markToSync("text",r);for(const r of s){const a=t.mapViewToDom(r),c=Array.from(r.getChildren()),l=Array.from(t.domChildrenToView(a,{withChildren:!1}));Ay(c,l,sT)||(o=!0,this.renderer.markToSync("children",r))}o&&this.view.forceRender()}_isBogusBrMutation(e){let t=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}}function sT(i,e){if(!Array.isArray(i))return i===e?!0:i.is("$text")&&e.is("$text")?i.data===e.data:!1}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rr extends Jn{constructor(e){super(e),this._isFocusChanging=!1,this.domEventType=["focus","blur"],this.useCapture=!0;const t=this.document;t.on("focus",()=>{this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this.flush(),e.change(()=>{})},50)}),t.on("blur",(n,s)=>{const o=t.selection.editableElement;(o===null||o===s.target)&&(t.isFocused=!1,this._isFocusChanging=!1,e.change(()=>{}))})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oT extends gn{constructor(e){super(e),this.mutationObserver=e.getObserver(V6),this.focusObserver=e.getObserver(Rr),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=un(t=>{this.document.fire("selectionChangeDone",t)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=un(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(e){const t=e.ownerDocument,n=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},s=()=>{this.document.isSelecting&&(this._handleSelectionChange(null,t),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",n,{priority:"highest"}),this.listenTo(e,"keydown",s,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",s,{priority:"highest",useCapture:!0}),!this._documents.has(t)&&(this.listenTo(t,"mouseup",s,{priority:"highest",useCapture:!0}),this.listenTo(t,"selectionchange",(o,r)=>{this.document.isComposing&&!ee.isAndroid||(this._handleSelectionChange(r,t),this._documentIsSelectingInactivityTimeoutDebounced())}),this._documents.add(t))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e,t){if(!this.isEnabled)return;const n=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(n.anchorNode))return;this.mutationObserver.flush();const s=this.domConverter.domSelectionToView(n);if(s.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(s)&&this.domConverter.isDomSelectionCorrect(n))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(s))this.view.forceRender();else{const o={oldSelection:this.selection,newSelection:s,domSelection:n};this.document.fire("selectionChange",o),this._fireSelectionChangeDoneDebounced(o)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rT extends Jn{constructor(e){super(e),this.domEventType=["compositionstart","compositionupdate","compositionend"];const t=this.document;t.on("compositionstart",()=>{t.isComposing=!0},{priority:"low"}),t.on("compositionend",()=>{t.isComposing=!1},{priority:"low"})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class B6{constructor(e,t={}){this._files=t.cacheFiles?Cd(e):null,this._native=e}get files(){return this._files||(this._files=Cd(this._native)),this._files}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}setDragImage(e,t,n){this._native.setDragImage(e,t,n)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function Cd(i){const e=Array.from(i.files||[]),t=Array.from(i.items||[]);return e.length?e:t.filter(n=>n.kind==="file").map(n=>n.getAsFile())}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class aT extends Jn{constructor(){super(...arguments),this.domEventType="beforeinput"}onDomEvent(e){const t=e.getTargetRanges(),n=this.view,s=n.document;let o=null,r=null,a=[];if(e.dataTransfer&&(o=new B6(e.dataTransfer)),e.data!==null?r=e.data:o&&(r=o.getData("text/plain")),s.selection.isFake)a=Array.from(s.selection.getRanges());else if(t.length)a=t.map(c=>{const l=n.domConverter.domPositionToView(c.startContainer,c.startOffset),x=n.domConverter.domPositionToView(c.endContainer,c.endOffset);if(l)return n.createRange(l,x);if(x)return n.createRange(x)}).filter(c=>!!c);else if(ee.isAndroid){const c=e.target.ownerDocument.defaultView.getSelection();a=Array.from(n.domConverter.domSelectionToView(c).getRanges())}if(ee.isAndroid&&e.inputType=="insertCompositionText"&&r&&r.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[n.createRange(a[0].end)]});return}if(e.inputType=="insertText"&&r&&r.includes(`
`)){const c=r.split(/\n{1,2}/g);let l=a;for(let x=0;x<c.length;x++){const d=c[x];d!=""&&(this.fire(e.type,e,{data:d,dataTransfer:o,targetRanges:l,inputType:e.inputType,isComposing:e.isComposing}),l=[s.selection.getFirstRange()]),x+1<c.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:l}),l=[s.selection.getFirstRange()])}return}this.fire(e.type,e,{data:r,dataTransfer:o,targetRanges:a,inputType:e.inputType,isComposing:e.isComposing})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cT extends gn{constructor(e){super(e),this.document.on("keydown",(t,n)=>{if(this.isEnabled&&xC(n.keyCode)){const s=new us(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(s,n),s.stop.called&&t.stop()}})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lT extends gn{constructor(e){super(e);const t=this.document;t.on("keydown",(n,s)=>{if(!this.isEnabled||s.keyCode!=se.tab||s.ctrlKey)return;const o=new us(t,"tab",t.selection.getFirstRange());t.fire(o,s),o.stop.called&&n.stop()})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xT extends ue(){constructor(e){super(),this.domRoots=new Map,this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this.document=new vo(e),this.domConverter=new yo(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new $k(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new A6(this.document),this.addObserver(V6),this.addObserver(Rr),this.addObserver(oT),this.addObserver(nT),this.addObserver(iT),this.addObserver(rT),this.addObserver(cT),this.addObserver(aT),this.addObserver(lT),zk(this),Vk(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),ee.isiOS&&this.listenTo(this.document,"blur",(t,n)=>{this.domConverter.mapDomToView(n.domEvent.relatedTarget)||this.domConverter._clearDomSelection()})}attachDomRoot(e,t="main"){const n=this.document.getRoot(t);n._name=e.tagName.toLowerCase();const s={};for(const{name:r,value:a}of Array.from(e.attributes))s[r]=a,r==="class"?this._writer.addClass(a.split(" "),n):this._writer.setAttribute(r,a,n);this._initialDomRootAttributes.set(e,s);const o=()=>{this._writer.setAttribute("contenteditable",(!n.isReadOnly).toString(),n),n.isReadOnly?this._writer.addClass("ck-read-only",n):this._writer.removeClass("ck-read-only",n)};o(),this.domRoots.set(t,e),this.domConverter.bindElements(e,n),this._renderer.markToSync("children",n),this._renderer.markToSync("attributes",n),this._renderer.domDocuments.add(e.ownerDocument),n.on("change:children",(r,a)=>this._renderer.markToSync("children",a)),n.on("change:attributes",(r,a)=>this._renderer.markToSync("attributes",a)),n.on("change:text",(r,a)=>this._renderer.markToSync("text",a)),n.on("change:isReadOnly",()=>this.change(o)),n.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const r of this._observers.values())r.observe(e,t)}detachDomRoot(e){const t=this.domRoots.get(e);Array.from(t.attributes).forEach(({name:s})=>t.removeAttribute(s));const n=this._initialDomRootAttributes.get(t);for(const s in n)t.setAttribute(s,n[s]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t);for(const s of this._observers.values())s.stopObserving(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(const[n,s]of this.domRoots)t.observe(s,n);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:t,viewportOffset:n=20,ancestorOffset:s=20}={}){const o=this.document.selection.getFirstRange();if(!o)return;const r=Ln({alignToTop:e,forceScroll:t,viewportOffset:n,ancestorOffset:s});typeof n=="number"&&(n={top:n,bottom:n,left:n,right:n});const a={target:this.domConverter.viewRangeToDom(o),viewportOffset:n,ancestorOffset:s,alignToTop:e,forceScroll:t};this.fire("scrollToTheSelection",a,r),Jm(a)}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new w("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(t){/* istanbul ignore next -- @preserve */w.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(Rr).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return H._createAt(e,t)}createPositionAfter(e){return H._createAfter(e)}createPositionBefore(e){return H._createBefore(e)}createRange(e,t){return new re(e,t)}createRangeOn(e){return re._createOn(e)}createRangeIn(e){return re._createIn(e)}createSelection(...e){return new Sn(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zn{is(){throw new Error("is() method is abstract")}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Ci=class extends Zn{constructor(e){super(),this.parent=null,this._attrs=Gt(e)}get document(){return null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))===null)throw new w("model-node-not-found-in-parent",this);return e}get startOffset(){let e;if(!this.parent)return null;if((e=this.parent.getChildStartOffset(this))===null)throw new w("model-node-not-found-in-parent",this);return e}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={}){const t=[];let n=e.includeSelf?this:this.parent;for(;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}getCommonAncestor(e,t={}){const n=this.getAncestors(t),s=e.getAncestors(t);let o=0;for(;n[o]==s[o]&&n[o];)o++;return o===0?null:n[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),n=e.getPath(),s=xt(t,n);switch(s){case"prefix":return!0;case"extension":return!1;default:return t[s]<n[s]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((t,n)=>(t[n[0]]=n[1],t),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=Gt(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};Ci.prototype.is=function(i){return i==="node"||i==="model:node"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Os{constructor(e){this._nodes=[],e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((e,t)=>e+t.offsetSize,0)}getNode(e){return this._nodes[e]||null}getNodeIndex(e){const t=this._nodes.indexOf(e);return t==-1?null:t}getNodeStartOffset(e){const t=this.getNodeIndex(e);return t===null?null:this._nodes.slice(0,t).reduce((n,s)=>n+s.offsetSize,0)}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;const t=this._nodes[e];if(!t)throw new w("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){let t=0;for(const n of this._nodes){if(e>=t&&e<t+n.offsetSize)return this.getNodeIndex(n);t+=n.offsetSize}if(t!=e)throw new w("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length}_insertNodes(e,t){for(const n of t)if(!(n instanceof Ci))throw new w("model-nodelist-insertnodes-not-node",this);this._nodes=CC(this._nodes,Array.from(t),e,0)}_removeNodes(e,t=1){return this._nodes.splice(e,t)}toJSON(){return this._nodes.map(e=>e.toJSON())}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _e extends Ci{constructor(e,t){super(t),this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new _e(this.data,this.getAttributes())}static fromJSON(e){return new _e(e.data,e.attributes)}}_e.prototype.is=function(i){return i==="$text"||i==="model:$text"||i==="text"||i==="model:text"||i==="node"||i==="model:node"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qt extends Zn{constructor(e,t,n){if(super(),this.textNode=e,t<0||t>e.offsetSize)throw new w("model-textproxy-wrong-offsetintext",this);if(n<0||t+n>e.offsetSize)throw new w("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+n),this.offsetInText=t}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const t=[];let n=e.includeSelf?this:this.parent;for(;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}qt.prototype.is=function(i){return i==="$textProxy"||i==="model:$textProxy"||i==="textProxy"||i==="model:textProxy"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class he extends Ci{constructor(e,t,n){super(t),this._children=new Os,this.name=e,n&&this._insertChild(0,n)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(const n of e)t=t.getChild(t.offsetToIndex(n));return t}findAncestor(e,t={}){let n=t.includeSelf?this:this.parent;for(;n;){if(n.name===e)return n;n=n.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){const t=e?Array.from(this._children).map(n=>n._clone(!0)):void 0;return new he(this.name,this.getAttributes(),t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const n=dT(t);for(const s of n)s.parent!==null&&s._remove(),s.parent=this;this._children._insertNodes(e,n)}_removeChildren(e,t=1){const n=this._children._removeNodes(e,t);for(const s of n)s.parent=null;return n}static fromJSON(e){let t;if(e.children){t=[];for(const n of e.children)n.name?t.push(he.fromJSON(n)):t.push(_e.fromJSON(n))}return new he(e.name,e.attributes,t)}}he.prototype.is=function(i,e){return e?e===this.name&&(i==="element"||i==="model:element"):i==="element"||i==="model:element"||i==="node"||i==="model:node"};function dT(i){return typeof i=="string"?[new _e(i)]:(Bt(i)||(i=[i]),Array.from(i).map(e=>typeof e=="string"?new _e(e):e instanceof qt?new _e(e.data,e.getAttributes()):e))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class An{constructor(e){if(!e||!e.boundaries&&!e.startPosition)throw new w("model-tree-walker-no-start-position",null);const t=e.direction||"forward";if(t!="forward"&&t!="backward")throw new w("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this._position=e.startPosition.clone():this._position=L._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,n,s,o;do s=this.position,o=this._visitedParent,{done:t,value:n}=this.next();while(!t&&e(n));t||(this._position=s,this._visitedParent=o)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const e=this.position,t=this.position.clone(),n=this._visitedParent;if(n.parent===null&&t.offset===n.maxOffset)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const s=Ls(t,n),o=s||O6(t,n,s);if(o instanceof he){if(!this.shallow)t.path.push(0),this._visitedParent=o;else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,Qn("elementStart",o,e,t,1)}if(o instanceof _e){let r;if(this.singleCharacters)r=1;else{let l=o.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<l&&(l=this.boundaries.end.offset),r=l-t.offset}const a=t.offset-o.startOffset,c=new qt(o,a,r);return t.offset+=r,this._position=t,Qn("text",c,e,t,r)}return t.path.pop(),t.offset++,this._position=t,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():Qn("elementEnd",n,e,t)}_previous(){const e=this.position,t=this.position.clone(),n=this._visitedParent;if(n.parent===null&&t.offset===0)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const s=t.parent,o=Ls(t,s),r=o||L6(t,s,o);if(r instanceof he)return t.offset--,this.shallow?(this._position=t,Qn("elementStart",r,e,t,1)):(t.path.push(r.maxOffset),this._position=t,this._visitedParent=r,this.ignoreElementEnd?this._previous():Qn("elementEnd",r,e,t));if(r instanceof _e){let a;if(this.singleCharacters)a=1;else{let x=r.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>x&&(x=this.boundaries.start.offset),a=t.offset-x}const c=t.offset-r.startOffset,l=new qt(r,c-a,a);return t.offset-=a,this._position=t,Qn("text",l,e,t,a)}return t.path.pop(),this._position=t,this._visitedParent=n.parent,Qn("elementStart",n,e,t,1)}}function Qn(i,e,t,n,s){return{done:!1,value:{type:i,item:e,previousPosition:t,nextPosition:n,length:s}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class L extends Zn{constructor(e,t,n="toNone"){if(super(),!e.is("element")&&!e.is("documentFragment"))throw new w("model-position-root-invalid",e);if(!(t instanceof Array)||t.length===0)throw new w("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=n}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChild(e.offsetToIndex(this.path[t])),!e)throw new w("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new w("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Ls(this,this.parent)}get nodeAfter(){const e=this.parent;return O6(this,e,Ls(this,e))}get nodeBefore(){const e=this.parent;return L6(this,e,Ls(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const t=xt(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;const n=new An(t);return n.skip(e),n.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const t=xt(this.path,e.path),n=typeof t=="string"?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,n)}getCommonAncestor(e){const t=this.getAncestors(),n=e.getAncestors();let s=0;for(;t[s]==n[s]&&t[s];)s++;return s===0?null:t[s-1]}getShiftedBy(e){const t=this.clone(),n=t.offset+e;return t.offset=n<0?0:n,t}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const t=Math.min(this.path.length,e.path.length);for(let n=0;n<t;n++){const s=this.path[n]-e.path[n];if(s<-1||s>1)return!1;if(s===1)return kd(e,this,n);if(s===-1)return kd(this,e,n)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?W0(this.path,t):W0(e.path,t)}hasSameParentAs(e){if(this.root!==e.root)return!1;const t=this.getParentPath(),n=e.getParentPath();return xt(t,n)=="same"}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=L._createAt(this);break}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const t=e.movedRange,n=t.containsPosition(this)||t.start.isEqual(this);let s;return n?(s=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(s=s._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?s=L._createAt(e.deletionPosition):s=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),s}_getTransformedByDeletion(e,t){const n=L._createAt(this);if(this.root!=e.root)return n;if(xt(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;n.offset-=t}}else if(xt(e.getParentPath(),this.getParentPath())=="prefix"){const s=e.path.length-1;if(e.offset<=this.path[s]){if(e.offset+t>this.path[s])return null;n.path[s]-=t}}return n}_getTransformedByInsertion(e,t){const n=L._createAt(this);if(this.root!=e.root)return n;if(xt(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(n.offset+=t);else if(xt(e.getParentPath(),this.getParentPath())=="prefix"){const s=e.path.length-1;e.offset<=this.path[s]&&(n.path[s]+=t)}return n}_getTransformedByMove(e,t,n){if(t=t._getTransformedByDeletion(e,n),e.isEqual(t))return L._createAt(this);const s=this._getTransformedByDeletion(e,n);return s===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(n).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,t):s._getTransformedByInsertion(t,n)}_getCombined(e,t){const n=e.path.length-1,s=L._createAt(t);return s.stickiness=this.stickiness,s.offset=s.offset+this.path[n]-e.offset,s.path=[...s.path,...this.path.slice(n+1)],s}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,n="toNone"){if(e instanceof L)return new L(e.root,e.path,e.stickiness);{const s=e;if(t=="end")t=s.maxOffset;else{if(t=="before")return this._createBefore(s,n);if(t=="after")return this._createAfter(s,n);if(t!==0&&!t)throw new w("model-createpositionat-offset-required",[this,e])}if(!s.is("element")&&!s.is("documentFragment"))throw new w("model-position-parent-incorrect",[this,e]);const o=s.getPath();return o.push(t),new this(s.root,o,n)}}static _createAfter(e,t){if(!e.parent)throw new w("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}static _createBefore(e,t){if(!e.parent)throw new w("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}static fromJSON(e,t){if(e.root==="$graveyard"){const n=new L(t.graveyard,e.path);return n.stickiness=e.stickiness,n}if(!t.getRoot(e.root))throw new w("model-position-fromjson-no-root",t,{rootName:e.root});return new L(t.getRoot(e.root),e.path,e.stickiness)}}L.prototype.is=function(i){return i==="position"||i==="model:position"};function Ls(i,e){const t=e.getChild(e.offsetToIndex(i.offset));return t&&t.is("$text")&&t.startOffset<i.offset?t:null}function O6(i,e,t){return t!==null?null:e.getChild(e.offsetToIndex(i.offset))}function L6(i,e,t){return t!==null?null:e.getChild(e.offsetToIndex(i.offset)-1)}function kd(i,e,t){return!(t+1===i.path.length||!W0(e.path,t+1)||!uT(i,t+1))}function W0(i,e){for(;e<i.length;){if(i[e]!==0)return!1;e++}return!0}function uT(i,e){let t=i.parent,n=i.path.length-1,s=0;for(;n>=e;){if(i.path[n]+s!==t.maxOffset)return!1;s=1,n--,t=t.parent}return!0}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class S extends Zn{constructor(e,t){super(),this.start=L._createAt(e),this.end=t?L._createAt(t):L._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new An({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),t=this.end.getParentPath();return xt(e,t)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const n=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),s=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return n&&s}containsItem(e){const t=L._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new S(this.start,e.start)),this.containsPosition(e.end)&&t.push(new S(e.end,this.end))):t.push(new S(this.start,this.end)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,n=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(n=e.end),new S(t,n)}return null}getJoined(e,t=!1){let n=this.isIntersecting(e);if(n||(this.start.isBefore(e.start)?n=t?this.end.isTouching(e.start):this.end.isEqual(e.start):n=t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!n)return null;let s=this.start,o=this.end;return e.start.isBefore(s)&&(s=e.start),e.end.isAfter(o)&&(o=e.end),new S(s,o)}getMinimalFlatRanges(){const e=[],t=this.start.getCommonPath(this.end).length,n=L._createAt(this.start);let s=n.parent;for(;n.path.length>t+1;){const o=s.maxOffset-n.offset;o!==0&&e.push(new S(n,n.getShiftedBy(o))),n.path=n.path.slice(0,-1),n.offset++,s=s.parent}for(;n.path.length<=this.end.path.length;){const o=this.end.path[n.path.length-1],r=o-n.offset;r!==0&&e.push(new S(n,n.getShiftedBy(r))),n.offset=o,n.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new An(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new An(e);for(const n of t)yield n.item}*getPositions(e={}){e.boundaries=this;const t=new An(e);yield t.position;for(const n of t)yield n.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new S(this.start,this.end)]}getTransformedByOperations(e){const t=[new S(this.start,this.end)];for(const n of e)for(let s=0;s<t.length;s++){const o=t[s].getTransformedByOperation(n);t.splice(s,1,...o),s+=o.length-1}for(let n=0;n<t.length;n++){const s=t[n];for(let o=n+1;o<t.length;o++){const r=t[o];(s.containsRange(r)||r.containsRange(s)||s.isEqual(r))&&t.splice(o,1)}}return t}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){const n=e.sourcePosition,s=e.howMany,o=e.targetPosition;return this._getTransformedByMove(n,o,s,t)}_getTransformedBySplitOperation(e){const t=this.start._getTransformedBySplitOperation(e);let n=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(n=this.end.getShiftedBy(1)),t.root!=n.root&&(n=this.end.getShiftedBy(-1)),new S(t,n)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new S(this.start);let t=this.start._getTransformedByMergeOperation(e),n=this.end._getTransformedByMergeOperation(e);return t.root!=n.root&&(n=this.end.getShiftedBy(-1)),t.isAfter(n)?(e.sourcePosition.isBefore(e.targetPosition)?(t=L._createAt(n),t.offset=0):(e.deletionPosition.isEqual(t)||(n=e.deletionPosition),t=e.targetPosition),new S(t,n)):new S(t,n)}_getTransformedByInsertion(e,t,n=!1){if(n&&this.containsPosition(e))return[new S(this.start,e),new S(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{const s=new S(this.start,this.end);return s.start=s.start._getTransformedByInsertion(e,t),s.end=s.end._getTransformedByInsertion(e,t),[s]}}_getTransformedByMove(e,t,n,s=!1){if(this.isCollapsed){const d=this.start._getTransformedByMove(e,t,n);return[new S(d)]}const o=S._createFromPositionAndShift(e,n),r=t._getTransformedByDeletion(e,n);if(this.containsPosition(t)&&!s&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const d=this.start._getTransformedByMove(e,t,n),u=this.end._getTransformedByMove(e,t,n);return[new S(d,u)]}let a;const c=this.getDifference(o);let l=null;const x=this.getIntersection(o);if(c.length==1?l=new S(c[0].start._getTransformedByDeletion(e,n),c[0].end._getTransformedByDeletion(e,n)):c.length==2&&(l=new S(this.start,this.end._getTransformedByDeletion(e,n))),l?a=l._getTransformedByInsertion(r,n,x!==null||s):a=[],x){const d=new S(x.start._getCombined(o.start,r),x.end._getCombined(o.start,r));a.length==2?a.splice(1,0,d):a.push(d)}return a}_getTransformedByDeletion(e,t){let n=this.start._getTransformedByDeletion(e,t),s=this.end._getTransformedByDeletion(e,t);return n==null&&s==null?null:(n==null&&(n=e),s==null&&(s=e),new S(n,s))}static _createFromPositionAndShift(e,t){const n=e,s=e.getShiftedBy(t);return t>0?new this(n,s):new this(s,n)}static _createIn(e){return new this(L._createAt(e,0),L._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(L._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new w("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const t=e[0];e.sort((o,r)=>o.start.isAfter(r.start)?1:-1);const n=e.indexOf(t),s=new this(t.start,t.end);if(n>0)for(let o=n-1;e[o].end.isEqual(s.start);o++)s.start=L._createAt(e[o].start);for(let o=n+1;o<e.length&&e[o].start.isEqual(s.end);o++)s.end=L._createAt(e[o].end);return s}static fromJSON(e,t){return new this(L.fromJSON(e.start,t),L.fromJSON(e.end,t))}}S.prototype.is=function(i){return i==="range"||i==="model:range"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class M6 extends ye(){constructor(){super(),this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._deferredBindingRemovals=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",(e,t)=>{if(t.viewPosition)return;const n=this._modelToViewMapping.get(t.modelPosition.parent);if(!n)throw new w("mapping-model-position-view-parent-not-found",this,{modelPosition:t.modelPosition});t.viewPosition=this.findPositionIn(n,t.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,t)=>{if(t.modelPosition)return;const n=this.findMappedViewAncestor(t.viewPosition),s=this._viewToModelMapping.get(n),o=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,n);t.modelPosition=L._createAt(s,o)},{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e,t={}){const n=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const s of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(s);t.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e),this._modelToViewMapping.get(n)==e&&this._modelToViewMapping.delete(n))}unbindModelElement(e){const t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}bindElementToMarker(e,t){const n=this._markerNameToElements.get(t)||new Set;n.add(e);const s=this._elementToMarkerNames.get(e)||new Set;s.add(t),this._markerNameToElements.set(t,n),this._elementToMarkerNames.set(e,s)}unbindElementFromMarkerName(e,t){const n=this._markerNameToElements.get(t);n&&(n.delete(e),n.size==0&&this._markerNameToElements.delete(t));const s=this._elementToMarkerNames.get(e);s&&(s.delete(t),s.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(const[e,t]of this._deferredBindingRemovals)e.root==t&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new S(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new re(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}toViewPosition(e,t={}){const n={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",n),n.viewPosition}markerNameToElements(e){const t=this._markerNameToElements.get(e);if(!t)return null;const n=new Set;for(const s of t)if(s.is("attributeElement"))for(const o of s.getElementsWithSameId())n.add(o);else n.add(s);return n}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(e,t,n){if(n!=e){const o=this._toModelOffset(e.parent,e.index,n),r=this._toModelOffset(e,t,e);return o+r}if(e.is("$text"))return t;let s=0;for(let o=0;o<t;o++)s+=this.getModelLength(e.getChild(o));return s}getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{let t=0;for(const n of e.getChildren())t+=this.getModelLength(n);return t}}findPositionIn(e,t){let n,s=0,o=0,r=0;if(e.is("$text"))return new H(e,t);for(;o<t;)n=e.getChild(r),s=this.getModelLength(n),o+=s,r++;return o==t?this._moveViewPositionToTextNode(new H(e,r)):this.findPositionIn(n,t-(o-s))}_moveViewPositionToTextNode(e){const t=e.nodeBefore,n=e.nodeAfter;return t instanceof Re?new H(t,t.data.length):n instanceof Re?new H(n,0):e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fT{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(e,t){t=No(t),e instanceof qt&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=No(t),e instanceof qt&&(e=this._getSymbolForTextProxy(e)),this.test(e,t)?(this._consumable.get(e).set(t,!1),!0):!1}test(e,t){t=No(t),e instanceof qt&&(e=this._getSymbolForTextProxy(e));const n=this._consumable.get(e);if(n===void 0)return null;const s=n.get(t);return s===void 0?null:s}revert(e,t){t=No(t),e instanceof qt&&(e=this._getSymbolForTextProxy(e));const n=this.test(e,t);return n===!1?(this._consumable.get(e).set(t,!0),!0):n===!0?!1:null}verifyAllConsumed(e){const t=[];for(const[n,s]of this._consumable)for(const[o,r]of s){const a=o.split(":")[0];r&&e==a&&t.push({event:o,item:n.name||n.description})}if(t.length)throw new w("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(e){let t=null;const n=this._textProxyRegistry.get(e.startOffset);if(n){const s=n.get(e.endOffset);s&&(t=s.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e)),t}_addSymbolForTextProxy(e){const t=e.startOffset,n=e.endOffset,s=e.parent,o=Symbol("$textProxy:"+e.data);let r,a;return r=this._textProxyRegistry.get(t),r||(r=new Map,this._textProxyRegistry.set(t,r)),a=r.get(n),a||(a=new Map,r.set(n,a)),a.set(s,o),o}}function No(i){const e=i.split(":");return e[0]=="insert"?e[0]:e[0]=="addMarker"||e[0]=="removeMarker"?i:e.length>1?e[0]+":"+e[1]:e[0]}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class F6 extends ye(){constructor(e){super(),this._conversionApi={dispatcher:this,...e},this._firedEventsMap=new WeakMap}convertChanges(e,t,n){const s=this._createConversionApi(n,e.getRefreshedItems());for(const r of e.getMarkersToRemove())this._convertMarkerRemove(r.name,r.range,s);const o=this._reduceChanges(e.getChanges());for(const r of o)r.type==="insert"?this._convertInsert(S._createFromPositionAndShift(r.position,r.length),s):r.type==="reinsert"?this._convertReinsert(S._createFromPositionAndShift(r.position,r.length),s):r.type==="remove"?this._convertRemove(r.position,r.length,r.name,s):this._convertAttribute(r.range,r.attributeKey,r.attributeOldValue,r.attributeNewValue,s);for(const r of s.mapper.flushUnboundMarkerNames()){const a=t.get(r).getRange();this._convertMarkerRemove(r,a,s),this._convertMarkerAdd(r,a,s)}for(const r of e.getMarkersToAdd())this._convertMarkerAdd(r.name,r.range,s);s.mapper.flushDeferredBindings(),s.consumable.verifyAllConsumed("insert")}convert(e,t,n,s={}){const o=this._createConversionApi(n,void 0,s);this._convertInsert(e,o);for(const[r,a]of t)this._convertMarkerAdd(r,a,o);o.consumable.verifyAllConsumed("insert")}convertSelection(e,t,n){const s=this._createConversionApi(n);this.fire("cleanSelection",{selection:e},s);const o=e.getFirstPosition().root;if(!s.mapper.toViewElement(o))return;const r=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(s.consumable,e,r),this.fire("selection",{selection:e},s),!!e.isCollapsed){for(const a of r)if(s.consumable.test(e,"addMarker:"+a.name)){const c=a.getRange();if(!hT(e.getFirstPosition(),a,s.mapper))continue;const l={item:e,markerName:a.name,markerRange:c};this.fire(`addMarker:${a.name}`,l,s)}for(const a of e.getAttributeKeys())if(s.consumable.test(e,"attribute:"+a)){const c={item:e,range:e.getFirstRange(),attributeKey:a,attributeOldValue:null,attributeNewValue:e.getAttribute(a)};this.fire(`attribute:${a}:$text`,c,s)}}}_convertInsert(e,t,n={}){n.doNotAddConsumables||this._addConsumablesForInsert(t.consumable,e);for(const s of Array.from(e.getWalker({shallow:!0})).map(Td))this._testAndFire("insert",s,t)}_convertRemove(e,t,n,s){this.fire(`remove:${n}`,{position:e,length:t},s)}_convertAttribute(e,t,n,s,o){this._addConsumablesForRange(o.consumable,e,`attribute:${t}`);for(const r of e){const a={item:r.item,range:S._createFromPositionAndShift(r.previousPosition,r.length),attributeKey:t,attributeOldValue:n,attributeNewValue:s};this._testAndFire(`attribute:${t}`,a,o)}}_convertReinsert(e,t){const n=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(t.consumable,n);for(const s of n.map(Td))this._testAndFire("insert",{...s,reconversion:!0},t)}_convertMarkerAdd(e,t,n){if(t.root.rootName=="$graveyard")return;const s=`addMarker:${e}`;if(n.consumable.add(t,s),this.fire(s,{markerName:e,markerRange:t},n),!!n.consumable.consume(t,s)){this._addConsumablesForRange(n.consumable,t,s);for(const o of t.getItems()){if(!n.consumable.test(o,s))continue;const r={item:o,range:S._createOn(o),markerName:e,markerRange:t};this.fire(s,r,n)}}}_convertMarkerRemove(e,t,n){t.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:t},n)}_reduceChanges(e){const t={changes:e};return this.fire("reduceChanges",t),t.changes}_addConsumablesForInsert(e,t){for(const n of t){const s=n.item;if(e.test(s,"insert")===null){e.add(s,"insert");for(const o of s.getAttributeKeys())e.add(s,"attribute:"+o)}}return e}_addConsumablesForRange(e,t,n){for(const s of t.getItems())e.add(s,n);return e}_addConsumablesForSelection(e,t,n){e.add(t,"selection");for(const s of n)e.add(t,"addMarker:"+s.name);for(const s of t.getAttributeKeys())e.add(t,"attribute:"+s);return e}_testAndFire(e,t,n){const s=mT(e,t),o=t.item.is("$textProxy")?n.consumable._getSymbolForTextProxy(t.item):t.item,r=this._firedEventsMap.get(n),a=r.get(o);if(!a)r.set(o,new Set([s]));else if(!a.has(s))a.add(s);else return;this.fire(s,t,n)}_testAndFireAddAttributes(e,t){const n={item:e,range:S._createOn(e)};for(const s of n.item.getAttributeKeys())n.attributeKey=s,n.attributeOldValue=null,n.attributeNewValue=n.item.getAttribute(s),this._testAndFire(`attribute:${s}`,n,t)}_createConversionApi(e,t=new Set,n={}){const s={...this._conversionApi,consumable:new fT,writer:e,options:n,convertItem:o=>this._convertInsert(S._createOn(o),s),convertChildren:o=>this._convertInsert(S._createIn(o),s,{doNotAddConsumables:!0}),convertAttributes:o=>this._testAndFireAddAttributes(o,s),canReuseView:o=>!t.has(s.mapper.toModelElement(o))};return this._firedEventsMap.set(s,new Map),s}}function hT(i,e,t){const n=e.getRange(),s=Array.from(i.getAncestors());return s.shift(),s.reverse(),!s.some(r=>{if(n.containsItem(r))return!!t.toViewElement(r).getCustomProperty("addHighlight")})}function mT(i,e){const t=e.item.is("element")?e.item.name:"$text";return`${i}:${t}`}function Td(i){const e=i.item,t=S._createFromPositionAndShift(i.previousPosition,i.length);return{item:e,range:t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class It extends ye(Zn){constructor(...e){super(),this._lastRangeBackward=!1,this._attrs=new Map,this._ranges=[],e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let n=!1;for(const s of e._ranges)if(t.isEqual(s)){n=!0;break}if(!n)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new S(e.start,e.end)}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?new S(e.start,e.end):null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?new S(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[t,n,s]=e;if(typeof n=="object"&&(s=n,n=void 0),t===null)this._setRanges([]);else if(t instanceof It)this._setRanges(t.getRanges(),t.isBackward);else if(t&&typeof t.getRanges=="function")this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof S)this._setRanges([t],!!s&&!!s.backward);else if(t instanceof L)this._setRanges([new S(t)]);else if(t instanceof Ci){const o=!!s&&!!s.backward;let r;if(n=="in")r=S._createIn(t);else if(n=="on")r=S._createOn(t);else if(n!==void 0)r=new S(L._createAt(t,n));else throw new w("model-selection-setto-required-second-parameter",[this,t]);this._setRanges([r],o)}else if(Bt(t))this._setRanges(t,s&&!!s.backward);else throw new w("model-selection-setto-not-selectable",[this,t])}_setRanges(e,t=!1){const n=Array.from(e),s=n.some(o=>{if(!(o instanceof S))throw new w("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(r=>!r.isEqual(o))});n.length===this._ranges.length&&!s||(this._replaceAllRanges(n),this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0}))}setFocus(e,t){if(this.anchor===null)throw new w("model-selection-setfocus-no-ranges",[this,e]);const n=L._createAt(e,t);if(n.compareWith(this.focus)=="same")return;const s=this.anchor;this._ranges.length&&this._popRange(),n.compareWith(s)=="before"?(this._pushRange(new S(n,s)),this._lastRangeBackward=!0):(this._pushRange(new S(s,n)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const t of this.getRanges()){const n=Ad(t.start,e);bT(n,t)&&(yield n);for(const o of t.getWalker()){const r=o.item;o.type=="elementEnd"&&gT(r,e,t)&&(yield r)}const s=Ad(t.end,e);pT(s,t)&&(yield s)}}containsEntireContent(e=this.anchor.root){const t=L._createAt(e,0),n=L._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&n.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new S(e.start,e.end))}_checkRange(e){for(let t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new w("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}_replaceAllRanges(e){this._removeAllRanges();for(const t of e)this._pushRange(t)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}It.prototype.is=function(i){return i==="selection"||i==="model:selection"};function N6(i,e){return e.has(i)?!1:(e.add(i),i.root.document.model.schema.isBlock(i)&&!!i.parent)}function gT(i,e,t){return N6(i,e)&&xl(i,t)}function Ad(i,e){const n=i.parent.root.document.model.schema,s=i.parent.getAncestors({parentFirst:!0,includeSelf:!0});let o=!1;const r=s.find(a=>o?!1:(o=n.isLimit(a),!o&&N6(a,e)));return s.forEach(a=>e.add(a)),r}function xl(i,e){const t=wT(i);return t?!e.containsRange(S._createOn(t),!0):!0}function bT(i,e){return i?e.isCollapsed||i.isEmpty?!0:e.start.isTouching(L._createAt(i,i.maxOffset))?!1:xl(i,e):!1}function pT(i,e){return i?e.isCollapsed||i.isEmpty?!0:e.end.isTouching(L._createAt(i,0))?!1:xl(i,e):!1}function wT(i){const e=i.root.document.model.schema;let t=i.parent;for(;t;){if(e.isBlock(t))return t;t=t.parent}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mt extends ye(S){constructor(e,t){super(e,t),_T.call(this)}detach(){this.stopListening()}toRange(){return new S(this.start,this.end)}static fromRange(e){return new Mt(e.start,e.end)}}Mt.prototype.is=function(i){return i==="liveRange"||i==="model:liveRange"||i=="range"||i==="model:range"};function _T(){this.listenTo(this.root.document.model,"applyOperation",(i,e)=>{const t=e[0];t.isDocumentOperation&&vT.call(this,t)},{priority:"low"})}function vT(i){const e=this.getTransformedByOperation(i),t=S._createFromRanges(e),n=!t.isEqual(this),s=yT(this,i);let o=null;if(n){t.root.rootName=="$graveyard"&&(i.type=="remove"?o=i.sourcePosition:o=i.deletionPosition);const r=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",r,{deletionPosition:o})}else s&&this.fire("change:content",this.toRange(),{deletionPosition:o})}function yT(i,e){switch(e.type){case"insert":return i.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return i.containsPosition(e.sourcePosition)||i.start.isEqual(e.sourcePosition)||i.containsPosition(e.targetPosition);case"split":return i.containsPosition(e.splitPosition)||i.containsPosition(e.insertionPosition)}return!1}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Qs="selection:";class Jt extends ye(Zn){constructor(e){super(),this._selection=new CT(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return Qs+e}static _isStoreAttributeKey(e){return e.startsWith(Qs)}}Jt.prototype.is=function(i){return i==="selection"||i=="model:selection"||i=="documentSelection"||i=="model:documentSelection"};class CT extends It{constructor(e){super(),this.markers=new De({idProperty:"name"}),this._attributePriority=new Map,this._selectionRestorePosition=null,this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this._observedMarkers=new Set,this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(t,n)=>{const s=n[0];!s.isDocumentOperation||s.type=="marker"||s.type=="rename"||s.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,n,s,o)=>{this._updateMarker(n,o)}),this.listenTo(this._document,"change",(t,n)=>{kT(this._model,n)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,t){if(this._setAttribute(e,t)){const n=[e];this.fire("change:attribute",{attributeKeys:n,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}overrideGravity(){const e=Vt();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new w("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const t=this._prepareRange(e);t&&this._ranges.push(t)}_validateSelectionRanges(e){for(const t of e)if(!this._document._validateSelectionRange(t))throw new w("document-selection-wrong-position",this,{range:t})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const t=Mt.fromRange(e);return t.on("change:range",(n,s,o)=>{if(this._hasChangedRange=!0,t.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const r=this._ranges.indexOf(t);this._ranges.splice(r,1),t.detach()}}),t}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let t=!1;for(const s of this._model.markers){const o=s.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const r=s.getRange();for(const a of this.getRanges())r.containsRange(a,!a.isCollapsed)&&e.push(s)}const n=Array.from(this.markers);for(const s of e)this.markers.has(s)||(this.markers.add(s),t=!0);for(const s of Array.from(this.markers))e.includes(s)||(this.markers.remove(s),t=!0);t&&this.fire("change:marker",{oldMarkers:n,directChange:!1})}_updateMarker(e,t){const n=e.name.split(":",1)[0];if(!this._observedMarkers.has(n))return;let s=!1;const o=Array.from(this.markers),r=this.markers.has(e);if(!t)r&&(this.markers.remove(e),s=!0);else{let a=!1;for(const c of this.getRanges())if(t.containsRange(c,!c.isCollapsed)){a=!0;break}a&&!r?(this.markers.add(e),s=!0):!a&&r&&(this.markers.remove(e),s=!0)}s&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(e){const t=Gt(this._getSurroundingAttributes()),n=Gt(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,r]of this._attributePriority)r=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(t);const s=[];for(const[o,r]of this.getAttributes())(!n.has(o)||n.get(o)!==r)&&s.push(o);for(const[o]of n)this.hasAttribute(o)||s.push(o);s.length>0&&this.fire("change:attribute",{attributeKeys:s,directChange:!1})}_setAttribute(e,t,n=!0){const s=n?"normal":"low";return s=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===t?!1:(this._attrs.set(e,t),this._attributePriority.set(e,s),!0)}_removeAttribute(e,t=!0){const n=t?"normal":"low";return n=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,n),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const t=new Set;for(const[n,s]of this.getAttributes())e.get(n)!==s&&this._removeAttribute(n,!1);for(const[n,s]of e)this._setAttribute(n,s,!1)&&t.add(n);return t}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const t of e.getAttributeKeys())t.startsWith(Qs)&&(yield[t.substr(Qs.length),e.getAttribute(t)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),t=this._model.schema;if(e.root.rootName=="$graveyard")return null;let n=null;if(this.isCollapsed){const s=e.textNode?e.textNode:e.nodeBefore,o=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(n=ps(s,t)),n||(n=ps(o,t)),!this.isGravityOverridden&&!n){let r=s;for(;r&&!n;)r=r.previousSibling,n=ps(r,t)}if(!n){let r=o;for(;r&&!n;)r=r.nextSibling,n=ps(r,t)}n||(n=this.getStoredAttributes())}else{const s=this.getFirstRange();for(const o of s){if(o.item.is("element")&&t.isObject(o.item)){n=ps(o.item,t);break}if(o.type=="text"){n=o.item.getAttributes();break}}}return n}_fixGraveyardSelection(e){const t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}}function ps(i,e){if(!i)return null;if(i instanceof qt||i instanceof _e)return i.getAttributes();if(!e.isInline(i))return null;if(!e.isObject(i))return[];const t=[];for(const[n,s]of i.getAttributes())e.checkAttribute("$text",n)&&e.getAttributeProperties(n).copyFromObject!==!1&&t.push([n,s]);return t}function kT(i,e){const t=i.document.differ;for(const n of t.getChanges()){if(n.type!="insert")continue;const s=n.position.parent;n.length===s.maxOffset&&i.enqueueChange(e,r=>{const a=Array.from(s.getAttributeKeys()).filter(c=>c.startsWith(Qs));for(const c of a)r.removeAttribute(c,s)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class D6{constructor(e){this._dispatchers=e}add(e){for(const t of this._dispatchers)e(t);return this}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TT extends D6{elementToElement(e){return this.add(UT(e))}elementToStructure(e){return this.add(WT(e))}attributeToElement(e){return this.add(jT(e))}attributeToAttribute(e){return this.add(qT(e))}markerToElement(e){return this.add(GT(e))}markerToHighlight(e){return this.add(JT(e))}markerToData(e){return this.add(KT(e))}}function z6(){return(i,e,t)=>{if(!t.consumable.consume(e.item,i.name))return;const n=t.writer,s=t.mapper.toViewPosition(e.range.start),o=n.createText(e.item.data);n.insert(s,o)}}function H6(){return(i,e,t)=>{t.convertAttributes(e.item),!e.reconversion&&e.item.is("element")&&!e.item.isEmpty&&t.convertChildren(e.item)}}function AT(){return(i,e,t)=>{const n=t.mapper.toViewPosition(e.position),s=e.position.getShiftedBy(e.length),o=t.mapper.toViewPosition(s,{isPhantom:!0}),r=t.writer.createRange(n,o),a=t.writer.remove(r.getTrimmed());for(const c of t.writer.createRangeIn(a).getItems())t.mapper.unbindViewElement(c,{defer:!0})}}function $6(i,e){const t=i.createAttributeElement("span",e.attributes);return e.classes&&t._addClass(e.classes),typeof e.priority=="number"&&(t._priority=e.priority),t._id=e.id,t}function ET(){return(i,e,t)=>{const n=e.selection;if(n.isCollapsed||!t.consumable.consume(n,"selection"))return;const s=[];for(const o of n.getRanges())s.push(t.mapper.toViewRange(o));t.writer.setSelection(s,{backward:n.isBackward})}}function ST(){return(i,e,t)=>{const n=e.selection;if(!n.isCollapsed||!t.consumable.consume(n,"selection"))return;const s=t.writer,o=n.getFirstPosition(),r=t.mapper.toViewPosition(o),a=s.breakAttributes(r);s.setSelection(a)}}function IT(){return(i,e,t)=>{const n=t.writer,s=n.document.selection;for(const o of s.getRanges())o.isCollapsed&&o.end.parent.isAttached()&&t.writer.mergeAttributes(o.start);n.setSelection(null)}}function PT(i){return(e,t,n)=>{if(!n.consumable.test(t.item,e.name))return;const s=i(t.attributeOldValue,n,t),o=i(t.attributeNewValue,n,t);if(!s&&!o)return;n.consumable.consume(t.item,e.name);const r=n.writer,a=r.document.selection;if(t.item instanceof It||t.item instanceof Jt)r.wrap(a.getFirstRange(),o);else{let c=n.mapper.toViewRange(t.range);t.attributeOldValue!==null&&s&&(c=r.unwrap(c,s)),t.attributeNewValue!==null&&o&&r.wrap(c,o)}}}function RT(i,e=nA){return(t,n,s)=>{if(!e(n.item,s.consumable,{preflight:!0}))return;const o=i(n.item,s,n);if(!o)return;e(n.item,s.consumable);const r=s.mapper.toViewPosition(n.range.start);s.mapper.bindElements(n.item,o),s.writer.insert(r,o),s.convertAttributes(n.item),G6(o,n.item.getChildren(),s,{reconversion:n.reconversion})}}function VT(i,e){return(t,n,s)=>{if(!e(n.item,s.consumable,{preflight:!0}))return;const o=new Map;s.writer._registerSlotFactory(XT(n.item,o,s));const r=i(n.item,s,n);if(s.writer._clearSlotFactory(),!r)return;QT(n.item,o,s),e(n.item,s.consumable);const a=s.mapper.toViewPosition(n.range.start);s.mapper.bindElements(n.item,r),s.writer.insert(a,r),s.convertAttributes(n.item),eA(r,o,s,{reconversion:n.reconversion})}}function BT(i){return(e,t,n)=>{t.isOpening=!0;const s=i(t,n);t.isOpening=!1;const o=i(t,n);if(!s||!o)return;const r=t.markerRange;if(r.isCollapsed&&!n.consumable.consume(r,e.name))return;for(const l of r)if(!n.consumable.consume(l.item,e.name))return;const a=n.mapper,c=n.writer;c.insert(a.toViewPosition(r.start),s),n.mapper.bindElementToMarker(s,t.markerName),r.isCollapsed||(c.insert(a.toViewPosition(r.end),o),n.mapper.bindElementToMarker(o,t.markerName)),e.stop()}}function OT(){return(i,e,t)=>{const n=t.mapper.markerNameToElements(e.markerName);if(n){for(const s of n)t.mapper.unbindElementFromMarkerName(s,e.markerName),t.writer.clear(t.writer.createRangeOn(s),s);t.writer.clearClonedElementsGroup(e.markerName),i.stop()}}}function LT(i){return(e,t,n)=>{const s=i(t.markerName,n);if(!s)return;const o=t.markerRange;n.consumable.consume(o,e.name)&&(Ed(o,!1,n,t,s),Ed(o,!0,n,t,s),e.stop())}}function Ed(i,e,t,n,s){const o=e?i.start:i.end,r=o.nodeAfter&&o.nodeAfter.is("element")?o.nodeAfter:null,a=o.nodeBefore&&o.nodeBefore.is("element")?o.nodeBefore:null;if(r||a){let l,x;e&&r||!e&&!a?(l=r,x=!0):(l=a,x=!1);const d=t.mapper.toViewElement(l);if(d){MT(d,e,x,t,n,s);return}}const c=t.mapper.toViewPosition(o);FT(c,e,t,n,s)}function MT(i,e,t,n,s,o){const r=`data-${o.group}-${e?"start":"end"}-${t?"before":"after"}`,a=i.hasAttribute(r)?i.getAttribute(r).split(","):[];a.unshift(o.name),n.writer.setAttribute(r,a.join(","),i),n.mapper.bindElementToMarker(i,s.markerName)}function FT(i,e,t,n,s){const o=`${s.group}-${e?"start":"end"}`,r=s.name?{name:s.name}:null,a=t.writer.createUIElement(o,r);t.writer.insert(i,a),t.mapper.bindElementToMarker(a,n.markerName)}function NT(i){return(e,t,n)=>{const s=i(t.markerName,n);if(!s)return;const o=n.mapper.markerNameToElements(t.markerName);if(!o)return;for(const a of o)n.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("containerElement")?(r(`data-${s.group}-start-before`,a),r(`data-${s.group}-start-after`,a),r(`data-${s.group}-end-before`,a),r(`data-${s.group}-end-after`,a)):n.writer.clear(n.writer.createRangeOn(a),a);n.writer.clearClonedElementsGroup(t.markerName),e.stop();function r(a,c){if(c.hasAttribute(a)){const l=new Set(c.getAttribute(a).split(","));l.delete(s.name),l.size==0?n.writer.removeAttribute(a,c):n.writer.setAttribute(a,Array.from(l).join(","),c)}}}}function DT(i){return(e,t,n)=>{if(!n.consumable.test(t.item,e.name))return;const s=i(t.attributeOldValue,n,t),o=i(t.attributeNewValue,n,t);if(!s&&!o)return;n.consumable.consume(t.item,e.name);const r=n.mapper.toViewElement(t.item),a=n.writer;if(!r)throw new w("conversion-attribute-to-attribute-on-text",n.dispatcher,t);if(t.attributeOldValue!==null&&s)if(s.key=="class"){const c=ge(s.value);for(const l of c)a.removeClass(l,r)}else if(s.key=="style"){const c=Object.keys(s.value);for(const l of c)a.removeStyle(l,r)}else a.removeAttribute(s.key,r);if(t.attributeNewValue!==null&&o)if(o.key=="class"){const c=ge(o.value);for(const l of c)a.addClass(l,r)}else if(o.key=="style"){const c=Object.keys(o.value);for(const l of c)a.setStyle(l,o.value[l],r)}else a.setAttribute(o.key,o.value,r)}}function zT(i){return(e,t,n)=>{if(!t.item||!(t.item instanceof It||t.item instanceof Jt)&&!t.item.is("$textProxy"))return;const s=dl(i,t,n);if(!s||!n.consumable.consume(t.item,e.name))return;const o=n.writer,r=$6(o,s),a=o.document.selection;if(t.item instanceof It||t.item instanceof Jt)o.wrap(a.getFirstRange(),r);else{const c=n.mapper.toViewRange(t.range),l=o.wrap(c,r);for(const x of l.getItems())if(x.is("attributeElement")&&x.isSimilar(r)){n.mapper.bindElementToMarker(x,t.markerName);break}}}}function HT(i){return(e,t,n)=>{if(!t.item||!(t.item instanceof he))return;const s=dl(i,t,n);if(!s||!n.consumable.test(t.item,e.name))return;const o=n.mapper.toViewElement(t.item);if(o&&o.getCustomProperty("addHighlight")){n.consumable.consume(t.item,e.name);for(const a of S._createIn(t.item))n.consumable.consume(a.item,e.name);o.getCustomProperty("addHighlight")(o,s,n.writer),n.mapper.bindElementToMarker(o,t.markerName)}}}function $T(i){return(e,t,n)=>{if(t.markerRange.isCollapsed)return;const s=dl(i,t,n);if(!s)return;const o=$6(n.writer,s),r=n.mapper.markerNameToElements(t.markerName);if(r){for(const a of r)n.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("attributeElement")?n.writer.unwrap(n.writer.createRangeOn(a),o):a.getCustomProperty("removeHighlight")(a,s.id,n.writer);n.writer.clearClonedElementsGroup(t.markerName),e.stop()}}}function UT(i){const e=U6(i.model),t=eo(i.view,"container");return e.attributes.length&&(e.children=!0),n=>{n.on(`insert:${e.name}`,RT(t,q6(e)),{priority:i.converterPriority||"normal"}),(e.children||e.attributes.length)&&n.on("reduceChanges",j6(e),{priority:"low"})}}function WT(i){const e=U6(i.model),t=eo(i.view,"container");return e.children=!0,n=>{if(n._conversionApi.schema.checkChild(e.name,"$text"))throw new w("conversion-element-to-structure-disallowed-text",n,{elementName:e.name});n.on(`insert:${e.name}`,VT(t,q6(e)),{priority:i.converterPriority||"normal"}),n.on("reduceChanges",j6(e),{priority:"low"})}}function jT(i){i=Ln(i);let e=i.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(const s of e.values)i.view[s]=eo(i.view[s],"attribute");else i.view=eo(i.view,"attribute");const n=W6(i);return s=>{s.on(t,PT(n),{priority:i.converterPriority||"normal"})}}function qT(i){i=Ln(i);let e=i.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(const s of e.values)i.view[s]=Sd(i.view[s]);else i.view=Sd(i.view);const n=W6(i);return s=>{s.on(t,DT(n),{priority:i.converterPriority||"normal"})}}function GT(i){const e=eo(i.view,"ui");return t=>{t.on(`addMarker:${i.model}`,BT(e),{priority:i.converterPriority||"normal"}),t.on(`removeMarker:${i.model}`,OT(),{priority:i.converterPriority||"normal"})}}function KT(i){i=Ln(i);const e=i.model;let t=i.view;return t||(t=n=>({group:e,name:n.substr(i.model.length+1)})),n=>{n.on(`addMarker:${e}`,LT(t),{priority:i.converterPriority||"normal"}),n.on(`removeMarker:${e}`,NT(t),{priority:i.converterPriority||"normal"})}}function JT(i){return e=>{e.on(`addMarker:${i.model}`,zT(i.view),{priority:i.converterPriority||"normal"}),e.on(`addMarker:${i.model}`,HT(i.view),{priority:i.converterPriority||"normal"}),e.on(`removeMarker:${i.model}`,$T(i.view),{priority:i.converterPriority||"normal"})}}function U6(i){return typeof i=="string"&&(i={name:i}),{name:i.name,attributes:i.attributes?ge(i.attributes):[],children:!!i.children}}function eo(i,e){return typeof i=="function"?i:(t,n)=>ZT(i,n,e)}function ZT(i,e,t){typeof i=="string"&&(i={name:i});let n;const s=e.writer,o=Object.assign({},i.attributes);if(t=="container")n=s.createContainerElement(i.name,o);else if(t=="attribute"){const r={priority:i.priority||ai.DEFAULT_PRIORITY};n=s.createAttributeElement(i.name,o,r)}else n=s.createUIElement(i.name,o);if(i.styles){const r=Object.keys(i.styles);for(const a of r)s.setStyle(a,i.styles[a],n)}if(i.classes){const r=i.classes;if(typeof r=="string")s.addClass(r,n);else for(const a of r)s.addClass(a,n)}return n}function W6(i){return i.model.values?(e,t,n)=>{const s=i.view[e];return s?s(e,t,n):null}:i.view}function Sd(i){return typeof i=="string"?e=>({key:i,value:e}):typeof i=="object"?i.value?()=>i:e=>({key:i.key,value:e}):i}function dl(i,e,t){const n=typeof i=="function"?i(e,t):i;return n?(n.priority||(n.priority=10),n.id||(n.id=e.markerName),n):null}function YT(i){return(e,t)=>{if(!e.is("element",i.name))return!1;if(t.type=="attribute"){if(i.attributes.includes(t.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(i.children)return!0}return!1}}function j6(i){const e=YT(i);return(t,n)=>{const s=[];n.reconvertedElements||(n.reconvertedElements=new Set);for(const o of n.changes){const r=o.type=="attribute"?o.range.start.nodeAfter:o.position.parent;if(!r||!e(r,o)){s.push(o);continue}if(!n.reconvertedElements.has(r)){n.reconvertedElements.add(r);const a=L._createBefore(r);let c=s.length;for(let l=s.length-1;l>=0;l--){const x=s[l],u=(x.type=="attribute"?x.range.start:x.position).compareWith(a);if(u=="before"||x.type=="remove"&&u=="same")break;c=l}s.splice(c,0,{type:"remove",name:r.name,position:a,length:1},{type:"reinsert",name:r.name,position:a,length:1})}}n.changes=s}}function q6(i){return(e,t,n={})=>{const s=["insert"];for(const o of i.attributes)e.hasAttribute(o)&&s.push(`attribute:${o}`);return s.every(o=>t.test(e,o))?(n.preflight||s.forEach(o=>t.consume(e,o)),!0):!1}}function XT(i,e,t){return(n,s)=>{const o=n.createContainerElement("$slot");let r=null;if(s==="children")r=Array.from(i.getChildren());else if(typeof s=="function")r=Array.from(i.getChildren()).filter(a=>s(a));else throw new w("conversion-slot-mode-unknown",t.dispatcher,{modeOrFilter:s});return e.set(o,r),o}}function QT(i,e,t){const n=Array.from(e.values()).flat(),s=new Set(n);if(s.size!=n.length)throw new w("conversion-slot-filter-overlap",t.dispatcher,{element:i});if(s.size!=i.childCount)throw new w("conversion-slot-filter-incomplete",t.dispatcher,{element:i})}function eA(i,e,t,n){t.mapper.on("modelToViewPosition",r,{priority:"highest"});let s=null,o=null;for([s,o]of e)G6(i,o,t,n),t.writer.move(t.writer.createRangeIn(s),t.writer.createPositionBefore(s)),t.writer.remove(s);t.mapper.off("modelToViewPosition",r);function r(a,c){const l=c.modelPosition.nodeAfter,x=o.indexOf(l);x<0||(c.viewPosition=c.mapper.findPositionIn(s,x))}}function G6(i,e,t,n){for(const s of e)tA(i.root,s,t,n)||t.convertItem(s)}function tA(i,e,t,n){const{writer:s,mapper:o}=t;if(!n.reconversion)return!1;const r=o.toViewElement(e);return!r||r.root==i||!t.canReuseView(r)?!1:(s.move(s.createRangeOn(r),o.toViewPosition(L._createBefore(e))),!0)}function nA(i,e,{preflight:t}={}){return t?e.test(i,"insert"):e.consume(i,"insert")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function K6(i){const{schema:e,document:t}=i.model;for(const n of t.getRoots())if(n.isEmpty&&!e.checkChild(n,"$text")&&e.checkChild(n,"paragraph"))return i.insertElement("paragraph",n),!0;return!1}function J6(i,e,t){const n=t.createContext(i);return!(!t.checkChild(n,"paragraph")||!t.checkChild(n.push("paragraph"),e))}function Z6(i,e){const t=e.createElement("paragraph");return e.insert(t,i),e.createPositionAt(t,0)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iA extends D6{elementToElement(e){return this.add(Y6(e))}elementToAttribute(e){return this.add(rA(e))}attributeToAttribute(e){return this.add(aA(e))}elementToMarker(e){return this.add(cA(e))}dataToMarker(e){return this.add(lA(e))}}function Id(){return(i,e,t)=>{if(!e.modelRange&&t.consumable.consume(e.viewItem,{name:!0})){const{modelRange:n,modelCursor:s}=t.convertChildren(e.viewItem,e.modelCursor);e.modelRange=n,e.modelCursor=s}}}function sA(){return(i,e,{schema:t,consumable:n,writer:s})=>{let o=e.modelCursor;if(!n.test(e.viewItem))return;if(!t.checkChild(o,"$text")){if(!J6(o,"$text",t)||e.viewItem.data.trim().length==0)return;const a=o.nodeBefore;o=Z6(o,s),a&&a.is("element","$marker")&&(s.move(s.createRangeOn(a),o),o=s.createPositionAfter(a))}n.consume(e.viewItem);const r=s.createText(e.viewItem.data);s.insert(r,o),e.modelRange=s.createRange(o,o.getShiftedBy(r.offsetSize)),e.modelCursor=e.modelRange.end}}function oA(i,e){return(t,n)=>{const s=n.newSelection,o=[];for(const a of s.getRanges())o.push(e.toModelRange(a));const r=i.createSelection(o,{backward:s.isBackward});r.isEqual(i.document.selection)||i.change(a=>{a.setSelection(r)})}}function Y6(i){i=Ln(i);const e=j0(i),t=ul(i.view),n=t?`element:${t}`:"element";return s=>{s.on(n,e,{priority:i.converterPriority||"normal"})}}function rA(i){i=Ln(i),X6(i);const e=Q6(i,!1),t=ul(i.view),n=t?`element:${t}`:"element";return s=>{s.on(n,e,{priority:i.converterPriority||"low"})}}function aA(i){i=Ln(i);let e=null;(typeof i.view=="string"||i.view.key)&&(e=uA(i)),X6(i,e);const t=Q6(i,!0);return n=>{n.on("element",t,{priority:i.converterPriority||"low"})}}function cA(i){const e=mA(i.model);return Y6({...i,model:e})}function lA(i){i=Ln(i),i.model||(i.model=s=>s?i.view+":"+s:i.view);const e={view:i.view,model:i.model},t=j0(Pd(e,"start")),n=j0(Pd(e,"end"));return s=>{s.on(`element:${i.view}-start`,t,{priority:i.converterPriority||"normal"}),s.on(`element:${i.view}-end`,n,{priority:i.converterPriority||"normal"});const o=_t.low,r=_t.highest,a=_t.get(i.converterPriority)/r;s.on("element",xA(e),{priority:o+a})}}function xA(i){return(e,t,n)=>{const s=`data-${i.view}`;if(!n.consumable.test(t.viewItem,{attributes:s+"-end-after"})&&!n.consumable.test(t.viewItem,{attributes:s+"-start-after"})&&!n.consumable.test(t.viewItem,{attributes:s+"-end-before"})&&!n.consumable.test(t.viewItem,{attributes:s+"-start-before"}))return;t.modelRange||Object.assign(t,n.convertChildren(t.viewItem,t.modelCursor)),n.consumable.consume(t.viewItem,{attributes:s+"-end-after"})&&o(t.modelRange.end,t.viewItem.getAttribute(s+"-end-after").split(",")),n.consumable.consume(t.viewItem,{attributes:s+"-start-after"})&&o(t.modelRange.end,t.viewItem.getAttribute(s+"-start-after").split(",")),n.consumable.consume(t.viewItem,{attributes:s+"-end-before"})&&o(t.modelRange.start,t.viewItem.getAttribute(s+"-end-before").split(",")),n.consumable.consume(t.viewItem,{attributes:s+"-start-before"})&&o(t.modelRange.start,t.viewItem.getAttribute(s+"-start-before").split(","));function o(r,a){for(const c of a){const l=i.model(c,n),x=n.writer.createElement("$marker",{"data-name":l});n.writer.insert(x,r),t.modelCursor.isEqual(r)?t.modelCursor=t.modelCursor.getShiftedBy(1):t.modelCursor=t.modelCursor._getTransformedByInsertion(r,1),t.modelRange=t.modelRange._getTransformedByInsertion(r,1)[0]}}}}function ul(i){return typeof i=="string"?i:typeof i=="object"&&typeof i.name=="string"?i.name:null}function j0(i){const e=new Ct(i.view);return(t,n,s)=>{const o=e.match(n.viewItem);if(!o)return;const r=o.match;if(r.name=!0,!s.consumable.test(n.viewItem,r))return;const a=dA(i.model,n.viewItem,s);a&&s.safeInsert(a,n.modelCursor)&&(s.consumable.consume(n.viewItem,r),s.convertChildren(n.viewItem,a),s.updateConversionResult(a,n))}}function dA(i,e,t){return i instanceof Function?i(e,t):t.writer.createElement(i)}function uA(i){typeof i.view=="string"&&(i.view={key:i.view});const e=i.view.key;let t;if(e=="class"||e=="style")t={[e=="class"?"classes":"styles"]:i.view.value};else{const n=typeof i.view.value>"u"?/[\s\S]*/:i.view.value;t={attributes:{[e]:n}}}return i.view.name&&(t.name=i.view.name),i.view=t,e}function X6(i,e=null){const t=e===null?!0:o=>o.getAttribute(e),n=typeof i.model!="object"?i.model:i.model.key,s=typeof i.model!="object"||typeof i.model.value>"u"?t:i.model.value;i.model={key:n,value:s}}function Q6(i,e){const t=new Ct(i.view);return(n,s,o)=>{if(!s.modelRange&&e)return;const r=t.match(s.viewItem);if(!r||(fA(i.view,s.viewItem)?r.match.name=!0:delete r.match.name,!o.consumable.test(s.viewItem,r.match)))return;const a=i.model.key,c=typeof i.model.value=="function"?i.model.value(s.viewItem,o):i.model.value;if(c===null)return;s.modelRange||Object.assign(s,o.convertChildren(s.viewItem,s.modelCursor)),hA(s.modelRange,{key:a,value:c},e,o)&&(o.consumable.test(s.viewItem,{name:!0})&&(r.match.name=!0),o.consumable.consume(s.viewItem,r.match))}}function fA(i,e){const t=typeof i=="function"?i(e):i;return typeof t=="object"&&!ul(t)?!1:!t.classes&&!t.attributes&&!t.styles}function hA(i,e,t,n){let s=!1;for(const o of Array.from(i.getItems({shallow:t})))n.schema.checkAttribute(o,e.key)&&(s=!0,!o.hasAttribute(e.key)&&n.writer.setAttribute(e.key,e.value,o));return s}function mA(i){return(e,t)=>{const n=typeof i=="string"?i:i(e,t);return t.writer.createElement("$marker",{"data-name":n})}}function Pd(i,e){const t=(n,s)=>{const o=n.getAttribute("name"),r=i.model(o,s);return s.writer.createElement("$marker",{"data-name":r})};return{view:`${i.view}-${e}`,model:t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function gA(i){i.document.registerPostFixer(e=>bA(e,i))}function bA(i,e){const t=e.document.selection,n=e.schema,s=[];let o=!1;for(const r of t.getRanges()){const a=eg(r,n);a&&!a.isEqual(r)?(s.push(a),o=!0):s.push(r)}return o&&i.setSelection(vA(s),{backward:t.isBackward}),!1}function eg(i,e){return i.isCollapsed?pA(i,e):wA(i,e)}function pA(i,e){const t=i.start,n=e.getNearestSelectionRange(t);if(!n){const o=t.getAncestors().reverse().find(r=>e.isObject(r));return o?S._createOn(o):null}if(!n.isCollapsed)return n;const s=n.start;return t.isEqual(s)?null:new S(s)}function wA(i,e){const{start:t,end:n}=i,s=e.checkChild(t,"$text"),o=e.checkChild(n,"$text"),r=e.getLimitElement(t),a=e.getLimitElement(n);if(r===a){if(s&&o)return null;if(_A(t,n,e)){const d=t.nodeAfter&&e.isSelectable(t.nodeAfter)?null:e.getNearestSelectionRange(t,"forward"),f=n.nodeBefore&&e.isSelectable(n.nodeBefore)?null:e.getNearestSelectionRange(n,"backward"),m=d?d.start:t,b=f?f.end:n;return new S(m,b)}}const c=r&&!r.is("rootElement"),l=a&&!a.is("rootElement");if(c||l){const x=t.nodeAfter&&n.nodeBefore&&t.nodeAfter.parent===n.nodeBefore.parent,d=c&&(!x||!Vd(t.nodeAfter,e)),u=l&&(!x||!Vd(n.nodeBefore,e));let f=t,m=n;return d&&(f=L._createBefore(Rd(r,e))),u&&(m=L._createAfter(Rd(a,e))),new S(f,m)}return null}function Rd(i,e){let t=i,n=t;for(;e.isLimit(n)&&n.parent;)t=n,n=n.parent;return t}function _A(i,e,t){const n=i.nodeAfter&&!t.isLimit(i.nodeAfter)||t.checkChild(i,"$text"),s=e.nodeBefore&&!t.isLimit(e.nodeBefore)||t.checkChild(e,"$text");return n||s}function vA(i){const e=[...i],t=new Set;let n=1;for(;n<e.length;){const o=e[n],r=e.slice(0,n);for(const[a,c]of r.entries())if(!t.has(a)){if(o.isEqual(c))t.add(a);else if(o.isIntersecting(c)){t.add(a),t.add(n);const l=o.getJoined(c);e.push(l)}}n++}return e.filter((o,r)=>!t.has(r))}function Vd(i,e){return i&&e.isSelectable(i)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yA extends ue(){constructor(e,t){super(),this.model=e,this.view=new xT(t),this.mapper=new M6,this.downcastDispatcher=new F6({mapper:this.mapper,schema:e.schema});const n=this.model.document,s=n.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(n,"change",()=>{this.view.change(r=>{this.downcastDispatcher.convertChanges(n.differ,o,r),this.downcastDispatcher.convertSelection(s,o,r)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",oA(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",CA(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",z6(),{priority:"lowest"}),this.downcastDispatcher.on("insert",H6(),{priority:"lowest"}),this.downcastDispatcher.on("remove",AT(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",IT()),this.downcastDispatcher.on("selection",ET(),{priority:"low"}),this.downcastDispatcher.on("selection",ST(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(r=>{if(r.rootName=="$graveyard")return null;const a=new y6(this.view.document,r.name);return a.rootName=r.rootName,this.mapper.bindElements(r,a),a})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const t=typeof e=="string"?e:e.name,n=this.model.markers.get(t);if(!n)throw new w("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:t});this.model.change(()=>{this.model.markers._refresh(n)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}function CA(i,e,t){return(n,s)=>{if(!(t.document.isComposing&&!ee.isAndroid))for(let o=0;o<s.targetRanges.length;o++){const r=s.targetRanges[o],a=i.toModelRange(r),c=eg(a,e);!c||c.isEqual(a)||(s.targetRanges[o]=i.toViewRange(c))}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ms{constructor(){this._consumables=new Map}add(e,t){let n;if(e.is("$text")||e.is("documentFragment")){this._consumables.set(e,!0);return}this._consumables.has(e)?n=this._consumables.get(e):(n=new kA(e),this._consumables.set(e,n)),n.add(t)}test(e,t){const n=this._consumables.get(e);return n===void 0?null:e.is("$text")||e.is("documentFragment")?n:n.test(t)}consume(e,t){return this.test(e,t)?(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0):!1}revert(e,t){const n=this._consumables.get(e);n!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):n.revert(t))}static consumablesFromElement(e){const t={element:e,name:!0,attributes:[],classes:[],styles:[]},n=e.getAttributeKeys();for(const r of n)r=="style"||r=="class"||t.attributes.push(r);const s=e.getClassNames();for(const r of s)t.classes.push(r);const o=e.getStyleNames();for(const r of o)t.styles.push(r);return t}static createFrom(e,t){if(t||(t=new Ms),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,Ms.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(const n of e.getChildren())t=Ms.createFrom(n,t);return t}}const Do=["attributes","classes","styles"];class kA{constructor(e){this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(const t of Do)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const t of Do)if(t in e){const n=this._test(t,e[t]);if(n!==!0)return n}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(const t of Do)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(const t of Do)t in e&&this._revert(t,e[t])}_add(e,t){const n=mt(t)?t:[t],s=this._consumables[e];for(const o of n){if(e==="attributes"&&(o==="class"||o==="style"))throw new w("viewconsumable-invalid-attribute",this);if(s.set(o,!0),e==="styles")for(const r of this.element.document.stylesProcessor.getRelatedStyles(o))s.set(r,!0)}}_test(e,t){const n=mt(t)?t:[t],s=this._consumables[e];for(const o of n)if(e==="attributes"&&(o==="class"||o==="style")){const r=o=="class"?"classes":"styles",a=this._test(r,[...this._consumables[r].keys()]);if(a!==!0)return a}else{const r=s.get(o);if(r===void 0)return null;if(!r)return!1}return!0}_consume(e,t){const n=mt(t)?t:[t],s=this._consumables[e];for(const o of n)if(e==="attributes"&&(o==="class"||o==="style")){const r=o=="class"?"classes":"styles";this._consume(r,[...this._consumables[r].keys()])}else if(s.set(o,!1),e=="styles")for(const r of this.element.document.stylesProcessor.getRelatedStyles(o))s.set(r,!1)}_revert(e,t){const n=mt(t)?t:[t],s=this._consumables[e];for(const o of n)if(e==="attributes"&&(o==="class"||o==="style")){const r=o=="class"?"classes":"styles";this._revert(r,[...this._consumables[r].keys()])}else s.get(o)===!1&&s.set(o,!0)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TA extends ue(){constructor(){super(),this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,t)=>{t[0]=new li(t[0])},{priority:"highest"}),this.on("checkChild",(e,t)=>{t[0]=new li(t[0]),t[1]=this.getDefinition(t[1])},{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new w("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new w("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return typeof e=="string"?t=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?t="$text":t=e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const t=this.getDefinition(e);return!!(t&&t.isBlock)}isLimit(e){const t=this.getDefinition(e);return t?!!(t.isLimit||t.isObject):!1}isObject(e){const t=this.getDefinition(e);return t?!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent):!1}isInline(e){const t=this.getDefinition(e);return!!(t&&t.isInline)}isSelectable(e){const t=this.getDefinition(e);return t?!!(t.isSelectable||t.isObject):!1}isContent(e){const t=this.getDefinition(e);return t?!!(t.isContent||t.isObject):!1}checkChild(e,t){return t?this._checkContextMatch(t,e):!1}checkAttribute(e,t){const n=this.getDefinition(e.last);return n?n.allowAttributes.includes(t):!1}checkMerge(e,t){if(e instanceof L){const n=e.nodeBefore,s=e.nodeAfter;if(!(n instanceof he))throw new w("schema-check-merge-no-element-before",this);if(!(s instanceof he))throw new w("schema-check-merge-no-element-after",this);return this.checkMerge(n,s)}for(const n of t.getChildren())if(!this.checkChild(e,n))return!1;return!0}addChildCheck(e){this.on("checkChild",(t,[n,s])=>{if(!s)return;const o=e(n,s);typeof o=="boolean"&&(t.stop(),t.return=o)},{priority:"high"})}addAttributeCheck(e){this.on("checkAttribute",(t,[n,s])=>{const o=e(n,s);typeof o=="boolean"&&(t.stop(),t.return=o)},{priority:"high"})}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||{}}getLimitElement(e){let t;for(e instanceof L?t=e.parent:t=(e instanceof S?[e]:Array.from(e.getRanges())).reduce((s,o)=>{const r=o.getCommonAncestor();return s?s.getCommonAncestor(r,{includeSelf:!0}):r},null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed){const s=[...e.getFirstPosition().getAncestors(),new _e("",e.getAttributes())];return this.checkAttribute(s,t)}else{const n=e.getRanges();for(const s of n)for(const o of s)if(this.checkAttribute(o.item,t))return!0}return!1}*getValidRanges(e,t){e=HA(e);for(const n of e)yield*this._getValidRangesForRange(n,t)}getNearestSelectionRange(e,t="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new S(e);let n,s;const o=e.getAncestors().reverse().find(r=>this.isLimit(r))||e.root;(t=="both"||t=="backward")&&(n=new An({boundaries:S._createIn(o),startPosition:e,direction:"backward"})),(t=="both"||t=="forward")&&(s=new An({boundaries:S._createIn(o),startPosition:e}));for(const r of zA(n,s)){const a=r.walker==n?"elementEnd":"elementStart",c=r.value;if(c.type==a&&this.isObject(c.item))return S._createOn(c.item);if(this.checkChild(c.nextPosition,"$text"))return new S(c.nextPosition)}return null}findAllowedParent(e,t){let n=e.parent;for(;n;){if(this.checkChild(n,t))return n;if(this.isLimit(n))return null;n=n.parent}return null}setAllowedAttributes(e,t,n){const s=n.model;for(const[o,r]of Object.entries(t))s.schema.checkAttribute(e,o)&&n.setAttribute(o,r,e)}removeDisallowedAttributes(e,t){for(const n of e)if(n.is("$text"))Bd(this,n,t);else{const o=S._createIn(n).getPositions();for(const r of o){const a=r.nodeBefore||r.parent;Bd(this,a,t)}}}getAttributesWithProperty(e,t,n){const s={};for(const[o,r]of e.getAttributes()){const a=this.getAttributeProperties(o);a[t]!==void 0&&(n===void 0||n===a[t])&&(s[o]=r)}return s}createContext(e){return new li(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},t=this._sourceDefinitions,n=Object.keys(t);for(const s of n)e[s]=AA(t[s],s);for(const s of n)EA(e,s);for(const s of n)SA(e,s);for(const s of n)IA(e,s);for(const s of n)PA(e,s),RA(e,s);for(const s of n)VA(e,s),BA(e,s),OA(e,s);this._compiledDefinitions=e}_checkContextMatch(e,t,n=t.length-1){const s=t.getItem(n);if(e.allowIn.includes(s.name)){if(n==0)return!0;{const o=this.getDefinition(s);return this._checkContextMatch(o,t,n-1)}}else return!1}*_getValidRangesForRange(e,t){let n=e.start,s=e.start;for(const o of e.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(S._createIn(o),t)),this.checkAttribute(o,t)||(n.isEqual(s)||(yield new S(n,s)),n=L._createAfter(o)),s=L._createAfter(o);n.isEqual(s)||(yield new S(n,s))}}class li{constructor(e){if(e instanceof li)return e;let t;typeof e=="string"?t=[e]:Array.isArray(e)?t=e:t=e.getAncestors({includeSelf:!0}),this._items=t.map(DA)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const t=new li([e]);return t._items=[...this._items,...t._items],t}getItem(e){return this._items[e]}*getNames(){yield*this._items.map(e=>e.name)}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function AA(i,e){const t={name:e,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],allowChildren:[],inheritTypesFrom:[]};return LA(i,t),ei(i,t,"allowIn"),ei(i,t,"allowContentOf"),ei(i,t,"allowWhere"),ei(i,t,"allowAttributes"),ei(i,t,"allowAttributesOf"),ei(i,t,"allowChildren"),ei(i,t,"inheritTypesFrom"),MA(i,t),t}function EA(i,e){const t=i[e];for(const n of t.allowChildren){const s=i[n];s&&s.allowIn.push(e)}t.allowChildren.length=0}function SA(i,e){for(const t of i[e].allowContentOf)i[t]&&FA(i,t).forEach(s=>{s.allowIn.push(e)});delete i[e].allowContentOf}function IA(i,e){for(const t of i[e].allowWhere){const n=i[t];if(n){const s=n.allowIn;i[e].allowIn.push(...s)}}delete i[e].allowWhere}function PA(i,e){for(const t of i[e].allowAttributesOf){const n=i[t];if(n){const s=n.allowAttributes;i[e].allowAttributes.push(...s)}}delete i[e].allowAttributesOf}function RA(i,e){const t=i[e];for(const n of t.inheritTypesFrom){const s=i[n];if(s){const o=Object.keys(s).filter(r=>r.startsWith("is"));for(const r of o)r in t||(t[r]=s[r])}}delete t.inheritTypesFrom}function VA(i,e){const t=i[e],n=t.allowIn.filter(s=>i[s]);t.allowIn=Array.from(new Set(n))}function BA(i,e){const t=i[e];for(const n of t.allowIn)i[n].allowChildren.push(e)}function OA(i,e){const t=i[e];t.allowAttributes=Array.from(new Set(t.allowAttributes))}function LA(i,e){for(const t of i){const n=Object.keys(t).filter(s=>s.startsWith("is"));for(const s of n)e[s]=!!t[s]}}function ei(i,e,t){for(const n of i){const s=n[t];typeof s=="string"?e[t].push(s):Array.isArray(s)&&e[t].push(...s)}}function MA(i,e){for(const t of i){const n=t.inheritAllFrom;n&&(e.allowContentOf.push(n),e.allowWhere.push(n),e.allowAttributesOf.push(n),e.inheritTypesFrom.push(n))}}function FA(i,e){const t=i[e];return NA(i).filter(n=>n.allowIn.includes(t.name))}function NA(i){return Object.keys(i).map(e=>i[e])}function DA(i){return typeof i=="string"||i.is("documentFragment")?{name:typeof i=="string"?i:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:i.is("element")?i.name:"$text",*getAttributeKeys(){yield*i.getAttributeKeys()},getAttribute(e){return i.getAttribute(e)}}}function*zA(i,e){let t=!1;for(;!t;){if(t=!0,i){const n=i.next();n.done||(t=!1,yield{walker:i,value:n.value})}if(e){const n=e.next();n.done||(t=!1,yield{walker:e,value:n.value})}}}function*HA(i){for(const e of i)yield*e.getMinimalFlatRanges()}function Bd(i,e,t){for(const n of e.getAttributeKeys())i.checkAttribute(e,n)||t.removeAttribute(n,e)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $A extends ye(){constructor(e){super(),this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this._emptyElementsToKeep=new Set,this.conversionApi={...e,consumable:null,writer:null,store:null,convertItem:(t,n)=>this._convertItem(t,n),convertChildren:(t,n)=>this._convertChildren(t,n),safeInsert:(t,n)=>this._safeInsert(t,n),updateConversionResult:(t,n)=>this._updateConversionResult(t,n),splitToAllowedParent:(t,n)=>this._splitToAllowedParent(t,n),getSplitParts:t=>this._getSplitParts(t),keepEmptyElement:t=>this._keepEmptyElement(t)}}convert(e,t,n=["$root"]){this.fire("viewCleanup",e),this._modelCursor=WA(n,t),this.conversionApi.writer=t,this.conversionApi.consumable=Ms.createFrom(e),this.conversionApi.store={};const{modelRange:s}=this._convertItem(e,this._modelCursor),o=t.createDocumentFragment();if(s){this._removeEmptyElements();for(const r of Array.from(this._modelCursor.parent.getChildren()))t.append(r,o);o.markers=UA(o,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(e,t){const n={viewItem:e,modelCursor:t,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,n,this.conversionApi):e.is("$text")?this.fire("text",n,this.conversionApi):this.fire("documentFragment",n,this.conversionApi),n.modelRange&&!(n.modelRange instanceof S))throw new w("view-conversion-dispatcher-incorrect-result",this);return{modelRange:n.modelRange,modelCursor:n.modelCursor}}_convertChildren(e,t){let n=t.is("position")?t:L._createAt(t,0);const s=new S(n);for(const o of Array.from(e.getChildren())){const r=this._convertItem(o,n);r.modelRange instanceof S&&(s.end=r.modelRange.end,n=r.modelCursor)}return{modelRange:s,modelCursor:n}}_safeInsert(e,t){const n=this._splitToAllowedParent(e,t);return n?(this.conversionApi.writer.insert(e,n.position),!0):!1}_updateConversionResult(e,t){const n=this._getSplitParts(e),s=this.conversionApi.writer;t.modelRange||(t.modelRange=s.createRange(s.createPositionBefore(e),s.createPositionAfter(n[n.length-1])));const o=this._cursorParents.get(e);o?t.modelCursor=s.createPositionAt(o,0):t.modelCursor=t.modelRange.end}_splitToAllowedParent(e,t){const{schema:n,writer:s}=this.conversionApi;let o=n.findAllowedParent(t,e);if(o){if(o===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return J6(t,e,n)?{position:Z6(t,s)}:null;const r=this.conversionApi.writer.split(t,o),a=[];for(const l of r.range.getWalker())if(l.type=="elementEnd")a.push(l.item);else{const x=a.pop(),d=l.item;this._registerSplitPair(x,d)}const c=r.range.end.parent;return this._cursorParents.set(e,c),{position:r.position,cursorParent:c}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);const n=this._splitParts.get(e);this._splitParts.set(t,n),n.push(t)}_getSplitParts(e){let t;return this._splitParts.has(e)?t=this._splitParts.get(e):t=[e],t}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){let e=!1;for(const t of this._splitParts.keys())t.isEmpty&&!this._emptyElementsToKeep.has(t)&&(this.conversionApi.writer.remove(t),this._splitParts.delete(t),e=!0);e&&this._removeEmptyElements()}}function UA(i,e){const t=new Set,n=new Map,s=S._createIn(i).getItems();for(const o of s)o.is("element","$marker")&&t.add(o);for(const o of t){const r=o.getAttribute("data-name"),a=e.createPositionBefore(o);n.has(r)?n.get(r).end=a.clone():n.set(r,new S(a.clone())),e.remove(o)}return n}function WA(i,e){let t;for(const n of new li(i)){const s={};for(const r of n.getAttributeKeys())s[r]=n.getAttribute(r);const o=e.createElement(n.name,s);t&&e.insert(o,t),t=L._createAt(o,0)}return t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jA{getHtml(e){const n=U.document.implementation.createHTMLDocument("").createElement("div");return n.appendChild(e),n.innerHTML}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qA{constructor(e){this.skipComments=!0,this.domParser=new DOMParser,this.domConverter=new yo(e,{renderingMode:"data"}),this.htmlWriter=new jA}toData(e){const t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){const t=this._toDom(e);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){e.match(/<(?:html|body|head|meta)(?:\s[^>]*)?>/i)||(e=`<body>${e}</body>`);const t=this.domParser.parseFromString(e,"text/html"),n=t.createDocumentFragment(),s=t.body.childNodes;for(;s.length>0;)n.appendChild(s[0]);return n}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class GA extends ye(){constructor(e,t){super(),this.model=e,this.mapper=new M6,this.downcastDispatcher=new F6({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",z6(),{priority:"lowest"}),this.downcastDispatcher.on("insert",H6(),{priority:"lowest"}),this.upcastDispatcher=new $A({schema:e.schema}),this.viewDocument=new vo(t),this.stylesProcessor=t,this.htmlProcessor=new qA(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new A6(this.viewDocument),this.upcastDispatcher.on("text",sA(),{priority:"lowest"}),this.upcastDispatcher.on("element",Id(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",Id(),{priority:"lowest"}),ue().prototype.decorate.call(this,"init"),ue().prototype.decorate.call(this,"set"),ue().prototype.decorate.call(this,"get"),ue().prototype.decorate.call(this,"toView"),ue().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},K6)},{priority:"lowest"})}get(e={}){const{rootName:t="main",trim:n="empty"}=e;if(!this._checkIfRootsExists([t]))throw new w("datacontroller-get-non-existent-root",this);const s=this.model.document.getRoot(t);return s.isAttached()||be("datacontroller-get-detached-root",this),n==="empty"&&!this.model.hasContent(s,{ignoreWhitespaces:!0})?"":this.stringify(s,e)}stringify(e,t={}){const n=this.toView(e,t);return this.processor.toData(n)}toView(e,t={}){const n=this.viewDocument,s=this._viewWriter;this.mapper.clearBindings();const o=S._createIn(e),r=new ci(n);this.mapper.bindElements(e,r);const a=e.is("documentFragment")?e.markers:KA(e);return this.downcastDispatcher.convert(o,a,s,t),r}init(e){if(this.model.document.version)throw new w("datacontroller-init-document-not-empty",this);let t={};if(typeof e=="string"?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new w("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},n=>{for(const s of Object.keys(t)){const o=this.model.document.getRoot(s);n.insert(this.parse(t[s],o),o,0)}}),Promise.resolve()}set(e,t={}){let n={};if(typeof e=="string"?n.main=e:n=e,!this._checkIfRootsExists(Object.keys(n)))throw new w("datacontroller-set-non-existent-root",this);this.model.enqueueChange(t.batchType||{},s=>{s.setSelection(null),s.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const o of Object.keys(n)){const r=this.model.document.getRoot(o);s.remove(s.createRangeIn(r)),s.insert(this.parse(n[o],r),r,0)}})}parse(e,t="$root"){const n=this.processor.toView(e);return this.toModel(n,t)}toModel(e,t="$root"){return this.model.change(n=>this.upcastDispatcher.convert(e,n,t))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const t of e)if(!this.model.document.getRoot(t))return!1;return!0}}function KA(i){const e=[],t=i.root.document;if(!t)return new Map;const n=S._createIn(i);for(const s of t.model.markers){const o=s.getRange(),r=o.isCollapsed,a=o.start.isEqual(n.start)||o.end.isEqual(n.end);if(r&&a)e.push([s.name,o]);else{const c=n.getIntersection(o);c&&e.push([s.name,c])}}return e.sort(([s,o],[r,a])=>{if(o.end.compareWith(a.start)!=="after")return 1;if(o.start.compareWith(a.end)!=="before")return-1;switch(o.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(o.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return r.localeCompare(s)}}}),new Map(e)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JA{constructor(e,t){this._helpers=new Map,this._downcast=ge(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=ge(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){const n=this._downcast.includes(t);if(!this._upcast.includes(t)&&!n)throw new w("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:n})}for(e){if(!this._helpers.has(e))throw new w("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(const{model:t,view:n}of Da(e))this.for("upcast").elementToElement({model:t,view:n,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(const{model:t,view:n}of Da(e))this.for("upcast").elementToAttribute({view:n,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(const{model:t,view:n}of Da(e))this.for("upcast").attributeToAttribute({view:n,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:n}){if(this._helpers.has(e))throw new w("conversion-group-exists",this);const s=n?new TT(t):new iA(t);this._helpers.set(e,s)}}function*Da(i){if(i.model.values)for(const e of i.model.values){const t={key:i.model.key,value:e},n=i.view[e],s=i.upcastAlso?i.upcastAlso[e]:void 0;yield*Od(t,n,s)}else yield*Od(i.model,i.view,i.upcastAlso)}function*Od(i,e,t){if(yield{model:i,view:e},t)for(const n of ge(t))yield{model:i,view:n}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ot{constructor(e){this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,t){return new this(e.baseVersion)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function fl(i,e){const t=ng(e),n=t.reduce((r,a)=>r+a.offsetSize,0),s=i.parent;io(i);const o=i.index;return s._insertChild(o,t),no(s,o+t.length),no(s,o),new S(i,i.getShiftedBy(n))}function tg(i){if(!i.isFlat)throw new w("operation-utils-remove-range-not-flat",this);const e=i.start.parent;io(i.start),io(i.end);const t=e._removeChildren(i.start.index,i.end.index-i.start.index);return no(e,i.start.index),t}function to(i,e){if(!i.isFlat)throw new w("operation-utils-move-range-not-flat",this);const t=tg(i);return e=e._getTransformedByDeletion(i.start,i.end.offset-i.start.offset),fl(e,t)}function ZA(i,e,t){io(i.start),io(i.end);for(const n of i.getItems({shallow:!0})){const s=n.is("$textProxy")?n.textNode:n;t!==null?s._setAttribute(e,t):s._removeAttribute(e),no(s.parent,s.index)}no(i.end.parent,i.end.index)}function ng(i){const e=[];function t(n){if(typeof n=="string")e.push(new _e(n));else if(n instanceof qt)e.push(new _e(n.data,n.getAttributes()));else if(n instanceof Ci)e.push(n);else if(Bt(n))for(const s of n)t(s)}t(i);for(let n=1;n<e.length;n++){const s=e[n],o=e[n-1];s instanceof _e&&o instanceof _e&&ig(s,o)&&(e.splice(n-1,2,new _e(o.data+s.data,o.getAttributes())),n--)}return e}function no(i,e){const t=i.getChild(e-1),n=i.getChild(e);if(t&&n&&t.is("$text")&&n.is("$text")&&ig(t,n)){const s=new _e(t.data+n.data,t.getAttributes());i._removeChildren(e-1,2),i._insertChild(e-1,s)}}function io(i){const e=i.textNode,t=i.parent;if(e){const n=i.offset-e.startOffset,s=e.index;t._removeChildren(s,1);const o=new _e(e.data.substr(0,n),e.getAttributes()),r=new _e(e.data.substr(n),e.getAttributes());t._insertChild(s,[o,r])}}function ig(i,e){const t=i.getAttributes(),n=e.getAttributes();for(const s of t){if(s[1]!==e.getAttribute(s[0]))return!1;n.next()}return n.next().done}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class de extends Ot{constructor(e,t,n,s){super(s),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[S._createFromPositionAndShift(this.sourcePosition,this.howMany),S._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new de(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new de(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent,n=this.sourcePosition.offset,s=this.targetPosition.offset;if(n+this.howMany>e.maxOffset)throw new w("move-operation-nodes-do-not-exist",this);if(e===t&&n<s&&s<n+this.howMany)throw new w("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&xt(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=n&&this.targetPosition.path[o]<n+this.howMany)throw new w("move-operation-node-into-itself",this)}}_execute(){to(S._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){const n=L.fromJSON(e.sourcePosition,t),s=L.fromJSON(e.targetPosition,t);return new this(n,e.howMany,s,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tt extends Ot{constructor(e,t,n){super(n),this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new Os(ng(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new Os([...this.nodes].map(n=>n._clone(!0))),t=new tt(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}getReversed(){const e=this.position.root.document.graveyard,t=new L(e,[0]);return new de(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new w("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new Os([...e].map(t=>t._clone(!0))),fl(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){const n=[];for(const o of e.nodes)o.name?n.push(he.fromJSON(o)):n.push(_e.fromJSON(o));const s=new tt(L.fromJSON(e.position,t),n,e.baseVersion);return s.shouldReceiveAttributes=e.shouldReceiveAttributes,s}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ve extends Ot{constructor(e,t,n,s,o){super(o),this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=n,this.graveyardPosition=s?s.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new L(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new S(this.splitPosition,e)}get affectedSelectable(){const e=[S._createFromPositionAndShift(this.splitPosition,0),S._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(S._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new ve(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,t=new L(e,[0]);return new Fe(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new w("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new w("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new w("split-operation-graveyard-position-invalid",this)}else throw new w("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)to(S._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const n=e._clone();fl(this.insertionPosition,n)}const t=new S(L._createAt(e,this.splitPosition.offset),L._createAt(e,e.maxOffset));to(t,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const t=e.path.slice(0,-1);return t[t.length-1]++,new L(e.root,t,"toPrevious")}static fromJSON(e,t){const n=L.fromJSON(e.splitPosition,t),s=L.fromJSON(e.insertionPosition,t),o=e.graveyardPosition?L.fromJSON(e.graveyardPosition,t):null;return new this(n,e.howMany,s,o,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fe extends Ot{constructor(e,t,n,s,o){super(o),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=s.clone()}get type(){return"merge"}get deletionPosition(){return new L(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new S(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[S._createOn(e),S._createFromPositionAndShift(this.targetPosition,0),S._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new Fe(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),n=new L(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new ve(e,this.howMany,n,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent;if(e.parent)if(t.parent){if(this.howMany!=e.maxOffset)throw new w("merge-operation-how-many-invalid",this)}else throw new w("merge-operation-target-position-invalid",this);else throw new w("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,t=S._createIn(e);to(t,this.targetPosition),to(S._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){const n=L.fromJSON(e.sourcePosition,t),s=L.fromJSON(e.targetPosition,t),o=L.fromJSON(e.graveyardPosition,t);return new this(n,e.howMany,s,o,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vt extends Ot{constructor(e,t,n,s,o,r){super(r),this.name=e,this.oldRange=t?t.clone():null,this.newRange=n?n.clone():null,this.affectsData=o,this._markers=s}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new vt(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new vt(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new vt(e.name,e.oldRange?S.fromJSON(e.oldRange,t):null,e.newRange?S.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class We extends Ot{constructor(e,t,n,s,o){super(o),this.range=e.clone(),this.key=t,this.oldValue=n===void 0?null:n,this.newValue=s===void 0?null:s}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new We(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new We(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new w("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!Zi(e.getAttribute(this.key),this.oldValue))throw new w("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new w("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){Zi(this.oldValue,this.newValue)||ZA(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new We(S.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Je extends Ot{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new Je(this.baseVersion)}getReversed(){return new Je(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yt extends Ot{constructor(e,t,n,s){super(s),this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=n}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new yt(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new yt(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof he){if(e.name!==this.oldName)throw new w("rename-operation-wrong-name",this)}else throw new w("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new yt(L.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class In extends Ot{constructor(e,t,n,s,o){super(o),this.root=e,this.key=t,this.oldValue=n===void 0?null:n,this.newValue=s===void 0?null:s}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new In(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new In(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new w("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new w("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new w("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(!t.getRoot(e.root))throw new w("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new In(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ln extends Ot{constructor(e,t,n,s,o){if(super(o),this.rootName=e,this.elementName=t,this.isAdd=n,this._document=s,!this._document.getRoot(this.rootName)){const r=this._document.createRoot(this.elementName,this.rootName);r._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new ln(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new ln(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,t){return new ln(e.rootName,e.elementName,e.isAdd,t,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ht={};Ht[We.className]=We;Ht[tt.className]=tt;Ht[vt.className]=vt;Ht[de.className]=de;Ht[Je.className]=Je;Ht[Ot.className]=Ot;Ht[yt.className]=yt;Ht[In.className]=In;Ht[ln.className]=ln;Ht[ve.className]=ve;Ht[Fe.className]=Fe;class YA{static fromJSON(e,t){return Ht[e.__className].fromJSON(e,t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const q0=new Map;function le(i,e,t){let n=q0.get(i);n||(n=new Map,q0.set(i,n)),n.set(e,t)}function XA(i,e){const t=q0.get(i);return t&&t.has(e)?t.get(e):QA}function QA(i){return[i]}function Ld(i,e,t={}){const n=XA(i.constructor,e.constructor);try{return i=i.clone(),n(i,e,t)}catch(s){throw s}}function eE(i,e,t){i=i.slice(),e=e.slice();const n=new tE(t.document,t.useRelations,t.forceWeakRemove);n.setOriginalOperations(i),n.setOriginalOperations(e);const s=n.originalOperations;if(i.length==0||e.length==0)return{operationsA:i,operationsB:e,originalOperations:s};const o=new WeakMap;for(const c of i)o.set(c,0);const r={nextBaseVersionA:i[i.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:i.length,originalOperationsBCount:e.length};let a=0;for(;a<i.length;){const c=i[a],l=o.get(c);if(l==e.length){a++;continue}const x=e[l],d=Ld(c,x,n.getContext(c,x,!0)),u=Ld(x,c,n.getContext(x,c,!1));n.updateRelation(c,x),n.setOriginalOperations(d,c),n.setOriginalOperations(u,x);for(const f of d)o.set(f,l+u.length);i.splice(a,1,...d),e.splice(l,1,...u)}if(t.padWithNoOps){const c=i.length-r.originalOperationsACount,l=e.length-r.originalOperationsBCount;Fd(i,l-c),Fd(e,c-l)}return Md(i,r.nextBaseVersionB),Md(e,r.nextBaseVersionA),{operationsA:i,operationsB:e,originalOperations:s}}class tE{constructor(e,t,n=!1){this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!n,this._relations=new Map}setOriginalOperations(e,t=null){const n=t?this.originalOperations.get(t):null;for(const s of e)this.originalOperations.set(s,n||s)}updateRelation(e,t){if(e instanceof de)t instanceof Fe?e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter"):t instanceof de&&(e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter"));else if(e instanceof ve){if(t instanceof Fe)e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");else if(t instanceof de)if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{const n=S._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.splitPosition)){const s=n.end.offset-e.splitPosition.offset,o=e.splitPosition.offset-n.start.offset;this._setRelation(e,t,{howMany:s,offset:o})}}}else if(e instanceof Fe)t instanceof Fe?(e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement")):t instanceof ve&&e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource");else if(e instanceof vt){const n=e.newRange;if(!n)return;if(t instanceof de){const s=S._createFromPositionAndShift(t.sourcePosition,t.howMany),o=s.containsPosition(n.start)||s.start.isEqual(n.start),r=s.containsPosition(n.end)||s.end.isEqual(n.end);(o||r)&&!s.containsRange(n)&&this._setRelation(e,t,{side:o?"left":"right",path:o?n.start.path.slice():n.end.path.slice()})}else if(t instanceof Fe){const s=n.start.isEqual(t.targetPosition),o=n.start.isEqual(t.deletionPosition),r=n.end.isEqual(t.deletionPosition),a=n.end.isEqual(t.sourcePosition);(s||o||r||a)&&this._setRelation(e,t,{wasInLeftElement:s,wasStartBeforeMergedElement:o,wasEndBeforeMergedElement:r,wasInRightElement:a})}}}getContext(e,t,n){return{aIsStrong:n,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){const t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){const n=this.originalOperations.get(t),s=this._history.getUndoneOperation(n);if(!s)return null;const o=this.originalOperations.get(e),r=this._relations.get(o);return r&&r.get(s)||null}_setRelation(e,t,n){const s=this.originalOperations.get(e),o=this.originalOperations.get(t);let r=this._relations.get(s);r||(r=new Map,this._relations.set(s,r)),r.set(o,n)}}function Md(i,e){for(const t of i)t.baseVersion=e++}function Fd(i,e){for(let t=0;t<e;t++)i.push(new Je(0))}le(We,We,(i,e,t)=>{if(i.key===e.key&&i.range.start.hasSameParentAs(e.range.start)){const n=i.range.getDifference(e.range).map(o=>new We(o,i.key,i.oldValue,i.newValue,0)),s=i.range.getIntersection(e.range);return s&&t.aIsStrong&&n.push(new We(s,e.key,e.newValue,i.newValue,0)),n.length==0?[new Je(0)]:n}else return[i]});le(We,tt,(i,e)=>{if(i.range.start.hasSameParentAs(e.position)&&i.range.containsPosition(e.position)){const n=i.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(s=>new We(s,i.key,i.oldValue,i.newValue,i.baseVersion));if(e.shouldReceiveAttributes){const s=sg(e,i.key,i.oldValue);s&&n.unshift(s)}return n}return i.range=i.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[i]});function sg(i,e,t){const s=i.nodes.getNode(0).getAttribute(e);if(s==t)return null;const o=new S(i.position,i.position.getShiftedBy(i.howMany));return new We(o,e,s,t,0)}le(We,Fe,(i,e)=>{const t=[];i.range.start.hasSameParentAs(e.deletionPosition)&&(i.range.containsPosition(e.deletionPosition)||i.range.start.isEqual(e.deletionPosition))&&t.push(S._createFromPositionAndShift(e.graveyardPosition,1));const n=i.range._getTransformedByMergeOperation(e);return n.isCollapsed||t.push(n),t.map(s=>new We(s,i.key,i.oldValue,i.newValue,i.baseVersion))});le(We,de,(i,e)=>nE(i.range,e).map(n=>new We(n,i.key,i.oldValue,i.newValue,i.baseVersion)));function nE(i,e){const t=S._createFromPositionAndShift(e.sourcePosition,e.howMany);let n=null,s=[];t.containsRange(i,!0)?n=i:i.start.hasSameParentAs(t.start)?(s=i.getDifference(t),n=i.getIntersection(t)):s=[i];const o=[];for(let r of s){r=r._getTransformedByDeletion(e.sourcePosition,e.howMany);const a=e.getMovedRangeStart(),c=r.start.hasSameParentAs(a),l=r._getTransformedByInsertion(a,e.howMany,c);o.push(...l)}return n&&o.push(n._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),o}le(We,ve,(i,e)=>{if(i.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||i.range.end.offset++,[i];if(i.range.start.hasSameParentAs(e.splitPosition)&&i.range.containsPosition(e.splitPosition)){const t=i.clone();return t.range=new S(e.moveTargetPosition.clone(),i.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),i.range.end=e.splitPosition.clone(),i.range.end.stickiness="toPrevious",[i,t]}return i.range=i.range._getTransformedBySplitOperation(e),[i]});le(tt,We,(i,e)=>{const t=[i];if(i.shouldReceiveAttributes&&i.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(i.position)){const n=sg(i,e.key,e.newValue);n&&t.push(n)}return t});le(tt,tt,(i,e,t)=>i.position.isEqual(e.position)&&t.aIsStrong?[i]:(i.position=i.position._getTransformedByInsertOperation(e),[i]));le(tt,de,(i,e)=>(i.position=i.position._getTransformedByMoveOperation(e),[i]));le(tt,ve,(i,e)=>(i.position=i.position._getTransformedBySplitOperation(e),[i]));le(tt,Fe,(i,e)=>(i.position=i.position._getTransformedByMergeOperation(e),[i]));le(vt,tt,(i,e)=>(i.oldRange&&(i.oldRange=i.oldRange._getTransformedByInsertOperation(e)[0]),i.newRange&&(i.newRange=i.newRange._getTransformedByInsertOperation(e)[0]),[i]));le(vt,vt,(i,e,t)=>{if(i.name==e.name)if(t.aIsStrong)i.oldRange=e.newRange?e.newRange.clone():null;else return[new Je(0)];return[i]});le(vt,Fe,(i,e)=>(i.oldRange&&(i.oldRange=i.oldRange._getTransformedByMergeOperation(e)),i.newRange&&(i.newRange=i.newRange._getTransformedByMergeOperation(e)),[i]));le(vt,de,(i,e,t)=>{if(i.oldRange&&(i.oldRange=S._createFromRanges(i.oldRange._getTransformedByMoveOperation(e))),i.newRange){if(t.abRelation){const n=S._createFromRanges(i.newRange._getTransformedByMoveOperation(e));if(t.abRelation.side=="left"&&e.targetPosition.isEqual(i.newRange.start))return i.newRange.end=n.end,i.newRange.start.path=t.abRelation.path,[i];if(t.abRelation.side=="right"&&e.targetPosition.isEqual(i.newRange.end))return i.newRange.start=n.start,i.newRange.end.path=t.abRelation.path,[i]}i.newRange=S._createFromRanges(i.newRange._getTransformedByMoveOperation(e))}return[i]});le(vt,ve,(i,e,t)=>{if(i.oldRange&&(i.oldRange=i.oldRange._getTransformedBySplitOperation(e)),i.newRange){if(t.abRelation){const n=i.newRange._getTransformedBySplitOperation(e);return i.newRange.start.isEqual(e.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?i.newRange.start=L._createAt(e.insertionPosition):i.newRange.start.isEqual(e.splitPosition)&&!t.abRelation.wasInLeftElement&&(i.newRange.start=L._createAt(e.moveTargetPosition)),i.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasInRightElement?i.newRange.end=L._createAt(e.moveTargetPosition):i.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?i.newRange.end=L._createAt(e.insertionPosition):i.newRange.end=n.end,[i]}i.newRange=i.newRange._getTransformedBySplitOperation(e)}return[i]});le(Fe,tt,(i,e)=>(i.sourcePosition.hasSameParentAs(e.position)&&(i.howMany+=e.howMany),i.sourcePosition=i.sourcePosition._getTransformedByInsertOperation(e),i.targetPosition=i.targetPosition._getTransformedByInsertOperation(e),[i]));le(Fe,Fe,(i,e,t)=>{if(i.sourcePosition.isEqual(e.sourcePosition)&&i.targetPosition.isEqual(e.targetPosition))if(t.bWasUndone){const n=e.graveyardPosition.path.slice();return n.push(0),i.sourcePosition=new L(e.graveyardPosition.root,n),i.howMany=0,[i]}else return[new Je(0)];if(i.sourcePosition.isEqual(e.sourcePosition)&&!i.targetPosition.isEqual(e.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){const n=i.targetPosition.root.rootName=="$graveyard",s=e.targetPosition.root.rootName=="$graveyard";if(s&&!n||!(n&&!s)&&t.aIsStrong){const c=e.targetPosition._getTransformedByMergeOperation(e),l=i.targetPosition._getTransformedByMergeOperation(e);return[new de(c,i.howMany,l,0)]}else return[new Je(0)]}return i.sourcePosition.hasSameParentAs(e.targetPosition)&&(i.howMany+=e.howMany),i.sourcePosition=i.sourcePosition._getTransformedByMergeOperation(e),i.targetPosition=i.targetPosition._getTransformedByMergeOperation(e),(!i.graveyardPosition.isEqual(e.graveyardPosition)||!t.aIsStrong)&&(i.graveyardPosition=i.graveyardPosition._getTransformedByMergeOperation(e)),[i]});le(Fe,de,(i,e,t)=>{const n=S._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&i.deletionPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(i.sourcePosition)?[new Je(0)]:(i.sourcePosition.hasSameParentAs(e.targetPosition)&&(i.howMany+=e.howMany),i.sourcePosition.hasSameParentAs(e.sourcePosition)&&(i.howMany-=e.howMany),i.sourcePosition=i.sourcePosition._getTransformedByMoveOperation(e),i.targetPosition=i.targetPosition._getTransformedByMoveOperation(e),i.graveyardPosition.isEqual(e.targetPosition)||(i.graveyardPosition=i.graveyardPosition._getTransformedByMoveOperation(e)),[i])});le(Fe,ve,(i,e,t)=>{if(e.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),i.deletionPosition.isEqual(e.graveyardPosition)&&(i.howMany=e.howMany)),i.targetPosition.isEqual(e.splitPosition)){const n=e.howMany!=0,s=e.graveyardPosition&&i.deletionPosition.isEqual(e.graveyardPosition);if(n||s||t.abRelation=="mergeTargetNotMoved")return i.sourcePosition=i.sourcePosition._getTransformedBySplitOperation(e),[i]}if(i.sourcePosition.isEqual(e.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return i.howMany=0,i.targetPosition=i.targetPosition._getTransformedBySplitOperation(e),[i];if(t.abRelation=="mergeSameElement"||i.sourcePosition.offset>0)return i.sourcePosition=e.moveTargetPosition.clone(),i.targetPosition=i.targetPosition._getTransformedBySplitOperation(e),[i]}return i.sourcePosition.hasSameParentAs(e.splitPosition)&&(i.howMany=e.splitPosition.offset),i.sourcePosition=i.sourcePosition._getTransformedBySplitOperation(e),i.targetPosition=i.targetPosition._getTransformedBySplitOperation(e),[i]});le(de,tt,(i,e)=>{const n=S._createFromPositionAndShift(i.sourcePosition,i.howMany)._getTransformedByInsertOperation(e,!1)[0];return i.sourcePosition=n.start,i.howMany=n.end.offset-n.start.offset,i.targetPosition.isEqual(e.position)||(i.targetPosition=i.targetPosition._getTransformedByInsertOperation(e)),[i]});le(de,de,(i,e,t)=>{const n=S._createFromPositionAndShift(i.sourcePosition,i.howMany),s=S._createFromPositionAndShift(e.sourcePosition,e.howMany);let o=t.aIsStrong,r=!t.aIsStrong;t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?r=!0:(t.abRelation=="insertAfter"||t.baRelation=="insertBefore")&&(r=!1);let a;if(i.targetPosition.isEqual(e.targetPosition)&&r?a=i.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):a=i.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Nd(i,e)&&Nd(e,i))return[e.getReversed()];if(n.containsPosition(e.targetPosition)&&n.containsRange(s,!0))return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),ji([n],a);if(s.containsPosition(i.targetPosition)&&s.containsRange(n,!0))return n.start=n.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),n.end=n.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),ji([n],a);const x=xt(i.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(x=="prefix"||x=="extension")return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),ji([n],a);i.type=="remove"&&e.type!="remove"&&!t.aWasUndone&&!t.forceWeakRemove?o=!0:i.type!="remove"&&e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&(o=!1);const d=[],u=n.getDifference(s);for(const m of u){m.start=m.start._getTransformedByDeletion(e.sourcePosition,e.howMany),m.end=m.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const b=xt(m.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",p=m._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,b);d.push(...p)}const f=n.getIntersection(s);return f!==null&&o&&(f.start=f.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),f.end=f.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),d.length===0?d.push(f):d.length==1?s.start.isBefore(n.start)||s.start.isEqual(n.start)?d.unshift(f):d.push(f):d.splice(1,0,f)),d.length===0?[new Je(i.baseVersion)]:ji(d,a)});le(de,ve,(i,e,t)=>{let n=i.targetPosition.clone();(!i.targetPosition.isEqual(e.insertionPosition)||!e.graveyardPosition||t.abRelation=="moveTargetAfter")&&(n=i.targetPosition._getTransformedBySplitOperation(e));const s=S._createFromPositionAndShift(i.sourcePosition,i.howMany);if(s.end.isEqual(e.insertionPosition))return e.graveyardPosition||i.howMany++,i.targetPosition=n,[i];if(s.start.hasSameParentAs(e.splitPosition)&&s.containsPosition(e.splitPosition)){let a=new S(e.splitPosition,s.end);a=a._getTransformedBySplitOperation(e);const c=[new S(s.start,e.splitPosition),a];return ji(c,n)}i.targetPosition.isEqual(e.splitPosition)&&t.abRelation=="insertAtSource"&&(n=e.moveTargetPosition),i.targetPosition.isEqual(e.insertionPosition)&&t.abRelation=="insertBetween"&&(n=i.targetPosition);const r=[s._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const a=s.start.isEqual(e.graveyardPosition)||s.containsPosition(e.graveyardPosition);i.howMany>1&&a&&!t.aWasUndone&&r.push(S._createFromPositionAndShift(e.insertionPosition,1))}return ji(r,n)});le(de,Fe,(i,e,t)=>{const n=S._createFromPositionAndShift(i.sourcePosition,i.howMany);if(e.deletionPosition.hasSameParentAs(i.sourcePosition)&&n.containsPosition(e.sourcePosition)){if(i.type=="remove"&&!t.forceWeakRemove){if(!t.aWasUndone){const r=[];let a=e.graveyardPosition.clone(),c=e.targetPosition._getTransformedByMergeOperation(e);i.howMany>1&&(r.push(new de(i.sourcePosition,i.howMany-1,i.targetPosition,0)),a=a._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany-1),c=c._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany-1));const l=e.deletionPosition._getCombined(i.sourcePosition,i.targetPosition),x=new de(a,1,l,0),d=x.getMovedRangeStart().path.slice();d.push(0);const u=new L(x.targetPosition.root,d);c=c._getTransformedByMove(a,l,1);const f=new de(c,e.howMany,u,0);return r.push(x),r.push(f),r}}else if(i.howMany==1)return t.bWasUndone?(i.sourcePosition=e.graveyardPosition.clone(),i.targetPosition=i.targetPosition._getTransformedByMergeOperation(e),[i]):[new Je(0)]}const o=S._createFromPositionAndShift(i.sourcePosition,i.howMany)._getTransformedByMergeOperation(e);return i.sourcePosition=o.start,i.howMany=o.end.offset-o.start.offset,i.targetPosition=i.targetPosition._getTransformedByMergeOperation(e),[i]});le(yt,tt,(i,e)=>(i.position=i.position._getTransformedByInsertOperation(e),[i]));le(yt,Fe,(i,e)=>i.position.isEqual(e.deletionPosition)?(i.position=e.graveyardPosition.clone(),i.position.stickiness="toNext",[i]):(i.position=i.position._getTransformedByMergeOperation(e),[i]));le(yt,de,(i,e)=>(i.position=i.position._getTransformedByMoveOperation(e),[i]));le(yt,yt,(i,e,t)=>{if(i.position.isEqual(e.position))if(t.aIsStrong)i.oldName=e.newName;else return[new Je(0)];return[i]});le(yt,ve,(i,e)=>{const t=i.position.path,n=e.splitPosition.getParentPath();if(xt(t,n)=="same"&&!e.graveyardPosition){const s=new yt(i.position.getShiftedBy(1),i.oldName,i.newName,0);return[i,s]}return i.position=i.position._getTransformedBySplitOperation(e),[i]});le(In,In,(i,e,t)=>{if(i.root===e.root&&i.key===e.key){if(!t.aIsStrong||i.newValue===e.newValue)return[new Je(0)];i.oldValue=e.newValue}return[i]});le(ln,ln,(i,e)=>i.rootName===e.rootName&&i.isAdd===e.isAdd?[new Je(0)]:[i]);le(ve,tt,(i,e)=>(i.splitPosition.hasSameParentAs(e.position)&&i.splitPosition.offset<e.position.offset&&(i.howMany+=e.howMany),i.splitPosition=i.splitPosition._getTransformedByInsertOperation(e),i.insertionPosition=i.insertionPosition._getTransformedByInsertOperation(e),[i]));le(ve,Fe,(i,e,t)=>{if(!i.graveyardPosition&&!t.bWasUndone&&i.splitPosition.hasSameParentAs(e.sourcePosition)){const n=e.graveyardPosition.path.slice();n.push(0);const s=new L(e.graveyardPosition.root,n),o=ve.getInsertionPosition(new L(e.graveyardPosition.root,n)),r=new ve(s,0,o,null,0);return i.splitPosition=i.splitPosition._getTransformedByMergeOperation(e),i.insertionPosition=ve.getInsertionPosition(i.splitPosition),i.graveyardPosition=r.insertionPosition.clone(),i.graveyardPosition.stickiness="toNext",[r,i]}return i.splitPosition.hasSameParentAs(e.deletionPosition)&&!i.splitPosition.isAfter(e.deletionPosition)&&i.howMany--,i.splitPosition.hasSameParentAs(e.targetPosition)&&(i.howMany+=e.howMany),i.splitPosition=i.splitPosition._getTransformedByMergeOperation(e),i.insertionPosition=ve.getInsertionPosition(i.splitPosition),i.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedByMergeOperation(e)),[i]});le(ve,de,(i,e,t)=>{const n=S._createFromPositionAndShift(e.sourcePosition,e.howMany);if(i.graveyardPosition){const o=n.start.isEqual(i.graveyardPosition)||n.containsPosition(i.graveyardPosition);if(!t.bWasUndone&&o){const r=i.splitPosition._getTransformedByMoveOperation(e),a=i.graveyardPosition._getTransformedByMoveOperation(e),c=a.path.slice();c.push(0);const l=new L(a.root,c);return[new de(r,i.howMany,l,0)]}i.graveyardPosition=i.graveyardPosition._getTransformedByMoveOperation(e)}const s=i.splitPosition.isEqual(e.targetPosition);if(s&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return i.howMany+=e.howMany,i.splitPosition=i.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),i.insertionPosition=ve.getInsertionPosition(i.splitPosition),[i];if(s&&t.abRelation&&t.abRelation.howMany){const{howMany:o,offset:r}=t.abRelation;return i.howMany+=o,i.splitPosition=i.splitPosition.getShiftedBy(r),[i]}if(i.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(i.splitPosition)){const o=e.howMany-(i.splitPosition.offset-e.sourcePosition.offset);return i.howMany-=o,i.splitPosition.hasSameParentAs(e.targetPosition)&&i.splitPosition.offset<e.targetPosition.offset&&(i.howMany+=e.howMany),i.splitPosition=e.sourcePosition.clone(),i.insertionPosition=ve.getInsertionPosition(i.splitPosition),[i]}return e.sourcePosition.isEqual(e.targetPosition)||(i.splitPosition.hasSameParentAs(e.sourcePosition)&&i.splitPosition.offset<=e.sourcePosition.offset&&(i.howMany-=e.howMany),i.splitPosition.hasSameParentAs(e.targetPosition)&&i.splitPosition.offset<e.targetPosition.offset&&(i.howMany+=e.howMany)),i.splitPosition.stickiness="toNone",i.splitPosition=i.splitPosition._getTransformedByMoveOperation(e),i.splitPosition.stickiness="toNext",i.graveyardPosition?i.insertionPosition=i.insertionPosition._getTransformedByMoveOperation(e):i.insertionPosition=ve.getInsertionPosition(i.splitPosition),[i]});le(ve,ve,(i,e,t)=>{if(i.splitPosition.isEqual(e.splitPosition)){if(!i.graveyardPosition&&!e.graveyardPosition)return[new Je(0)];if(i.graveyardPosition&&e.graveyardPosition&&i.graveyardPosition.isEqual(e.graveyardPosition))return[new Je(0)];if(t.abRelation=="splitBefore")return i.howMany=0,i.graveyardPosition=i.graveyardPosition._getTransformedBySplitOperation(e),[i]}if(i.graveyardPosition&&e.graveyardPosition&&i.graveyardPosition.isEqual(e.graveyardPosition)){const n=i.splitPosition.root.rootName=="$graveyard",s=e.splitPosition.root.rootName=="$graveyard";if(s&&!n||!(n&&!s)&&t.aIsStrong){const c=[];return e.howMany&&c.push(new de(e.moveTargetPosition,e.howMany,e.splitPosition,0)),i.howMany&&c.push(new de(i.splitPosition,i.howMany,i.moveTargetPosition,0)),c}else return[new Je(0)]}if(i.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedBySplitOperation(e)),i.splitPosition.isEqual(e.insertionPosition)&&t.abRelation=="splitBefore")return i.howMany++,[i];if(e.splitPosition.isEqual(i.insertionPosition)&&t.baRelation=="splitBefore"){const n=e.insertionPosition.path.slice();n.push(0);const s=new L(e.insertionPosition.root,n),o=new de(i.insertionPosition,1,s,0);return[i,o]}return i.splitPosition.hasSameParentAs(e.splitPosition)&&i.splitPosition.offset<e.splitPosition.offset&&(i.howMany-=e.howMany),i.splitPosition=i.splitPosition._getTransformedBySplitOperation(e),i.insertionPosition=ve.getInsertionPosition(i.splitPosition),[i]});function Nd(i,e){return i.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function ji(i,e){const t=[];for(let n=0;n<i.length;n++){const s=i[n],o=new de(s.start,s.end.offset-s.start.offset,e,0);t.push(o);for(let r=n+1;r<i.length;r++)i[r]=i[r]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];e=e._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)}return t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nt extends ye(L){constructor(e,t,n="toNone"){if(super(e,t,n),!this.root.is("rootElement"))throw new w("model-liveposition-root-not-rootelement",e);iE.call(this)}detach(){this.stopListening()}toPosition(){return new L(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}nt.prototype.is=function(i){return i==="livePosition"||i==="model:livePosition"||i=="position"||i==="model:position"};function iE(){this.listenTo(this.root.document.model,"applyOperation",(i,e)=>{const t=e[0];t.isDocumentOperation&&sE.call(this,t)},{priority:"low"})}function sE(i){const e=this.getTransformedByOperation(i);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vi{constructor(e={}){typeof e=="string"&&(e=e==="transparent"?{isUndoable:!1}:{},be("batch-constructor-deprecated-string-type"));const{isUndoable:t=!0,isLocal:n=!0,isUndo:s=!1,isTyping:o=!1}=e;this.operations=[],this.isUndoable=t,this.isLocal=n,this.isUndo=s,this.isTyping=o}get type(){return be("batch-type-deprecated"),"default"}get baseVersion(){for(const e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.batch=this,this.operations.push(e),e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oE{constructor(e){this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changedRoots=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null,this._refreshedItems=new Set,this._markerCollection=e}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(e){const t=e;switch(t.type){case"insert":{if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const n of t.range.getItems({shallow:!0}))this._isInInsertedElement(n.parent)||this._markAttribute(n);break}case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;const n=this._isInInsertedElement(t.sourcePosition.parent),s=this._isInInsertedElement(t.targetPosition.parent);n||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),s||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);const n=S._createFromPositionAndShift(t.position,1);for(const s of this._markerCollection.getMarkersIntersectingRange(n)){const o=s.getData();this.bufferMarkerChange(s.name,o,o)}break}case"split":{const n=t.splitPosition.parent;this._isInInsertedElement(n)||this._markRemove(n,t.splitPosition.offset,t.howMany),this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1);break}case"merge":{const n=t.sourcePosition.parent;this._isInInsertedElement(n.parent)||this._markRemove(n.parent,n.startOffset,1);const s=t.graveyardPosition.parent;this._markInsert(s,t.graveyardPosition.offset,1);const o=t.targetPosition.parent;this._isInInsertedElement(o)||this._markInsert(o,t.targetPosition.offset,n.maxOffset);break}case"detachRoot":case"addRoot":{const n=t.affectedSelectable;if(!n._isLoaded||n.isAttached()==t.isAdd)return;this._bufferRootStateChange(t.rootName,t.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!t.root._isLoaded)return;const n=t.root.rootName;this._bufferRootAttributeChange(n,t.key,t.oldValue,t.newValue);break}}this._cachedChanges=null}bufferMarkerChange(e,t,n){t.range&&t.range.root.is("rootElement")&&!t.range.root._isLoaded&&(t.range=null),n.range&&n.range.root.is("rootElement")&&!n.range.root._isLoaded&&(n.range=null);let s=this._changedMarkers.get(e);s?s.newMarkerData=n:(s={newMarkerData:n,oldMarkerData:t},this._changedMarkers.set(e,s)),s.oldMarkerData.range==null&&n.range==null&&this._changedMarkers.delete(e)}getMarkersToRemove(){const e=[];for(const[t,n]of this._changedMarkers)n.oldMarkerData.range!=null&&e.push({name:t,range:n.oldMarkerData.range});return e}getMarkersToAdd(){const e=[];for(const[t,n]of this._changedMarkers)n.newMarkerData.range!=null&&e.push({name:t,range:n.newMarkerData.range});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,t])=>({name:e,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this._changesInElement.size>0||this._changedRoots.size>0)return!0;for(const{newMarkerData:e,oldMarkerData:t}of this._changedMarkers.values()){if(e.affectsData!==t.affectsData)return!0;if(e.affectsData){const n=e.range&&!t.range,s=!e.range&&t.range,o=e.range&&t.range&&!e.range.isEqual(t.range);if(n||s||o)return!0}}return!1}getChanges(e={}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(const n of this._changesInElement.keys()){const s=this._changesInElement.get(n).sort((x,d)=>x.offset===d.offset?x.type!=d.type?x.type=="remove"?-1:1:0:x.offset<d.offset?-1:1),o=this._elementSnapshots.get(n),r=Dd(n.getChildren()),a=rE(o.length,s);let c=0,l=0;for(const x of a)if(x==="i")t.push(this._getInsertDiff(n,c,r[c])),c++;else if(x==="r")t.push(this._getRemoveDiff(n,c,o[l])),l++;else if(x==="a"){const d=r[c].attributes,u=o[l].attributes;let f;if(r[c].name=="$text")f=new S(L._createAt(n,c),L._createAt(n,c+1));else{const m=n.offsetToIndex(c);f=new S(L._createAt(n,c),L._createAt(n.getChild(m),0))}t.push(...this._getAttributesDiff(f,u,d)),c++,l++}else c++,l++}t.sort((n,s)=>n.position.root!=s.position.root?n.position.root.rootName<s.position.root.rootName?-1:1:n.position.isEqual(s.position)?n.changeCount-s.changeCount:n.position.isBefore(s.position)?-1:1);for(let n=1,s=0;n<t.length;n++){const o=t[s],r=t[n],a=o.type=="remove"&&r.type=="remove"&&o.name=="$text"&&r.name=="$text"&&o.position.isEqual(r.position),c=o.type=="insert"&&r.type=="insert"&&o.name=="$text"&&r.name=="$text"&&o.position.parent==r.position.parent&&o.position.offset+o.length==r.position.offset,l=o.type=="attribute"&&r.type=="attribute"&&o.position.parent==r.position.parent&&o.range.isFlat&&r.range.isFlat&&o.position.offset+o.length==r.position.offset&&o.attributeKey==r.attributeKey&&o.attributeOldValue==r.attributeOldValue&&o.attributeNewValue==r.attributeNewValue;a||c||l?(o.length++,l&&(o.range.end=o.range.end.getShiftedBy(1)),t[n]=null):s=n}t=t.filter(n=>n);for(const n of t)delete n.changeCount,n.type=="attribute"&&(delete n.position,delete n.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(aE),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(e=>{const t={...e};return t.state!==void 0&&delete t.attributes,t})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems=new Set,this._cachedChanges=null}_bufferRootStateChange(e,t){if(!this._changedRoots.has(e)){this._changedRoots.set(e,{name:e,state:t?"attached":"detached"});return}const n=this._changedRoots.get(e);n.state!==void 0?(delete n.state,n.attributes===void 0&&this._changedRoots.delete(e)):n.state=t?"attached":"detached"}_bufferRootAttributeChange(e,t,n,s){const o=this._changedRoots.get(e)||{name:e},r=o.attributes||{};if(r[t]){const a=r[t];s===a.oldValue?delete r[t]:a.newValue=s}else r[t]={oldValue:n,newValue:s};Object.entries(r).length===0?(delete o.attributes,o.state===void 0&&this._changedRoots.delete(e)):(o.attributes=r,this._changedRoots.set(e,o))}_refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e);const t=S._createOn(e);for(const n of this._markerCollection.getMarkersIntersectingRange(t)){const s=n.getData();this.bufferMarkerChange(n.name,s,s)}this._cachedChanges=null}_bufferRootLoad(e){if(e.isAttached()){this._bufferRootStateChange(e.rootName,!0),this._markInsert(e,0,e.maxOffset);for(const t of e.getAttributeKeys())this._bufferRootAttributeChange(e.rootName,t,null,e.getAttribute(t));for(const t of this._markerCollection)if(t.getRange().root==e){const n=t.getData();this.bufferMarkerChange(t.name,{...n,range:null},n)}}}_markInsert(e,t,n){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const s={type:"insert",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,s)}_markRemove(e,t,n){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const s={type:"remove",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,s),this._removeAllNestedChanges(e,t,n)}_markAttribute(e){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshot(e);const n=this._getChangesForElement(e);this._handleChange(t,n),n.push(t);for(let s=0;s<n.length;s++)n[s].howMany<1&&(n.splice(s,1),s--)}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshot(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,Dd(e.getChildren()))}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const n of t){const s=e.offset+e.howMany,o=n.offset+n.howMany;if(e.type=="insert"&&(n.type=="insert"&&(e.offset<=n.offset?n.offset+=e.howMany:e.offset<o&&(n.howMany+=e.nodesToHandle,e.nodesToHandle=0)),n.type=="remove"&&e.offset<n.offset&&(n.offset+=e.howMany),n.type=="attribute")){if(e.offset<=n.offset)n.offset+=e.howMany;else if(e.offset<o){const r=n.howMany;n.howMany=e.offset-n.offset,t.unshift({type:"attribute",offset:s,howMany:r-n.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(n.type=="insert"){if(s<=n.offset)n.offset-=e.howMany;else if(s<=o)if(e.offset<n.offset){const r=s-n.offset;n.offset=e.offset,n.howMany-=r,e.nodesToHandle-=r}else n.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=n.offset)e.nodesToHandle-=n.howMany,n.howMany=0;else if(e.offset<o){const r=o-e.offset;n.howMany-=r,e.nodesToHandle-=r}}if(n.type=="remove"&&(s<=n.offset?n.offset-=e.howMany:e.offset<n.offset&&(e.nodesToHandle+=n.howMany,n.howMany=0)),n.type=="attribute"){if(s<=n.offset)n.offset-=e.howMany;else if(e.offset<n.offset){const r=s-n.offset;n.offset=e.offset,n.howMany-=r}else if(e.offset<o)if(s<=o){const r=n.howMany;n.howMany=e.offset-n.offset;const a=r-n.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:a,count:this._changeCount++})}else n.howMany-=o-e.offset}}if(e.type=="attribute"){if(n.type=="insert")if(e.offset<n.offset&&s>n.offset){if(s>o){const r={type:"attribute",offset:o,howMany:s-o,count:this._changeCount++};this._handleChange(r,t),t.push(r)}e.nodesToHandle=n.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=n.offset&&e.offset<o&&(s>o?(e.nodesToHandle=s-o,e.offset=o):e.nodesToHandle=0);if(n.type=="remove"&&e.offset<n.offset&&s>n.offset){const r={type:"attribute",offset:n.offset,howMany:s-n.offset,count:this._changeCount++};this._handleChange(r,t),t.push(r),e.nodesToHandle=n.offset-e.offset,e.howMany=e.nodesToHandle}n.type=="attribute"&&(e.offset>=n.offset&&s<=o?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=n.offset&&s>=o&&(n.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,n){return{type:"insert",position:L._createAt(e,t),name:n.name,attributes:new Map(n.attributes),length:1,changeCount:this._changeCount++}}_getRemoveDiff(e,t,n){return{type:"remove",position:L._createAt(e,t),name:n.name,attributes:new Map(n.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,n){const s=[];n=new Map(n);for(const[o,r]of t){const a=n.has(o)?n.get(o):null;a!==r&&s.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:r,attributeNewValue:a,changeCount:this._changeCount++}),n.delete(o)}for(const[o,r]of n)s.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:null,attributeNewValue:r,changeCount:this._changeCount++});return s}_isInInsertedElement(e){const t=e.parent;if(!t)return!1;const n=this._changesInElement.get(t),s=e.startOffset;if(n){for(const o of n)if(o.type=="insert"&&s>=o.offset&&s<o.offset+o.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,n){const s=new S(L._createAt(e,t),L._createAt(e,t+n));for(const o of s.getItems({shallow:!0}))o.is("element")&&(this._elementSnapshots.delete(o),this._changesInElement.delete(o),this._removeAllNestedChanges(o,0,o.maxOffset))}}function Dd(i){const e=[];for(const t of i)if(t.is("$text"))for(let n=0;n<t.data.length;n++)e.push({name:"$text",attributes:new Map(t.getAttributes())});else e.push({name:t.name,attributes:new Map(t.getAttributes())});return e}function rE(i,e){const t=[];let n=0,s=0;for(const o of e){if(o.offset>n){for(let r=0;r<o.offset-n;r++)t.push("e");s+=o.offset-n}if(o.type=="insert"){for(let r=0;r<o.howMany;r++)t.push("i");n=o.offset+o.howMany}else if(o.type=="remove"){for(let r=0;r<o.howMany;r++)t.push("r");n=o.offset,s+=o.howMany}else t.push(..."a".repeat(o.howMany).split("")),n=o.offset+o.howMany,s+=o.howMany}if(s<i)for(let o=0;o<i-s-n;o++)t.push("e");return t}function aE(i){const e="position"in i&&i.position.root.rootName=="$graveyard",t="range"in i&&i.range.root.rootName=="$graveyard";return!e&&!t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cE{constructor(){this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set,this._baseVersionToOperationIndex=new Map,this._version=0,this._gaps=new Map}get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new w("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,t=this.version){if(!this._operations.length)return[];const n=this._operations[0];e===void 0&&(e=n.baseVersion);let s=t-1;for(const[a,c]of this._gaps)e>a&&e<c&&(e=c),s>a&&s<c&&(s=a-1);if(s<n.baseVersion||e>this.lastOperation.baseVersion)return[];let o=this._baseVersionToOperationIndex.get(e);o===void 0&&(o=0);let r=this._baseVersionToOperationIndex.get(s);return r===void 0&&(r=this._operations.length-1),this._operations.slice(o,r+1)}getOperation(e){const t=this._baseVersionToOperationIndex.get(e);if(t!==void 0)return this._operations[t]}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vr extends he{constructor(e,t,n="main"){super(t),this._isAttached=!0,this._isLoaded=!0,this._document=e,this.rootName=n}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}Vr.prototype.is=function(i,e){return e?e===this.name&&(i==="rootElement"||i==="model:rootElement"||i==="element"||i==="model:element"):i==="rootElement"||i==="model:rootElement"||i==="element"||i==="model:element"||i==="node"||i==="model:node"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const zd="$graveyard";class lE extends ye(){constructor(e){super(),this.model=e,this.history=new cE,this.selection=new Jt(this),this.roots=new De({idProperty:"rootName"}),this.differ=new oE(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",zd),this.listenTo(e,"applyOperation",(t,n)=>{const s=n[0];s.isDocumentOperation&&this.differ.bufferOperation(s)},{priority:"high"}),this.listenTo(e,"applyOperation",(t,n)=>{const s=n[0];s.isDocumentOperation&&this.history.addOperation(s)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(t,n,s,o,r)=>{const a={...n.getData(),range:o};this.differ.bufferMarkerChange(n.name,r,a),s===null&&n.on("change",(c,l)=>{const x=n.getData();this.differ.bufferMarkerChange(n.name,{...x,range:l},x)})}),this.registerPostFixer(t=>{let n=!1;for(const s of this.roots)!s.isAttached()&&!s.isEmpty&&(t.remove(t.createRangeIn(s)),n=!0);for(const s of this.model.markers)s.getRange().root.isAttached()||(t.removeMarker(s),n=!0);return n})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(zd)}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new w("model-document-createroot-name-exists",this,{name:t});const n=new Vr(this,e,t);return this.roots.add(n),n}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(t=>t.rootName)}getRoots(e=!1){return this.roots.filter(t=>t!=this.graveyard&&(e||t.isAttached())&&t._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=Vm(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),t=this.model,n=t.schema,s=t.createPositionFromPath(e,[0]);return n.getNearestSelectionRange(s)||t.createRange(s)}_validateSelectionRange(e){return Hd(e.start)&&Hd(e.end)}_callPostFixers(e){let t=!1;do for(const n of this._postFixers)if(this.selection.refresh(),t=n(e),t)break;while(t)}}function Hd(i){const e=i.textNode;if(e){const t=e.data,n=i.offset-e.startOffset;return!el(t,n)&&!tl(t,n)}return!0}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xE extends ye(){constructor(){super(...arguments),this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(e){const t=e instanceof Hi?e.name:e;return this._markers.has(t)}get(e){return this._markers.get(e)||null}_set(e,t,n=!1,s=!1){const o=e instanceof Hi?e.name:e;if(o.includes(","))throw new w("markercollection-incorrect-marker-name",this);const r=this._markers.get(o);if(r){const l=r.getData(),x=r.getRange();let d=!1;return x.isEqual(t)||(r._attachLiveRange(Mt.fromRange(t)),d=!0),n!=r.managedUsingOperations&&(r._managedUsingOperations=n,d=!0),typeof s=="boolean"&&s!=r.affectsData&&(r._affectsData=s,d=!0),d&&this.fire(`update:${o}`,r,x,t,l),r}const a=Mt.fromRange(t),c=new Hi(o,a,n,s);return this._markers.set(o,c),this.fire(`update:${o}`,c,null,t,{...c.getData(),range:null}),c}_remove(e){const t=e instanceof Hi?e.name:e,n=this._markers.get(t);return n?(this._markers.delete(t),this.fire(`update:${t}`,n,n.getRange(),null,n.getData()),this._destroyMarker(n),!0):!1}_refresh(e){const t=e instanceof Hi?e.name:e,n=this._markers.get(t);if(!n)throw new w("markercollection-refresh-marker-not-exists",this);const s=n.getRange();this.fire(`update:${t}`,n,s,s,n.getData())}*getMarkersAtPosition(e){for(const t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(const t of this)t.getRange().getIntersection(e)!==null&&(yield t)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class Hi extends ye(Zn){constructor(e,t,n,s){super(),this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=n,this._affectsData=s}get managedUsingOperations(){if(!this._liveRange)throw new w("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new w("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new w("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new w("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new w("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Hi.prototype.is=function(i){return i==="marker"||i==="model:marker"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dE extends Ot{constructor(e,t){super(null),this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new w("detach-operation-on-document-node",this)}_execute(){tg(S._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kn extends Zn{constructor(e){super(),this.markers=new Map,this._children=new Os,e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(const n of e)t=t.getChild(t.offsetToIndex(n));return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const t of this._children)e.push(t.toJSON());return e}static fromJSON(e){const t=[];for(const n of e)n.name?t.push(he.fromJSON(n)):t.push(_e.fromJSON(n));return new kn(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const n=uE(t);for(const s of n)s.parent!==null&&s._remove(),s.parent=this;this._children._insertNodes(e,n)}_removeChildren(e,t=1){const n=this._children._removeNodes(e,t);for(const s of n)s.parent=null;return n}}kn.prototype.is=function(i){return i==="documentFragment"||i==="model:documentFragment"};function uE(i){return typeof i=="string"?[new _e(i)]:(Bt(i)||(i=[i]),Array.from(i).map(e=>typeof e=="string"?new _e(e):e instanceof qt?new _e(e.data,e.getAttributes()):e))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fE{constructor(e,t){this.model=e,this.batch=t}createText(e,t){return new _e(e,t)}createElement(e,t){return new he(e,t)}createDocumentFragment(){return new kn}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,n=0){if(this._assertWriterUsedCorrectly(),e instanceof _e&&e.data=="")return;const s=L._createAt(t,n);if(e.parent)if(Wd(e.root,s.root)){this.move(S._createOn(e),s);return}else{if(e.root.document)throw new w("model-writer-insert-forbidden-move",this);this.remove(e)}const o=s.root.document?s.root.document.version:null,r=new tt(s,e,o);if(e instanceof _e&&(r.shouldReceiveAttributes=!0),this.batch.addOperation(r),this.model.applyOperation(r),e instanceof kn)for(const[a,c]of e.markers){const l=L._createAt(c.root,0),d={range:new S(c.start._getCombined(l,s),c.end._getCombined(l,s)),usingOperation:!0,affectsData:!0};this.model.markers.has(a)?this.updateMarker(a,d):this.addMarker(a,d)}}insertText(e,t,n,s){t instanceof kn||t instanceof he||t instanceof L?this.insert(this.createText(e),t,n):this.insert(this.createText(e,t),n,s)}insertElement(e,t,n,s){t instanceof kn||t instanceof he||t instanceof L?this.insert(this.createElement(e),t,n):this.insert(this.createElement(e,t),n,s)}append(e,t){this.insert(e,t,"end")}appendText(e,t,n){t instanceof kn||t instanceof he?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),n,"end")}appendElement(e,t,n){t instanceof kn||t instanceof he?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),n,"end")}setAttribute(e,t,n){if(this._assertWriterUsedCorrectly(),n instanceof S){const s=n.getMinimalFlatRanges();for(const o of s)$d(this,e,t,o)}else Ud(this,e,t,n)}setAttributes(e,t){for(const[n,s]of Gt(e))this.setAttribute(n,s,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof S){const n=t.getMinimalFlatRanges();for(const s of n)$d(this,e,null,s)}else Ud(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();const t=n=>{for(const s of n.getAttributeKeys())this.removeAttribute(s,n)};if(!(e instanceof S))t(e);else for(const n of e.getItems())t(n)}move(e,t,n){if(this._assertWriterUsedCorrectly(),!(e instanceof S))throw new w("writer-move-invalid-range",this);if(!e.isFlat)throw new w("writer-move-range-not-flat",this);const s=L._createAt(t,n);if(s.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!Wd(e.root,s.root))throw new w("writer-move-different-document",this);const o=e.root.document?e.root.document.version:null,r=new de(e.start,e.end.offset-e.start.offset,s,o);this.batch.addOperation(r),this.model.applyOperation(r)}remove(e){this._assertWriterUsedCorrectly();const n=(e instanceof S?e:S._createOn(e)).getMinimalFlatRanges().reverse();for(const s of n)this._addOperationForAffectedMarkers("move",s),hE(s.start,s.end.offset-s.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();const t=e.nodeBefore,n=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof he))throw new w("writer-merge-no-element-before",this);if(!(n instanceof he))throw new w("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,n){return this.model.createPositionFromPath(e,t,n)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){const t=e.nodeBefore,n=e.nodeAfter;this.move(S._createIn(n),L._createAt(t,"end")),this.remove(n)}_merge(e){const t=L._createAt(e.nodeBefore,"end"),n=L._createAt(e.nodeAfter,0),s=e.root.document.graveyard,o=new L(s,[0]),r=e.root.document.version,a=new Fe(n,e.nodeAfter.maxOffset,t,o,r);this.batch.addOperation(a),this.model.applyOperation(a)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof he))throw new w("writer-rename-not-element-instance",this);const n=e.root.document?e.root.document.version:null,s=new yt(L._createBefore(e),e.name,t,n);this.batch.addOperation(s),this.model.applyOperation(s)}split(e,t){this._assertWriterUsedCorrectly();let n=e.parent;if(!n.parent)throw new w("writer-split-element-no-parent",this);if(t||(t=n.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new w("writer-split-invalid-limit-element",this);let s,o;do{const r=n.root.document?n.root.document.version:null,a=n.maxOffset-e.offset,c=ve.getInsertionPosition(e),l=new ve(e,a,c,null,r);this.batch.addOperation(l),this.model.applyOperation(l),!s&&!o&&(s=n,o=e.parent.nextSibling),e=this.createPositionAfter(e.parent),n=e.parent}while(n!==t);return{position:e,range:new S(L._createAt(s,"end"),L._createAt(o,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new w("writer-wrap-range-not-flat",this);const n=t instanceof he?t:new he(t);if(n.childCount>0)throw new w("writer-wrap-element-not-empty",this);if(n.parent!==null)throw new w("writer-wrap-element-attached",this);this.insert(n,e.start);const s=new S(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(s,L._createAt(n,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new w("writer-unwrap-element-no-parent",this);this.move(S._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new w("writer-addmarker-no-usingoperation",this);const n=t.usingOperation,s=t.range,o=t.affectsData===void 0?!1:t.affectsData;if(this.model.markers.has(e))throw new w("writer-addmarker-marker-exists",this);if(!s)throw new w("writer-addmarker-no-range",this);return n?(ws(this,e,null,s,o),this.model.markers.get(e)):this.model.markers._set(e,s,n,o)}updateMarker(e,t){this._assertWriterUsedCorrectly();const n=typeof e=="string"?e:e.name,s=this.model.markers.get(n);if(!s)throw new w("writer-updatemarker-marker-not-exists",this);if(!t){be("writer-updatemarker-reconvert-using-editingcontroller",{markerName:n}),this.model.markers._refresh(s);return}const o=typeof t.usingOperation=="boolean",r=typeof t.affectsData=="boolean",a=r?t.affectsData:s.affectsData;if(!o&&!t.range&&!r)throw new w("writer-updatemarker-wrong-options",this);const c=s.getRange(),l=t.range?t.range:c;if(o&&t.usingOperation!==s.managedUsingOperations){t.usingOperation?ws(this,n,null,l,a):(ws(this,n,c,null,a),this.model.markers._set(n,l,void 0,a));return}s.managedUsingOperations?ws(this,n,c,l,a):this.model.markers._set(n,l,void 0,a)}removeMarker(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t))throw new w("writer-removemarker-no-marker",this);const n=this.model.markers.get(t);if(!n.managedUsingOperations){this.model.markers._remove(t);return}const s=n.getRange();ws(this,t,s,null,n.affectsData)}addRoot(e,t="$root"){this._assertWriterUsedCorrectly();const n=this.model.document.getRoot(e);if(n&&n.isAttached())throw new w("writer-addroot-root-exists",this);const s=this.model.document,o=new ln(e,t,!0,s,s.version);return this.batch.addOperation(o),this.model.applyOperation(o),this.model.document.getRoot(e)}detachRoot(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?this.model.document.getRoot(e):e;if(!t||!t.isAttached())throw new w("writer-detachroot-no-root",this);for(const o of this.model.markers)o.getRange().root===t&&this.removeMarker(o);for(const o of t.getAttributeKeys())this.removeAttribute(o,t);this.remove(this.createRangeIn(t));const n=this.model.document,s=new ln(t.rootName,t.name,!1,n,n.version);this.batch.addOperation(s),this.model.applyOperation(s)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,t);else for(const[n,s]of Gt(e))this._setSelectionAttribute(n,s)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){const n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){const s=Jt._getStoreAttributeKey(e);this.setAttribute(s,t,n.anchor.parent)}n._setAttribute(e,t)}_removeSelectionAttribute(e){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const n=Jt._getStoreAttributeKey(e);this.removeAttribute(n,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new w("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(const n of this.model.markers){if(!n.managedUsingOperations)continue;const s=n.getRange();let o=!1;if(e==="move"){const r=t;o=r.containsPosition(s.start)||r.start.isEqual(s.start)||r.containsPosition(s.end)||r.end.isEqual(s.end)}else{const r=t,a=r.nodeBefore,c=r.nodeAfter,l=s.start.parent==a&&s.start.isAtEnd,x=s.end.parent==c&&s.end.offset==0,d=s.end.nodeAfter==c,u=s.start.nodeAfter==c;o=l||x||d||u}o&&this.updateMarker(n.name,{range:s})}}}function $d(i,e,t,n){const s=i.model,o=s.document;let r=n.start,a,c,l;for(const d of n.getWalker({shallow:!0}))l=d.item.getAttribute(e),a&&c!=l&&(c!=t&&x(),r=a),a=d.nextPosition,c=l;a instanceof L&&a!=r&&c!=t&&x();function x(){const d=new S(r,a),u=d.root.document?o.version:null,f=new We(d,e,c,t,u);i.batch.addOperation(f),s.applyOperation(f)}}function Ud(i,e,t,n){const s=i.model,o=s.document,r=n.getAttribute(e);let a,c;if(r!=t){if(n.root===n){const x=n.document?o.version:null;c=new In(n,e,r,t,x)}else{a=new S(L._createBefore(n),i.createPositionAfter(n));const x=a.root.document?o.version:null;c=new We(a,e,r,t,x)}i.batch.addOperation(c),s.applyOperation(c)}}function ws(i,e,t,n,s){const o=i.model,r=o.document,a=new vt(e,t,n,o.markers,!!s,r.version);i.batch.addOperation(a),o.applyOperation(a)}function hE(i,e,t,n){let s;if(i.root.document){const o=n.document,r=new L(o.graveyard,[0]);s=new de(i,e,r,o.version)}else s=new dE(i,e);t.addOperation(s),n.applyOperation(s)}function Wd(i,e){return i===e||i instanceof Vr&&e instanceof Vr}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function mE(i,e,t={}){if(e.isCollapsed)return;const n=e.getFirstRange();if(n.root.rootName=="$graveyard")return;const s=i.schema;i.change(o=>{if(!t.doNotResetEntireContent&&kE(s,e)){CE(o,e);return}const r={};if(!t.doNotAutoparagraph){const l=e.getSelectedElement();l&&Object.assign(r,s.getAttributesWithProperty(l,"copyOnReplace",!0))}const[a,c]=gE(n);a.isTouching(c)||o.remove(o.createRange(a,c)),t.leaveUnmerged||(pE(o,a,c),s.removeDisallowedAttributes(a.parent.getChildren(),o)),cg(o,e,a),!t.doNotAutoparagraph&&vE(s,a)&&ag(o,a,e,r),a.detach(),c.detach()})}function gE(i){const e=i.root.document.model,t=i.start;let n=i.end;if(e.hasContent(i,{ignoreMarkers:!0})){const s=bE(n);if(s&&n.isTouching(e.createPositionAt(s,0))){const o=e.createSelection(i);e.modifySelection(o,{direction:"backward"});const r=o.getLastPosition(),a=e.createRange(r,n);e.hasContent(a,{ignoreMarkers:!0})||(n=r)}}return[nt.fromPosition(t,"toPrevious"),nt.fromPosition(n,"toNext")]}function bE(i){const e=i.parent,t=e.root.document.model.schema,n=e.getAncestors({parentFirst:!0,includeSelf:!0});for(const s of n){if(t.isLimit(s))return null;if(t.isBlock(s))return s}}function pE(i,e,t){const n=i.model;if(!hl(i.model.schema,e,t))return;const[s,o]=_E(e,t);!s||!o||(!n.hasContent(s,{ignoreMarkers:!0})&&n.hasContent(o,{ignoreMarkers:!0})?rg(i,e,t,s.parent):og(i,e,t,s.parent))}function og(i,e,t,n){const s=e.parent,o=t.parent;if(!(s==n||o==n)){for(e=i.createPositionAfter(s),t=i.createPositionBefore(o),t.isEqual(e)||i.insert(o,e),i.merge(e);t.parent.isEmpty;){const r=t.parent;t=i.createPositionBefore(r),i.remove(r)}hl(i.model.schema,e,t)&&og(i,e,t,n)}}function rg(i,e,t,n){const s=e.parent,o=t.parent;if(!(s==n||o==n)){for(e=i.createPositionAfter(s),t=i.createPositionBefore(o),t.isEqual(e)||i.insert(s,t);e.parent.isEmpty;){const r=e.parent;e=i.createPositionBefore(r),i.remove(r)}t=i.createPositionBefore(o),wE(i,t),hl(i.model.schema,e,t)&&rg(i,e,t,n)}}function wE(i,e){const t=e.nodeBefore,n=e.nodeAfter;t.name!=n.name&&i.rename(t,n.name),i.clearAttributes(t),i.setAttributes(Object.fromEntries(n.getAttributes()),t),i.merge(e)}function hl(i,e,t){const n=e.parent,s=t.parent;return n==s||i.isLimit(n)||i.isLimit(s)?!1:yE(e,t,i)}function _E(i,e){const t=i.getAncestors(),n=e.getAncestors();let s=0;for(;t[s]&&t[s]==n[s];)s++;return[t[s],n[s]]}function vE(i,e){const t=i.checkChild(e,"$text"),n=i.checkChild(e,"paragraph");return!t&&n}function yE(i,e,t){const n=new S(i,e);for(const s of n.getWalker())if(t.isLimit(s.item))return!1;return!0}function ag(i,e,t,n={}){const s=i.createElement("paragraph");i.model.schema.setAllowedAttributes(s,n,i),i.insert(s,e),cg(i,t,i.createPositionAt(s,0))}function CE(i,e){const t=i.model.schema.getLimitElement(e);i.remove(i.createRangeIn(t)),ag(i,i.createPositionAt(t,0),e)}function kE(i,e){const t=i.getLimitElement(e);if(!e.containsEntireContent(t))return!1;const n=e.getFirstRange();return n.start.parent==n.end.parent?!1:i.checkChild(t,"paragraph")}function cg(i,e,t){e instanceof Jt?i.setSelection(t):e.setTo(t)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function TE(i,e){return i.change(t=>{const n=t.createDocumentFragment(),s=e.getFirstRange();if(!s||s.isCollapsed)return n;const o=s.start.root,r=s.start.getCommonPath(s.end),a=o.getNodeByPath(r);let c;s.start.parent==s.end.parent?c=s:c=t.createRange(t.createPositionAt(a,s.start.path[r.length]),t.createPositionAt(a,s.end.path[r.length]+1));const l=c.end.offset-c.start.offset;for(const x of c.getItems({shallow:!0}))x.is("$textProxy")?t.appendText(x.data,x.getAttributes(),n):t.append(t.cloneElement(x,!0),n);if(c!=s){const x=s._getTransformedByMove(c.start,t.createPositionAt(n,0),l)[0],d=t.createRange(t.createPositionAt(n,0),x.start),u=t.createRange(x.end,t.createPositionAt(n,"end"));jd(u,t),jd(d,t)}return n})}function jd(i,e){const t=[];Array.from(i.getItems({direction:"backward"})).map(n=>e.createRangeOn(n)).filter(n=>(n.start.isAfter(i.start)||n.start.isEqual(i.start))&&(n.end.isBefore(i.end)||n.end.isEqual(i.end))).forEach(n=>{t.push(n.start.parent),e.remove(n)}),t.forEach(n=>{let s=n;for(;s.parent&&s.isEmpty;){const o=e.createRangeOn(s);s=s.parent,e.remove(o)}})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function AE(i,e,t){return i.change(n=>{const s=t||i.document.selection;s.isCollapsed||i.deleteContent(s,{doNotAutoparagraph:!0});const o=new EE(i,n,s.anchor),r=[];let a;if(e.is("documentFragment")){if(e.markers.size){const x=[];for(const[d,u]of e.markers){const{start:f,end:m}=u,b=f.isEqual(m);x.push({position:f,name:d,isCollapsed:b},{position:m,name:d,isCollapsed:b})}x.sort(({position:d},{position:u})=>d.isBefore(u)?1:-1);for(const{position:d,name:u,isCollapsed:f}of x){let m=null,b=null;const p=d.parent===e&&d.isAtStart,C=d.parent===e&&d.isAtEnd;!p&&!C?(m=n.createElement("$marker"),n.insert(m,d)):f&&(b=p?"start":"end"),r.push({name:u,element:m,collapsed:b})}}a=e.getChildren()}else a=[e];o.handleNodes(a);let c=o.getSelectionRange();if(e.is("documentFragment")&&r.length){const x=c?Mt.fromRange(c):null,d={};for(let u=r.length-1;u>=0;u--){const{name:f,element:m,collapsed:b}=r[u],p=!d[f];if(p&&(d[f]=[]),m){const C=n.createPositionAt(m,"before");d[f].push(C),n.remove(m)}else{const C=o.getAffectedRange();if(!C){b&&d[f].push(o.position);continue}b?d[f].push(C[b]):d[f].push(p?C.start:C.end)}}for(const[u,[f,m]]of Object.entries(d))f&&m&&f.root===m.root&&n.addMarker(u,{usingOperation:!0,affectsData:!0,range:new S(f,m)});x&&(c=x.toRange(),x.detach())}/* istanbul ignore else -- @preserve */c&&(s instanceof Jt?n.setSelection(c):s.setTo(c));const l=o.getAffectedRange()||i.createRange(s.anchor);return o.destroy(),l})}class EE{constructor(e,t,n){this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null,this._nodeToSelect=null,this.model=e,this.writer=t,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(e){for(const t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){const t=this.writer.createPositionAfter(this._lastNode),n=this.writer.createPositionAfter(e);if(n.isAfter(t)){this._lastNode=e;/* istanbul ignore if -- @preserve */if(this.position.parent!=e||!this.position.isAtEnd)throw new w("insertcontent-invalid-insertion-position",this);this.position=n,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?S._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new S(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(this.schema.isObject(e)){this._handleObject(e);return}let t=this._checkAndAutoParagraphToAllowedPosition(e);if(!t&&(t=this._checkAndSplitToAllowedPosition(e),!t)){this._handleDisallowedNode(e);return}this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const e=nt.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleObject(e){this._checkAndSplitToAllowedPosition(e)?this._appendToFragment(e):this._tryAutoparagraphing(e)}_handleDisallowedNode(e){e.is("element")?this.handleNodes(e.getChildren()):this._tryAutoparagraphing(e)}_appendToFragment(e){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,e))throw new w("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=nt.fromPosition(e,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(e))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=nt.fromPosition(e,"toNext"))}_mergeOnLeft(){const e=this._firstNode;if(!(e instanceof he)||!this._canMergeLeft(e))return;const t=nt._createBefore(e);t.stickiness="toNext";const n=nt.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=nt._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=nt._createAt(t.nodeBefore,"end","toNext")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){const e=this._lastNode;if(!(e instanceof he)||!this._canMergeRight(e))return;const t=nt._createAfter(e);t.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(t))throw new w("insertcontent-invalid-insertion-position",this);this.position=L._createAt(t.nodeBefore,"end");const n=nt.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=nt._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=nt._createAt(t.nodeBefore,0,"toPrevious")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){const t=e.previousSibling;return t instanceof he&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){const t=e.nextSibling;return t instanceof he&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_tryAutoparagraphing(e){const t=this.writer.createElement("paragraph");this._getAllowedIn(this.position.parent,t)&&this.schema.checkChild(t,e)&&(t._appendChild(e),this._handleNode(t))}_checkAndAutoParagraphToAllowedPosition(e){if(this.schema.checkChild(this.position.parent,e))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",e))return!1;this._insertPartialFragment();const t=this.writer.createElement("paragraph");return this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0),!0}_checkAndSplitToAllowedPosition(e){const t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){const n=this.position.parent;this.position=this.writer.createPositionBefore(n),n.isEmpty&&n.parent===t&&this.writer.remove(n)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const n=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=n,this.canMergeWith.add(this.position.nodeAfter)}return!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lg(i,e,t="auto"){const n=i.getSelectedElement();if(n&&e.schema.isObject(n)&&!e.schema.isInline(n))return t=="before"||t=="after"?e.createRange(e.createPositionAt(n,t)):e.createRangeOn(n);const s=Be(i.getSelectedBlocks());if(!s)return e.createRange(i.focus);if(s.isEmpty)return e.createRange(e.createPositionAt(s,0));const o=e.createPositionAfter(s);return i.focus.isTouching(o)?e.createRange(o):e.createRange(e.createPositionBefore(s))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function SE(i,e,t,n={}){if(!i.schema.isObject(e))throw new w("insertobject-element-not-an-object",i,{object:e});const s=t||i.document.selection;let o=s;n.findOptimalPosition&&i.schema.isBlock(e)&&(o=i.createSelection(lg(s,i,n.findOptimalPosition)));const r=Be(s.getSelectedBlocks()),a={};return r&&Object.assign(a,i.schema.getAttributesWithProperty(r,"copyOnReplace",!0)),i.change(c=>{o.isCollapsed||i.deleteContent(o,{doNotAutoparagraph:!0});let l=e;const x=o.anchor.parent;!i.schema.checkChild(x,e)&&i.schema.checkChild(x,"paragraph")&&i.schema.checkChild("paragraph",e)&&(l=c.createElement("paragraph"),c.insert(e,l)),i.schema.setAllowedAttributes(l,a,c);const d=i.insertContent(l,o);return d.isCollapsed||n.setSelection&&IE(c,e,n.setSelection,a),d})}function IE(i,e,t,n){const s=i.model;if(t=="on"){i.setSelection(e,"on");return}if(t!="after")throw new w("insertobject-invalid-place-parameter-value",s);let o=e.nextSibling;if(s.schema.isInline(e)){i.setSelection(e,"after");return}!(o&&s.schema.checkChild(o,"$text"))&&s.schema.checkChild(e.parent,"paragraph")&&(o=i.createElement("paragraph"),s.schema.setAllowedAttributes(o,n,i),s.insertContent(o,i.createPositionAfter(e))),o&&i.setSelection(o,0)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const PE=' ,.?!:;"-()';function RE(i,e,t={}){const n=i.schema,s=t.direction!="backward",o=t.unit?t.unit:"character",r=!!t.treatEmojiAsSingleUnit,a=e.focus,c=new An({boundaries:LE(a,s),singleCharacters:!0,direction:s?"forward":"backward"}),l={walker:c,schema:n,isForward:s,unit:o,treatEmojiAsSingleUnit:r};let x;for(;x=c.next();){if(x.done)return;const d=VE(l,x.value);if(d){e instanceof Jt?i.change(u=>{u.setSelectionFocus(d)}):e.setFocus(d);return}}}function VE(i,e){const{isForward:t,walker:n,unit:s,schema:o,treatEmojiAsSingleUnit:r}=i,{type:a,item:c,nextPosition:l}=e;if(a=="text")return i.unit==="word"?OE(n,t):BE(n,s,r);if(a==(t?"elementStart":"elementEnd")){if(o.isSelectable(c))return L._createAt(c,t?"after":"before");if(o.checkChild(l,"$text"))return l}else{if(o.isLimit(c)){n.skip(()=>!0);return}if(o.checkChild(l,"$text"))return l}}function BE(i,e,t){const n=i.position.textNode;if(n){const s=n.data;let o=i.position.offset-n.startOffset;for(;el(s,o)||e=="character"&&tl(s,o)||t&&e6(s,o);)i.next(),o=i.position.offset-n.startOffset}return i.position}function OE(i,e){let t=i.position.textNode;for(t||(t=e?i.position.nodeAfter:i.position.nodeBefore);t&&t.is("$text");){const n=i.position.offset-t.startOffset;if(FE(t,n,e))t=e?i.position.nodeAfter:i.position.nodeBefore;else{if(ME(t.data,n,e))break;i.next()}}return i.position}function LE(i,e){const t=i.root,n=L._createAt(t,e?"end":0);return e?new S(i,n):new S(n,i)}function ME(i,e,t){const n=e+(t?0:-1);return PE.includes(i.charAt(n))}function FE(i,e,t){return e===(t?i.offsetSize:0)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let NE=class extends ue(){constructor(){super(),this.markers=new xE,this.document=new lE(this),this.schema=new TA,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,t)=>{t[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck((e,t)=>{if(t.name==="$marker")return!0}),gA(this),this.document.registerPostFixer(K6),this.on("insertContent",(e,[t,n])=>{e.return=AE(this,t,n)}),this.on("insertObject",(e,[t,n,s])=>{e.return=SE(this,t,n,s)}),this.on("canEditAt",e=>{const t=!this.document.isReadOnly;e.return=t,t||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new Vi,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(t){/* istanbul ignore next -- @preserve */w.rethrowUnexpectedError(t,this)}}enqueueChange(e,t){try{e?typeof e=="function"?(t=e,e=new Vi):e instanceof Vi||(e=new Vi(e)):e=new Vi,this._pendingChanges.push({batch:e,callback:t}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(n){/* istanbul ignore next -- @preserve */w.rethrowUnexpectedError(n,this)}}applyOperation(e){e._execute()}insertContent(e,t,n,...s){const o=za(t,n);return this.fire("insertContent",[e,o,n,...s])}insertObject(e,t,n,s,...o){const r=za(t,n);return this.fire("insertObject",[e,r,s,s,...o])}deleteContent(e,t){mE(this,e,t)}modifySelection(e,t){RE(this,e,t)}getSelectedContent(e){return TE(this,e)}hasContent(e,t={}){const n=e instanceof S?e:S._createIn(e);if(n.isCollapsed)return!1;const{ignoreWhitespaces:s=!1,ignoreMarkers:o=!1}=t;if(!o){for(const r of this.markers.getMarkersIntersectingRange(n))if(r.affectsData)return!0}for(const r of n.getItems())if(this.schema.isContent(r))if(r.is("$textProxy"))if(s){if(r.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){const t=za(e);return this.fire("canEditAt",[t])}createPositionFromPath(e,t,n){return new L(e,t,n)}createPositionAt(e,t){return L._createAt(e,t)}createPositionAfter(e){return L._createAfter(e)}createPositionBefore(e){return L._createBefore(e)}createRange(e,t){return new S(e,t)}createRangeIn(e){return S._createIn(e)}createRangeOn(e){return S._createOn(e)}createSelection(...e){return new It(...e)}createBatch(e){return new Vi(e)}createOperationFromJSON(e){return YA.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const t=this._pendingChanges[0].batch;this._currentWriter=new fE(this,t);const n=this._pendingChanges[0].callback(this._currentWriter);e.push(n),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function za(i,e){if(i)return i instanceof It||i instanceof Jt?i:i instanceof Ci?e||e===0?new It(i,e):i.is("rootElement")?new It(i,"in"):new It(i,"on"):new It(i)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xg extends Jn{constructor(){super(...arguments),this.domEventType="click"}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oa extends Jn{constructor(){super(...arguments),this.domEventType=["mousedown","mouseup","mouseover","mouseout"]}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $t{constructor(e){this.document=e}createDocumentFragment(e){return new ci(this.document,e)}createElement(e,t,n){return new Kt(this.document,e,t,n)}createText(e){return new Re(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,n){return n._insertChild(e,t)}removeChildren(e,t,n){return n._removeChildren(e,t)}remove(e){const t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){const n=e.parent;if(n){const s=n.getChildIndex(e);return this.removeChildren(s,1,n),this.insertChild(s,t,n),!0}return!1}unwrapElement(e){const t=e.parent;if(t){const n=t.getChildIndex(e);this.remove(e),this.insertChild(n,e.getChildren(),t)}}rename(e,t){const n=new Kt(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,n)?n:null}setAttribute(e,t,n){n._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,n){wt(e)&&n===void 0?t._setStyle(e):n._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,n){n._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return H._createAt(e,t)}createPositionAfter(e){return H._createAfter(e)}createPositionBefore(e){return H._createBefore(e)}createRange(e,t){return new re(e,t)}createRangeOn(e){return re._createOn(e)}createRangeIn(e){return re._createIn(e)}createSelection(...e){return new Sn(...e)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const DE=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,zE=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,HE=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,$E=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,UE=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,WE=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,jE=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function dg(i){return i.startsWith("#")?DE.test(i):i.startsWith("rgb")?zE.test(i)||HE.test(i):i.startsWith("hsl")?$E.test(i)||UE.test(i):jE.has(i.toLowerCase())}const qE=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function GE(i){return qE.includes(i)}const KE=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function ra(i){return KE.test(i)}const JE=/^[+-]?[0-9]*([.][0-9]+)?%$/;function ug(i){return JE.test(i)}const ZE=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function YE(i){return ZE.includes(i)}const XE=["center","top","bottom","left","right"];function QE(i){return XE.includes(i)}const eS=["fixed","scroll","local"];function tS(i){return eS.includes(i)}const nS=/^url\(/;function iS(i){return nS.test(i)}function Fs(i=""){if(i==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const e=ml(i),t=e[0],n=e[2]||t,s=e[1]||t,o=e[3]||s;return{top:t,bottom:n,right:s,left:o}}function Ns(i){return e=>{const{top:t,right:n,bottom:s,left:o}=e,r=[];return[t,n,o,s].every(a=>!!a)?r.push([i,sS(e)]):(t&&r.push([i+"-top",t]),n&&r.push([i+"-right",n]),s&&r.push([i+"-bottom",s]),o&&r.push([i+"-left",o])),r}}function sS({top:i,right:e,bottom:t,left:n}){const s=[];return n!==e?s.push(i,e,t,n):t!==i?s.push(i,e,t):e!==i?s.push(i,e):s.push(i),s.join(" ")}function fg(i){return e=>({path:i,value:Fs(e)})}function ml(i){const e=i.matchAll(WE);return Array.from(e).map(t=>t[0])}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function gl(i){i.setNormalizer("background",oS()),i.setNormalizer("background-color",rS()),i.setReducer("background",aS()),i.setStyleRelation("background",["background-color"])}function oS(){return i=>{const e={},t=ml(i);for(const n of t)YE(n)?(e.repeat=e.repeat||[],e.repeat.push(n)):QE(n)?(e.position=e.position||[],e.position.push(n)):tS(n)?e.attachment=n:dg(n)?e.color=n:iS(n)&&(e.image=n);return{path:"background",value:e}}}function rS(){return i=>({path:"background.color",value:i})}function aS(){return i=>{const e=[];return e.push(["background-color",i.color]),e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function hg(i){i.setNormalizer("border",cS()),i.setNormalizer("border-top",zo("top")),i.setNormalizer("border-right",zo("right")),i.setNormalizer("border-bottom",zo("bottom")),i.setNormalizer("border-left",zo("left")),i.setNormalizer("border-color",Ha("color")),i.setNormalizer("border-width",Ha("width")),i.setNormalizer("border-style",Ha("style")),i.setNormalizer("border-top-color",Lt("color","top")),i.setNormalizer("border-top-style",Lt("style","top")),i.setNormalizer("border-top-width",Lt("width","top")),i.setNormalizer("border-right-color",Lt("color","right")),i.setNormalizer("border-right-style",Lt("style","right")),i.setNormalizer("border-right-width",Lt("width","right")),i.setNormalizer("border-bottom-color",Lt("color","bottom")),i.setNormalizer("border-bottom-style",Lt("style","bottom")),i.setNormalizer("border-bottom-width",Lt("width","bottom")),i.setNormalizer("border-left-color",Lt("color","left")),i.setNormalizer("border-left-style",Lt("style","left")),i.setNormalizer("border-left-width",Lt("width","left")),i.setExtractor("border-top",Ho("top")),i.setExtractor("border-right",Ho("right")),i.setExtractor("border-bottom",Ho("bottom")),i.setExtractor("border-left",Ho("left")),i.setExtractor("border-top-color","border.color.top"),i.setExtractor("border-right-color","border.color.right"),i.setExtractor("border-bottom-color","border.color.bottom"),i.setExtractor("border-left-color","border.color.left"),i.setExtractor("border-top-width","border.width.top"),i.setExtractor("border-right-width","border.width.right"),i.setExtractor("border-bottom-width","border.width.bottom"),i.setExtractor("border-left-width","border.width.left"),i.setExtractor("border-top-style","border.style.top"),i.setExtractor("border-right-style","border.style.right"),i.setExtractor("border-bottom-style","border.style.bottom"),i.setExtractor("border-left-style","border.style.left"),i.setReducer("border-color",Ns("border-color")),i.setReducer("border-style",Ns("border-style")),i.setReducer("border-width",Ns("border-width")),i.setReducer("border-top",$o("top")),i.setReducer("border-right",$o("right")),i.setReducer("border-bottom",$o("bottom")),i.setReducer("border-left",$o("left")),i.setReducer("border",xS()),i.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),i.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),i.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),i.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),i.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),i.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),i.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),i.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function cS(){return i=>{const{color:e,style:t,width:n}=mg(i);return{path:"border",value:{color:Fs(e),style:Fs(t),width:Fs(n)}}}}function zo(i){return e=>{const{color:t,style:n,width:s}=mg(e),o={};return t!==void 0&&(o.color={[i]:t}),n!==void 0&&(o.style={[i]:n}),s!==void 0&&(o.width={[i]:s}),{path:"border",value:o}}}function Ha(i){return e=>({path:"border",value:lS(e,i)})}function lS(i,e){return{[e]:Fs(i)}}function Lt(i,e){return t=>({path:"border",value:{[i]:{[e]:t}}})}function Ho(i){return(e,t)=>{if(t.border)return Es(t.border,i)}}function Es(i,e){const t={};return i.width&&i.width[e]&&(t.width=i.width[e]),i.style&&i.style[e]&&(t.style=i.style[e]),i.color&&i.color[e]&&(t.color=i.color[e]),t}function mg(i){const e={},t=ml(i);for(const n of t)ra(n)||/thin|medium|thick/.test(n)?e.width=n:GE(n)?e.style=n:e.color=n;return e}function xS(){return e=>{const t=Es(e,"top"),n=Es(e,"right"),s=Es(e,"bottom"),o=Es(e,"left"),r=[t,n,s,o],a={width:i(r,"width"),style:i(r,"style"),color:i(r,"color")},c=$i(a,"all");return c.length?c:[...Object.entries(a).reduce((x,[d,u])=>(u&&(x.push([`border-${d}`,u]),r.forEach(f=>delete f[d])),x),[]),...$i(t,"top"),...$i(n,"right"),...$i(s,"bottom"),...$i(o,"left")]};function i(e,t){return e.map(n=>n[t]).reduce((n,s)=>n==s?n:null)}}function $o(i){return e=>$i(e,i)}function $i(i,e){const t=[];if(i&&i.width&&t.push("width"),i&&i.style&&t.push("style"),i&&i.color&&t.push("color"),t.length==3){const n=t.map(s=>i[s]).join(" ");return[e=="all"?["border",n]:[`border-${e}`,n]]}return e=="all"?[]:t.map(n=>[`border-${e}-${n}`,i[n]])}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function dS(i){i.setNormalizer("margin",fg("margin")),i.setNormalizer("margin-top",e=>({path:"margin.top",value:e})),i.setNormalizer("margin-right",e=>({path:"margin.right",value:e})),i.setNormalizer("margin-bottom",e=>({path:"margin.bottom",value:e})),i.setNormalizer("margin-left",e=>({path:"margin.left",value:e})),i.setReducer("margin",Ns("margin")),i.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function uS(i){i.setNormalizer("padding",fg("padding")),i.setNormalizer("padding-top",e=>({path:"padding.top",value:e})),i.setNormalizer("padding-right",e=>({path:"padding.right",value:e})),i.setNormalizer("padding-bottom",e=>({path:"padding.bottom",value:e})),i.setNormalizer("padding-left",e=>({path:"padding.left",value:e})),i.setReducer("padding",Ns("padding")),i.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fS{constructor(){this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){const n=this.get(e);if(!n)throw new w("commandcollection-command-not-found",this,{commandName:e});return n.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hS extends Le{constructor(e){super(),this.editor=e}set(e,t,n={}){if(typeof t=="string"){const s=t;t=(o,r)=>{this.editor.execute(s),r()}}super.set(e,t,n)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mS extends ue(){constructor(e={}){super();const t=this.constructor,n=e.language||t.defaultConfig&&t.defaultConfig.language;this._context=e.context||new ds({language:n}),this._context._addEditor(this,!e.context);const s=Array.from(t.builtinPlugins||[]);this.config=new zm(e,t.defaultConfig),this.config.define("plugins",s),this.config.define(this._context._getEditorConfig()),this.plugins=new w6(this,s,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new fS,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new NE,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const o=new kk;this.data=new GA(this.model,o),this.editing=new yA(this.model,o),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new JA([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new hS(this),this.keystrokes.listenTo(this.editing.view.document)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new w("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new w("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new w("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}initPlugins(){const e=this.config,t=e.get("plugins"),n=e.get("removePlugins")||[],s=e.get("extraPlugins")||[],o=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(s),n,o)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(t=>this.once("ready",t))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...t){try{return this.commands.execute(e,...t)}catch(n){/* istanbul ignore next -- @preserve */w.rethrowUnexpectedError(n,this)}}focus(){this.editing.view.focus()}static create(...e){throw new Error("This is an abstract method.")}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function gS(i){if(!fi(i.updateSourceElement))throw new w("attachtoform-missing-elementapi-interface",i);const e=i.sourceElement;if(bS(e)&&e.form){let t;const n=e.form,s=()=>i.updateSourceElement();fi(n.submit)&&(t=n.submit,n.submit=()=>{s(),t.apply(n)}),n.addEventListener("submit",s),i.on("destroy",()=>{n.removeEventListener("submit",s),t&&(n.submit=t)})}}function bS(i){return!!i&&i.tagName.toLowerCase()==="textarea"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lr(i){class e extends i{setData(n){this.data.set(n)}getData(n){return this.data.get(n)}}return e}{const i=lr(Object);lr.setData=i.prototype.setData,lr.getData=i.prototype.getData}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function G0(i){class e extends i{updateSourceElement(n){if(!this.sourceElement)throw new w("editor-missing-sourceelement",this);const s=this.config.get("updateSourceElementOnDestroy"),o=this.sourceElement instanceof HTMLTextAreaElement;if(!s&&!o){Ux(this.sourceElement,"");return}const r=typeof n=="string"?n:this.data.get();Ux(this.sourceElement,r)}}return e}G0.updateSourceElement=G0(Object).prototype.updateSourceElement;/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qd extends _6{static get pluginName(){return"PendingActions"}init(){this.set("hasAny",!1),this._actions=new De({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new w("pendingactions-add-invalid-message",this);const t=new(ue());return t.set("message",e),this._actions.add(t),this.hasAny=!0,t}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}const gg='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',pS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',bg='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',wS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',pg='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',_S='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11 1a9 9 0 1 1-8.027 13.075l1.128-1.129A7.502 7.502 0 0 0 18.5 10a7.5 7.5 0 1 0-14.962.759l-.745-.746-.76.76A9 9 0 0 1 11 1z"/><path d="M.475 8.17a.75.75 0 0 1 .978.047l.075.082 1.284 1.643 1.681-1.284a.75.75 0 0 1 .978.057l.073.083a.75.75 0 0 1-.057.978l-.083.073-2.27 1.737a.75.75 0 0 1-.973-.052l-.074-.082-1.741-2.23a.75.75 0 0 1 .13-1.052z"/><path d="M11.5 5v4.999l3.196 3.196-1.06 1.06L10.1 10.72l-.1-.113V5z"/></svg>',vS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',yS=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 10.5a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-7a1 1 0 0 0-1-1H1Zm5.006 7.25-.221-.74h-1.84l-.22.74H2l1.915-5.25h1.961l1.916 5.25H6.006Zm-1.71-1.915h1.138l-.55-1.87h-.03l-.557 1.87ZM8.772 12.5h1.686v3.907h2.694v1.343h-4.38V12.5Zm8.067 5.25v-3.907h1.717V12.5h-5.128v1.343h1.725v3.907h1.686Z"/><path d="M8.013 7.326a.577.577 0 0 0-.797-.028L5.214 9.5h5.126L8.013 7.326ZM11.778 9.5h3.098l-1.015-1.197a.58.58 0 0 0-.788 0L11.778 9.5Zm4.364 0V1.83H3.858V9.5H2.5V1.45c0-.525.444-.95.996-.95h13.017c.543 0 .987.425.987.95V9.5h-1.358Zm-4.576-4.623a1.776 1.776 0 1 0 3.522-.462 1.776 1.776 0 0 0-3.522.462Z"/></svg>
`,CS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',kS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>',TS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',AS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',ES='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',SS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',IS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',PS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',RS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',VS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',BS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',OS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',LS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',MS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',FS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',NS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',DS='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',zS='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M13 6H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V8a.5.5 0 0 1 .5-.5h11z"/></svg>',HS='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M7 10H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h5z"/></svg>',$S='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M10 8H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5h8z"/></svg>',US='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',WS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',jS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',qS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',GS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',KS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',JS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',ZS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',YS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',XS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const K={bold:KS,cancel:gg,caption:pS,check:bg,cog:wS,eraser:pg,history:_S,image:kS,lowVision:vS,textAlternative:yS,loupe:CS,importExport:XS,paragraph:JS,plus:ZS,text:YS,alignBottom:TS,alignMiddle:AS,alignTop:ES,alignLeft:SS,alignCenter:IS,alignRight:PS,alignJustify:RS,objectLeft:FS,objectCenter:BS,objectRight:NS,objectFullWidth:LS,objectInline:MS,objectBlockLeft:VS,objectBlockRight:OS,objectSizeFull:DS,objectSizeLarge:zS,objectSizeSmall:HS,objectSizeMedium:$S,pencil:US,pilcrow:WS,quote:jS,threeVerticalDots:qS,dragIndicator:GS};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const{threeVerticalDots:wg}=K,QS={alignLeft:K.alignLeft,bold:K.bold,importExport:K.importExport,paragraph:K.paragraph,plus:K.plus,text:K.text,threeVerticalDots:K.threeVerticalDots,pilcrow:K.pilcrow,dragIndicator:K.dragIndicator};class ts extends D{constructor(e,t){super(e);const n=this.bindTemplate,s=this.t;this.options=t||{},this.set("ariaLabel",s("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new Se,this.keystrokes=new Le,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new eI(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const o=e.uiLanguageDirection==="rtl";this._focusCycler=new ut({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});const r=["ck","ck-toolbar",n.to("class"),n.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&r.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:r,role:"toolbar","aria-label":n.to("ariaLabel"),style:{maxWidth:n.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:xk(this)}}),this._behavior=this.options.shouldGroupWhenFull?new nI(this):new tI(this)}render(){super.render(),this.focusTracker.add(this.element);for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,t,n){this.items.addMany(this._buildItemsFromConfig(e,t,n))}_buildItemsFromConfig(e,t,n){const s=p6(e),o=n||s.removeItems;return this._cleanItemsConfiguration(s.items,t,o).map(a=>Ee(a)?this._createNestedToolbarDropdown(a,t,o):a==="|"?new b6:a==="-"?new lk:t.create(a)).filter(a=>!!a)}_cleanItemsConfiguration(e,t,n){const s=e.filter((o,r,a)=>o==="|"?!0:n.indexOf(o)!==-1?!1:o==="-"?this.options.shouldGroupWhenFull?(be("toolbarview-line-break-ignored-when-grouping-items",a),!1):!0:!Ee(o)&&!t.has(o)?(be("toolbarview-item-unavailable",{item:o}),!1):!0);return this._cleanSeparatorsAndLineBreaks(s)}_cleanSeparatorsAndLineBreaks(e){const t=r=>r!=="-"&&r!=="|",n=e.length,s=e.findIndex(t);if(s===-1)return[];const o=n-e.slice().reverse().findIndex(t);return e.slice(s,o).filter((r,a,c)=>t(r)?!0:!(a>0&&c[a-1]===r))}_createNestedToolbarDropdown(e,t,n){let{label:s,icon:o,items:r,tooltip:a=!0,withText:c=!1}=e;if(r=this._cleanItemsConfiguration(r,t,n),!r.length)return null;const l=this.locale,x=Ne(l);return s||be("toolbarview-nested-toolbar-dropdown-missing-label",e),x.class="ck-toolbar__nested-toolbar-dropdown",x.buttonView.set({label:s,tooltip:a,withText:!!c}),o!==!1?x.buttonView.icon=QS[o]||o||wg:x.buttonView.withText=!0,la(x,()=>x.toolbarView._buildItemsFromConfig(r,t,n)),x}}class eI extends D{constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class tI{constructor(e){const t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using(n=>n),e.focusables.bindTo(e.items).using(n=>n),e.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class nI{constructor(e){this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),e.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCycleableItems.bind(this)),e.children.on("change",this._updateFocusCycleableItems.bind(this)),e.items.on("change",(t,n)=>{const s=n.index,o=Array.from(n.added);for(const r of n.removed)s>=this.ungroupedItems.length?this.groupedItems.remove(r):this.ungroupedItems.remove(r);for(let r=s;r<s+o.length;r++){const a=o[r-s];r>this.ungroupedItems.length?this.groupedItems.add(a,r-this.ungroupedItems.length):this.ungroupedItems.add(a,r)}this._updateGrouping()}),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!jn(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const e=this.groupedItems.length;let t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const e=this.viewElement,t=this.viewLocale.uiLanguageDirection,n=new te(e.lastChild),s=new te(e);if(!this.cachedPadding){const o=U.window.getComputedStyle(e),r=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(o[r])}return t==="ltr"?n.right>s.right-this.cachedPadding:n.left<s.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new Ae(this.viewElement,t=>{(!e||e!==t.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=t.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new b6),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const e=this.viewLocale,t=e.t,n=Ne(e);return n.class="ck-toolbar__grouped-dropdown",n.panelPosition=e.uiLanguageDirection==="ltr"?"sw":"se",la(n,this.groupedItems),n.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:e.uiLanguageDirection==="rtl"?"se":"sw",icon:wg}),n}_updateFocusCycleableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xr extends D{constructor(e,t=new Pt){super(e);const n=this.bindTemplate,s=new aa(e);this.set({label:"",isVisible:!0}),this.labelView=t,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,s]),s.set({role:"group",ariaLabelledBy:t.id}),s.focusTracker.destroy(),s.keystrokes.destroy(),this.items=s.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",n.if("isVisible","ck-hidden",o=>!o)]},children:this.children})}focus(){this.items.first&&this.items.first.focus()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class aa extends D{constructor(e){super(e),this._listItemGroupToChangeListeners=new WeakMap;const t=this.bindTemplate;this.focusables=new dt,this.items=this.createCollection(),this.focusTracker=new Se,this.keystrokes=new Le,this._focusCycler=new ut({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:t.to("role"),"aria-label":t.to("ariaLabel"),"aria-labelledby":t.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const e of this.items)e instanceof xr?this._registerFocusableItemsGroup(e):this._registerFocusableListItem(e);this.items.on("change",(e,t)=>{for(const n of t.removed)n instanceof xr?this._deregisterFocusableItemsGroup(n):this._deregisterFocusableListItem(n);for(const n of Array.from(t.added).reverse())n instanceof xr?this._registerFocusableItemsGroup(n,t.index):this._registerFocusableListItem(n,t.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,t){this.focusTracker.add(e.element),this.focusables.add(e,t)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(t,n)=>{for(const s of n.removed)this._deregisterFocusableListItem(s);for(const s of Array.from(n.added).reverse())this._registerFocusableListItem(s,this.items.getIndex(e)+n.index)}}_registerFocusableItemsGroup(e,t){Array.from(e.items).forEach((s,o)=>{const r=typeof t<"u"?t+o:void 0;this._registerFocusableListItem(s,r)});const n=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,n),e.items.on("change",n)}_deregisterFocusableItemsGroup(e){for(const t of e.items)this._deregisterFocusableListItem(t);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ca extends D{constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",t.if("isVisible","ck-hidden",n=>!n)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iI extends D{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Co extends D{constructor(e){super(e);const t=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(),this.arrowView=this._createArrowView(),this.keystrokes=new Le,this.focusTracker=new Se,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",t.to("class"),t.if("isVisible","ck-hidden",n=>!n),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,t)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),t())}),this.keystrokes.set("arrowleft",(e,t)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),t())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(){const e=new G;return e.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),e.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),e.delegate("execute").to(this),e}_createArrowView(){const e=new G,t=e.bindTemplate;return e.icon=sl,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":t.to("isOn"),"aria-haspopup":!0,"aria-expanded":t.to("isOn",n=>String(n))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ne(i,e=g6){const t=new e(i),n=new ck(i),s=new Qi(i,t,n);return t.bind("isEnabled").to(s),t instanceof Co?t.arrowView.bind("isOn").to(s,"isOpen"):t.bind("isOn").to(s,"isOpen"),sI(s),s}function la(i,e,t={}){i.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),i.isOpen?Gd(i,e,t):i.once("change:isOpen",()=>Gd(i,e,t),{priority:"highest"}),t.enableActiveItemFocusOnDropdownOpen&&xa(i,()=>i.toolbarView.items.find(n=>n.isOn))}function Gd(i,e,t){const n=i.locale,s=n.t,o=i.toolbarView=new ts(n),r=typeof e=="function"?e():e;o.ariaLabel=t.ariaLabel||s("Dropdown toolbar"),t.maxWidth&&(o.maxWidth=t.maxWidth),t.class&&(o.class=t.class),t.isCompact&&(o.isCompact=t.isCompact),t.isVertical&&(o.isVertical=!0),r instanceof dt?o.items.bindTo(r).using(a=>a):o.items.addMany(r),i.panelView.children.add(o),o.items.delegate("execute").to(i)}function Mn(i,e,t={}){i.isOpen?Kd(i,e,t):i.once("change:isOpen",()=>Kd(i,e,t),{priority:"highest"}),xa(i,()=>i.listView.items.find(n=>n instanceof ca?n.children.first.isOn:!1))}function Kd(i,e,t){const n=i.locale,s=i.listView=new aa(n),o=typeof e=="function"?e():e;s.ariaLabel=t.ariaLabel,s.role=t.role,_g(i,s.items,o,n),i.panelView.children.add(s),s.items.delegate("execute").to(i)}function xa(i,e){i.on("change:isOpen",()=>{if(!i.isOpen)return;const t=e();t&&(typeof t.focus=="function"?t.focus():be("ui-dropdown-focus-child-on-open-child-missing-focus",{view:t}))},{priority:_t.low-10})}function sI(i){oI(i),rI(i),aI(i),cI(i),lI(i),xI(i)}function oI(i){i.on("render",()=>{rs({emitter:i,activator:()=>i.isOpen,callback:()=>{i.isOpen=!1},contextElements:()=>[i.element,...i.focusTracker._elements]})})}function rI(i){i.on("execute",e=>{e.source instanceof _o||(i.isOpen=!1)})}function aI(i){i.focusTracker.on("change:isFocused",(e,t,n)=>{i.isOpen&&!n&&(i.isOpen=!1)})}function cI(i){i.keystrokes.set("arrowdown",(e,t)=>{i.isOpen&&(i.panelView.focus(),t())}),i.keystrokes.set("arrowup",(e,t)=>{i.isOpen&&(i.panelView.focusLast(),t())})}function lI(i){i.on("change:isOpen",(e,t,n)=>{if(n)return;const s=i.panelView.element;s&&s.contains(U.document.activeElement)&&i.buttonView.focus()})}function xI(i){i.on("change:isOpen",(e,t,n)=>{n&&i.panelView.focus()},{priority:"low"})}function _g(i,e,t,n){e.bindTo(t).using(s=>{if(s.type==="separator")return new iI(n);if(s.type==="group"){const o=new xr(n);return o.set({label:s.label}),_g(i,o.items,s.items,n),o.items.delegate("execute").to(i),o}else if(s.type==="button"||s.type==="switchbutton"){const o=new ca(n);let r;return s.type==="button"?(r=new G(n),r.extendTemplate({attributes:{"aria-checked":r.bindTemplate.to("isOn")}})):r=new _o(n),r.bind(...Object.keys(s.model)).to(s.model),r.delegate("execute").to(o),o.children.add(r),o}return null})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Rt=(i,e,t)=>{const n=new m6(i.locale);return n.set({id:e,ariaDescribedById:t}),n.bind("isReadOnly").to(i,"isEnabled",s=>!s),n.bind("hasError").to(i,"errorText",s=>!!s),n.on("input",()=>{i.errorText=null}),i.bind("isEmpty","isFocused","placeholder").to(n),n},dI=(i,e,t)=>{const n=new ak(i.locale);return n.set({id:e,ariaDescribedById:t,inputMode:"numeric"}),n.bind("isReadOnly").to(i,"isEnabled",s=>!s),n.bind("hasError").to(i,"errorText",s=>!!s),n.on("input",()=>{i.errorText=null}),i.bind("isEmpty","isFocused","placeholder").to(n),n},vg=(i,e,t)=>{const n=Ne(i.locale);return n.set({id:e,ariaDescribedById:t}),n.bind("isEnabled").to(i),n},so=(i,e=0,t=1)=>i>t?t:i<e?e:i,st=(i,e=0,t=Math.pow(10,e))=>Math.round(t*i)/t,uI=i=>bI(K0(i)),K0=i=>(i[0]==="#"&&(i=i.substring(1)),i.length<6?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?st(parseInt(i[3]+i[3],16)/255,2):1}:{r:parseInt(i.substring(0,2),16),g:parseInt(i.substring(2,4),16),b:parseInt(i.substring(4,6),16),a:i.length===8?st(parseInt(i.substring(6,8),16)/255,2):1}),fI=i=>gI(mI(i)),hI=({h:i,s:e,v:t,a:n})=>{const s=(200-e)*t/100;return{h:st(i),s:st(s>0&&s<200?e*t/100/(s<=100?s:200-s)*100:0),l:st(s/2),a:st(n,2)}},J0=i=>{const{h:e,s:t,l:n}=hI(i);return`hsl(${e}, ${t}%, ${n}%)`},mI=({h:i,s:e,v:t,a:n})=>{i=i/360*6,e=e/100,t=t/100;const s=Math.floor(i),o=t*(1-e),r=t*(1-(i-s)*e),a=t*(1-(1-i+s)*e),c=s%6;return{r:st([t,r,o,o,a,t][c]*255),g:st([a,t,t,r,o,o][c]*255),b:st([o,o,a,t,t,r][c]*255),a:st(n,2)}},Uo=i=>{const e=i.toString(16);return e.length<2?"0"+e:e},gI=({r:i,g:e,b:t,a:n})=>{const s=n<1?Uo(st(n*255)):"";return"#"+Uo(i)+Uo(e)+Uo(t)+s},bI=({r:i,g:e,b:t,a:n})=>{const s=Math.max(i,e,t),o=s-Math.min(i,e,t),r=o?s===i?(e-t)/o:s===e?2+(t-i)/o:4+(i-e)/o:0;return{h:st(60*(r<0?r+6:r)),s:st(s?o/s*100:0),v:st(s/255*100),a:n}},yg=(i,e)=>{if(i===e)return!0;for(const t in i)if(i[t]!==e[t])return!1;return!0},pI=(i,e)=>i.toLowerCase()===e.toLowerCase()?!0:yg(K0(i),K0(e)),Jd={},Cg=i=>{let e=Jd[i];return e||(e=document.createElement("template"),e.innerHTML=i,Jd[i]=e),e},bl=(i,e,t)=>{i.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:t}))};let Gi=!1;const Z0=i=>"touches"in i,wI=i=>Gi&&!Z0(i)?!1:(Gi||(Gi=Z0(i)),!0),Zd=(i,e)=>{const t=Z0(e)?e.touches[0]:e,n=i.el.getBoundingClientRect();bl(i.el,"move",i.getMove({x:so((t.pageX-(n.left+window.pageXOffset))/n.width),y:so((t.pageY-(n.top+window.pageYOffset))/n.height)}))},_I=(i,e)=>{const t=e.keyCode;t>40||i.xy&&t<37||t<33||(e.preventDefault(),bl(i.el,"move",i.getMove({x:t===39?.01:t===37?-.01:t===34?.05:t===33?-.05:t===35?1:t===36?-1:0,y:t===40?.01:t===38?-.01:0},!0)))};class kg{constructor(e,t,n,s){const o=Cg(`<div role="slider" tabindex="0" part="${t}" ${n}><div part="${t}-pointer"></div></div>`);e.appendChild(o.content.cloneNode(!0));const r=e.querySelector(`[part=${t}]`);r.addEventListener("mousedown",this),r.addEventListener("touchstart",this),r.addEventListener("keydown",this),this.el=r,this.xy=s,this.nodes=[r.firstChild,r]}set dragging(e){const t=e?document.addEventListener:document.removeEventListener;t(Gi?"touchmove":"mousemove",this),t(Gi?"touchend":"mouseup",this)}handleEvent(e){switch(e.type){case"mousedown":case"touchstart":if(e.preventDefault(),!wI(e)||!Gi&&e.button!=0)return;this.el.focus(),Zd(this,e),this.dragging=!0;break;case"mousemove":case"touchmove":e.preventDefault(),Zd(this,e);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":_I(this,e);break}}style(e){e.forEach((t,n)=>{for(const s in t)this.nodes[n].style.setProperty(s,t[s])})}}class vI extends kg{constructor(e){super(e,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:e}){this.h=e,this.style([{left:`${e/360*100}%`,color:J0({h:e,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${st(e)}`)}getMove(e,t){return{h:t?so(this.h+e.x*360,0,360):360*e.x}}}class yI extends kg{constructor(e){super(e,"saturation",'aria-label="Color"',!0)}update(e){this.hsva=e,this.style([{top:`${100-e.v}%`,left:`${e.s}%`,color:J0(e)},{"background-color":J0({h:e.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${st(e.s)}%, Brightness ${st(e.v)}%`)}getMove(e,t){return{s:t?so(this.hsva.s+e.x*100,0,100):e.x*100,v:t?so(this.hsva.v-e.y*100,0,100):Math.round(100-e.y*100)}}}const CI=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',kI="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",TI="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",Wo=Symbol("same"),$a=Symbol("color"),Yd=Symbol("hsva"),Ua=Symbol("update"),Xd=Symbol("parts"),Qd=Symbol("css"),eu=Symbol("sliders");class AI extends HTMLElement{static get observedAttributes(){return["color"]}get[Qd](){return[CI,kI,TI]}get[eu](){return[yI,vI]}get color(){return this[$a]}set color(e){if(!this[Wo](e)){const t=this.colorModel.toHsva(e);this[Ua](t),this[$a]=e}}constructor(){super();const e=Cg(`<style>${this[Qd].join("")}</style>`),t=this.attachShadow({mode:"open"});t.appendChild(e.content.cloneNode(!0)),t.addEventListener("move",this),this[Xd]=this[eu].map(n=>new n(t))}connectedCallback(){if(this.hasOwnProperty("color")){const e=this.color;delete this.color,this.color=e}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(e,t,n){const s=this.colorModel.fromAttr(n);this[Wo](s)||(this.color=s)}handleEvent(e){const t=this[Yd],n={...t,...e.detail};this[Ua](n);let s;!yg(n,t)&&!this[Wo](s=this.colorModel.fromHsva(n))&&(this[$a]=s,bl(this,"color-changed",{value:s}))}[Wo](e){return this.color&&this.colorModel.equal(e,this.color)}[Ua](e){this[Yd]=e,this[Xd].forEach(t=>t.update(e))}}const EI={defaultColor:"#000",toHsva:uI,fromHsva:({h:i,s:e,v:t})=>fI({h:i,s:e,v:t,a:1}),equal:pI,fromAttr:i=>i};class SI extends AI{get colorModel(){return EI}}class II extends SI{}customElements.define("hex-color-picker",II);/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const PI=150;class RI extends D{constructor(e,t={}){super(e),this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const n=this.createCollection();t.hideInput||n.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:n}),this._config=t,this._debounceColorPickerEvent=un(s=>{this.set("color",s),this.fire("colorSelected",{color:this.color})},PI,{leading:!0}),this.on("set:color",(s,o,r)=>{s.return=u6(r,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=Wa(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),Wa(this.color)!=Wa(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),this.picker=U.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const e=document.createElement("style");e.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(e)}this.picker.addEventListener("color-changed",e=>{const n=e.detail.value;this._debounceColorPickerEvent(n)})}focus(){/* istanbul ignore next -- @preserve */!this._config.hideInput&&(ee.isGecko||ee.isiOS||ee.isSafari)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const n=[...this.picker.shadowRoot.children].filter(s=>s.getAttribute("role")==="slider").map(s=>new VI(s));this.slidersView=this.createCollection(),n.forEach(s=>{this.slidersView.add(s)})}_createInputRow(){const e=new BI,t=this._createColorInput();return new OI(this.locale,[e,t])}_createColorInput(){const e=new Ge(this.locale,Rt),{t}=this.locale;return e.set({label:t("HEX"),class:"color-picker-hex-input"}),e.fieldView.bind("value").to(this,"_hexColor",n=>e.isFocused?e.fieldView.value:n.startsWith("#")?n.substring(1):n),e.fieldView.on("input",()=>{const n=e.fieldView.element.value;if(n){const s=n.trim(),o=s.startsWith("#")?s.substring(1):s;[3,4,6,8].includes(o.length)&&/(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})/.test(o)&&this._debounceColorPickerEvent("#"+o)}}),e}}function Wa(i){let e=nk(i);return e||(e="#000"),e.length===4&&(e="#"+[e[1],e[1],e[2],e[2],e[3],e[3]].join("")),e.toLowerCase()}class VI extends D{constructor(e){super(),this.element=e}focus(){this.element.focus()}}class BI extends D{constructor(e){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class OI extends D{constructor(e,t){super(e),this.children=this.createCollection(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class LI extends ue(De){constructor(e){super(e),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(e,t){return this.find(n=>n.color===e.color)?this:super.add(e,t)}hasColor(e){return!!this.find(t=>t.color===e)}}const MI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class FI extends D{constructor(e,{colors:t,columns:n,removeButtonLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerLabel:a,focusTracker:c,focusables:l}){super(e);const x=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=c,this.items=this.createCollection(),this.colorDefinitions=t,this.columns=n,this.documentColors=new LI,this.documentColorsCount=r,this._focusables=l,this._removeButtonLabel=s,this._colorPickerLabel=a,this._documentColorsLabel=o,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",x.if("isVisible","ck-hidden",d=>!d)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(e,t){const n=e.document,s=this.documentColorsCount;this.documentColors.clear();for(const o of n.getRoots()){const r=e.createRangeIn(o);for(const a of r.getItems())if(a.is("$textProxy")&&a.hasAttribute(t)&&(this._addColorToDocumentColors(a.getAttribute(t)),this.documentColors.length>=s))return}}updateSelectedColors(){const e=this.documentColorsGrid,t=this.staticColorsGrid,n=this.selectedColor;t.selectedColor=n,e&&(e.selectedColor=n)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const e=gt.bind(this.documentColors,this.documentColors),t=new Pt(this.locale);t.text=this._documentColorsLabel,t.extendTemplate({attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]}}),this.items.add(t),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker(),this.focus()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new G,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:MI,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const e=new G;return e.set({withText:!0,icon:pg,label:this._removeButtonLabel}),e.class="ck-color-selector__remove-color",e.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),e.render(),e}_createStaticColorsGrid(){const e=new nd(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.on("execute",(t,n)=>{this.fire("execute",{value:n.value,source:"staticColorsGrid"})}),e}_createDocumentColorsGrid(){const e=gt.bind(this.documentColors,this.documentColors),t=new nd(this.locale,{columns:this.columns});return t.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),t.items.bindTo(this.documentColors).using(n=>{const s=new r6;return s.set({color:n.color,hasBorder:n.options&&n.options.hasBorder}),n.label&&s.set({label:n.label,tooltip:!0}),s.on("execute",()=>{this.fire("execute",{value:n.color,source:"documentColorsGrid"})}),s}),this.documentColors.on("change:isEmpty",(n,s,o)=>{o&&(t.selectedColor=null)}),t}_addColorToDocumentColors(e){const t=this.colorDefinitions.find(n=>n.color===e);t?this.documentColors.add(Object.assign({},t)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NI extends D{constructor(e,{focusTracker:t,focusables:n,keystrokes:s,colorPickerViewConfig:o}){super(e),this.items=this.createCollection(),this.focusTracker=t,this.keystrokes=s,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=n,this._colorPickerViewConfig=o;const r=this.bindTemplate,{saveButtonView:a,cancelButtonView:c}=this._createActionButtons();this.saveButtonView=a,this.cancelButtonView=c,this.actionBarView=this._createActionBarView({saveButtonView:a,cancelButtonView:c}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",r.if("isVisible","ck-hidden",l=>!l)]},children:this.items})}render(){super.render();const e=new RI(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=e,this.colorPickerView.render(),this.selectedColor&&(e.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(t,n,s)=>{e.color=s}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}_executeOnEnterPress(){this.keystrokes.set("enter",e=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&(this.fire("execute",{value:this.selectedColor}),e.stopPropagation(),e.preventDefault())})}_stopPropagationOnArrowsKeys(){const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}_addColorPickersElementsToFocusTracker(){for(const t of this.colorPickerView.slidersView)this.focusTracker.add(t.element),this._focusables.add(t);const e=this.colorPickerView.hexInputRow.children.get(1);e.element&&(this.focusTracker.add(e.element),this._focusables.add(e)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:e,cancelButtonView:t}){const n=new D,s=this.createCollection();return s.add(e),s.add(t),n.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:s}),n}_createActionButtons(){const e=this.locale,t=e.t,n=new G(e),s=new G(e);return n.set({icon:bg,class:"ck-button-save",type:"button",withText:!1,label:t("Accept")}),s.set({icon:gg,class:"ck-button-cancel",type:"button",withText:!1,label:t("Cancel")}),n.on("execute",()=>{this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),s.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:n,cancelButtonView:s}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(e,t)=>{this.fire("execute",{value:t.color,source:"colorPicker"}),this.set("selectedColor",t.color)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tg extends D{constructor(e,{colors:t,columns:n,removeButtonLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerLabel:a,colorPickerViewConfig:c}){super(e),this.items=this.createCollection(),this.focusTracker=new Se,this.keystrokes=new Le,this._focusables=new dt,this._colorPickerViewConfig=c,this._focusCycler=new ut({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new FI(e,{colors:t,columns:n,removeButtonLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerLabel:a,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new NI(e,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:c}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(l,x,d)=>{this.colorGridsFragmentView.set("selectedColor",d),this.colorPickerFragmentView.set("selectedColor",d)}),this.colorGridsFragmentView.on("change:selectedColor",(l,x,d)=>{this.set("selectedColor",d)}),this.colorPickerFragmentView.on("change:selectedColor",(l,x,d)=>{this.set("selectedColor",d)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(e,t){this.colorGridsFragmentView.updateDocumentColors(e,t)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class DI{constructor(e){this._components=new Map,this.editor=e}*names(){for(const e of this._components.values())yield e.originalName}add(e,t){this._components.set(ja(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new w("componentfactory-item-missing",this,{name:e});return this._components.get(ja(e)).callback(this.editor.locale)}has(e){return this._components.has(ja(e))}}function ja(i){return String(i).toLowerCase()}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const tu=bo("px"),nu=U.document.body,zI={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}};class ot extends D{constructor(e){super(e);const t=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",t.to("position",n=>`ck-balloon-panel_${n}`),t.if("isVisible","ck-balloon-panel_visible"),t.if("withArrow","ck-balloon-panel_with-arrow"),t.to("class")],style:{top:t.to("top",tu),left:t.to("left",tu)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){this.show();const t=ot.defaultPositions,n=Object.assign({},{element:this.element,positions:[t.southArrowNorth,t.southArrowNorthMiddleWest,t.southArrowNorthMiddleEast,t.southArrowNorthWest,t.southArrowNorthEast,t.northArrowSouth,t.northArrowSouthMiddleWest,t.northArrowSouthMiddleEast,t.northArrowSouthWest,t.northArrowSouthEast,t.viewportStickyNorth],limiter:nu,fitInViewport:!0},e),s=ot._getOptimalPosition(n)||zI,o=parseInt(s.left),r=parseInt(s.top),a=s.name,c=s.config||{},{withArrow:l=!0}=c;this.top=r,this.left=o,this.position=a,this.withArrow=l}pin(e){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this._startPinning(e),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){this.attachTo(e);const t=Y0(e.target),n=e.limiter?Y0(e.limiter):nu;this.listenTo(U.document,"scroll",(s,o)=>{const r=o.target,a=t&&r.contains(t),c=n&&r.contains(n);(a||c||!t||!n)&&this.attachTo(e)},{useCapture:!0}),this.listenTo(U.window,"resize",()=>{this.attachTo(e)})}_stopPinning(){this.stopListening(U.document,"scroll"),this.stopListening(U.window,"resize")}}ot.arrowSideOffset=25;ot.arrowHeightOffset=10;ot.stickyVerticalOffset=20;ot._getOptimalPosition=Zc;ot.defaultPositions=Ag();function Y0(i){return Un(i)?i:na(i)?i.commonAncestorContainer:typeof i=="function"?Y0(i()):null}function Ag(i={}){const{sideOffset:e=ot.arrowSideOffset,heightOffset:t=ot.arrowHeightOffset,stickyVerticalOffset:n=ot.stickyVerticalOffset,config:s}=i;return{northWestArrowSouthWest:(a,c)=>({top:o(a,c),left:a.left-e,name:"arrow_sw",...s&&{config:s}}),northWestArrowSouthMiddleWest:(a,c)=>({top:o(a,c),left:a.left-c.width*.25-e,name:"arrow_smw",...s&&{config:s}}),northWestArrowSouth:(a,c)=>({top:o(a,c),left:a.left-c.width/2,name:"arrow_s",...s&&{config:s}}),northWestArrowSouthMiddleEast:(a,c)=>({top:o(a,c),left:a.left-c.width*.75+e,name:"arrow_sme",...s&&{config:s}}),northWestArrowSouthEast:(a,c)=>({top:o(a,c),left:a.left-c.width+e,name:"arrow_se",...s&&{config:s}}),northArrowSouthWest:(a,c)=>({top:o(a,c),left:a.left+a.width/2-e,name:"arrow_sw",...s&&{config:s}}),northArrowSouthMiddleWest:(a,c)=>({top:o(a,c),left:a.left+a.width/2-c.width*.25-e,name:"arrow_smw",...s&&{config:s}}),northArrowSouth:(a,c)=>({top:o(a,c),left:a.left+a.width/2-c.width/2,name:"arrow_s",...s&&{config:s}}),northArrowSouthMiddleEast:(a,c)=>({top:o(a,c),left:a.left+a.width/2-c.width*.75+e,name:"arrow_sme",...s&&{config:s}}),northArrowSouthEast:(a,c)=>({top:o(a,c),left:a.left+a.width/2-c.width+e,name:"arrow_se",...s&&{config:s}}),northEastArrowSouthWest:(a,c)=>({top:o(a,c),left:a.right-e,name:"arrow_sw",...s&&{config:s}}),northEastArrowSouthMiddleWest:(a,c)=>({top:o(a,c),left:a.right-c.width*.25-e,name:"arrow_smw",...s&&{config:s}}),northEastArrowSouth:(a,c)=>({top:o(a,c),left:a.right-c.width/2,name:"arrow_s",...s&&{config:s}}),northEastArrowSouthMiddleEast:(a,c)=>({top:o(a,c),left:a.right-c.width*.75+e,name:"arrow_sme",...s&&{config:s}}),northEastArrowSouthEast:(a,c)=>({top:o(a,c),left:a.right-c.width+e,name:"arrow_se",...s&&{config:s}}),southWestArrowNorthWest:a=>({top:r(a),left:a.left-e,name:"arrow_nw",...s&&{config:s}}),southWestArrowNorthMiddleWest:(a,c)=>({top:r(a),left:a.left-c.width*.25-e,name:"arrow_nmw",...s&&{config:s}}),southWestArrowNorth:(a,c)=>({top:r(a),left:a.left-c.width/2,name:"arrow_n",...s&&{config:s}}),southWestArrowNorthMiddleEast:(a,c)=>({top:r(a),left:a.left-c.width*.75+e,name:"arrow_nme",...s&&{config:s}}),southWestArrowNorthEast:(a,c)=>({top:r(a),left:a.left-c.width+e,name:"arrow_ne",...s&&{config:s}}),southArrowNorthWest:a=>({top:r(a),left:a.left+a.width/2-e,name:"arrow_nw",...s&&{config:s}}),southArrowNorthMiddleWest:(a,c)=>({top:r(a),left:a.left+a.width/2-c.width*.25-e,name:"arrow_nmw",...s&&{config:s}}),southArrowNorth:(a,c)=>({top:r(a),left:a.left+a.width/2-c.width/2,name:"arrow_n",...s&&{config:s}}),southArrowNorthMiddleEast:(a,c)=>({top:r(a),left:a.left+a.width/2-c.width*.75+e,name:"arrow_nme",...s&&{config:s}}),southArrowNorthEast:(a,c)=>({top:r(a),left:a.left+a.width/2-c.width+e,name:"arrow_ne",...s&&{config:s}}),southEastArrowNorthWest:a=>({top:r(a),left:a.right-e,name:"arrow_nw",...s&&{config:s}}),southEastArrowNorthMiddleWest:(a,c)=>({top:r(a),left:a.right-c.width*.25-e,name:"arrow_nmw",...s&&{config:s}}),southEastArrowNorth:(a,c)=>({top:r(a),left:a.right-c.width/2,name:"arrow_n",...s&&{config:s}}),southEastArrowNorthMiddleEast:(a,c)=>({top:r(a),left:a.right-c.width*.75+e,name:"arrow_nme",...s&&{config:s}}),southEastArrowNorthEast:(a,c)=>({top:r(a),left:a.right-c.width+e,name:"arrow_ne",...s&&{config:s}}),westArrowEast:(a,c)=>({top:a.top+a.height/2-c.height/2,left:a.left-c.width-t,name:"arrow_e",...s&&{config:s}}),eastArrowWest:(a,c)=>({top:a.top+a.height/2-c.height/2,left:a.right+t,name:"arrow_w",...s&&{config:s}}),viewportStickyNorth:(a,c,l,x)=>{const d=x||l;return!a.getIntersection(d)||d.height-a.height>n?null:{top:d.top+n,left:a.left+a.width/2-c.width/2,name:"arrowless",config:{withArrow:!1,...s}}}};function o(a,c){return a.top-c.height-t}function r(a){return a.bottom+t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const iu="ck-tooltip";class Qe extends bt(){constructor(e){if(super(),this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._resizeObserver=null,Qe._editors.add(e),Qe._instance)return Qe._instance;Qe._instance=this,this.tooltipTextView=new D(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new ot(e.locale),this.balloonPanelView.class=iu,this.balloonPanelView.content.add(this.tooltipTextView),this._pinTooltipDebounced=un(this._pinTooltip,600),this.listenTo(U.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(U.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(U.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(U.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(U.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){const t=e.ui.view&&e.ui.view.body;Qe._editors.delete(e),this.stopListening(e.ui),t&&t.has(this.balloonPanelView)&&t.remove(this.balloonPanelView),Qe._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),Qe._instance=null)}static getPositioningFunctions(e){const t=Qe.defaultBalloonPositions;return{s:[t.southArrowNorth,t.southArrowNorthEast,t.southArrowNorthWest],n:[t.northArrowSouth],e:[t.eastArrowWest],w:[t.westArrowEast],sw:[t.southArrowNorthEast],se:[t.southArrowNorthWest]}[e]}_onEnterOrFocus(e,{target:t}){const n=qa(t);n&&n!==this._currentElementWithTooltip&&(this._unpinTooltip(),this._pinTooltipDebounced(n,HI(n)))}_onLeaveOrBlur(e,{target:t,relatedTarget:n}){if(e.name==="mouseleave"){if(!Un(t)||this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;const s=qa(t),o=qa(n);s&&s!==o&&this._unpinTooltip()}else{if(this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;this._unpinTooltip()}}_onScroll(e,{target:t}){this._currentElementWithTooltip&&(t.contains(this.balloonPanelView.element)&&t.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:t,position:n,cssClass:s}){const o=Be(Qe._editors.values()).ui.view.body;o.has(this.balloonPanelView)||o.add(this.balloonPanelView),this.tooltipTextView.text=t,this.balloonPanelView.pin({target:e,positions:Qe.getPositioningFunctions(n)}),this._resizeObserver=new Ae(e,()=>{jn(e)||this._unpinTooltip()}),this.balloonPanelView.class=[iu,s].filter(r=>r).join(" ");for(const r of Qe._editors)this.listenTo(r.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=n}_unpinTooltip(){this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const e of Qe._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._resizeObserver&&this._resizeObserver.destroy()}_updateTooltipPosition(){if(!jn(this._currentElementWithTooltip)){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:Qe.getPositioningFunctions(this._currentTooltipPosition)})}}Qe.defaultBalloonPositions=Ag({heightOffset:5,sideOffset:13});Qe._editors=new Set;Qe._instance=null;function qa(i){return Un(i)?i.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function HI(i){return{text:i.dataset.ckeTooltipText,position:i.dataset.ckeTooltipPosition||"s",cssClass:i.dataset.ckeTooltipClass||""}}const $I=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`;/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const UI=53,WI=10,jI=50,qI=350,GI="Powered by";class KI extends bt(){constructor(e){super(),this.editor=e,this._balloonView=null,this._lastFocusedEditableElement=null,this._showBalloonThrottled=mi(this._showBalloon.bind(this),50,{leading:!0}),e.on("ready",this._handleEditorReady.bind(this))}destroy(){const e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const e=this.editor,t=!!e.config.get("ui.poweredBy.forceVisible");/* istanbul ignore next -- @preserve */!t&&kC(e.config.get("licenseKey"))==="VALID"||e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(n,s,o)=>{this._updateLastFocusedEditableElement(),o?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(n,s,o)=>{this._updateLastFocusedEditableElement(),o&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_createBalloonView(){const e=this.editor,t=this._balloonView=new ot,n=Sg(e),s=new JI(e.locale,n.label);t.content.add(s),t.set({class:"ck-powered-by-balloon"}),e.ui.view.body.add(t),e.ui.focusTracker.add(t.element),this._balloonView=t}_showBalloon(){if(!this._lastFocusedEditableElement)return;const e=ZI(this.editor,this._lastFocusedEditableElement);e&&(this._balloonView||this._createBalloonView(),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_updateLastFocusedEditableElement(){const e=this.editor,t=e.ui.focusTracker.isFocused,n=e.ui.focusTracker.focusedElement;if(!t||!n){this._lastFocusedEditableElement=null;return}const s=Array.from(e.ui.getEditableElementsNames()).map(o=>e.ui.getEditableElement(o));s.includes(n)?this._lastFocusedEditableElement=n:this._lastFocusedEditableElement=s[0]}}class JI extends D{constructor(e,t){super(e);const n=new mn,s=this.bindTemplate;n.set({content:$I,isColorInherited:!1}),n.extendTemplate({attributes:{style:{width:UI+"px",height:WI+"px"}}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...t?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[t]}]:[],n],on:{dragstart:s.to(o=>o.preventDefault())}}]})}}function ZI(i,e){const t=Sg(i),n=t.side==="right"?YI(e,t):XI(e,t);return{target:e,positions:[n]}}function YI(i,e){return Eg(i,e,(t,n)=>t.left+t.width-n.width-e.horizontalOffset)}function XI(i,e){return Eg(i,e,t=>t.left+e.horizontalOffset)}function Eg(i,e,t){return(n,s)=>{const o=new te(i);if(o.width<qI||o.height<jI)return null;let r;e.position==="inside"?r=o.bottom-s.height:r=o.bottom-s.height/2,r-=e.verticalOffset;const a=t(o,s),l=n.clone().moveTo(a,r).getIntersection(s.clone().moveTo(a,r)).getVisible();return!l||l.getArea()<s.getArea()?null:{top:r,left:a,name:`position_${e.position}-side_${e.side}`,config:{withArrow:!1}}}}function Sg(i){const e=i.config.get("ui.poweredBy"),t=e&&e.position||"border";return{position:t,label:GI,verticalOffset:t==="inside"?5:0,horizontalOffset:5,side:i.locale.contentLanguageDirection==="ltr"?"right":"left",...e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var Br;(function(i){i.POLITE="polite",i.ASSERTIVE="assertive"})(Br||(Br={}));class QI{constructor(e){this.editor=e}announce(e,t,n=Br.POLITE){const s=this.editor;this.view||(this.view=new eP(s.locale),s.ui.view.body.add(this.view));let o=this.view.regionViews.find(r=>r.regionName===e);o||(o=new tP(this.view.locale),this.view.regionViews.add(o)),o.set({regionName:e,text:t,politeness:n})}}class eP extends D{constructor(e){super(e),this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class tP extends D{constructor(e){super(e);const t=this.bindTemplate;this.set("regionName",""),this.set("text",""),this.set("politeness",Br.POLITE),this.setTemplate({tag:"div",attributes:{role:"region","data-region":t.to("regionName"),"aria-live":t.to("politeness")},children:[{text:t.to("text")}]})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nP extends ue(){constructor(e){super(),this.isReady=!1,this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[];const t=e.editing.view;this.editor=e,this.componentFactory=new DI(e),this.focusTracker=new Se,this.tooltipManager=new Qe(e),this.poweredBy=new KI(e),this.ariaLiveAnnouncer=new QI(e),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this.isReady=!0}),this.listenTo(t.document,"layoutChanged",this.update.bind(this)),this.listenTo(t,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor),this.focusTracker.add(t);const n=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(t)};this.isReady?n():this.once("ready",n)}removeEditableElement(e){const t=this._editableElementsMap.get(e);t&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(t),this.focusTracker.remove(t),t.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,t={}){e.isRendered?(this.focusTracker.add(e.element),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e.element),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:t})}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_readViewportOffsetFromConfig(){const e=this.editor,t=e.config.get("ui.viewportOffset");if(t)return t;const n=e.config.get("toolbar.viewportTopOffset");return n?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:n}):{top:0}}_initFocusTracking(){const e=this.editor,t=e.editing.view;let n,s;e.keystrokes.set("Alt+F10",(o,r)=>{const a=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(a)&&!Array.from(t.domRoots.values()).includes(a)&&(n=a);const c=this._getCurrentFocusedToolbarDefinition();(!c||!s)&&(s=this._getFocusableCandidateToolbarDefinitions());for(let l=0;l<s.length;l++){const x=s.shift();if(s.push(x),x!==c&&this._focusFocusableCandidateToolbar(x)){c&&c.options.afterBlur&&c.options.afterBlur();break}}r()}),e.keystrokes.set("Esc",(o,r)=>{const a=this._getCurrentFocusedToolbarDefinition();a&&(n?(n.focus(),n=null):e.editing.view.focus(),a.options.afterBlur&&a.options.afterBlur(),r())})}_getFocusableCandidateToolbarDefinitions(){const e=[];for(const t of this._focusableToolbarDefinitions){const{toolbarView:n,options:s}=t;(jn(n.element)||s.beforeFocus)&&e.push(t)}return e.sort((t,n)=>su(t)-su(n)),e}_getCurrentFocusedToolbarDefinition(){for(const e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){const{toolbarView:t,options:{beforeFocus:n}}=e;return n&&n(),jn(t.element)?(t.focus(),!0):!1}_handleScrollToTheSelection(e,t){const n={top:0,bottom:0,left:0,right:0,...this.viewportOffset};t.viewportOffset.top+=n.top,t.viewportOffset.bottom+=n.bottom,t.viewportOffset.left+=n.left,t.viewportOffset.right+=n.right}}function su(i){const{toolbarView:e,options:t}=i;let n=10;return jn(e.element)&&n--,t.isContextual&&n--,n}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iP extends D{constructor(e){super(e),this.body=new HC(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sP extends iP{constructor(e){super(e),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const e=this.t,t=new Pt;return t.text=e("Rich Text Editor"),t.extendTemplate({attributes:{class:"ck-voice-label"}}),t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oP extends D{constructor(e,t,n){super(e),this.name=null,this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=n,this._hasExternalElement=!!this._editableElement,this._editingView=t}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const e=this._editingView;e.isRenderingInProgress?n(this):t(this);function t(s){e.change(o=>{const r=e.document.getRoot(s.name);o.addClass(s.isFocused?"ck-focused":"ck-blurred",r),o.removeClass(s.isFocused?"ck-blurred":"ck-focused",r)})}function n(s){e.once("change:isRenderingInProgress",(o,r,a)=>{a?n(s):t(s)})}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rP extends oP{constructor(e,t,n,s={}){super(e,t,n);const o=e.t;this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}}),this._generateLabel=s.label||(()=>o("Editor editing area: %0",this.name))}render(){super.render();const e=this._editingView;e.change(t=>{const n=e.document.getRoot(this.name);t.setAttribute("aria-label",this._generateLabel(this),n)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class da extends D{constructor(e,t={}){super(e);const n=this.bindTemplate;this.set("label",t.label||""),this.set("class",t.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",n.to("class")]},children:this.children}),t.icon&&(this.iconView=new mn,this.iconView.content=t.icon,this.children.add(this.iconView));const s=new D(e);s.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"]},children:[{text:n.to("label")}]}),this.children.add(s)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ou extends _6{static get pluginName(){return"Notification"}init(){this.on("show:warning",(e,t)=>{window.alert(t.message)},{priority:"lowest"})}showSuccess(e,t={}){this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title})}showInfo(e,t={}){this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title})}showWarning(e,t={}){this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title})}_showNotification(e){const t=e.namespace?`show:${e.type}:${e.namespace}`:`show:${e.type}`;this.fire(t,{message:e.message,type:e.type,title:e.title||""})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rn extends ue(){constructor(e,t){super(),t&&Jh(this,t),e&&this.set(e)}}const X0='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',aP='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const jo=bo("px");class fn extends y{static get pluginName(){return"ContextualBalloon"}constructor(e){super(e),this._viewToStack=new Map,this._idToStack=new Map,this._view=null,this._rotatorView=null,this._fakePanelsView=null,this.positionLimiter=()=>{const t=this.editor.editing.view,s=t.document.selection.editableElement;return s?t.domConverter.mapViewToDom(s.root):null},this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new w("contextualballoon-add-view-exist",[this,e]);const t=e.stackId||"main";if(!this._idToStack.has(t)){this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(t);return}const n=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),n.set(e.view,e),this._viewToStack.set(e.view,n),n===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new w("contextualballoon-remove-view-not-exist",[this,e]);const t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(t.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),t.size===1?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}showStack(e){this.visibleStack=e;const t=this._idToStack.get(e);if(!t)throw new w("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop())}_createPanelView(){this._view=new ot(this.editor.locale),this.editor.ui.view.body.add(this._view),this.editor.ui.focusTracker.add(this._view.element),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(n=>n[1]===e)[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}_createRotatorView(){const e=new cP(this.editor.locale),t=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(n,s)=>!s&&n>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(n,s)=>{if(s<2)return"";const o=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return t("%0 of %1",[o,s])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new lP(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(t,n)=>!n&&t>=2?Math.min(t-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:t="",withArrow:n=!0,singleViewMode:s=!1}){this.view.class=t,this.view.withArrow=n,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),s&&(this._singleViewMode=!0)}_getBalloonPosition(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:this.editor.ui.viewportOffset})),e}}class cP extends D{constructor(e){super(e);const t=e.t,n=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new Se,this.buttonPrevView=this._createButtonView(t("Previous"),X0),this.buttonNextView=this._createButtonView(t("Next"),aP),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",n.to("isNavigationVisible",s=>s?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:n.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,t){const n=new G(this.locale);return n.set({label:e,icon:t,tooltip:!0}),n}}class lP extends D{constructor(e,t){super(e);const n=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=t,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",n.to("numberOfPanels",s=>s?"":"ck-hidden")],style:{top:n.to("top",jo),left:n.to("left",jo),width:n.to("width",jo),height:n.to("height",jo)}},children:this.content}),this.on("change:numberOfPanels",(s,o,r,a)=>{r>a?this._addPanels(r-a):this._removePanels(a-r),this.updatePosition()})}_addPanels(e){for(;e--;){const t=new D;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}_removePanels(e){for(;e--;){const t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:t}=this._balloonPanelView,{width:n,height:s}=new te(this._balloonPanelView.element);Object.assign(this,{top:e,left:t,width:n,height:s})}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Bi=bo("px");class xP extends D{constructor(e){super(e);const t=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new gt({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:t.to("isSticky",n=>n?"block":"none"),height:t.to("isSticky",n=>n?Bi(this._contentPanelRect.height):null)}}}).render(),this._contentPanel=new gt({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",t.if("isSticky","ck-sticky-panel__content_sticky"),t.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:t.to("isSticky",n=>n?Bi(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:t.to("_stickyTopOffset",n=>n&&Bi(n)),bottom:t.to("_stickyBottomOffset",n=>n&&Bi(n)),marginLeft:t.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this._contentPanel]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(U.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const e=new te(this.limiterElement);let t=e.getVisible();if(t){const n=new te(U.window);n.top+=this.viewportTopOffset,n.height-=this.viewportTopOffset,t=t.getIntersection(n)}if(t&&e.top<t.top){const n=t.top;if(n+this._contentPanelRect.height+this.limiterBottomOffset>t.bottom){const s=Math.max(e.bottom-t.bottom,0)+this.limiterBottomOffset;e.bottom-s>e.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(s):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<e.height?this._stickToTopOfAncestors(n):this._unstick()}else this._unstick()}_stickToTopOfAncestors(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=e,this._stickyBottomOffset=null,this._marginLeft=Bi(-U.window.scrollX)}_stickToBottomOfLimiter(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=e,this._marginLeft=Bi(-U.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new te(this._contentPanel)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dP extends Ge{constructor(e,t){const n=e.t,s=Object.assign({},{showResetButton:!0,showIcon:!0,creator:Rt},t);super(e,s.creator),this.label=t.label,this._viewConfig=s,this._viewConfig.showIcon&&(this.iconView=new mn,this.iconView.content=K.loupe,this.fieldWrapperChildren.add(this.iconView,0),this.extendTemplate({attributes:{class:"ck-search__query_with-icon"}})),this._viewConfig.showResetButton&&(this.resetButtonView=new G(e),this.resetButtonView.set({label:n("Clear"),icon:K.cancel,class:"ck-search__reset",isVisible:!1,tooltip:!0}),this.resetButtonView.on("execute",()=>{this.reset(),this.focus(),this.fire("reset")}),this.resetButtonView.bind("isVisible").to(this.fieldView,"isEmpty",o=>!o),this.fieldWrapperChildren.add(this.resetButtonView),this.extendTemplate({attributes:{class:"ck-search__query_with-reset"}}))}reset(){this.fieldView.reset(),this._viewConfig.showResetButton&&(this.resetButtonView.isVisible=!1)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uP extends D{constructor(){super();const e=this.bindTemplate;this.set({isVisible:!1,primaryText:"",secondaryText:""}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__info",e.if("isVisible","ck-hidden",t=>!t)],tabindex:-1},children:[{tag:"span",children:[{text:[e.to("primaryText")]}]},{tag:"span",children:[{text:[e.to("secondaryText")]}]}]})}focus(){this.element.focus()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fP extends D{constructor(e){super(e),this.children=this.createCollection(),this.focusTracker=new Se,this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__results"],tabindex:-1},children:this.children}),this._focusCycler=new ut({focusables:this.children,focusTracker:this.focusTracker})}render(){super.render();for(const e of this.children)this.focusTracker.add(e.element)}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ig extends D{constructor(e,t){super(e),this._config=t,this.filteredView=t.filteredView,this.queryView=this._createSearchTextQueryView(),this.focusTracker=new Se,this.keystrokes=new Le,this.resultsView=new fP(e),this.children=this.createCollection(),this.focusableChildren=this.createCollection([this.queryView,this.resultsView]),this.set("isEnabled",!0),this.set("resultsCount",0),this.set("totalItemsCount",0),t.infoView&&t.infoView.instance?this.infoView=t.infoView.instance:(this.infoView=new uP,this._enableDefaultInfoViewBehavior(),this.on("render",()=>{this.search("")})),this.resultsView.children.addMany([this.infoView,this.filteredView]),this.focusCycler=new ut({focusables:this.focusableChildren,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.on("search",(n,{resultsCount:s,totalItemsCount:o})=>{this.resultsCount=s,this.totalItemsCount=o}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search",t.class||null],tabindex:"-1"},children:this.children})}render(){super.render(),this.children.addMany([this.queryView,this.resultsView]);const e=t=>t.stopPropagation();for(const t of this.focusableChildren)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}focus(){this.queryView.focus()}reset(){this.queryView.reset(),this.search("")}search(e){const t=e?new RegExp(Mm(e),"ig"):null,n=this.filteredView.filter(t);this.fire("search",{query:e,...n})}_createSearchTextQueryView(){const e=new dP(this.locale,this._config.queryView);return this.listenTo(e.fieldView,"input",()=>{this.search(e.fieldView.element.value)}),e.on("reset",()=>this.reset()),e.bind("isEnabled").to(this),e}_enableDefaultInfoViewBehavior(){const e=this.locale.t,t=this.infoView;this.on("search",(s,o)=>{if(o.resultsCount)t.set({isVisible:!1});else{const r=this._config.infoView&&this._config.infoView.text;let a,c;o.totalItemsCount?r&&r.notFound?(a=r.notFound.primary,c=r.notFound.secondary):(a=e("No results found"),c=""):r&&r.noSearchableItems?(a=r.noSearchableItems.primary,c=r.noSearchableItems.secondary):(a=e("No searchable items"),c=""),t.set({primaryText:n(a,o),secondaryText:n(c,o),isVisible:!0})}});function n(s,{query:o,resultsCount:r,totalItemsCount:a}){return typeof s=="function"?s(o,r,a):s}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oo extends Ig{constructor(e,t){super(e,t),this._config=t;const n=bo("px");this.extendTemplate({attributes:{class:["ck-autocomplete"]}});const s=this.resultsView.bindTemplate;this.resultsView.set("isVisible",!1),this.resultsView.set("_position","s"),this.resultsView.set("_width",0),this.resultsView.extendTemplate({attributes:{class:[s.if("isVisible","ck-hidden",o=>!o),s.to("_position",o=>`ck-search__results_${o}`)],style:{width:s.to("_width",n)}}}),this.focusTracker.on("change:isFocused",(o,r,a)=>{this._updateResultsVisibility(),a?this.resultsView.element.scrollTop=0:t.resetOnBlur&&this.queryView.reset()}),this.on("search",()=>{this._updateResultsVisibility(),this._updateResultsViewWidthAndPosition()}),this.keystrokes.set("esc",(o,r)=>{this.resultsView.isVisible&&(this.queryView.focus(),this.resultsView.isVisible=!1,r())}),this.listenTo(U.document,"scroll",()=>{this._updateResultsViewWidthAndPosition()}),this.on("change:isEnabled",()=>{this._updateResultsVisibility()}),this.filteredView.on("execute",(o,{value:r})=>{this.focus(),this.reset(),this.queryView.fieldView.value=this.queryView.fieldView.element.value=r,this.resultsView.isVisible=!1}),this.resultsView.on("change:isVisible",()=>{this._updateResultsViewWidthAndPosition()})}_updateResultsViewWidthAndPosition(){if(!this.resultsView.isVisible)return;this.resultsView._width=new te(this.queryView.fieldView.element).width;const e=oo._getOptimalPosition({element:this.resultsView.element,target:this.queryView.element,fitInViewport:!0,positions:oo.defaultResultsPositions});this.resultsView._position=e?e.name:"s"}_updateResultsVisibility(){const e=typeof this._config.queryMinChars>"u"?0:this._config.queryMinChars,t=this.queryView.fieldView.element.value.length;this.resultsView.isVisible=this.focusTracker.isFocused&&this.isEnabled&&t>=e}}oo.defaultResultsPositions=[i=>({top:i.bottom,left:i.left,name:"s"}),(i,e)=>({top:i.top-e.height,left:i.left,name:"n"})];oo._getOptimalPosition=Zc;/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ru extends D{constructor(){super(),this.set("text",void 0),this.setTemplate({tag:"span",attributes:{class:["ck","ck-highlighted-text"]}}),this.on("render",()=>{this.on("change:text",()=>{this._updateInnerHTML(this.text)}),this._updateInnerHTML(this.text)})}highlightText(e){this._updateInnerHTML(hP(this.text||"",e))}_updateInnerHTML(e){this.element.innerHTML=e||""}}function hP(i,e){if(!e)return Lx(i);const t=[];let n=0,s=e.exec(i);for(;s!==null;){const r=s.index;r!==n&&t.push({text:i.substring(n,r),isMatch:!1}),t.push({text:s[0],isMatch:!0}),n=e.lastIndex,s=e.exec(i)}return n!==i.length&&t.push({text:i.substring(n),isMatch:!1}),t.map(r=>(r.text=Lx(r.text),r)).map(r=>r.isMatch?`<mark>${r.text}</mark>`:r.text).join("")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mP extends nP{constructor(e,t){super(e),this.view=t,this._toolbarConfig=p6(e.config.get("toolbar")),this._elementReplacer=new Ky,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){const t=this.editor,n=this.view,s=t.editing.view,o=n.editable,r=s.document.getRoot();o.name=r.rootName,n.render();const a=o.element;this.setEditableElement(o.name,a),n.editable.bind("isFocused").to(this.focusTracker),s.attachDomRoot(a),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}destroy(){super.destroy();const e=this.view,t=this.editor.editing.view;this._elementReplacer.restore(),t.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){const e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:t})=>t||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initPlaceholder(){const e=this.editor,t=e.editing.view,n=t.document.getRoot(),s=e.sourceElement;let o;const r=e.config.get("placeholder");r&&(o=typeof r=="string"?r:r[this.view.editable.name]),!o&&s&&s.tagName.toLowerCase()==="textarea"&&(o=s.getAttribute("placeholder")),o&&(n.placeholder=o),ol({view:t,element:n,isDirectHost:!1,keepOnFocus:!0})}_handleScrollToTheSelectionWithStickyPanel(e,t,n){const s=this.view.stickyPanel;if(s.isSticky){const o=new te(s.element).height;t.viewportOffset.top+=o}else{const o=()=>{this.editor.editing.view.scrollToTheSelection(n)};this.listenTo(s,"change:isSticky",o),setTimeout(()=>{this.stopListening(s,"change:isSticky",o)},20)}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gP extends sP{constructor(e,t,n={}){super(e),this.stickyPanel=new xP(e),this.toolbar=new ts(e,{shouldGroupWhenFull:n.shouldToolbarGroupWhenFull}),this.editable=new rP(e,t)}render(){super.render(),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pg{constructor(e){if(this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit=typeof e.crashNumberLimit=="number"?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof e.minimumNonErrorTimePeriod=="number"?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const n="error"in t?t.error:t.reason;n instanceof Error&&this._handleError(n,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){this._listeners[e]=this._listeners[e].filter(n=>n!==t)}_fire(e,...t){const n=this._listeners[e]||[];for(const s of n)s.apply(this,[null,...t])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,t){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:t instanceof ErrorEvent?t.filename:void 0,lineno:t instanceof ErrorEvent?t.lineno:void 0,colno:t instanceof ErrorEvent?t.colno:void 0,date:this._now()});const n=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:n}),n?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&e.context!==void 0&&e.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(e)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const e=this.crashes[this.crashes.length-1].date,t=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(e-t)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Q0(i,e=new Set){const t=[i],n=new Set;let s=0;for(;t.length>s;){const o=t[s++];if(!(n.has(o)||!bP(o)||e.has(o)))if(n.add(o),Symbol.iterator in o)try{for(const r of o)t.push(r)}catch{}else for(const r in o)r!=="defaultValue"&&t.push(o[r])}return n}function bP(i){const e=Object.prototype.toString.call(i),t=typeof i;return!(t==="number"||t==="boolean"||t==="string"||t==="symbol"||t==="function"||e==="[object Date]"||e==="[object RegExp]"||e==="[object Module]"||i===void 0||i===null||i._watchdogExcluded||i instanceof EventTarget||i instanceof Event)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Rg(i,e,t=new Set){if(i===e&&pP(i))return!0;const n=Q0(i,t),s=Q0(e,t);for(const o of n)if(s.has(o))return!0;return!1}function pP(i){return typeof i=="object"&&i!==null}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vg extends Pg{constructor(e,t={}){super(t),this._editor=null,this._initUsingData=!0,this._editables={},this._throttledSave=mi(this._save.bind(this),typeof t.saveInterval=="number"?t.saveInterval:5e3),e&&(this._creator=(n,s)=>e.create(n,s)),this._destructor=n=>n.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{const e={},t=[],n=this._config.rootsAttributes||{},s={};for(const[r,a]of Object.entries(this._data.roots))a.isLoaded?(e[r]="",s[r]=n[r]||{}):t.push(r);const o={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:t,rootsAttributes:s,_watchdogInitialData:this._data};return delete o.initialData,o.extraPlugins.push(wP),this._initUsingData?this.create(e,o,o.context):Un(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,t=this._config,n){return Promise.resolve().then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(t)||{},this._config.context=n,this._creator(e,this._config))).then(s=>{this._editor=s,s.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=s.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")})}destroy(){return Promise.resolve().then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e=this._editor,t=e.model.document.roots.filter(a=>a.isAttached()&&a.rootName!="$graveyard"),{plugins:n}=e,s=n.has("CommentsRepository")&&n.get("CommentsRepository"),o=n.has("TrackChanges")&&n.get("TrackChanges"),r={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};t.forEach(a=>{r.roots[a.rootName]={content:JSON.stringify(Array.from(a.getChildren())),attributes:JSON.stringify(Array.from(a.getAttributes())),isLoaded:a._isLoaded}});for(const a of e.model.markers)a._affectsData&&(r.markers[a.name]={rangeJSON:a.getRange().toJSON(),usingOperation:a._managedUsingOperations,affectsData:a._affectsData});return s&&(r.commentThreads=JSON.stringify(s.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(r.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),r}_getEditables(){const e={};for(const t of this.editor.model.document.getRootNames()){const n=this.editor.ui.getEditableElement(t);n&&(e[t]=n)}return e}_isErrorComingFromThisItem(e){return Rg(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return Gc(e,(t,n)=>{if(Un(t)||n==="context")return t})}}class wP{constructor(e){this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(e,t){if("name"in t){const n=e.createElement(t.name,t.attributes);if(t.children)for(const s of t.children)n._appendChild(this._createNode(e,s));return n}else return e.createText(t.data,t.attributes)}_restoreEditorData(e){const t=this.editor;Object.entries(this._data.roots).forEach(([n,{content:s,attributes:o}])=>{const r=JSON.parse(s),a=JSON.parse(o),c=t.model.document.getRoot(n);for(const[l,x]of a)e.setAttribute(l,x,c);for(const l of r){const x=this._createNode(e,l);e.insert(x,c,"end")}}),Object.entries(this._data.markers).forEach(([n,s])=>{const{document:o}=t.model,{rangeJSON:{start:r,end:a},...c}=s,l=o.getRoot(r.root),x=e.createPositionFromPath(l,r.path,r.stickiness),d=e.createPositionFromPath(l,a.path,a.stickiness),u=e.createRange(x,d);e.addMarker(n,{range:u,...c})})}_restoreCollaborationData(){const e=JSON.parse(this._data.commentThreads),t=JSON.parse(this._data.suggestions);e.forEach(n=>{const s=this.editor.config.get("collaboration.channelId"),o=this.editor.plugins.get("CommentsRepository");o.hasCommentThread(n.threadId)&&o.getCommentThread(n.threadId).remove(),o.addCommentThread({channelId:s,...n})}),t.forEach(n=>{const s=this.editor.plugins.get("TrackChangesEditing");if(s.hasSuggestion(n.id)){const o=s.getSuggestion(n.id);o.attributes=n.attributes}else s.addSuggestionData(n)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ds=Symbol("MainQueueId");class _P extends Pg{constructor(e,t={}){super(t),this._watchdogs=new Map,this._context=null,this._contextProps=new Set,this._actionQueues=new vP,this._watchdogConfig=t,this._creator=n=>e.create(n),this._destructor=n=>n.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(Ds,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){const t=au(e);return Promise.all(t.map(n=>this._actionQueues.enqueue(n.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let s;if(this._watchdogs.has(n.id))throw new Error(`Item with the given id is already added: '${n.id}'.`);if(n.type==="editor")return s=new Vg(null,this._watchdogConfig),s.setCreator(n.creator),s._setExcludedProperties(this._contextProps),n.destructor&&s.setDestructor(n.destructor),this._watchdogs.set(n.id,s),s.on("error",(o,{error:r,causesRestart:a})=>{this._fire("itemError",{itemId:n.id,error:r}),a&&this._actionQueues.enqueue(n.id,()=>new Promise(c=>{const l=()=>{s.off("restart",l),this._fire("itemRestart",{itemId:n.id}),c()};s.on("restart",l)}))}),s.create(n.sourceElementOrData,n.config,this._context);throw new Error(`Not supported item type: '${n.type}'.`)})))}remove(e){const t=au(e);return Promise.all(t.map(n=>this._actionQueues.enqueue(n,()=>{const s=this._getWatchdog(n);return this._watchdogs.delete(n),s.destroy()})))}destroy(){return this._actionQueues.enqueue(Ds,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(Ds,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=Q0(this._context),Promise.all(Array.from(this._watchdogs.values()).map(t=>(t._setExcludedProperties(this._contextProps),t.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(t=>t.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){const t=this._watchdogs.get(e);if(!t)throw new Error(`Item with the given id was not registered: ${e}.`);return t}_isErrorComingFromThisItem(e){for(const t of this._watchdogs.values())if(t._isErrorComingFromThisItem(e))return!1;return Rg(this._context,e.context)}}class vP{constructor(){this._onEmptyCallbacks=[],this._queues=new Map,this._activeActions=0}onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e,t){const n=e===Ds;this._activeActions++,this._queues.get(e)||this._queues.set(e,Promise.resolve());const o=(n?Promise.all(this._queues.values()):Promise.all([this._queues.get(Ds),this._queues.get(e)])).then(t),r=o.catch(()=>{});return this._queues.set(e,r),o.finally(()=>{this._activeActions--,this._queues.get(e)===r&&this._activeActions===0&&this._onEmptyCallbacks.forEach(a=>a())})}}function au(i){return Array.isArray(i)?i:[i]}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ua extends lr(G0(mS)){constructor(e,t={}){if(!dr(e)&&t.initialData!==void 0)throw new w("editor-create-initial-data",null);super(t),this.config.get("initialData")===void 0&&this.config.set("initialData",yP(e)),dr(e)&&(this.sourceElement=e),this.model.document.createRoot();const n=!this.config.get("toolbar.shouldNotGroupWhenFull"),s=new gP(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:n});this.ui=new mP(this,s),gS(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,t={}){return new Promise(n=>{const s=new this(e,t);n(s.initPlugins().then(()=>s.ui.init(dr(e)?e:null)).then(()=>s.data.init(s.config.get("initialData"))).then(()=>s.fire("ready")).then(()=>s))})}}ua.Context=ds;ua.EditorWatchdog=Vg;ua.ContextWatchdog=_P;function yP(i){return dr(i)?Qy(i):i}function dr(i){return Un(i)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ro extends Jn{constructor(e){super(e),this.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"];const t=this.document;this.listenTo(t,"paste",n("clipboardInput"),{priority:"low"}),this.listenTo(t,"drop",n("clipboardInput"),{priority:"low"}),this.listenTo(t,"dragover",n("dragging"),{priority:"low"});function n(s){return(o,r)=>{r.preventDefault();const a=r.dropRange?[r.dropRange]:null,c=new Pn(t,s);t.fire(c,{dataTransfer:r.dataTransfer,method:o.name,targetRanges:a,target:r.target,domEvent:r.domEvent}),c.stop.called&&r.stopPropagation()}}}onDomEvent(e){const t="clipboardData"in e?e.clipboardData:e.dataTransfer,n=e.type=="drop"||e.type=="paste",s={dataTransfer:new B6(t,{cacheFiles:n})};(e.type=="drop"||e.type=="dragover")&&(s.dropRange=CP(this.view,e)),this.fire(e.type,e,s)}}function CP(i,e){const t=e.target.ownerDocument,n=e.clientX,s=e.clientY;let o;return t.caretRangeFromPoint&&t.caretRangeFromPoint(n,s)?o=t.caretRangeFromPoint(n,s):e.rangeParent&&(o=t.createRange(),o.setStart(e.rangeParent,e.rangeOffset),o.collapse(!0)),o?i.domConverter.domRangeToView(o):null}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kP(i){return i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(i.includes("</p><p>")||i.includes("<br>"))&&(i=`<p>${i}</p>`),i}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function TP(i){return i.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length==1?" ":t).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const cu=["figcaption","li"],lu=["ol","ul"];function Bg(i){if(i.is("$text")||i.is("$textProxy"))return i.data;if(i.is("element","img")&&i.hasAttribute("alt"))return i.getAttribute("alt");if(i.is("element","br"))return`
`;let e="",t=null;for(const n of i.getChildren())e+=AP(n,t)+Bg(n),t=n;return e}function AP(i,e){return e?i.is("element","li")&&!i.isEmpty&&i.getChild(0).is("containerElement")||lu.includes(i.name)&&lu.includes(e.name)?`

`:!i.is("containerElement")&&!e.is("containerElement")?"":cu.includes(i.name)||cu.includes(e.name)?`
`:`

`:""}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zt extends y{static get pluginName(){return"ClipboardPipeline"}init(){this.editor.editing.view.addObserver(ro),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(e,t,n){const s=this.editor.model.getSelectedContent(t);this.fire("outputTransformation",{dataTransfer:e,content:s,method:n})}_setupPasteDrop(){const e=this.editor,t=e.model,n=e.editing.view,s=n.document;this.listenTo(s,"clipboardInput",(o,r)=>{r.method=="paste"&&!e.model.canEditAt(e.model.document.selection)&&o.stop()},{priority:"highest"}),this.listenTo(s,"clipboardInput",(o,r)=>{const a=r.dataTransfer;let c;if(r.content)c=r.content;else{let x="";a.getData("text/html")?x=TP(a.getData("text/html")):a.getData("text/plain")&&(x=kP(a.getData("text/plain"))),c=this.editor.data.htmlProcessor.toView(x)}const l=new Pn(this,"inputTransformation");this.fire(l,{content:c,dataTransfer:a,targetRanges:r.targetRanges,method:r.method}),l.stop.called&&o.stop(),n.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(o,r)=>{if(r.content.isEmpty)return;const c=this.editor.data.toModel(r.content,"$clipboardHolder");c.childCount!=0&&(o.stop(),t.change(()=>{this.fire("contentInsertion",{content:c,method:r.method,dataTransfer:r.dataTransfer,targetRanges:r.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(o,r)=>{r.resultRange=t.insertContent(r.content)},{priority:"low"})}_setupCopyCut(){const e=this.editor,t=e.model.document,s=e.editing.view.document,o=(r,a)=>{const c=a.dataTransfer;a.preventDefault(),this._fireOutputTransformationEvent(c,t.selection,r.name)};this.listenTo(s,"copy",o,{priority:"low"}),this.listenTo(s,"cut",(r,a)=>{e.model.canEditAt(e.model.document.selection)?o(r,a):a.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(r,a)=>{const c=e.data.toView(a.content);s.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:c,method:a.method})},{priority:"low"}),this.listenTo(s,"clipboardOutput",(r,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",Bg(a.content))),a.method=="cut"&&e.model.deleteContent(t.selection)},{priority:"low"})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Og{constructor(e,t=20){this._batch=null,this.model=e,this._size=0,this.limit=t,this._isLocked=!1,this._changeCallback=(n,s)=>{s.isLocal&&s.isUndoable&&s!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(e){this._size+=e,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e=!1){(!this.isLocked||e)&&(this._batch=null,this._size=0)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class EP extends q{constructor(e,t){super(e),this._buffer=new Og(e.model,t),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const t=this.editor.model,n=t.document,s=e.text||"",o=s.length;let r=n.selection;if(e.selection?r=e.selection:e.range&&(r=t.createSelection(e.range)),!t.canEditAt(r))return;const a=e.resultRange;t.enqueueChange(this._buffer.batch,c=>{this._buffer.lock(),t.deleteContent(r),s&&t.insertContent(c.createText(s,n.selection.getAttributes()),r),a?c.setSelection(a):r.is("documentSelection")||c.setSelection(r),this._buffer.unlock(),this._buffer.input(o)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const xu=["insertText","insertReplacementText"];class SP extends gn{constructor(e){super(e),this.focusObserver=e.getObserver(Rr),ee.isAndroid&&xu.push("insertCompositionText");const t=e.document;t.on("beforeinput",(n,s)=>{if(!this.isEnabled)return;const{data:o,targetRanges:r,inputType:a,domEvent:c}=s;if(!xu.includes(a))return;this.focusObserver.flush();const l=new Pn(t,"insertText");t.fire(l,new es(e,c,{text:o,selection:e.createSelection(r)})),l.stop.called&&n.stop()}),t.on("compositionend",(n,{data:s,domEvent:o})=>{!this.isEnabled||ee.isAndroid||s&&t.fire("insertText",new es(e,o,{text:s,selection:t.selection}))},{priority:"lowest"})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lg extends y{static get pluginName(){return"Input"}init(){const e=this.editor,t=e.model,n=e.editing.view,s=t.document.selection;n.addObserver(SP);const o=new EP(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",o),e.commands.add("input",o),this.listenTo(n.document,"insertText",(r,a)=>{n.document.isComposing||a.preventDefault();const{text:c,selection:l,resultRange:x}=a,d=Array.from(l.getRanges()).map(m=>e.editing.mapper.toModelRange(m));let u=c;if(ee.isAndroid){const m=Array.from(d[0].getItems()).reduce((b,p)=>b+(p.is("$textProxy")?p.data:""),"");m&&(m.length<=u.length?u.startsWith(m)&&(u=u.substring(m.length),d[0].start=d[0].start.getShiftedBy(m.length)):m.startsWith(u)&&(d[0].start=d[0].start.getShiftedBy(u.length),u=""))}const f={text:u,selection:t.createSelection(d)};x&&(f.resultRange=e.editing.mapper.toModelRange(x)),e.execute("insertText",f),n.scrollToTheSelection()}),ee.isAndroid?this.listenTo(n.document,"keydown",(r,a)=>{s.isCollapsed||a.keyCode!=229||!n.document.isComposing||du(t,o)}):this.listenTo(n.document,"compositionstart",()=>{s.isCollapsed||du(t,o)})}}function du(i,e){if(!e.isEnabled)return;const t=e.buffer;t.lock(),i.enqueueChange(t.batch,()=>{i.deleteContent(i.document.selection)}),t.unlock()}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uu extends q{constructor(e,t){super(e),this.direction=t,this._buffer=new Og(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){const t=this.editor.model,n=t.document;t.enqueueChange(this._buffer.batch,s=>{this._buffer.lock();const o=s.createSelection(e.selection||n.selection);if(!t.canEditAt(o))return;const r=e.sequence||1,a=o.isCollapsed;if(o.isCollapsed&&t.modifySelection(o,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(r)){this._replaceEntireContentWithParagraph(s);return}if(this._shouldReplaceFirstBlockWithParagraph(o,r)){this.editor.execute("paragraph",{selection:o});return}if(o.isCollapsed)return;let c=0;o.getFirstRange().getMinimalFlatRanges().forEach(l=>{c+=L0(l.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),t.deleteContent(o,{doNotResetEntireContent:a,direction:this.direction}),this._buffer.input(c),s.setSelection(o),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const t=this.editor.model,s=t.document.selection,o=t.schema.getLimitElement(s);if(!(s.isCollapsed&&s.containsEntireContent(o))||!t.schema.checkChild(o,"paragraph"))return!1;const a=o.getChild(0);return!(a&&a.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){const t=this.editor.model,s=t.document.selection,o=t.schema.getLimitElement(s),r=e.createElement("paragraph");e.remove(e.createRangeIn(o)),e.insert(r,o),e.setSelection(r,0)}_shouldReplaceFirstBlockWithParagraph(e,t){const n=this.editor.model;if(t>1||this.direction!="backward"||!e.isCollapsed)return!1;const s=e.getFirstPosition(),o=n.schema.getLimitElement(s),r=o.getChild(0);return!(s.parent!=r||!e.containsEntireContent(r)||!n.schema.checkChild(o,"paragraph")||r.name=="paragraph")}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const IP="character",fu="word",PP="codePoint",$n="selection",Ui="backward",Ss="forward",Mg={deleteContent:{unit:$n,direction:Ui},deleteContentBackward:{unit:PP,direction:Ui},deleteWordBackward:{unit:fu,direction:Ui},deleteHardLineBackward:{unit:$n,direction:Ui},deleteSoftLineBackward:{unit:$n,direction:Ui},deleteContentForward:{unit:IP,direction:Ss},deleteWordForward:{unit:fu,direction:Ss},deleteHardLineForward:{unit:$n,direction:Ss},deleteSoftLineForward:{unit:$n,direction:Ss}};class RP extends gn{constructor(e){super(e);const t=e.document;let n=0;t.on("keydown",()=>{n++}),t.on("keyup",()=>{n=0}),t.on("beforeinput",(s,o)=>{if(!this.isEnabled)return;const{targetRanges:r,domEvent:a,inputType:c}=o,l=Mg[c];if(!l)return;const x={direction:l.direction,unit:l.unit,sequence:n};x.unit==$n&&(x.selectionToRemove=e.createSelection(r[0])),c==="deleteContentBackward"&&(ee.isAndroid&&(x.sequence=1),BP(r)&&(x.unit=$n,x.selectionToRemove=e.createSelection(r)));const d=new us(t,"delete",r[0]);t.fire(d,new es(e,a,x)),d.stop.called&&s.stop()}),ee.isBlink&&VP(this)}observe(){}stopObserving(){}}function VP(i){const e=i.view,t=e.document;let n=null,s=!1;t.on("keydown",(a,{keyCode:c})=>{n=c,s=!1}),t.on("keyup",(a,{keyCode:c,domEvent:l})=>{const x=t.selection,d=i.isEnabled&&c==n&&o(c)&&!x.isCollapsed&&!s;if(n=null,d){const u=x.getFirstRange(),f=new us(t,"delete",u),m={unit:$n,direction:r(c),selectionToRemove:x};t.fire(f,new es(e,l,m))}}),t.on("beforeinput",(a,{inputType:c})=>{const l=Mg[c];o(n)&&l&&l.direction==r(n)&&(s=!0)},{priority:"high"}),t.on("beforeinput",(a,{inputType:c,data:l})=>{n==se.delete&&c=="insertText"&&l==""&&a.stop()},{priority:"high"});function o(a){return a==se.backspace||a==se.delete}function r(a){return a==se.backspace?Ui:Ss}}function BP(i){if(i.length!=1||i[0].isCollapsed)return!1;const e=i[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let t=0;for(const{nextPosition:n}of e){if(!n.parent.is("$text"))t++;else{const s=n.parent.data,o=n.offset;if(el(s,o)||tl(s,o)||e6(s,o))continue;t++}if(t>1)return!0}return!1}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qn extends y{static get pluginName(){return"Delete"}init(){const e=this.editor,t=e.editing.view,n=t.document,s=e.model.document;t.addObserver(RP),this._undoOnBackspace=!1;const o=new uu(e,"forward");e.commands.add("deleteForward",o),e.commands.add("forwardDelete",o),e.commands.add("delete",new uu(e,"backward")),this.listenTo(n,"delete",(r,a)=>{n.isComposing||a.preventDefault();const{direction:c,sequence:l,selectionToRemove:x,unit:d}=a,u=c==="forward"?"deleteForward":"delete",f={sequence:l};if(d=="selection"){const m=Array.from(x.getRanges()).map(b=>e.editing.mapper.toModelRange(b));f.selection=e.model.createSelection(m)}else f.unit=d;e.execute(u,f),t.scrollToTheSelection()},{priority:"low"}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(n,"delete",(r,a)=>{this._undoOnBackspace&&a.direction=="backward"&&a.sequence==1&&a.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),a.preventDefault(),r.stop())},{context:"$capture"}),this.listenTo(s,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fg extends y{static get requires(){return[Lg,qn]}static get pluginName(){return"Typing"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ng(i,e){let t=i.start;return{text:Array.from(i.getWalker({ignoreElementEnd:!1})).reduce((s,{item:o})=>o.is("$text")||o.is("$textProxy")?s+o.data:(t=e.createPositionAfter(o),""),""),range:e.createRange(t,i.end)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Dg extends ue(){constructor(e,t){super(),this.model=e,this.testCallback=t,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const t=this.model.document;this.listenTo(t.selection,"change:range",(n,{directChange:s})=>{if(s){if(!t.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(t,"change:data",(n,s)=>{s.isUndo||!s.isLocal||this._evaluateTextBeforeSelection("data",{batch:s})})}_evaluateTextBeforeSelection(e,t={}){const n=this.model,o=n.document.selection,r=n.createRange(n.createPositionAt(o.focus.parent,0),o.focus),{text:a,range:c}=Ng(r,n),l=this.testCallback(a);if(!l&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!l,l){const x=Object.assign(t,{text:a,range:c});typeof l=="object"&&Object.assign(x,l),this.fire(`matched:${e}`,x)}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hu extends y{static get pluginName(){return"TwoStepCaretMovement"}constructor(e){super(e),this.attributes=new Set,this._overrideUid=null}init(){const e=this.editor,t=e.model,n=e.editing.view,s=e.locale,o=t.document.selection;this.listenTo(n.document,"arrowKey",(r,a)=>{if(!o.isCollapsed||a.shiftKey||a.altKey||a.ctrlKey)return;const c=a.keyCode==se.arrowright,l=a.keyCode==se.arrowleft;if(!c&&!l)return;const x=s.contentLanguageDirection;let d=!1;x==="ltr"&&c||x==="rtl"&&l?d=this._handleForwardMovement(a):d=this._handleBackwardMovement(a),d===!0&&r.stop()},{context:"$text",priority:"highest"}),this._isNextGravityRestorationSkipped=!1,this.listenTo(o,"change:range",(r,a)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!a.directChange&&ur(o.getFirstPosition(),this.attributes)||this._restoreGravity())})}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const t=this.attributes,s=this.editor.model.document.selection,o=s.getFirstPosition();return this._isGravityOverridden||o.isAtStart&&Ga(s,t)?!1:ur(o,t)?(qo(e),this._overrideGravity(),!0):!1}_handleBackwardMovement(e){const t=this.attributes,n=this.editor.model,s=n.document.selection,o=s.getFirstPosition();return this._isGravityOverridden?(qo(e),this._restoreGravity(),Ka(n,t,o),!0):o.isAtStart?Ga(s,t)?(qo(e),Ka(n,t,o),!0):!1:OP(o,t)?o.isAtEnd&&!Ga(s,t)&&ur(o,t)?(qo(e),Ka(n,t,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function Ga(i,e){for(const t of e)if(i.hasAttribute(t))return!0;return!1}function Ka(i,e,t){const n=t.nodeBefore;i.change(s=>{if(n){const o=[],r=i.schema.isObject(n)&&i.schema.isInline(n);for(const[a,c]of n.getAttributes())i.schema.checkAttribute("$text",a)&&(!r||i.schema.getAttributeProperties(a).copyFromObject!==!1)&&o.push([a,c]);s.setSelectionAttribute(o)}else s.removeSelectionAttribute(e)})}function qo(i){i.preventDefault()}function OP(i,e){const t=i.getShiftedBy(-1);return ur(t,e)}function ur(i,e){const{nodeBefore:t,nodeAfter:n}=i;for(const s of e){const o=t?t.getAttribute(s):void 0;if((n?n.getAttribute(s):void 0)!==o)return!0}return!1}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function gi(i,e,t,n){return n.createRange(ec(i,e,t,!0,n),ec(i,e,t,!1,n))}function ec(i,e,t,n,s){let o=i.textNode||(n?i.nodeBefore:i.nodeAfter),r=null;for(;o&&o.getAttribute(e)==t;)r=o,o=n?o.previousSibling:o.nextSibling;return r?s.createPositionAt(r,n?"before":"after"):i}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function LP(i,e,t,n){const s=i.editing.view,o=new Set;s.document.registerPostFixer(r=>{const a=i.model.document.selection;let c=!1;if(a.hasAttribute(e)){const l=gi(a.getFirstPosition(),e,a.getAttribute(e),i.model),x=i.editing.mapper.toViewRange(l);for(const d of x.getItems())d.is("element",t)&&!d.hasClass(n)&&(r.addClass(n,d),o.add(d),c=!0)}return c}),i.conversion.for("editingDowncast").add(r=>{r.on("insert",a,{priority:"highest"}),r.on("remove",a,{priority:"highest"}),r.on("attribute",a,{priority:"highest"}),r.on("selection",a,{priority:"highest"});function a(){s.change(c=>{for(const l of o.values())c.removeClass(n,l),o.delete(l)})}})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function*zg(i,e){for(const t of e)t&&i.getAttributeProperties(t[0]).copyOnEnter&&(yield t)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class MP extends q{execute(){this.editor.model.change(e=>{this.enterBlock(e),this.fire("afterExecute",{writer:e})})}enterBlock(e){const t=this.editor.model,n=t.document.selection,s=t.schema,o=n.isCollapsed,r=n.getFirstRange(),a=r.start.parent,c=r.end.parent;if(s.isLimit(a)||s.isLimit(c))return!o&&a==c&&t.deleteContent(n),!1;if(o){const l=zg(e.model.schema,n.getAttributes());return mu(e,r.start),e.setSelectionAttribute(l),!0}else{const l=!(r.start.isAtStart&&r.end.isAtEnd),x=a==c;if(t.deleteContent(n,{leaveUnmerged:l}),l){if(x)return mu(e,n.focus),!0;e.setSelection(c,0)}}return!1}}function mu(i,e){i.split(e),i.setSelection(e.parent.nextSibling,0)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const FP={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class Hg extends gn{constructor(e){super(e);const t=this.document;let n=!1;t.on("keydown",(s,o)=>{n=o.shiftKey}),t.on("beforeinput",(s,o)=>{if(!this.isEnabled)return;let r=o.inputType;ee.isSafari&&n&&r=="insertParagraph"&&(r="insertLineBreak");const a=o.domEvent,c=FP[r];if(!c)return;const l=new us(t,"enter",o.targetRanges[0]);t.fire(l,new es(e,a,{isSoft:c.isSoft})),l.stop.called&&s.stop()})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ko extends y{static get pluginName(){return"Enter"}init(){const e=this.editor,t=e.editing.view,n=t.document;t.addObserver(Hg),e.commands.add("enter",new MP(e)),this.listenTo(n,"enter",(s,o)=>{n.isComposing||o.preventDefault(),!o.isSoft&&(e.execute("enter"),t.scrollToTheSelection())},{priority:"low"})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NP extends q{execute(){const e=this.editor.model,t=e.document;e.change(n=>{zP(e,n,t.selection),this.fire("afterExecute",{writer:n})})}refresh(){const e=this.editor.model,t=e.document;this.isEnabled=DP(e.schema,t.selection)}}function DP(i,e){if(e.rangeCount>1)return!1;const t=e.anchor;if(!t||!i.checkChild(t,"softBreak"))return!1;const n=e.getFirstRange(),s=n.start.parent,o=n.end.parent;return!((tc(s,i)||tc(o,i))&&s!==o)}function zP(i,e,t){const n=t.isCollapsed,s=t.getFirstRange(),o=s.start.parent,r=s.end.parent,a=o==r;if(n){const c=zg(i.schema,t.getAttributes());gu(i,e,s.end),e.removeSelectionAttribute(t.getAttributeKeys()),e.setSelectionAttribute(c)}else{const c=!(s.start.isAtStart&&s.end.isAtEnd);i.deleteContent(t,{leaveUnmerged:c}),a?gu(i,e,t.focus):c&&e.setSelection(r,0)}}function gu(i,e,t){const n=e.createElement("softBreak");i.insertContent(n,t),e.setSelection(n,"after")}function tc(i,e){return i.is("rootElement")?!1:e.isLimit(i)||tc(i.parent,e)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class HP extends y{static get pluginName(){return"ShiftEnter"}init(){const e=this.editor,t=e.model.schema,n=e.conversion,s=e.editing.view,o=s.document;t.register("softBreak",{allowWhere:"$text",isInline:!0}),n.for("upcast").elementToElement({model:"softBreak",view:"br"}),n.for("downcast").elementToElement({model:"softBreak",view:(r,{writer:a})=>a.createEmptyElement("br")}),s.addObserver(Hg),e.commands.add("shiftEnter",new NP(e)),this.listenTo(o,"enter",(r,a)=>{o.isComposing||a.preventDefault(),a.isSoft&&(e.execute("shiftEnter"),s.scrollToTheSelection())},{priority:"low"})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $P extends ye(){constructor(){super(...arguments),this._stack=[]}add(e,t){const n=this._stack,s=n[0];this._insertDescriptor(e);const o=n[0];s!==o&&!Ja(s,o)&&this.fire("change:top",{oldDescriptor:s,newDescriptor:o,writer:t})}remove(e,t){const n=this._stack,s=n[0];this._removeDescriptor(e);const o=n[0];s!==o&&!Ja(s,o)&&this.fire("change:top",{oldDescriptor:s,newDescriptor:o,writer:t})}_insertDescriptor(e){const t=this._stack,n=t.findIndex(o=>o.id===e.id);if(Ja(e,t[n]))return;n>-1&&t.splice(n,1);let s=0;for(;t[s]&&UP(t[s],e);)s++;t.splice(s,0,e)}_removeDescriptor(e){const t=this._stack,n=t.findIndex(s=>s.id===e);n>-1&&t.splice(n,1)}}function Ja(i,e){return i&&e&&i.priority==e.priority&&Or(i.classes)==Or(e.classes)}function UP(i,e){return i.priority>e.priority?!0:i.priority<e.priority?!1:Or(i.classes)>Or(e.classes)}function Or(i){return Array.isArray(i)?i.sort().join(","):i}const WP='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const jP="ck-widget",bu="ck-widget_selected";function Ke(i){return i.is("element")?!!i.getCustomProperty("widget"):!1}function ki(i,e,t={}){if(!i.is("containerElement"))throw new w("widget-to-widget-wrong-element-type",null,{element:i});return e.setAttribute("contenteditable","false",i),e.addClass(jP,i),e.setCustomProperty("widget",!0,i),i.getFillerOffset=ZP,e.setCustomProperty("widgetLabel",[],i),t.label&&KP(i,t.label),t.hasSelectionHandle&&YP(i,e),$g(i,e),i}function qP(i,e,t){if(e.classes&&t.addClass(ge(e.classes),i),e.attributes)for(const n in e.attributes)t.setAttribute(n,e.attributes[n],i)}function GP(i,e,t){if(e.classes&&t.removeClass(ge(e.classes),i),e.attributes)for(const n in e.attributes)t.removeAttribute(n,i)}function $g(i,e,t=qP,n=GP){const s=new $P;s.on("change:top",(a,c)=>{c.oldDescriptor&&n(i,c.oldDescriptor,c.writer),c.newDescriptor&&t(i,c.newDescriptor,c.writer)});const o=(a,c,l)=>s.add(c,l),r=(a,c,l)=>s.remove(c,l);e.setCustomProperty("addHighlight",o,i),e.setCustomProperty("removeHighlight",r,i)}function KP(i,e){i.getCustomProperty("widgetLabel").push(e)}function JP(i){return i.getCustomProperty("widgetLabel").reduce((t,n)=>typeof n=="function"?t?t+". "+n():n():t?t+". "+n:n,"")}function pl(i,e,t={}){return e.addClass(["ck-editor__editable","ck-editor__nested-editable"],i),e.setAttribute("role","textbox",i),t.label&&e.setAttribute("aria-label",t.label,i),e.setAttribute("contenteditable",i.isReadOnly?"false":"true",i),i.on("change:isReadOnly",(n,s,o)=>{e.setAttribute("contenteditable",o?"false":"true",i)}),i.on("change:isFocused",(n,s,o)=>{o?e.addClass("ck-editor__nested-editable_focused",i):e.removeClass("ck-editor__nested-editable_focused",i)}),$g(i,e),i}function fa(i,e){const t=i.getSelectedElement();if(t){const n=zn(i);if(n)return e.createRange(e.createPositionAt(t,n))}return lg(i,e)}function ZP(){return null}function YP(i,e){const t=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(n){const s=this.toDomElement(n),o=new mn;return o.set("content",WP),o.render(),s.appendChild(o.element),s});e.insert(e.createPositionAt(i,0),t),e.addClass(["ck-widget_with-selection-handle"],i)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Cn="widget-type-around";function ti(i,e,t){return!!i&&Ke(i)&&!t.isInline(e)}function XP(i){return i.closest(".ck-widget__type-around__button")}function QP(i){return i.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function eR(i,e){const t=i.closest(".ck-widget");return e.mapDomToView(t)}function zn(i){return i.getAttribute(Cn)}const tR='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ug=["before","after"],nR=new DOMParser().parseFromString(tR,"image/svg+xml").firstChild,pu="ck-widget__type-around_disabled";class iR extends y{constructor(){super(...arguments),this._currentFakeCaretModelElement=null}static get pluginName(){return"WidgetTypeAround"}static get requires(){return[ko,qn]}init(){const e=this.editor,t=e.editing.view;this.on("change:isEnabled",(n,s,o)=>{t.change(r=>{for(const a of t.document.roots)o?r.removeClass(pu,a):r.addClass(pu,a)}),o||e.model.change(r=>{r.removeSelectionAttribute(Cn)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,t){const n=this.editor,s=n.editing.view,o=n.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);n.execute("insertParagraph",{position:n.model.createPositionAt(e,t),attributes:o}),s.focus(),s.scrollToTheSelection()}_listenToIfEnabled(e,t,n,s){this.listenTo(e,t,(...o)=>{this.isEnabled&&n(...o)},s)}_insertParagraphAccordingToFakeCaretPosition(){const n=this.editor.model.document.selection,s=zn(n);if(!s)return!1;const o=n.getSelectedElement();return this._insertParagraph(o,s),!0}_enableTypeAroundUIInjection(){const e=this.editor,t=e.model.schema,n=e.locale.t,s={before:n("Insert paragraph before block"),after:n("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(o,r,a)=>{const c=a.mapper.toViewElement(r.item);c&&ti(c,r.item,t)&&(sR(a.writer,s,c),c.getCustomProperty("widgetLabel").push(()=>this.isEnabled?n("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,t=e.model,n=t.document.selection,s=t.schema,o=e.editing.view;this._listenToIfEnabled(o.document,"arrowKey",(a,c)=>{this._handleArrowKeyPress(a,c)},{context:[Ke,"$text"],priority:"high"}),this._listenToIfEnabled(n,"change:range",(a,c)=>{c.directChange&&e.model.change(l=>{l.removeSelectionAttribute(Cn)})}),this._listenToIfEnabled(t.document,"change:data",()=>{const a=n.getSelectedElement();if(a){const c=e.editing.mapper.toViewElement(a);if(ti(c,a,s))return}e.model.change(c=>{c.removeSelectionAttribute(Cn)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(a,c,l)=>{const x=l.writer;if(this._currentFakeCaretModelElement){const m=l.mapper.toViewElement(this._currentFakeCaretModelElement);m&&(x.removeClass(Ug.map(r),m),this._currentFakeCaretModelElement=null)}const d=c.selection.getSelectedElement();if(!d)return;const u=l.mapper.toViewElement(d);if(!ti(u,d,s))return;const f=zn(c.selection);f&&(x.addClass(r(f),u),this._currentFakeCaretModelElement=d)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(a,c,l)=>{l||e.model.change(x=>{x.removeSelectionAttribute(Cn)})});function r(a){return`ck-widget_type-around_show-fake-caret_${a}`}}_handleArrowKeyPress(e,t){const n=this.editor,s=n.model,o=s.document.selection,r=s.schema,a=n.editing.view,c=t.keyCode,l=uC(c,n.locale.contentLanguageDirection),x=a.document.selection.getSelectedElement(),d=n.editing.mapper.toModelElement(x);let u;ti(x,d,r)?u=this._handleArrowKeyPressOnSelectedWidget(l):o.isCollapsed?u=this._handleArrowKeyPressWhenSelectionNextToAWidget(l):t.shiftKey||(u=this._handleArrowKeyPressWhenNonCollapsedSelection(l)),u&&(t.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const n=this.editor.model,s=n.document.selection,o=zn(s);return n.change(r=>{if(o){if(!(o===(e?"after":"before")))return r.removeSelectionAttribute(Cn),!0}else return r.setSelectionAttribute(Cn,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const t=this.editor,n=t.model,s=n.schema,o=t.plugins.get("Widget"),r=o._getObjectElementNextToSelection(e),a=t.editing.mapper.toViewElement(r);return ti(a,r,s)?(n.change(c=>{o._setSelectionOverElement(r),c.setSelectionAttribute(Cn,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){const t=this.editor,n=t.model,s=n.schema,o=t.editing.mapper,r=n.document.selection,a=e?r.getLastPosition().nodeBefore:r.getFirstPosition().nodeAfter,c=o.toViewElement(a);return ti(c,a,s)?(n.change(l=>{l.setSelection(a,"on"),l.setSelectionAttribute(Cn,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,t=e.editing.view;this._listenToIfEnabled(t.document,"mousedown",(n,s)=>{const o=XP(s.domTarget);if(!o)return;const r=QP(o),a=eR(o,t.domConverter),c=e.editing.mapper.toModelElement(a);this._insertParagraph(c,r),s.preventDefault(),n.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,t=e.model.document.selection,n=e.editing.view;this._listenToIfEnabled(n.document,"enter",(s,o)=>{if(s.eventPhase!="atTarget")return;const r=t.getSelectedElement(),a=e.editing.mapper.toViewElement(r),c=e.model.schema;let l;this._insertParagraphAccordingToFakeCaretPosition()?l=!0:ti(a,r,c)&&(this._insertParagraph(r,o.isSoft?"before":"after"),l=!0),l&&(o.preventDefault(),s.stop())},{context:Ke})}_enableInsertingParagraphsOnTypingKeystroke(){const t=this.editor.editing.view.document;this._listenToIfEnabled(t,"insertText",(n,s)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(s.selection=t.selection)},{priority:"high"}),ee.isAndroid?this._listenToIfEnabled(t,"keydown",(n,s)=>{s.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(t,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const e=this.editor,t=e.editing.view,n=e.model,s=n.schema;this._listenToIfEnabled(t.document,"delete",(o,r)=>{if(o.eventPhase!="atTarget")return;const a=zn(n.document.selection);if(!a)return;const c=r.direction,l=n.document.selection.getSelectedElement(),x=a==="before",d=c=="forward";if(x===d)e.execute("delete",{selection:n.createSelection(l,"on")});else{const f=s.getNearestSelectionRange(n.createPositionAt(l,a),c);if(f)if(!f.isCollapsed)n.change(m=>{m.setSelection(f),e.execute(d?"deleteForward":"delete")});else{const m=n.createSelection(f.start);if(n.modifySelection(m,{direction:c}),!m.focus.isEqual(f.start))n.change(b=>{b.setSelection(f),e.execute(d?"deleteForward":"delete")});else{const b=aR(s,f.start.parent);n.deleteContent(n.createSelection(b,"on"),{doNotAutoparagraph:!0})}}}r.preventDefault(),o.stop()},{context:Ke})}_enableInsertContentIntegration(){const e=this.editor,t=this.editor.model,n=t.document.selection;this._listenToIfEnabled(e.model,"insertContent",(s,[o,r])=>{if(r&&!r.is("documentSelection"))return;const a=zn(n);if(a)return s.stop(),t.change(c=>{const l=n.getSelectedElement(),x=t.createPositionAt(l,a),d=c.createSelection(x),u=t.insertContent(o,d);return c.setSelection(d),u})},{priority:"high"})}_enableInsertObjectIntegration(){const e=this.editor,n=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(s,o)=>{const[,r,a={}]=o;if(r&&!r.is("documentSelection"))return;const c=zn(n);c&&(a.findOptimalPosition=c,o[3]=a)},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,n=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(s,[o])=>{if(o&&!o.is("documentSelection"))return;zn(n)&&s.stop()},{priority:"high"})}}function sR(i,e,t){const n=i.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(s){const o=this.toDomElement(s);return oR(o,e),rR(o),o});i.insert(i.createPositionAt(t,"end"),n)}function oR(i,e){for(const t of Ug){const n=new gt({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${t}`],title:e[t],"aria-hidden":"true"},children:[i.ownerDocument.importNode(nR,!0)]});i.appendChild(n.render())}}function rR(i){const e=new gt({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});i.appendChild(e.render())}function aR(i,e){let t=e;for(const n of e.getAncestors({parentFirst:!0})){if(n.childCount>1||i.isLimit(n))break;t=n}return t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function cR(i){const e=i.model;return(t,n)=>{const s=n.keyCode==se.arrowup,o=n.keyCode==se.arrowdown,r=n.shiftKey,a=e.document.selection;if(!s&&!o)return;const c=o;if(r&&dR(a,c))return;const l=lR(i,a,c);if(l){if(l.isCollapsed){if(a.isCollapsed)return;if(r)return}(l.isCollapsed||xR(i,l,c))&&(e.change(x=>{const d=c?l.end:l.start;if(r){const u=e.createSelection(a.anchor);u.setFocus(d),x.setSelection(u)}else x.setSelection(d)}),t.stop(),n.preventDefault(),n.stopPropagation())}}}function lR(i,e,t){const n=i.model;if(t){const s=e.isCollapsed?e.focus:e.getLastPosition(),o=wu(n,s,"forward");if(!o)return null;const r=n.createRange(s,o),a=_u(n.schema,r,"backward");return a?n.createRange(s,a):null}else{const s=e.isCollapsed?e.focus:e.getFirstPosition(),o=wu(n,s,"backward");if(!o)return null;const r=n.createRange(o,s),a=_u(n.schema,r,"forward");return a?n.createRange(a,s):null}}function wu(i,e,t){const n=i.schema,s=i.createRangeIn(e.root),o=t=="forward"?"elementStart":"elementEnd";for(const{previousPosition:r,item:a,type:c}of s.getWalker({startPosition:e,direction:t})){if(n.isLimit(a)&&!n.isInline(a))return r;if(c==o&&n.isBlock(a))return null}return null}function _u(i,e,t){const n=t=="backward"?e.end:e.start;if(i.checkChild(n,"$text"))return n;for(const{nextPosition:s}of e.getWalker({direction:t}))if(i.checkChild(s,"$text"))return s;return null}function xR(i,e,t){const n=i.model,s=i.view.domConverter;if(t){const l=n.createSelection(e.start);n.modifySelection(l),!l.focus.isAtEnd&&!e.start.isEqual(l.focus)&&(e=n.createRange(l.focus,e.end))}const o=i.mapper.toViewRange(e),r=s.viewRangeToDom(o),a=te.getDomRangeRects(r);let c;for(const l of a){if(c===void 0){c=Math.round(l.bottom);continue}if(Math.round(l.top)>=c)return!1;c=Math.max(c,Math.round(l.bottom))}return!0}function dR(i,e){return!i.isCollapsed&&i.isBackward==e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Yn extends y{constructor(){super(...arguments),this._previouslySelected=new Set}static get pluginName(){return"Widget"}static get requires(){return[iR,qn]}init(){const e=this.editor,t=e.editing.view,n=t.document;this.editor.editing.downcastDispatcher.on("selection",(s,o,r)=>{const a=r.writer,c=o.selection;if(c.isCollapsed)return;const l=c.getSelectedElement();if(!l)return;const x=e.editing.mapper.toViewElement(l);Ke(x)&&r.consumable.consume(c,"selection")&&a.setSelection(a.createRangeOn(x),{fake:!0,label:JP(x)})}),this.editor.editing.downcastDispatcher.on("selection",(s,o,r)=>{this._clearPreviouslySelectedWidgets(r.writer);const a=r.writer,c=a.document.selection;let l=null;for(const x of c.getRanges())for(const d of x){const u=d.item;Ke(u)&&!fR(u,l)&&(a.addClass(bu,u),this._previouslySelected.add(u),l=u)}},{priority:"low"}),t.addObserver(oa),this.listenTo(n,"mousedown",(...s)=>this._onMousedown(...s)),this.listenTo(n,"arrowKey",(...s)=>{this._handleSelectionChangeOnArrowKeyPress(...s)},{context:[Ke,"$text"]}),this.listenTo(n,"arrowKey",(...s)=>{this._preventDefaultOnArrowKeyPress(...s)},{context:"$root"}),this.listenTo(n,"arrowKey",cR(this.editor.editing),{context:"$text"}),this.listenTo(n,"delete",(s,o)=>{this._handleDelete(o.direction=="forward")&&(o.preventDefault(),s.stop())},{context:"$root"})}_onMousedown(e,t){const n=this.editor,s=n.editing.view,o=s.document;let r=t.target;if(t.domEvent.detail>=3){this._selectBlockContent(r)&&t.preventDefault();return}if(uR(r)||!Ke(r)&&(r=r.findAncestor(Ke),!r))return;ee.isAndroid&&t.preventDefault(),o.isFocused||s.focus();const a=n.editing.mapper.toModelElement(r);this._setSelectionOverElement(a)}_selectBlockContent(e){const t=this.editor,n=t.model,s=t.editing.mapper,o=n.schema,r=s.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),a=hR(s.toModelElement(r),n.schema);return a?(n.change(c=>{const l=o.isLimit(a)?null:mR(c.createPositionAfter(a),o),x=c.createPositionAt(a,0),d=l?c.createPositionAt(l,0):c.createPositionAt(a,"end");c.setSelection(c.createRange(x,d))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(e,t){const n=t.keyCode,s=this.editor.model,o=s.schema,r=s.document.selection,a=r.getSelectedElement(),c=Xc(n,this.editor.locale.contentLanguageDirection),l=c=="down"||c=="right",x=c=="up"||c=="down";if(a&&o.isObject(a)){const u=l?r.getLastPosition():r.getFirstPosition(),f=o.getNearestSelectionRange(u,l?"forward":"backward");f&&(s.change(m=>{m.setSelection(f)}),t.preventDefault(),e.stop());return}if(!r.isCollapsed&&!t.shiftKey){const u=r.getFirstPosition(),f=r.getLastPosition(),m=u.nodeAfter,b=f.nodeBefore;(m&&o.isObject(m)||b&&o.isObject(b))&&(s.change(p=>{p.setSelection(l?f:u)}),t.preventDefault(),e.stop());return}if(!r.isCollapsed)return;const d=this._getObjectElementNextToSelection(l);if(d&&o.isObject(d)){if(o.isInline(d)&&x)return;this._setSelectionOverElement(d),t.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,t){const n=this.editor.model,s=n.schema,o=n.document.selection.getSelectedElement();o&&s.isObject(o)&&(t.preventDefault(),e.stop())}_handleDelete(e){const n=this.editor.model.document.selection;if(!this.editor.model.canEditAt(n)||!n.isCollapsed)return;const s=this._getObjectElementNextToSelection(e);if(s)return this.editor.model.change(o=>{let r=n.anchor.parent;for(;r.isEmpty;){const a=r;r=a.parent,o.remove(a)}this._setSelectionOverElement(s)}),!0}_setSelectionOverElement(e){this.editor.model.change(t=>{t.setSelection(t.createRangeOn(e))})}_getObjectElementNextToSelection(e){const t=this.editor.model,n=t.schema,s=t.document.selection,o=t.createSelection(s);if(t.modifySelection(o,{direction:e?"forward":"backward"}),o.isEqual(s))return null;const r=e?o.focus.nodeBefore:o.focus.nodeAfter;return r&&n.isObject(r)?r:null}_clearPreviouslySelectedWidgets(e){for(const t of this._previouslySelected)e.removeClass(bu,t);this._previouslySelected.clear()}}function uR(i){let e=i;for(;e;){if(e.is("editableElement")&&!e.is("rootElement"))return!0;if(Ke(e))return!1;e=e.parent}return!1}function fR(i,e){return e?Array.from(i.getAncestors()).includes(e):!1}function hR(i,e){for(const t of i.getAncestors({includeSelf:!0,parentFirst:!0})){if(e.checkChild(t,"$text"))return t;if(e.isLimit(t)&&!e.isObject(t))break}return null}function mR(i,e){const t=new An({startPosition:i});for(const{item:n}of t){if(e.isLimit(n)||!n.is("element"))return null;if(e.checkChild(n,"$text"))return n}return null}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ns extends y{constructor(){super(...arguments),this._toolbarDefinitions=new Map}static get requires(){return[fn]}static get pluginName(){return"WidgetToolbarRepository"}init(){const e=this.editor;if(e.plugins.has("BalloonToolbar")){const t=e.plugins.get("BalloonToolbar");this.listenTo(t,"show",n=>{gR(e.editing.view.document.selection)&&n.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:t,items:n,getRelatedElement:s,balloonClassName:o="ck-toolbar-container"}){if(!n.length){be("widget-toolbar-no-items",{toolbarId:e});return}const r=this.editor,a=r.t,c=new ts(r.locale);if(c.ariaLabel=t||a("Widget toolbar"),this._toolbarDefinitions.has(e))throw new w("widget-toolbar-duplicated",this,{toolbarId:e});const l={view:c,getRelatedElement:s,balloonClassName:o,itemsConfig:n,initialized:!1};r.ui.addToolbar(c,{isContextual:!0,beforeFocus:()=>{const x=s(r.editing.view.document.selection);x&&this._showToolbar(l,x)},afterBlur:()=>{this._hideToolbar(l)}}),this._toolbarDefinitions.set(e,l)}_updateToolbarsVisibility(){let e=0,t=null,n=null;for(const s of this._toolbarDefinitions.values()){const o=s.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!o)this._isToolbarInBalloon(s)&&this._hideToolbar(s);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(s)&&this._hideToolbar(s);else{const r=o.getAncestors().length;r>e&&(e=r,t=o,n=s)}}n&&this._showToolbar(n,t)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,t){this._isToolbarVisible(e)?vu(this.editor,t):this._isToolbarInBalloon(e)||(e.initialized||(e.initialized=!0,e.view.fillFromConfig(e.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:e.view,position:Wg(this.editor,t),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const n of this._toolbarDefinitions.values())if(this._isToolbarVisible(n)){const s=n.getRelatedElement(this.editor.editing.view.document.selection);vu(this.editor,s)}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function vu(i,e){const t=i.plugins.get("ContextualBalloon"),n=Wg(i,e);t.updatePosition(n)}function Wg(i,e){const t=i.editing.view,n=ot.defaultPositions;return{target:t.domConverter.mapViewToDom(e),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,n.viewportStickyNorth]}}function gR(i){const e=i.getSelectedElement();return!!(e&&Ke(e))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bR extends ue(){constructor(e){super(),this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(e,t,n){const s=new te(t);this.activeHandlePosition=vR(e),this._referenceCoordinates=wR(t,yR(this.activeHandlePosition)),this._originalWidth=s.width,this._originalHeight=s.height,this._aspectRatio=s.width/s.height;const o=n.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(o):this._originalWidthPercents=pR(n,s)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}function pR(i,e){const t=i.parentElement;let n=parseFloat(t.ownerDocument.defaultView.getComputedStyle(t).width);const s=5;let o=0,r=t;for(;isNaN(n);){if(r=r.parentElement,++o>s)return 0;n=parseFloat(t.ownerDocument.defaultView.getComputedStyle(r).width)}return e.width/n*100}function wR(i,e){const t=new te(i),n=e.split("-"),s={x:n[1]=="right"?t.right:t.left,y:n[0]=="bottom"?t.bottom:t.top};return s.x+=i.ownerDocument.defaultView.scrollX,s.y+=i.ownerDocument.defaultView.scrollY,s}function _R(i){return`ck-widget__resizer__handle-${i}`}function vR(i){const e=["top-left","top-right","bottom-right","bottom-left"];for(const t of e)if(i.classList.contains(_R(t)))return t}function yR(i){const e=i.split("-"),t={top:"bottom",bottom:"top",left:"right",right:"left"};return`${t[e[0]]}-${t[e[1]]}`}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class CR extends D{constructor(){super();const e=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",e.to("_viewPosition",t=>t?`ck-orientation-${t}`:"")],style:{display:e.if("_isVisible","none",t=>!t)}},children:[{text:e.to("_label")}]})}_bindToState(e,t){this.bind("_isVisible").to(t,"proposedWidth",t,"proposedHeight",(n,s)=>n!==null&&s!==null),this.bind("_label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",(n,s,o)=>e.unit==="px"?`${n}×${s}`:`${o}%`),this.bind("_viewPosition").to(t,"activeHandlePosition",t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",(n,s,o)=>s<50||o<50?"above-center":n)}_dismiss(){this.unbind(),this._isVisible=!1}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yu extends ue(){constructor(e){super(),this._viewResizerWrapper=null,this._options=e,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(t,n)=>t&&n),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",t=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),t.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(t=>{t.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(t=>{t.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const e=this,t=this._options.viewElement;this._options.editor.editing.view.change(s=>{const o=s.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(r){const a=this.toDomElement(r);return e._appendHandles(a),e._appendSizeUI(a),a});s.insert(s.createPositionAt(t,"end"),o),s.addClass("ck-widget_with-resizer",t),this._viewResizerWrapper=o,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(e){this._state=new bR(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const t=this._proposeNewSize(e);this._options.editor.editing.view.change(l=>{const x=this._options.unit||"%",d=(x==="%"?t.widthPercents:t.width)+x;l.setStyle("width",d,this._options.viewElement)});const s=this._getHandleHost(),o=new te(s),r=Math.round(o.width),a=Math.round(o.height),c=new te(s);t.width=Math.round(c.width),t.height=Math.round(c.height),this.redraw(o),this.state.update({...t,handleHostWidth:r,handleHostHeight:a})}commit(){const e=this._options.unit||"%",t=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(t)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const t=this._domResizerWrapper;if(!AR(t))return;const n=t.parentElement,s=this._getHandleHost(),o=this._viewResizerWrapper,r=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")];let a;if(n.isSameNode(s)){const c=e||new te(s);a=[c.width+"px",c.height+"px",void 0,void 0]}else a=[s.offsetWidth+"px",s.offsetHeight+"px",s.offsetLeft+"px",s.offsetTop+"px"];xt(r,a)!=="same"&&this._options.editor.editing.view.change(c=>{c.setStyle({width:a[0],height:a[1],left:a[2],top:a[3]},o)})}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(t=>{t.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){const t=this.state,n=TR(e),s=this._options.isCentered?this._options.isCentered(this):!0,o={x:t._referenceCoordinates.x-(n.x+t.originalWidth),y:n.y-t.originalHeight-t._referenceCoordinates.y};s&&t.activeHandlePosition.endsWith("-right")&&(o.x=n.x-(t._referenceCoordinates.x+t.originalWidth)),s&&(o.x*=2);let r=Math.abs(t.originalWidth+o.x),a=Math.abs(t.originalHeight+o.y);return(r/t.aspectRatio>a?"width":"height")=="width"?a=r/t.aspectRatio:r=a*t.aspectRatio,{width:Math.round(r),height:Math.round(a),widthPercents:Math.min(Math.round(t.originalWidthPercents/t.originalWidth*r*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){const t=["top-left","top-right","bottom-right","bottom-left"];for(const n of t)e.appendChild(new gt({tag:"div",attributes:{class:`ck-widget__resizer__handle ${kR(n)}`}}).render())}_appendSizeUI(e){this._sizeView=new CR,this._sizeView.render(),e.appendChild(this._sizeView.element)}}function kR(i){return`ck-widget__resizer__handle-${i}`}function TR(i){return{x:i.pageX,y:i.pageY}}function AR(i){return i&&i.ownerDocument&&i.ownerDocument.contains(i)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Za extends y{constructor(){super(...arguments),this._resizers=new Map}static get pluginName(){return"WidgetResize"}init(){const e=this.editor.editing,t=U.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),e.view.addObserver(oa),this._observer=new(bt()),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(t,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(t,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=mi(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[s,o]of this._resizers)s.isAttached()||(this._resizers.delete(s),o.destroy())},{priority:"lowest"}),this._observer.listenTo(U.window,"resize",this._redrawSelectedResizerThrottled);const n=this.editor.editing.view.document.selection;n.on("change",()=>{const s=n.getSelectedElement(),o=this.getResizerByViewElement(s)||null;o?this.select(o):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawSelectedResizerThrottled.cancel()}select(e){this.deselect(),this.selectedResizer=e,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(e){const t=new yu(e),n=this.editor.plugins;if(t.attach(),n.has("WidgetToolbarRepository")){const r=n.get("WidgetToolbarRepository");t.on("begin",()=>{r.forceDisabled("resize")},{priority:"lowest"}),t.on("cancel",()=>{r.clearForceDisabled("resize")},{priority:"highest"}),t.on("commit",()=>{r.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,t);const o=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(o)==t&&this.select(t),t}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const t of this._resizers.values())if(t.containsHandle(e))return t}_mouseDownListener(e,t){const n=t.domTarget;yu.isResizeHandle(n)&&(this._activeResizer=this._getResizerByHandle(n)||null,this._activeResizer&&(this._activeResizer.begin(n),e.stop(),t.preventDefault()))}_mouseMoveListener(e,t){this._activeResizer&&this._activeResizer.updateSize(t)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//* istanbul ignore file -- @preserve */const Ya=bo("px");class ER extends D{constructor(){super();const e=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",e.if("isVisible","ck-hidden",t=>!t)],style:{left:e.to("left",t=>Ya(t)),top:e.to("top",t=>Ya(t)),width:e.to("width",t=>Ya(t))}}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Go extends y{constructor(){super(...arguments),this.removeDropMarkerDelayed=Qc(()=>this.removeDropMarker(),40),this._updateDropMarkerThrottled=mi(e=>this._updateDropMarker(e),40),this._reconvertMarkerThrottled=mi(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0),this._dropTargetLineView=new ER,this._domEmitter=new(bt()),this._scrollables=new Map}static get pluginName(){return"DragDropTarget"}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,t,n,s,o,r){this.removeDropMarkerDelayed.cancel();const a=Cu(this.editor,e,t,n,s,o,r);/* istanbul ignore next -- @preserve */if(a){if(r&&r.containsRange(a))return this.removeDropMarker();this._updateDropMarkerThrottled(a)}}getFinalDropRange(e,t,n,s,o,r){const a=Cu(this.editor,e,t,n,s,o,r);return this.removeDropMarker(),a}removeDropMarker(){const e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(t=>{t.removeMarker("drop-target")})}_setupDropMarker(){const e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(t,{writer:n})=>{if(e.model.schema.checkChild(t.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(n);t.markerRange.isCollapsed?this._updateDropTargetLine(t.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){const t=this.editor,n=t.model.markers;t.model.change(s=>{n.has("drop-target")?n.get("drop-target").getRange().isEqual(e)||s.updateMarker("drop-target",{range:e}):s.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(t){const n=this.toDomElement(t);return n.append("⁠",t.createElement("span"),"⁠"),n})}_updateDropTargetLine(e){const t=this.editor.editing,n=e.start.nodeBefore,s=e.start.nodeAfter,o=e.start.parent,r=n?t.mapper.toViewElement(n):null,a=r?t.view.domConverter.mapViewToDom(r):null,c=s?t.mapper.toViewElement(s):null,l=c?t.view.domConverter.mapViewToDom(c):null,x=t.mapper.toViewElement(o),d=t.view.domConverter.mapViewToDom(x),u=this._getScrollableRect(x),{scrollX:f,scrollY:m}=U.window,b=a?new te(a):null,p=l?new te(l):null,C=new te(d).excludeScrollbarsAndBorders(),_=b?b.bottom:C.top,R=p?p.top:C.bottom,P=U.window.getComputedStyle(d),I=_<=R?(_+R)/2:R;if(u.top<I&&I<u.bottom){const V=C.left+parseFloat(P.paddingLeft),A=C.right-parseFloat(P.paddingRight),k=Math.max(V+f,u.left),M=Math.min(A+f,u.right);this._dropTargetLineView.set({isVisible:!0,left:k,top:I+m,width:M-k})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){const t=e.root.rootName;let n;if(this._scrollables.has(t))n=this._scrollables.get(t).domElement;else{const s=this.editor.editing.view.domConverter.mapViewToDom(e);n=IR(s),this._domEmitter.listenTo(n,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const o=new Ae(n,this._reconvertMarkerThrottled);this._scrollables.set(t,{domElement:n,resizeObserver:o})}return new te(n).excludeScrollbarsAndBorders()}}function Cu(i,e,t,n,s,o,r){const a=i.model,c=i.editing.mapper;let x=ku(i,e);for(;x;){if(!o){if(a.schema.checkChild(x,"$text")){if(t){const d=t[0].start,u=c.toModelPosition(d);if(!r||Array.from(r.getItems()).every(m=>a.schema.checkChild(u,m))){if(a.schema.checkChild(u,"$text"))return a.createRange(u);if(d)return Ko(i,ku(i,d.parent),n,s)}}}else if(a.schema.isInline(x))return Ko(i,x,n,s)}if(a.schema.isBlock(x))return Ko(i,x,n,s);if(a.schema.checkChild(x,"$block")){const d=Array.from(x.getChildren()).filter(m=>m.is("element")&&!SR(i,m));let u=0,f=d.length;if(f==0)return a.createRange(a.createPositionAt(x,"end"));for(;u<f-1;){const m=Math.floor((u+f)/2);jg(i,d[m],n,s)=="before"?f=m:u=m}return Ko(i,d[u],n,s)}x=x.parent}return null}function SR(i,e){const t=i.editing.mapper,n=i.editing.view.domConverter,s=t.toViewElement(e),o=n.mapViewToDom(s);return U.window.getComputedStyle(o).float!="none"}function Ko(i,e,t,n){const s=i.model;return s.createRange(s.createPositionAt(e,jg(i,e,t,n)))}function jg(i,e,t,n){const s=i.editing.mapper,o=i.editing.view.domConverter,r=s.toViewElement(e),a=o.mapViewToDom(r),c=new te(a);return i.model.schema.isInline(e)?t<(c.left+c.right)/2?"before":"after":n<(c.top+c.bottom)/2?"before":"after"}function ku(i,e){const t=i.editing.mapper,n=i.editing.view,s=t.toModelElement(e);if(s)return s;const o=n.createPositionBefore(e),r=t.findMappedViewAncestor(o);return t.toModelElement(r)}function IR(i){let e=i;do{e=e.parentElement;const t=U.window.getComputedStyle(e).overflowY;if(t=="auto"||t=="scroll")break}while(e.tagName!="BODY");return e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class PR extends y{constructor(){super(...arguments),this._isBlockDragging=!1,this._domEmitter=new(bt())}static get pluginName(){return"DragDropBlockToolbar"}init(){const e=this.editor;if(this.listenTo(e,"change:isReadOnly",(t,n,s)=>{s?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),ee.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){const n=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(n,"dragstart",(s,o)=>this._handleBlockDragStart(o)),this._domEmitter.listenTo(U.document,"dragover",(s,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(U.document,"drop",(s,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(U.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&n.setAttribute("draggable","true"),this.on("change:isEnabled",(s,o,r)=>{n.setAttribute("draggable",r?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;const t=this.editor.model,n=t.document.selection,s=this.editor.editing.view,o=Array.from(n.getSelectedBlocks()),r=t.createRange(t.createPositionBefore(o[0]),t.createPositionAfter(o[o.length-1]));t.change(a=>a.setSelection(r)),this._isBlockDragging=!0,s.focus(),s.getObserver(ro).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;const t=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),n=e.clientY,s=document.elementFromPoint(t,n),o=this.editor.editing.view;!s||!s.closest(".ck-editor__editable")||o.getObserver(ro).onDomEvent({...e,type:e.type,dataTransfer:e.dataTransfer,target:s,clientX:t,clientY:n,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class RR extends y{constructor(){super(...arguments),this._clearDraggableAttributesDelayed=Qc(()=>this._clearDraggableAttributes(),40),this._blockMode=!1,this._domEmitter=new(bt())}static get pluginName(){return"DragDrop"}static get requires(){return[Zt,Yn,Go,PR]}init(){const e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,t.addObserver(ro),t.addObserver(oa),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(n,s,o)=>{o?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(n,s,o)=>{o||this._finalizeDragging(!1)}),ee.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,t=e.model,n=e.editing.view,s=n.document,o=e.plugins.get(Go);this.listenTo(s,"dragstart",(r,a)=>{if(a.target&&a.target.is("editableElement")){a.preventDefault();return}if(this._prepareDraggedRange(a.target),!this._draggedRange){a.preventDefault();return}this._draggingUid=Vt(),a.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",a.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const c=t.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(a.dataTransfer,c,"dragstart");const{dataTransfer:x,domTarget:d,domEvent:u}=a,{clientX:f}=u;this._updatePreview({dataTransfer:x,domTarget:d,clientX:f}),a.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(s,"dragend",(r,a)=>{this._finalizeDragging(!a.dataTransfer.isCanceled&&a.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(U.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(s,"dragenter",()=>{this.isEnabled&&n.focus()}),this.listenTo(s,"dragleave",()=>{o.removeDropMarkerDelayed()}),this.listenTo(s,"dragging",(r,a)=>{if(!this.isEnabled){a.dataTransfer.dropEffect="none";return}const{clientX:c,clientY:l}=a.domEvent;o.updateDropMarker(a.target,a.targetRanges,c,l,this._blockMode,this._draggedRange),this._draggedRange||(a.dataTransfer.dropEffect="copy"),ee.isGecko||(a.dataTransfer.effectAllowed=="copy"?a.dataTransfer.dropEffect="copy":["all","copyMove"].includes(a.dataTransfer.effectAllowed)&&(a.dataTransfer.dropEffect="move")),r.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,n=e.editing.view.document,s=e.plugins.get(Go);this.listenTo(n,"clipboardInput",(o,r)=>{if(r.method!="drop")return;const{clientX:a,clientY:c}=r.domEvent,l=s.getFinalDropRange(r.target,r.targetRanges,a,c,this._blockMode,this._draggedRange);if(!l){this._finalizeDragging(!1),o.stop();return}if(this._draggedRange&&this._draggingUid!=r.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),Tu(r.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(l,!0)){this._finalizeDragging(!1),o.stop();return}r.targetRanges=[e.editing.mapper.toViewRange(l)]},{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(Zt);e.on("contentInsertion",(t,n)=>{if(!this.isEnabled||n.method!=="drop")return;const s=n.targetRanges.map(o=>this.editor.editing.mapper.toModelRange(o));this.editor.model.change(o=>o.setSelection(s))},{priority:"high"}),e.on("contentInsertion",(t,n)=>{if(!this.isEnabled||n.method!=="drop")return;const s=Tu(n.dataTransfer)=="move",o=!n.resultRange||!n.resultRange.isCollapsed;this._finalizeDragging(o&&s)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,t=e.editing.view,n=t.document;this.listenTo(n,"mousedown",(s,o)=>{if(ee.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let r=Au(o.target);if(ee.isBlink&&!e.isReadOnly&&!r&&!n.selection.isCollapsed){const a=n.selection.getSelectedElement();(!a||!Ke(a))&&(r=n.selection.editableElement)}r&&(t.change(a=>{a.setAttribute("draggable","true",r)}),this._draggableElement=e.editing.mapper.toModelElement(r))}),this.listenTo(n,"mouseup",()=>{ee.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change(t=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&t.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){const t=this.editor,n=t.model;t.plugins.get(Go).removeDropMarker(),this._clearDraggableAttributes(),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(e&&this.isEnabled&&n.change(o=>{const r=n.createSelection(this._draggedRange);n.deleteContent(r,{doNotAutoparagraph:!0});const a=r.getFirstPosition().parent;a.isEmpty&&!n.schema.checkChild(a,"$text")&&n.schema.checkChild(a,"paragraph")&&o.insertElement("paragraph",a,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){const t=this.editor,n=t.model,s=n.document.selection,o=e?Au(e):null;if(o){const l=t.editing.mapper.toModelElement(o);this._draggedRange=Mt.fromRange(n.createRangeOn(l)),this._blockMode=n.schema.isBlock(l),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(s.isCollapsed&&!s.getFirstPosition().parent.isEmpty)return;const r=Array.from(s.getSelectedBlocks()),a=s.getFirstRange();if(r.length==0){this._draggedRange=Mt.fromRange(a);return}const c=qg(n,r);if(r.length>1)this._draggedRange=Mt.fromRange(c),this._blockMode=!0;else if(r.length==1){const l=a.start.isTouching(c.start)&&a.end.isTouching(c.end);this._draggedRange=Mt.fromRange(l?c:a),this._blockMode=l}n.change(l=>l.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:t,clientX:n}){const s=this.editor.editing.view,o=s.document.selection.editableElement,r=s.domConverter.mapViewToDom(o),a=U.window.getComputedStyle(r);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=Hn(U.document,"div",{style:"position: fixed; left: -999999px;"}),U.document.body.appendChild(this._previewContainer));const c=new te(r);if(r.contains(t))return;const l=parseFloat(a.paddingLeft),x=Hn(U.document,"div");x.className="ck ck-content",x.style.width=a.width,x.style.paddingLeft=`${c.left-n+l}px`,ee.isiOS&&(x.style.backgroundColor="white"),x.innerHTML=e.getData("text/html"),e.setDragImage(x,0,0),this._previewContainer.appendChild(x)}}function Tu(i){return ee.isGecko?i.dropEffect:["all","copyMove"].includes(i.effectAllowed)?"move":"copy"}function Au(i){if(i.is("editableElement"))return null;if(i.hasClass("ck-widget__selection-handle"))return i.findAncestor(Ke);if(Ke(i))return i;const e=i.findAncestor(t=>Ke(t)||t.is("editableElement"));return Ke(e)?e:null}function qg(i,e){const t=e[0],n=e[e.length-1],s=t.getCommonAncestor(n),o=i.createPositionBefore(t),r=i.createPositionAfter(n);if(s&&s.is("element")&&!i.schema.isLimit(s)){const a=i.createRangeOn(s),c=o.isTouching(a.start),l=r.isTouching(a.end);if(c&&l)return qg(i,[s])}return i.createRange(o,r)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class VR extends y{static get pluginName(){return"PastePlainText"}static get requires(){return[Zt]}init(){const e=this.editor,t=e.model,n=e.editing.view,s=n.document,o=t.document.selection;let r=!1;n.addObserver(ro),this.listenTo(s,"keydown",(a,c)=>{r=c.shiftKey}),e.plugins.get(Zt).on("contentInsertion",(a,c)=>{!r&&!BR(c.content,t.schema)||t.change(l=>{const x=Array.from(o.getAttributes()).filter(([u])=>t.schema.getAttributeProperties(u).isFormatting);o.isCollapsed||t.deleteContent(o,{doNotAutoparagraph:!0}),x.push(...o.getAttributes());const d=l.createRangeIn(c.content);for(const u of d.getItems())u.is("$textProxy")&&l.setAttributes(x,u)})})}}function BR(i,e){if(i.childCount>1)return!1;const t=i.getChild(0);return e.isObject(t)?!1:Array.from(t.getAttributeKeys()).length==0}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Gg extends y{static get pluginName(){return"Clipboard"}static get requires(){return[Zt,RR,VR]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OR extends q{constructor(e){super(e),this.affectsData=!1}execute(){const e=this.editor.model,t=e.document.selection;let n=e.schema.getLimitElement(t);if(t.containsEntireContent(n)||!Eu(e.schema,n))do if(n=n.parent,!n)return;while(!Eu(e.schema,n));e.change(s=>{s.setSelection(n,"in")})}}function Eu(i,e){return i.isLimit(e)&&(i.checkChild(e,"$text")||i.checkChild(e,"paragraph"))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const LR=po("Ctrl+A");class MR extends y{static get pluginName(){return"SelectAllEditing"}init(){const e=this.editor,n=e.editing.view.document;e.commands.add("selectAll",new OR(e)),this.listenTo(n,"keydown",(s,o)=>{Yi(o)===LR&&(e.execute("selectAll"),o.preventDefault())})}}const FR='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NR extends y{static get pluginName(){return"SelectAllUI"}init(){const e=this.editor;e.ui.componentFactory.add("selectAll",t=>{const n=e.commands.get("selectAll"),s=new G(t),o=t.t;return s.set({label:o("Select all"),icon:FR,keystroke:"Ctrl+A",tooltip:!0}),s.bind("isEnabled").to(n,"isEnabled"),this.listenTo(s,"execute",()=>{e.execute("selectAll"),e.editing.view.focus()}),s})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kg extends y{static get requires(){return[MR,NR]}static get pluginName(){return"SelectAll"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Jg extends q{constructor(e){super(e),this._stack=[],this._createdBatches=new WeakSet,this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(t,n)=>{n[1]={...n[1]};const s=n[1];s.batchType||(s.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(t,n)=>{n[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){const t=this.editor.model.document.selection,n={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:n}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,n){const s=this.editor.model,o=s.document,r=[],a=e.map(l=>l.getTransformedByOperations(n)),c=a.flat();for(const l of a){const x=l.filter(d=>d.root!=o.graveyard).filter(d=>!zR(d,c));x.length&&(DR(x),r.push(x[0]))}r.length&&s.change(l=>{l.setSelection(r,{backward:t})})}_undo(e,t){const n=this.editor.model,s=n.document;this._createdBatches.add(t);const o=e.operations.slice().filter(r=>r.isDocumentOperation);o.reverse();for(const r of o){const a=r.baseVersion+1,c=Array.from(s.history.getOperations(a)),x=eE([r.getReversed()],c,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(let d of x){const u=d.affectedSelectable;u&&!n.canEditAt(u)&&(d=new Je(d.baseVersion)),t.addOperation(d),n.applyOperation(d),s.history.setOperationAsUndone(r,d)}}}}function DR(i){i.sort((e,t)=>e.start.isBefore(t.start)?-1:1);for(let e=1;e<i.length;e++){const n=i[e-1].getJoined(i[e],!0);n&&(e--,i.splice(e,2,n))}}function zR(i,e){return e.some(t=>t!==i&&t.containsRange(i,!0))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class HR extends Jg{execute(e=null){const t=e?this._stack.findIndex(o=>o.batch==e):this._stack.length-1,n=this._stack.splice(t,1)[0],s=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(s,()=>{this._undo(n.batch,s);const o=this.editor.model.document.history.getOperations(n.batch.baseVersion);this._restoreSelection(n.selection.ranges,n.selection.isBackward,o)}),this.fire("revert",n.batch,s),this.refresh()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $R extends Jg{execute(){const e=this._stack.pop(),t=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(t,()=>{const s=e.batch.operations[e.batch.operations.length-1].baseVersion+1,o=this.editor.model.document.history.getOperations(s);this._restoreSelection(e.selection.ranges,e.selection.isBackward,o),this._undo(e.batch,t)}),this.refresh()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class UR extends y{constructor(){super(...arguments),this._batchRegistry=new WeakSet}static get pluginName(){return"UndoEditing"}init(){const e=this.editor;this._undoCommand=new HR(e),this._redoCommand=new $R(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(t,n)=>{const s=n[0];if(!s.isDocumentOperation)return;const o=s.batch,r=this._redoCommand.createdBatches.has(o),a=this._undoCommand.createdBatches.has(o);this._batchRegistry.has(o)||(this._batchRegistry.add(o),o.isUndoable&&(r?this._undoCommand.addBatch(o):a||(this._undoCommand.addBatch(o),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(t,n,s)=>{this._redoCommand.addBatch(s)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo")}}const Su='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',Iu='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class WR extends y{static get pluginName(){return"UndoUI"}init(){const e=this.editor,t=e.locale,n=e.t,s=t.uiLanguageDirection=="ltr"?Su:Iu,o=t.uiLanguageDirection=="ltr"?Iu:Su;this._addButton("undo",n("Undo"),"CTRL+Z",s),this._addButton("redo",n("Redo"),"CTRL+Y",o)}_addButton(e,t,n,s){const o=this.editor;o.ui.componentFactory.add(e,r=>{const a=o.commands.get(e),c=new G(r);return c.set({label:t,icon:s,keystroke:n,tooltip:!0}),c.bind("isEnabled").to(a,"isEnabled"),this.listenTo(c,"execute",()=>{o.execute(e),o.editing.view.focus()}),c})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zg extends y{static get requires(){return[UR,WR]}static get pluginName(){return"Undo"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jR extends y{static get requires(){return[Gg,ko,Kg,HP,Fg,Zg]}static get pluginName(){return"Essentials"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const wl=["left","right","center","justify"];function Yg(i){return wl.includes(i)}function Xg(i,e){return e.contentLanguageDirection=="rtl"?i==="right":i==="left"}function Qg(i){const e=i.map(n=>{let s;return typeof n=="string"?s={name:n}:s=n,s}).filter(n=>{const s=wl.includes(n.name);return s||be("alignment-config-name-not-recognized",{option:n}),s}),t=e.filter(n=>!!n.className).length;if(t&&t<e.length)throw new w("alignment-config-classnames-are-missing",{configuredOptions:i});return e.forEach((n,s,o)=>{const r=o.slice(s+1);if(r.some(c=>c.name==n.name))throw new w("alignment-config-name-already-defined",{option:n,configuredOptions:i});if(n.className&&r.some(l=>l.className==n.className))throw new w("alignment-config-classname-already-defined",{option:n,configuredOptions:i})}),e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const _l="alignment";class qR extends q{refresh(){const t=this.editor.locale,n=Be(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!n&&this._canBeAligned(n),this.isEnabled&&n.hasAttribute("alignment")?this.value=n.getAttribute("alignment"):this.value=t.contentLanguageDirection==="rtl"?"right":"left"}execute(e={}){const t=this.editor,n=t.locale,s=t.model,o=s.document,r=e.value;s.change(a=>{const c=Array.from(o.selection.getSelectedBlocks()).filter(d=>this._canBeAligned(d)),l=c[0].getAttribute("alignment");Xg(r,n)||l===r||!r?GR(c,a):KR(c,a,r)})}_canBeAligned(e){return this.editor.model.schema.checkAttribute(e,_l)}}function GR(i,e){for(const t of i)e.removeAttribute(_l,t)}function KR(i,e,t){for(const n of i)e.setAttribute(_l,t,n)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JR extends y{static get pluginName(){return"AlignmentEditing"}constructor(e){super(e),e.config.define("alignment",{options:wl.map(t=>({name:t}))})}init(){const e=this.editor,t=e.locale,n=e.model.schema,o=Qg(e.config.get("alignment.options")).filter(l=>Yg(l.name)&&!Xg(l.name,t)),r=o.some(l=>!!l.className);n.extend("$block",{allowAttributes:"alignment"}),e.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),r?e.conversion.attributeToAttribute(QR(o)):e.conversion.for("downcast").attributeToAttribute(ZR(o));const a=YR(o);for(const l of a)e.conversion.for("upcast").attributeToAttribute(l);const c=XR(o);for(const l of c)e.conversion.for("upcast").attributeToAttribute(l);e.commands.add("alignment",new qR(e))}}function ZR(i){const e={};for(const{name:n}of i)e[n]={key:"style",value:{"text-align":n}};return{model:{key:"alignment",values:i.map(n=>n.name)},view:e}}function YR(i){const e=[];for(const{name:t}of i)e.push({view:{key:"style",value:{"text-align":t}},model:{key:"alignment",value:t}});return e}function XR(i){const e=[];for(const{name:t}of i)e.push({view:{key:"align",value:t},model:{key:"alignment",value:t}});return e}function QR(i){const e={};for(const n of i)e[n.name]={key:"class",value:n.className};return{model:{key:"alignment",values:i.map(n=>n.name)},view:e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Jo=new Map([["left",K.alignLeft],["right",K.alignRight],["center",K.alignCenter],["justify",K.alignJustify]]);class eV extends y{get localizedOptionTitles(){const e=this.editor.t;return{left:e("Align left"),right:e("Align right"),center:e("Align center"),justify:e("Justify")}}static get pluginName(){return"AlignmentUI"}init(){const e=this.editor,t=e.ui.componentFactory,n=e.t,s=Qg(e.config.get("alignment.options"));s.map(o=>o.name).filter(Yg).forEach(o=>this._addButton(o)),t.add("alignment",o=>{const r=Ne(o);la(r,()=>s.map(l=>t.create(`alignment:${l.name}`)),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:n("Text alignment toolbar")}),r.buttonView.set({label:n("Text alignment"),tooltip:!0}),r.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const a=o.contentLanguageDirection==="rtl"?Jo.get("right"):Jo.get("left"),c=e.commands.get("alignment");return r.buttonView.bind("icon").to(c,"value",l=>Jo.get(l)||a),r.bind("isEnabled").to(c,"isEnabled"),this.listenTo(r,"execute",()=>{e.editing.view.focus()}),r})}_addButton(e){const t=this.editor;t.ui.componentFactory.add(`alignment:${e}`,n=>{const s=t.commands.get("alignment"),o=new G(n);return o.set({label:this.localizedOptionTitles[e],icon:Jo.get(e),tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(s),o.bind("isOn").to(s,"value",r=>r===e),this.listenTo(o,"execute",()=>{t.execute("alignment",{value:e}),t.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tV extends y{static get requires(){return[JR,eV]}static get pluginName(){return"Alignment"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fs extends q{constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,s=t.document.selection,o=e.forceValue===void 0?!this.value:e.forceValue;t.change(r=>{if(s.isCollapsed)o?r.setSelectionAttribute(this.attributeKey,!0):r.removeSelectionAttribute(this.attributeKey);else{const a=t.schema.getValidRanges(s.getRanges(),this.attributeKey);for(const c of a)o?r.setAttribute(this.attributeKey,o,c):r.removeAttribute(this.attributeKey,c)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,t=e.schema,n=e.document.selection;if(n.isCollapsed)return n.hasAttribute(this.attributeKey);for(const s of n.getRanges())for(const o of s.getItems())if(t.checkAttribute(o,this.attributeKey))return o.hasAttribute(this.attributeKey);return!1}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Oi="bold";class nV extends y{static get pluginName(){return"BoldEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Oi}),e.model.schema.setAttributeProperties(Oi,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Oi,view:"strong",upcastAlso:["b",t=>{const n=t.getStyle("font-weight");return n&&(n=="bold"||Number(n)>=600)?{name:!0,styles:["font-weight"]}:null}]}),e.commands.add(Oi,new fs(e,Oi)),e.keystrokes.set("CTRL+B",Oi)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Xa="bold";class iV extends y{static get pluginName(){return"BoldUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(Xa,n=>{const s=e.commands.get(Xa),o=new G(n);return o.set({label:t("Bold"),icon:K.bold,keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute(Xa),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sV extends y{static get requires(){return[nV,iV]}static get pluginName(){return"Bold"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Li="italic";class oV extends y{static get pluginName(){return"ItalicEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Li}),e.model.schema.setAttributeProperties(Li,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Li,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(Li,new fs(e,Li)),e.keystrokes.set("CTRL+I",Li)}}const rV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Qa="italic";class aV extends y{static get pluginName(){return"ItalicUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(Qa,n=>{const s=e.commands.get(Qa),o=new G(n);return o.set({label:t("Italic"),icon:rV,keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute(Qa),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cV extends y{static get requires(){return[oV,aV]}static get pluginName(){return"Italic"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const _s="strikethrough";class lV extends y{static get pluginName(){return"StrikethroughEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:_s}),e.model.schema.setAttributeProperties(_s,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:_s,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),e.commands.add(_s,new fs(e,_s)),e.keystrokes.set("CTRL+SHIFT+X","strikethrough")}}const xV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const e0="strikethrough";class dV extends y{static get pluginName(){return"StrikethroughUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(e0,n=>{const s=e.commands.get(e0),o=new G(n);return o.set({label:t("Strikethrough"),icon:xV,keystroke:"CTRL+SHIFT+X",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute(e0),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uV extends y{static get requires(){return[lV,dV]}static get pluginName(){return"Strikethrough"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const vs="subscript";class fV extends y{static get pluginName(){return"SubscriptEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:vs}),e.model.schema.setAttributeProperties(vs,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:vs,view:"sub",upcastAlso:[{styles:{"vertical-align":"sub"}}]}),e.commands.add(vs,new fs(e,vs))}}const hV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.03 10.349 3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82zm8.147 7.829h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const t0="subscript";class mV extends y{static get pluginName(){return"SubscriptUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(t0,n=>{const s=e.commands.get(t0),o=new G(n);return o.set({label:t("Subscript"),icon:hV,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute(t0),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gV extends y{static get requires(){return[fV,mV]}static get pluginName(){return"Subscript"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ys="superscript";class bV extends y{static get pluginName(){return"SuperscriptEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:ys}),e.model.schema.setAttributeProperties(ys,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:ys,view:"sup",upcastAlso:[{styles:{"vertical-align":"super"}}]}),e.commands.add(ys,new fs(e,ys))}}const pV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.677 8.678h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309zM7.03 10.349l3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const n0="superscript";class wV extends y{static get pluginName(){return"SuperscriptUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(n0,n=>{const s=e.commands.get(n0),o=new G(n);return o.set({label:t("Superscript"),icon:pV,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute(n0),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _V extends y{static get requires(){return[bV,wV]}static get pluginName(){return"Superscript"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Cs="underline";class vV extends y{static get pluginName(){return"UnderlineEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Cs}),e.model.schema.setAttributeProperties(Cs,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Cs,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add(Cs,new fs(e,Cs)),e.keystrokes.set("CTRL+U","underline")}}const yV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const i0="underline";class CV extends y{static get pluginName(){return"UnderlineUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(i0,n=>{const s=e.commands.get(i0),o=new G(n);return o.set({label:t("Underline"),icon:yV,keystroke:"CTRL+U",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute(i0),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kV extends y{static get requires(){return[vV,CV]}static get pluginName(){return"Underline"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TV extends q{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,n=t.schema,s=t.document.selection,o=Array.from(s.getSelectedBlocks()),r=e.forceValue===void 0?!this.value:e.forceValue;t.change(a=>{if(!r)this._removeQuote(a,o.filter(Zo));else{const c=o.filter(l=>Zo(l)||Ru(n,l));this._applyQuote(a,c)}})}_getValue(){const e=this.editor.model.document.selection,t=Be(e.getSelectedBlocks());return!!(t&&Zo(t))}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,n=Be(e.getSelectedBlocks());return n?Ru(t,n):!1}_removeQuote(e,t){Pu(e,t).reverse().forEach(n=>{if(n.start.isAtStart&&n.end.isAtEnd){e.unwrap(n.start.parent);return}if(n.start.isAtStart){const o=e.createPositionBefore(n.start.parent);e.move(n,o);return}n.end.isAtEnd||e.split(n.end);const s=e.createPositionAfter(n.end.parent);e.move(n,s)})}_applyQuote(e,t){const n=[];Pu(e,t).reverse().forEach(s=>{let o=Zo(s.start);o||(o=e.createElement("blockQuote"),e.wrap(s,o)),n.push(o)}),n.reverse().reduce((s,o)=>s.nextSibling==o?(e.merge(e.createPositionAfter(s)),s):o)}}function Zo(i){return i.parent.name=="blockQuote"?i.parent:null}function Pu(i,e){let t,n=0;const s=[];for(;n<e.length;){const o=e[n],r=e[n+1];t||(t=i.createPositionBefore(o)),(!r||o.nextSibling!=r)&&(s.push(i.createRange(t,i.createPositionAfter(o))),t=null),n++}return s}function Ru(i,e){const t=i.checkChild(e.parent,"blockQuote"),n=i.checkChild(["$root","blockQuote"],e);return t&&n}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AV extends y{static get pluginName(){return"BlockQuoteEditing"}static get requires(){return[ko,qn]}init(){const e=this.editor,t=e.model.schema;e.commands.add("blockQuote",new TV(e)),t.register("blockQuote",{inheritAllFrom:"$container"}),e.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),e.model.document.registerPostFixer(r=>{const a=e.model.document.differ.getChanges();for(const c of a)if(c.type=="insert"){const l=c.position.nodeAfter;if(!l)continue;if(l.is("element","blockQuote")&&l.isEmpty)return r.remove(l),!0;if(l.is("element","blockQuote")&&!t.checkChild(c.position,l))return r.unwrap(l),!0;if(l.is("element")){const x=r.createRangeIn(l);for(const d of x.getItems())if(d.is("element","blockQuote")&&!t.checkChild(r.createPositionBefore(d),d))return r.unwrap(d),!0}}else if(c.type=="remove"){const l=c.position.parent;if(l.is("element","blockQuote")&&l.isEmpty)return r.remove(l),!0}return!1});const n=this.editor.editing.view.document,s=e.model.document.selection,o=e.commands.get("blockQuote");this.listenTo(n,"enter",(r,a)=>{if(!s.isCollapsed||!o.value)return;s.getLastPosition().parent.isEmpty&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),a.preventDefault(),r.stop())},{context:"blockquote"}),this.listenTo(n,"delete",(r,a)=>{if(a.direction!="backward"||!s.isCollapsed||!o.value)return;const c=s.getLastPosition().parent;c.isEmpty&&!c.previousSibling&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),a.preventDefault(),r.stop())},{context:"blockquote"})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class EV extends y{static get pluginName(){return"BlockQuoteUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add("blockQuote",n=>{const s=e.commands.get("blockQuote"),o=new G(n);return o.set({label:t("Block quote"),icon:K.quote,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute("blockQuote"),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class SV extends y{static get requires(){return[AV,EV]}static get pluginName(){return"BlockQuote"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class IV extends D{constructor(e){super(e);const t=e.t;this.set("matchCount",0),this.set("highlightOffset",0),this.set("isDirty",!1),this.set("_areCommandsEnabled",{}),this.set("_resultsCounterText",""),this.set("_matchCase",!1),this.set("_wholeWordsOnly",!1),this.bind("_searchResultsFound").to(this,"matchCount",this,"isDirty",(n,s)=>n>0&&!s),this._findInputView=this._createInputField(t("Find in text…")),this._replaceInputView=this._createInputField(t("Replace with…")),this._findButtonView=this._createButton({label:t("Find"),class:"ck-button-find ck-button-action",withText:!0}),this._findPrevButtonView=this._createButton({label:t("Previous result"),class:"ck-button-prev",icon:X0,keystroke:"Shift+F3",tooltip:!0}),this._findNextButtonView=this._createButton({label:t("Next result"),class:"ck-button-next",icon:X0,keystroke:"F3",tooltip:!0}),this._optionsDropdown=this._createOptionsDropdown(),this._replaceButtonView=this._createButton({label:t("Replace"),class:"ck-button-replace",withText:!0}),this._replaceAllButtonView=this._createButton({label:t("Replace all"),class:"ck-button-replaceall",withText:!0}),this._findFieldsetView=this._createFindFieldset(),this._replaceFieldsetView=this._createReplaceFieldset(),this._focusTracker=new Se,this._keystrokes=new Le,this._focusables=new dt,this._focusCycler=new ut({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this._keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-find-and-replace-form"],tabindex:"-1"},children:[new da(e,{label:t("Find and replace")}),this._findFieldsetView,this._replaceFieldsetView]})}render(){super.render(),as({view:this}),this._initFocusCycling(),this._initKeystrokeHandling()}destroy(){super.destroy(),this._focusTracker.destroy(),this._keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}reset(){this._findInputView.errorText=null,this.isDirty=!0}get _textToFind(){return this._findInputView.fieldView.element.value}get _textToReplace(){return this._replaceInputView.fieldView.element.value}_createFindFieldset(){const e=this.locale,t=new D(e);return this._findInputView.fieldView.on("input",()=>{this.isDirty=!0}),this._findButtonView.on("execute",this._onFindButtonExecute.bind(this)),this._findPrevButtonView.delegate("execute").to(this,"findPrevious"),this._findNextButtonView.delegate("execute").to(this,"findNext"),this._findPrevButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findPrevious:n})=>n),this._findNextButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findNext:n})=>n),this._injectFindResultsCounter(),t.setTemplate({tag:"fieldset",attributes:{class:["ck","ck-find-and-replace-form__find"]},children:[this._findInputView,this._findButtonView,this._findPrevButtonView,this._findNextButtonView]}),t}_onFindButtonExecute(){if(!this._textToFind){const e=this.t;this._findInputView.errorText=e("Text to find must not be empty.");return}this.isDirty=!1,this.fire("findNext",{searchText:this._textToFind,matchCase:this._matchCase,wholeWords:this._wholeWordsOnly})}_injectFindResultsCounter(){const e=this.locale,t=e.t,n=this.bindTemplate,s=new D(this.locale);this.bind("_resultsCounterText").to(this,"highlightOffset",this,"matchCount",(r,a)=>t("%0 of %1",[r,a])),s.setTemplate({tag:"span",attributes:{class:["ck","ck-results-counter",n.if("isDirty","ck-hidden")]},children:[{text:n.to("_resultsCounterText")}]});const o=()=>{const r=this._findInputView.fieldView.element;if(!r||!jn(r))return;const a=new te(s.element).width,c=e.uiLanguageDirection==="ltr"?"paddingRight":"paddingLeft";a?r.style[c]=`calc( 2 * var(--ck-spacing-standard) + ${a}px )`:r.style[c]=""};this.on("change:_resultsCounterText",o,{priority:"low"}),this.on("change:isDirty",o,{priority:"low"}),this._findInputView.template.children[0].children.push(s)}_createReplaceFieldset(){const t=this.locale.t,n=new D(this.locale);return this._replaceButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:s},o)=>s&&o),this._replaceAllButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replaceAll:s},o)=>s&&o),this._replaceInputView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:s},o)=>s&&o),this._replaceInputView.bind("infoText").to(this._replaceInputView,"isEnabled",this._replaceInputView,"isFocused",(s,o)=>s||!o?"":t("Tip: Find some text first in order to replace it.")),this._replaceButtonView.on("execute",()=>{this.fire("replace",{searchText:this._textToFind,replaceText:this._textToReplace})}),this._replaceAllButtonView.on("execute",()=>{this.fire("replaceAll",{searchText:this._textToFind,replaceText:this._textToReplace}),this.focus()}),n.setTemplate({tag:"fieldset",attributes:{class:["ck","ck-find-and-replace-form__replace"]},children:[this._replaceInputView,this._optionsDropdown,this._replaceButtonView,this._replaceAllButtonView]}),n}_createOptionsDropdown(){const t=this.locale.t,n=Ne(this.locale);n.class="ck-options-dropdown",n.buttonView.set({withText:!1,label:t("Show options"),icon:K.cog,tooltip:!0});const s=new Rn({withText:!0,label:t("Match case"),_isMatchCaseSwitch:!0}),o=new Rn({withText:!0,label:t("Whole words only")});return s.bind("isOn").to(this,"_matchCase"),o.bind("isOn").to(this,"_wholeWordsOnly"),n.on("execute",r=>{r.source._isMatchCaseSwitch?this._matchCase=!this._matchCase:this._wholeWordsOnly=!this._wholeWordsOnly,this.isDirty=!0}),Mn(n,new De([{type:"switchbutton",model:s},{type:"switchbutton",model:o}])),n}_initFocusCycling(){[this._findInputView,this._findButtonView,this._findPrevButtonView,this._findNextButtonView,this._replaceInputView,this._optionsDropdown,this._replaceButtonView,this._replaceAllButtonView].forEach(t=>{this._focusables.add(t),this._focusTracker.add(t.element)})}_initKeystrokeHandling(){const e=n=>n.stopPropagation(),t=n=>{n.stopPropagation(),n.preventDefault()};this._keystrokes.listenTo(this.element),this._keystrokes.set("f3",n=>{t(n),this._findNextButtonView.fire("execute")}),this._keystrokes.set("shift+f3",n=>{t(n),this._findPrevButtonView.fire("execute")}),this._keystrokes.set("enter",n=>{const s=n.target;s===this._findInputView.fieldView.element?(this._areCommandsEnabled.findNext?this._findNextButtonView.fire("execute"):this._findButtonView.fire("execute"),t(n)):s===this._replaceInputView.fieldView.element&&!this.isDirty&&(this._replaceButtonView.fire("execute"),t(n))}),this._keystrokes.set("shift+enter",n=>{n.target===this._findInputView.fieldView.element&&(this._areCommandsEnabled.findPrevious?this._findPrevButtonView.fire("execute"):this._findButtonView.fire("execute"),t(n))}),this._keystrokes.set("arrowright",e),this._keystrokes.set("arrowleft",e),this._keystrokes.set("arrowup",e),this._keystrokes.set("arrowdown",e)}_createButton(e){const t=new G(this.locale);return t.set(e),t}_createInputField(e){const t=new Ge(this.locale,Rt);return t.label=e,t}}const PV='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.87 13.786 1.532-1.286 3.857 4.596a1 1 0 1 1-1.532 1.286l-3.857-4.596z"/><path d="M16.004 8.5a6.5 6.5 0 0 1-9.216 5.905c-1.154-.53-.863-1.415-.663-1.615.194-.194.564-.592 1.635-.141a4.5 4.5 0 0 0 5.89-5.904l-.104-.227 1.332-1.331c.045-.046.196-.041.224.007a6.47 6.47 0 0 1 .902 3.306zm-3.4-5.715c.562.305.742 1.106.354 1.494-.388.388-.995.414-1.476.178a4.5 4.5 0 0 0-6.086 5.882l.114.236-1.348 1.349c-.038.037-.17.022-.198-.023a6.5 6.5 0 0 1 5.54-9.9 6.469 6.469 0 0 1 3.1.784z"/><path d="M4.001 11.93.948 8.877a.2.2 0 0 1 .141-.341h6.106a.2.2 0 0 1 .141.341L4.283 11.93a.2.2 0 0 1-.282 0zm11.083-6.789 3.053 3.053a.2.2 0 0 1-.14.342H11.89a.2.2 0 0 1-.14-.342l3.052-3.053a.2.2 0 0 1 .282 0z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class RV extends y{static get pluginName(){return"FindAndReplaceUI"}constructor(e){super(e),this.formView=null}init(){const e=this.editor;e.ui.componentFactory.add("findAndReplace",t=>{const n=Ne(t),s=e.commands.get("find");return n.bind("isEnabled").to(s),n.once("change:isOpen",()=>{this.formView=new(Jr(IV))(e.locale),n.panelView.children.add(this.formView),this._setupFormView(this.formView)}),n.on("change:isOpen",(o,r,a)=>{a?(this.formView.disableCssTransitions(),this.formView.reset(),this.formView._findInputView.fieldView.select(),this.formView.enableCssTransitions()):this.fire("searchReseted")},{priority:"low"}),this._setupDropdownButton(n),n})}_setupDropdownButton(e){const t=this.editor,n=t.locale.t;e.buttonView.set({icon:PV,label:n("Find and replace"),keystroke:"CTRL+F",tooltip:!0}),t.keystrokes.set("Ctrl+F",(s,o)=>{e.isEnabled&&(e.isOpen=!0,o())})}_setupFormView(e){const n=this.editor.commands,o=this.editor.plugins.get("FindAndReplaceEditing").state,r={before:-1,same:0,after:1,different:1};e.bind("highlightOffset").to(o,"highlightedResult",d=>d?Array.from(o.results).sort((u,f)=>r[u.marker.getStart().compareWith(f.marker.getStart())]).indexOf(d)+1:0),e.listenTo(o.results,"change",()=>{e.matchCount=o.results.length});const a=n.get("findNext"),c=n.get("findPrevious"),l=n.get("replace"),x=n.get("replaceAll");e.bind("_areCommandsEnabled").to(a,"isEnabled",c,"isEnabled",l,"isEnabled",x,"isEnabled",(d,u,f,m)=>({findNext:d,findPrevious:u,replace:f,replaceAll:m})),e.delegate("findNext","findPrevious","replace","replaceAll").to(this),e.on("change:isDirty",(d,u,f)=>{f&&this.fire("searchReseted")})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class VV extends q{constructor(e,t){super(e),this.isEnabled=!0,this.affectsData=!1,this._state=t}execute(e,{matchCase:t,wholeWords:n}={}){const{editor:s}=this,{model:o}=s,r=s.plugins.get("FindAndReplaceUtils");let a;typeof e=="string"?(a=r.findByTextCallback(e,{matchCase:t,wholeWords:n}),this._state.searchText=e):a=e;const c=o.document.getRootNames().reduce((l,x)=>r.updateFindResultFromRange(o.createRangeIn(o.document.getRoot(x)),o,a,l),null);return this._state.clear(o),this._state.results.addMany(c),this._state.highlightedResult=c.get(0),typeof e=="string"&&(this._state.searchText=e),this._state.matchCase=!!t,this._state.matchWholeWords=!!n,{results:c,findCallback:a}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class e1 extends q{constructor(e,t){super(e),this.isEnabled=!0,this._state=t,this._isEnabledBasedOnSelection=!1}_replace(e,t){const{model:n}=this.editor,s=t.marker.getRange();n.canEditAt(s)&&n.change(o=>{if(s.root.rootName==="$graveyard"){this._state.results.remove(t);return}let r={};for(const a of s.getItems())if(a.is("$text")||a.is("$textProxy")){r=a.getAttributes();break}n.insertContent(o.createText(e,r),s),this._state.results.has(t)&&this._state.results.remove(t)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class BV extends e1{execute(e,t){this._replace(e,t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OV extends e1{execute(e,t){const{editor:n}=this,{model:s}=n,o=n.plugins.get("FindAndReplaceUtils"),r=t instanceof De?t:s.document.getRootNames().reduce((a,c)=>o.updateFindResultFromRange(s.createRangeIn(s.document.getRoot(c)),s,o.findByTextCallback(t,this._state),a),null);r.length&&s.change(()=>{[...r].forEach(a=>{this._replace(e,a)})})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class t1 extends q{constructor(e,t){super(e),this.affectsData=!1,this._state=t,this.isEnabled=!1,this.listenTo(this._state.results,"change",()=>{this.isEnabled=this._state.results.length>1})}refresh(){this.isEnabled=this._state.results.length>1}execute(){const e=this._state.results,t=e.getIndex(this._state.highlightedResult),n=t+1>=e.length?0:t+1;this._state.highlightedResult=this._state.results.get(n)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class LV extends t1{execute(){const t=this._state.results.getIndex(this._state.highlightedResult),n=t-1<0?this._state.results.length-1:t-1;this._state.highlightedResult=this._state.results.get(n)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class MV extends ue(){constructor(e){super(),this.set("results",new De),this.set("highlightedResult",null),this.set("searchText",""),this.set("replaceText",""),this.set("matchCase",!1),this.set("matchWholeWords",!1),this.results.on("change",(t,{removed:n,index:s})=>{if(Array.from(n).length){let o=!1;if(e.change(r=>{for(const a of n)this.highlightedResult===a&&(o=!0),e.markers.has(a.marker.name)&&r.removeMarker(a.marker)}),o){const r=s>=this.results.length?0:s;this.highlightedResult=this.results.get(r)}}})}clear(e){this.searchText="",e.change(t=>{if(this.highlightedResult){const n=this.highlightedResult.marker.name.split(":")[1],s=e.markers.get(`findResultHighlighted:${n}`);s&&t.removeMarker(s)}[...this.results].forEach(({marker:n})=>{t.removeMarker(n)})}),this.results.clear()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class FV extends y{static get pluginName(){return"FindAndReplaceUtils"}updateFindResultFromRange(e,t,n,s){const o=s||new De;return t.change(r=>{[...e].forEach(({type:a,item:c})=>{if(a==="elementStart"&&t.schema.checkChild(c,"$text")){const l=n({item:c,text:this.rangeToText(t.createRangeIn(c))});if(!l)return;l.forEach(x=>{const d=`findResult:${Vt()}`,u=r.addMarker(d,{usingOperation:!1,affectsData:!1,range:r.createRange(r.createPositionAt(c,x.start),r.createPositionAt(c,x.end))}),f=NV(o,u);o.add({id:d,label:x.label,marker:u},f)})}})}),o}rangeToText(e){return Array.from(e.getItems()).reduce((t,n)=>n.is("$text")||n.is("$textProxy")?t+n.data:`${t}
`,"")}findByTextCallback(e,t){let n="gu";t.matchCase||(n+="i");let s=`(${Mm(e)})`;if(t.wholeWords){const a="[^a-zA-ZÀ-ɏḀ-ỿ]";new RegExp("^"+a).test(e)||(s=`(^|${a}|_)${s}`),new RegExp(a+"$").test(e)||(s=`${s}(?=_|${a}|$)`)}const o=new RegExp(s,n);function r({text:a}){return[...a.matchAll(o)].map(DV)}return r}}function NV(i,e){const t=i.find(({marker:n})=>e.getStart().isBefore(n.getStart()));return t?i.getIndex(t):i.length}function DV(i){const e=i.length-1;let t=i.index;return i.length===3&&(t+=i[1].length),{label:i[e],start:t,end:t+i[e].length}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const zV="ck-find-result_selected";function HV(i,e,t){const n=new Set,s=new Set,o=e.model;o.document.differ.getChanges().forEach(a=>{a.name==="$text"||o.schema.isInline(a.position.nodeAfter)?(n.add(a.position.parent),[...o.markers.getMarkersAtPosition(a.position)].forEach(c=>{s.add(c.name)})):a.type==="insert"&&n.add(a.position.nodeAfter)}),o.document.differ.getChangedMarkers().forEach(({name:a,data:{newRange:c}})=>{c&&c.start.root.rootName==="$graveyard"&&s.add(a)}),n.forEach(a=>{[...o.markers.getMarkersIntersectingRange(o.createRangeIn(a))].forEach(l=>s.add(l.name))}),o.change(a=>{s.forEach(c=>{i.has(c)&&i.remove(c),a.removeMarker(c)})}),n.forEach(a=>{e.plugins.get("FindAndReplaceUtils").updateFindResultFromRange(o.createRangeOn(a),o,t,i)})}class $V extends y{static get requires(){return[FV]}static get pluginName(){return"FindAndReplaceEditing"}init(){this._activeResults=null,this.state=new MV(this.editor.model),this._defineConverters(),this._defineCommands(),this.listenTo(this.state,"change:highlightedResult",(n,s,o,r)=>{const{model:a}=this.editor;a.change(c=>{if(r){const l=r.marker.name.split(":")[1],x=a.markers.get(`findResultHighlighted:${l}`);x&&c.removeMarker(x)}if(o){const l=o.marker.name.split(":")[1];c.addMarker(`findResultHighlighted:${l}`,{usingOperation:!1,affectsData:!1,range:o.marker.getRange()})}})});/* istanbul ignore next -- @preserve */const t=un(((n,s,o)=>{if(o){const r=this.editor.editing.view.domConverter,a=this.editor.editing.mapper.toViewRange(o.marker.getRange());Jm({target:r.viewRangeToDom(a),viewportOffset:40})}}).bind(this),32);this.listenTo(this.state,"change:highlightedResult",t,{priority:"low"}),this.listenTo(this.editor,"destroy",t.cancel)}find(e){const{editor:t}=this,{model:n}=t,{findCallback:s,results:o}=t.execute("find",e);return this._activeResults=o,this.listenTo(n.document,"change:data",()=>HV(this._activeResults,t,s)),this._activeResults}stop(){this._activeResults&&(this.stopListening(this.editor.model.document),this.state.clear(this.editor.model),this._activeResults=null)}_defineCommands(){this.editor.commands.add("find",new VV(this.editor,this.state)),this.editor.commands.add("findNext",new t1(this.editor,this.state)),this.editor.commands.add("findPrevious",new LV(this.editor,this.state)),this.editor.commands.add("replace",new BV(this.editor,this.state)),this.editor.commands.add("replaceAll",new OV(this.editor,this.state))}_defineConverters(){const{editor:e}=this;e.conversion.for("editingDowncast").markerToHighlight({model:"findResult",view:({markerName:t})=>{const[,n]=t.split(":");return{name:"span",classes:["ck-find-result"],attributes:{"data-find-result":n}}}}),e.conversion.for("editingDowncast").markerToHighlight({model:"findResultHighlighted",view:({markerName:t})=>{const[,n]=t.split(":");return{name:"span",classes:[zV],attributes:{"data-find-result":n}}}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class UV extends y{static get requires(){return[$V,RV]}static get pluginName(){return"FindAndReplace"}init(){const e=this.editor.plugins.get("FindAndReplaceUI"),t=this.editor.plugins.get("FindAndReplaceEditing"),n=t.state;e.on("findNext",(s,o)=>{o?(n.searchText=o.searchText,this.editor.execute("find",o.searchText,o)):this.editor.execute("findNext")}),e.on("findPrevious",(s,o)=>{o&&n.searchText!==o.searchText?this.editor.execute("find",o.searchText):this.editor.execute("findPrevious")}),e.on("replace",(s,o)=>{n.searchText!==o.searchText&&this.editor.execute("find",o.searchText);const r=n.highlightedResult;r&&this.editor.execute("replace",o.replaceText,r)}),e.on("replaceAll",(s,o)=>{n.searchText!==o.searchText&&this.editor.execute("find",o.searchText),this.editor.execute("replaceAll",o.replaceText,n.results)}),e.on("searchReseted",()=>{n.clear(this.editor.model),t.stop()})}}const WV=`<svg viewBox="0 0 20 20" width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M3 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V3Z"/><path d="M16 3.25a1.5 1.5 0 0 1 1.5 1.5v1.7a2.25 2.25 0 0 1-1.932 2.226l-4.424.632a.75.75 0 0 0-.644.743V11a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1v-.95a2.25 2.25 0 0 1 1.932-2.226l4.424-.632A.75.75 0 0 0 16 6.449V3.25Z"/></svg>
`,n1=["ck-format-painter-active","pasteFormat"];(function(i,e){(function(n){for(;--n;)i.push(i.shift())})(++e)})(n1,130);const i1=function(i,e){return i=i-0,n1[i]},Is="copyFormat",vl=i1("0x1"),Vu=i1("0x0"),s1=["document","selection","model","schema","value","_getFormattingAttributes","editor","refresh","execute","reset","getAttributeProperties","change:isEnabled","fromEntries","filter","commands"];(function(i,e){(function(n){for(;--n;)i.push(i.shift())})(++e)})(s1,323);const lt=function(i,e){return i=i-0,s1[i]};let jV=class extends q{constructor(e){super(e),this[lt("0xb")]=void 0,this.on(lt("0x3"),(t,n,s)=>{s||this.reset()}),this.on("change:value",()=>e[lt("0x6")].get(vl)[lt("0xe")]())}[lt("0x0")](){this[lt("0xb")]=this[lt("0xc")]()}[lt("0x1")](){this.value=void 0}_getFormattingAttributes(){const e=this[lt("0xd")][lt("0x9")],t=e[lt("0x7")][lt("0x8")];return Object[lt("0x4")](Array.from(t.getAttributes())[lt("0x5")](([n])=>e[lt("0xa")][lt("0x2")](n).isFormatting))}};const o1=["selection","setAttribute","from","getAttributes","word","model","getLastPosition","getSelectedBlocks","forward","getValidRanges","removeSelectionAttribute","_removeFormatCommand","execute","schema","getItems","setSelection","document","_createRangeOnEntireWord","createRangeOn","_getFormattingAttributes","editor","getFirstPosition","createRange","change","backward","isCollapsed","_getFormattingItems","modifySelection","isBlock","getRanges"];(function(i,e){(function(n){for(;--n;)i.push(i.shift())})(++e)})(o1,408);const ie=function(i,e){return i=i-0,o1[i]};let qV=class extends q{constructor(e){super(e),this[ie("0x17")]=new GV(e)}[ie("0x18")](e={}){const t=this[ie("0x2")][ie("0x11")],n=t[ie("0x1c")][ie("0xc")],s=Array[ie("0xe")](n[ie("0xb")]()),o=n[ie("0x7")]?[this[ie("0x1d")](t,n)]:s;t.change(r=>{r.setSelection(o),this[ie("0x17")].execute();for(const a in e)for(const c of t[ie("0x19")][ie("0x15")](o,a))r[ie("0xd")](a,e[a],c);r[ie("0x1b")](s)})}[ie("0x1d")](e,t){const n=e.createSelection(t);e[ie("0x9")](n,{unit:ie("0x10"),direction:ie("0x6")});const s=n[ie("0x3")]();e[ie("0x9")](n,{unit:ie("0x10"),direction:ie("0x14")});const o=n[ie("0x12")]();return e[ie("0x4")](s,o)}};class GV extends q{execute(){const e=this.editor[ie("0x11")],t=e[ie("0x19")];e[ie("0x5")](n=>{for(const s of this._getFormattingItems(e[ie("0x1c")][ie("0xc")],t))if(s.is(ie("0xc")))for(const o of this[ie("0x1")](s,t))n[ie("0x16")](o);else{const o=n[ie("0x0")](s);for(const r of this[ie("0x1")](s,t))n.removeAttribute(r,o)}})}*[ie("0x8")](e,t){const n=s=>!!Be(this._getFormattingAttributes(s,t));for(const s of e[ie("0xb")]())for(const o of s[ie("0x1a")]())!t[ie("0xa")](o)&&n(o)&&(yield o);for(const s of e[ie("0x13")]())n(s)&&(yield s);n(e)&&(yield e)}*[ie("0x1")](e,t){for(const[n]of e[ie("0xf")]()){const s=t.getAttributeProperties(n);s&&s.isFormatting&&(yield n)}}}const r1=["pluginName","info","formatPainterLicenseKeyTrialLimit:operations","_licenseKeyCheckInterval","init","add","formatPainterLicenseKeyValid","format-painter-invalid-license-key","licenseKey","editor","You are using the trial version of CKEditor 5 format painter plugin with limited usage. Make sure you will not use it in the production environment.","formatPainterLicenseKeyInvalid","get","formatPainterLicenseKeyTrial","commands"];(function(i,e){(function(n){for(;--n;)i.push(i.shift())})(++e)})(r1,347);const Ce=function(i,e){return i=i-0,r1[i]};let KV=class extends y{static get[Ce("0xd")](){return"FormatPainterEditing"}constructor(e){super(e),this[Ce("0x1")]=null}[Ce("0x2")](){const e=this[Ce("0x7")];e[Ce("0xc")][Ce("0x3")](Is,new jV(e)),e[Ce("0xc")][Ce("0x3")](vl,new qV(e)),this[Ce("0x6")]=e.config[Ce("0xa")](Ce("0x6"));const t=this.editor;this[Ce("0x1")]=setInterval(()=>{let n;for(const s in t){const o=s,r=t[o];if(Ce("0xb")===r||r==="formatPainterLicenseKeyInvalid"||Ce("0x4")===r||Ce("0x0")===r){delete t[o],n=r;break}}if(Ce("0x9")===n)throw clearInterval(this[Ce("0x1")]),new w(Ce("0x5"),null);if(Ce("0xb")===n&&console[Ce("0xe")](Ce("0x8")),Ce("0x0")===n)throw clearInterval(this[Ce("0x1")]),new w("format-painter-trial-license-key-reached-limit-changes",null);Ce("0x4")===n&&clearInterval(this[Ce("0x1")])},1e3)}destroy(){this[Ce("0x1")]&&clearInterval(this[Ce("0x1")])}},JV=class extends bt(y){static get pluginName(){return"FormatPainterUI"}init(){const e=this.editor;e.editing.view.addObserver(xg),e.ui.componentFactory.add("formatPainter",t=>{const n=t.t,s=Ne(t,Co),o=e.commands.get(Is);s.buttonView.set({label:n("Paint formatting"),icon:WV,tooltip:!0}),s.class="ck-format-painter-dropdown",o&&(s.bind("isEnabled").to(o,"isEnabled"),this.listenTo(o,"change:isEnabled",(a,c,l)=>{l||this._finishPainting()}),s.buttonView.bind("isOn").to(o,"value",a=>!!a),this.listenTo(e,"destroy",()=>this._toggleSpecialCursor(!1)),this.listenTo(o,"change:value",(a,c,l)=>{this._toggleSpecialCursor(!!l)}));const r=new Rn({withText:!0,label:n("Continuous painting"),tooltip:n("Keeps the painter on after setting the formatting."),isOn:!1});return Mn(s,new De([{type:"switchbutton",model:r}])),this.listenTo(s,"execute",()=>{r.isOn=!r.isOn}),this.listenTo(s.buttonView,"execute",()=>{s.buttonView.isOn?this._finishPainting():(e.execute(Is),e.ui.ariaLiveAnnouncer.announce("formatPainter",n("Formatting copied.")),this.listenTo(U.window.document,"mouseup",()=>{const a=e.commands.get(Is).value;e.execute(vl,a),e.ui.ariaLiveAnnouncer.announce("formatPainter",n("Pasted formatting.")),r.isOn||this._finishPainting()}))}),s})}afterInit(){(function(e){function t(s,o,r){const a={};a[n([110,117,109,98,101,114,79,102,82,111,117,110,100,115])]={16:10,24:12,32:14},a[n([114,99,111,110])]=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],a[n([83])]=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],a[n([84,49])]=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],a[n([84,50])]=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],a[n([84,51])]=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],a[n([84,52])]=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],a[n([85,49])]=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],a[n([85,50])]=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],a[n([85,51])]=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],a[n([85,52])]=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];const c=new Uint8Array(16);for(let _=15;_>=0;--_)c[_]=r%256,r=parseInt(r/256);let l=null,x=16;const d=new Uint8Array(o),u=[],f=[];C();for(let _=0;_<s[n([108,101,110,103,116,104])];_++)x===16&&(l=p(c),x=0,b(c)),s[_]^=l[x++];return s;function m(_){const R=[];for(let P=0;P<_[n([108,101,110,103,116,104])];P+=4)R[n([112,117,115,104])](_[P]<<24|_[P+1]<<16|_[P+2]<<8|_[P+3]);return R}function b(_){for(let R=15;R>=0;R--){if(_[R]!==255){_[R]++;break}_[R]=0}}function p(_){const R=u[n([108,101,110,103,116,104])]-1,P=[0,0,0,0];let I=m(_);for(let k=0;k<4;k++)I[k]^=u[0][k];for(let k=1;k<R;k++){for(let M=0;M<4;M++)P[M]=a[n([84,49])][I[M]>>24&255]^a[n([84,50])][I[(M+1)%4]>>16&255]^a[n([84,51])][I[(M+2)%4]>>8&255]^a[n([84,52])][255&I[(M+3)%4]]^u[k][M];I=P[n([115,108,105,99,101])]()}const V=new Uint8Array(16);let A;for(let k=0;k<4;k++)A=u[R][k],V[4*k]=255&(a[n([83])][I[k]>>24&255]^A>>24),V[4*k+1]=255&(a[n([83])][I[(k+1)%4]>>16&255]^A>>16),V[4*k+2]=255&(a[n([83])][I[(k+2)%4]>>8&255]^A>>8),V[4*k+3]=255&(a[n([83])][255&I[(k+3)%4]]^A);return V}function C(){const _=a[n([110,117,109,98,101,114,79,102,82,111,117,110,100,115])][d[n([108,101,110,103,116,104])]];for(let F=0;F<=_;F++)u[n([112,117,115,104])]([0,0,0,0]),f[n([112,117,115,104])]([0,0,0,0]);const R=4*(_+1),P=d[n([108,101,110,103,116,104])]/4,I=m(d);let V;for(let F=0;F<P;F++)V=F>>2,u[V][F%4]=I[F],f[_-V][F%4]=I[F];let A,k=0,M=P;for(;M<R;){A=I[P-1],I[0]^=a[n([83])][A>>16&255]<<24^a[n([83])][A>>8&255]<<16^a[n([83])][255&A]<<8^a[n([83])][A>>24&255]^a[n([114,99,111,110])][k]<<24,k+=1;for(let J=1;J<P/2;J++)I[J]^=I[J-1];A=I[P/2-1],I[P/2]^=a[n([83])][255&A]^a[n([83])][A>>8&255]<<8^a[n([83])][A>>16&255]<<16^a[n([83])][A>>24&255]<<24;for(let J=P/2+1;J<P;J++)I[J]^=I[J-1];let F,N,xe=0;for(;xe<P&&M<R;)F=M>>2,N=M%4,u[F][N]=I[xe],f[_-F][N]=I[xe++],M++}for(let F=1;F<_;F++)for(let N=0;N<4;N++)A=f[F][N],f[F][N]=a[n([85,49])][A>>24&255]^a[n([85,50])][A>>16&255]^a[n([85,51])][A>>8&255]^a[n([85,52])][255&A]}}function n(s){return s.map(o=>String.fromCharCode(o)).join("")}(s=>{function o(){const h=[{[n([105,100])]:1,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([67,111,109,109,101,110,116,115]),[n([112,108,117,103,105,110,78,97,109,101])]:n([67,111,109,109,101,110,116,115,82,101,112,111,115,105,116,111,114,121]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([108,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([99,104,101,99,107,65,108,115,111])]:[{[n([105,100])]:2,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([84,114,97,99,107,32,67,104,97,110,103,101,115]),[n([112,108,117,103,105,110,78,97,109,101])]:n([84,114,97,99,107,67,104,97,110,103,101,115,69,100,105,116,105,110,103]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([108,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101,70,111,114,84,114,97,99,107,67,104,97,110,103,101,115]),[n([111,112,116,105,111,110,115])]:{[n([97,105,119,115,103,105,99])]:!0,[n([97,105,116,99,100,103,105,108])]:!0,[n([97,105,114,118,105,105,108])]:!0}}],[n([111,112,116,105,111,110,115])]:{[n([97,105,119,115,103,105,99])]:!0,[n([97,105,116,99,100,103,105,108])]:!0,[n([97,105,114,118,105,105,108])]:!0}},{[n([105,100])]:3,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([80,97,103,105,110,97,116,105,111,110]),[n([112,108,117,103,105,110,78,97,109,101])]:n([80,97,103,105,110,97,116,105,111,110,76,111,111,107,117,112]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([112,97,103,105,110,97,116,105,111,110,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101])},{[n([105,100])]:4,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([82,101,118,105,115,105,111,110,32,72,105,115,116,111,114,121]),[n([112,108,117,103,105,110,78,97,109,101])]:n([82,101,118,105,115,105,111,110,115,82,101,112,111,115,105,116,111,114,121]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([108,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101,70,111,114,82,101,118,105,115,105,111,110,72,105,115,116,111,114,121]),[n([111,112,116,105,111,110,115])]:{[n([97,105,119,115,103,105,99])]:!0,[n([97,105,116,99,100,103,105,108])]:!0,[n([97,105,114,118,105,105,108])]:!0}},{[n([105,100])]:5,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([68,111,99,117,109,101,110,116,32,79,117,116,108,105,110,101]),[n([112,108,117,103,105,110,78,97,109,101])]:n([68,111,99,117,109,101,110,116,79,117,116,108,105,110,101,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([100,111,99,117,109,101,110,116,79,117,116,108,105,110,101,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:6,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([70,111,114,109,97,116,32,80,97,105,110,116,101,114]),[n([112,108,117,103,105,110,78,97,109,101])]:n([70,111,114,109,97,116,80,97,105,110,116,101,114,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([102,111,114,109,97,116,80,97,105,110,116,101,114,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:7,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([83,108,97,115,104,32,67,111,109,109,97,110,100]),[n([112,108,117,103,105,110,78,97,109,101])]:n([83,108,97,115,104,67,111,109,109,97,110,100,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([115,108,97,115,104,67,111,109,109,97,110,100,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:8,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([84,97,98,108,101,32,111,102,32,67,111,110,116,101,110,116,115]),[n([112,108,117,103,105,110,78,97,109,101])]:n([84,97,98,108,101,79,102,67,111,110,116,101,110,116,115,69,100,105,116,105,110,103]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([116,97,98,108,101,79,102,67,111,110,116,101,110,116,115,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:9,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([84,101,109,112,108,97,116,101]),[n([112,108,117,103,105,110,78,97,109,101])]:n([84,101,109,112,108,97,116,101,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([116,101,109,112,108,97,116,101,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:10,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([80,97,115,116,101,32,102,114,111,109,32,79,102,102,105,99,101,32,69,110,104,97,110,99,101,100]),[n([112,108,117,103,105,110,78,97,109,101])]:n([80,97,115,116,101,70,114,111,109,79,102,102,105,99,101,69,110,104,97,110,99,101,100,73,110,108,105,110,101,114]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([112,97,115,116,101,70,114,111,109,79,102,102,105,99,101,69,110,104,97,110,99,101,100,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:11,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([65,73,32,65,115,115,105,115,116,97,110,116]),[n([112,108,117,103,105,110,78,97,109,101])]:n([65,73,65,115,115,105,115,116,97,110,116,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([97,105,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101])},{[n([105,100])]:12,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([80,114,111,100,117,99,116,105,118,105,116,121,32,112,97,99,107])}];return v(h),h;function g(E){return 1<<E-1}function v(E){E[n([102,111,114,69,97,99,104])](O=>{O[n([112,101,114,109,105,115,115,105,111,110,77,97,115,107])]=g(O[n([105,100])]),r(O)&&O[n([99,104,101,99,107,65,108,115,111])]&&v(O[n([99,104,101,99,107,65,108,115,111])])})}}function r(h){return n([112,108,117,103,105,110,78,97,109,101])in h}const a=[1,85,78,115,198,255,50,112,83,87,161],c=[127,34,6,211,167,86,146,199,132,160,18];function l(h){const g=[29,221,175,90,231,133,239,240,75,180];return x(h,new Uint8Array([...a,...g,...c]))}function x(h,g){const v=d(h),E=Array[n([102,114,111,109])](wn(v)),O=E[n([112,111,112])](),Z=E[n([112,111,112])]();return Qt(t(E,g,Z+256*O))}function d(h){const g=atob(h),[v,E]=g[n([115,112,108,105,116])](n([45]));try{if(atob(E))return atob(v)}catch{}return g}function u(h){try{const g=l(h),v=JSON[n([112,97,114,115,101])](g),E=parseInt(v[n([49])]),O=v[n([50])]||"",Z=parseInt(v[n([51])]),He=parseInt(v[n([52])])||0,we=parseInt(v[n([53])])||0;return{[n([112,114,111,100,117,99,116,78,97,109,101])]:O,[n([97,108,108,111,119,101,100,80,108,117,103,105,110,115])]:He,[n([101,120,112,105,114,97,116,105,111,110,68,97,116,101])]:E,[n([105,115,84,114,105,97,108])]:Z,[n([105,115,73,110,116,101,114,110,97,108])]:we}}catch{return null}}const f=o(),m={[n([99,104,101,99,107,76,105,99,101,110,115,101])]:V,[n([99,104,101,99,107,76,105,99,101,110,115,101,70,111,114,84,114,97,99,107,67,104,97,110,103,101,115])]:A,[n([99,104,101,99,107,76,105,99,101,110,115,101,70,111,114,82,101,118,105,115,105,111,110,72,105,115,116,111,114,121])]:k},b=s[n([99,111,110,115,116,114,117,99,116,111,114])][n([112,108,117,103,105,110,78,97,109,101])],p=n([99,111,110,116,101,120,116])in s?s.context:s.editor,C=n([52,48,52,54,50,50,51,48]),_=n([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57]),R=p.config.get(n([108,105,99,101,110,115,101,75,101,121])),P=f[n([102,105,108,116,101,114])](r)[n([102,105,110,100])](h=>h[n([112,108,117,103,105,110,78,97,109,101])]===b);function I(h,g){m[g[n([104,97,110,100,108,101,114])]](h,g),g[n([99,104,101,99,107,65,108,115,111])]&&g[n([99,104,101,99,107,65,108,115,111])][n([102,105,108,116,101,114])](v=>W(p,v[n([112,108,117,103,105,110,78,97,109,101])]))[n([102,111,114,69,97,99,104])](v=>I(h,v))}function V(h,g){F(M(h,g),g)}function A(h,g){function v(E,O){try{if(W(p,n([84,114,97,99,107,67,104,97,110,103,101,115,69,100,105,116,105,110,103]))&&E){const Z=z(p,n([84,114,97,99,107,67,104,97,110,103,101,115,69,100,105,116,105,110,103]))[n([95,101,120,101,99,117,116,101,83,117,103,103,101,115,116,105,111,110])];if(parseInt(Z)/2>E[n([101,120,112,105,114,97,116,105,111,110,68,97,116,101])])return N(O[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}return M(E,O)}catch{return N(O[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}}F(v(h,g),g)}function k(h,g){const v=c[0]*a[1],E=c[0]*a[2],O=c[2]*a[2];W(p,n([87,101,98,83,111,99,107,101,116,71,97,116,101,119,97,121]))&&z(p,n([87,101,98,83,111,99,107,101,116,71,97,116,101,119,97,121]))[n([115,116,97,116,101])]==n([99,111,110,110,101,99,116,101,100])&&(window[xe()]=O);function Z(T,$){try{return ft()?N($[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([86,97,108,105,100])):M(T,$)}catch{return N($[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}}function He(T,$){if(T==$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))rt();else if(T==$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108])){const ke=we();ke&&Ie(ke,$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]);const Ve=en();window[n([115,101,116,84,105,109,101,111,117,116])](()=>{Ie(n([116,105,109,101]),$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])])},Ve);const Xe=z(p,n([82,101,118,105,115,105,111,110,115,82,101,112,111,115,105,116,111,114,121]))[n([95,114,101,118,105,115,105,111,110,115])];Xe[n([108,101,110,103,116,104])]>=7?Ie(n([114,101,118,105,115,105,111,110,115]),$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]):Xe.on(n([97,100,100]),()=>{Xe[n([108,101,110,103,116,104])]>=7&&Ie(n([114,101,118,105,115,105,111,110,115]),$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])])})}}function we(){if(!W(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114])))return!1;for(const T in window)if(Number.isNaN(Number(T))){if(window[T]===v)return n([116,105,109,101]);if(window[T]===E)return n([114,101,118,105,115,105,111,110,115])}return!1}function ft(){if(!W(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114])))return!1;for(const T in window)if(Number.isNaN(Number(T))&&window[T]===O)return!0;return!1}function Ie(T,$){rt(),N($+n([84,114,105,97,108,76,105,109,105,116,58])+T),window[xe()]=T===n([116,105,109,101])?v:E}function en(){let T=c[6]*a[8]*a[6];return W(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))&&(T/=10),T}function rt(){const T=p;function $(){W(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))&&(z(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))[n([117,110,98,105,110,100])](n([105,115,69,110,97,98,108,101,100])),z(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))[n([105,115,69,110,97,98,108,101,100])]=!1,z(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))[n([117,112,100,97,116,101])]=oe,z(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))[n([115,97,118,101,82,101,118,105,115,105,111,110])]=oe,T[n([109,111,100,101,108])][n([99,104,97,110,103,101])]=oe,T[n([109,111,100,101,108])][n([101,110,113,117,101,117,101,67,104,97,110,103,101])]=oe,T[n([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](n([109,111,100,101,108]))),W(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))&&(z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([117,110,98,105,110,100])](n([105,115,69,110,97,98,108,101,100])),z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([105,115,69,110,97,98,108,101,100])]=!1,z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([99,111,109,112,97,114,101])]=oe,z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([95,103,101,116,68,105,102,102])]=oe)}T[n([115,116,97,116,101])]==n([114,101,97,100,121])?$():T[n([111,110,99,101])](n([114,101,97,100,121]),()=>{if(W(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))&&$(),W(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))){const $e=z(T,n([82,101,118,105,115,105,111,110,115,82,101,112,111,115,105,116,111,114,121])),ke=$e.getRevision(0),Ve=$e.getEarlierVisibleRevision(ke[n([105,100])]);z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([99,111,109,112,97,114,101])](ke[n([105,100])],Ve?Ve[n([105,100])]:null,1).then(()=>$())}})}He(Z(h,g),g)}function M(h,g){try{return pn(g)?N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([86,97,108,105,100])):h&&bn(h[n([97,108,108,111,119,101,100,80,108,117,103,105,110,115])],g)?h[n([105,115,73,110,116,101,114,110,97,108])]&&!window[n([111,112,101,110])][n([99,108,111,115,101,100])]||parseInt(C)/2>h[n([101,120,112,105,114,97,116,105,111,110,68,97,116,101])]?N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100])):h[n([105,115,84,114,105,97,108])]?N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108])):N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([86,97,108,105,100])):N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}catch{return N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}}function F(h,g){if(p instanceof ds){const v=p;h==g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100])?J(v):h==g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108])&&window[n([115,101,116,84,105,109,101,111,117,116])](()=>{J(v),N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108,76,105,109,105,116,58,116,105,109,101]))},c[6]*a[8]*a[6]),v[n([101,100,105,116,111,114,115])][n([111,110])](n([97,100,100]),(E,O)=>{h!=g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100])&&h!=g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108,76,105,109,105,116,58,116,105,109,101])&&h!=g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108,76,105,109,105,116,58,111,112,101,114,97,116,105,111,110,115])||ze(O)})}else{const v=p;h==g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100])?ze(v):h==g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108])&&v[n([111,110])](n([114,101,97,100,121]),()=>{let E=0;v[n([109,111,100,101,108])][n([111,110])](n([97,112,112,108,121,79,112,101,114,97,116,105,111,110]),(O,Z)=>{Z[0][n([105,115,68,111,99,117,109,101,110,116,79,112,101,114,97,116,105,111,110])]&&E++,E===504&&(ze(v),N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108,76,105,109,105,116,58,111,112,101,114,97,116,105,111,110,115])),O[n([111,102,102])]())},{priority:n([104,105,103,104,101,115,116])})})}}function N(h){const g=xe();return p[g]=h,h}function xe(){const h=String(window[n([112,101,114,102,111,114,109,97,110,99,101])][n([110,111,119])]())[n([114,101,112,108,97,99,101])](n([46]),"");let g="";for(let v=0;v<h[n([108,101,110,103,116,104])];v+=2){let E=parseInt(h[n([115,117,98,115,116,114,105,110,103])](v,v+2));E>=_[n([108,101,110,103,116,104])]&&(E-=_[n([108,101,110,103,116,104])]),g+=_[E]}return g}function J(h){for(const g of h[n([101,100,105,116,111,114,115])])ze(g);z(h,n([67,111,109,109,101,110,116,115,82,101,112,111,115,105,116,111,114,121]))[n([115,119,105,116,99,104,82,101,97,100,79,110,108,121])](!0),z(h,n([67,111,109,109,101,110,116,115,82,101,112,111,115,105,116,111,114,121]))[n([115,119,105,116,99,104,82,101,97,100,79,110,108,121])]=oe}function ze(h){function g(){h[n([109,111,100,101,108])][n([99,104,97,110,103,101])]=oe,h[n([109,111,100,101,108])][n([101,110,113,117,101,117,101,67,104,97,110,103,101])]=oe,h[n([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](n([109,111,100,101,108]))}h[n([115,116,97,116,101])]==n([114,101,97,100,121])?g():h[n([111,110,99,101])](n([114,101,97,100,121]),()=>g())}function oe(){return null}function bn(h,g){const v=!!(h&g[n([112,101,114,109,105,115,115,105,111,110,77,97,115,107])]),E=Xt(h,g);return v||E}function Xt(h,g){const v=(g[n([111,112,116,105,111,110,115])]||{})[n([102,103,105])]||null;if(!v)return!1;const E=f[n([102,105,110,100])](O=>O[n([105,100])]===v);return!!E&&!!(h&E[n([112,101,114,109,105,115,115,105,111,110,77,97,115,107])])}function pn(h){if(!W(p,h[n([112,108,117,103,105,110,78,97,109,101])]))return!0;const g=h[n([111,112,116,105,111,110,115])]||{},v=g[n([97,105,119,115,103,105,99])]||!1,E=g[n([97,105,116,99,100,103,105,108])]||!1,O=g[n([97,105,114,118,105,105,108])]||!1;return W(p,n([87,101,98,83,111,99,107,101,116,71,97,116,101,119,97,121]))&&z(p,n([87,101,98,83,111,99,107,101,116,71,97,116,101,119,97,121]))[n([115,116,97,116,101])]==n([99,111,110,110,101,99,116,101,100])&&v||W(p,n([84,114,97,99,107,67,104,97,110,103,101,115,68,97,116,97,71,101,116,116,101,114]))&&z(p,n([84,114,97,99,107,67,104,97,110,103,101,115,68,97,116,97,71,101,116,116,101,114]))[n([114,101,115,117,108,116])]==n([101,110,100])&&E?!0:!(!W(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114,73,110,116,101,103,114,97,116,105,111,110]))||z(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114,73,110,116,101,103,114,97,116,105,111,110]))[n([114,101,115,117,108,116])]!=n([101,110,100])||!O)}function W(h,g){return h[n([112,108,117,103,105,110,115])][n([104,97,115])](g)}function z(h,g){return h[n([112,108,117,103,105,110,115])][n([103,101,116])](g)}function Qt(h){let g="";for(const v of h)g+=String[n([102,114,111,109,67,104,97,114,67,111,100,101])](v);return g}function wn(h){const g=new Uint8Array(h[n([108,101,110,103,116,104])]);for(let v=0;v<h[n([108,101,110,103,116,104])];v++)g[v]=h[n([99,104,97,114,67,111,100,101,65,116])](v);return g}P&&I(u(R),P)})(e)})(this)}_toggleSpecialCursor(e){this.editor.editing.view.change(t=>{for(const n of this.editor.editing.view.document.roots)e?t.addClass(Vu,n):t.removeClass(Vu,n)})}_finishPainting(){this.editor.commands.get(Is).reset(),this.stopListening(U.window.document,"mouseup")}};var a1=["pluginName","requires"];(function(i,e){var t=function(n){for(;--n;)i.push(i.shift())};t(++e)})(a1,182);var Bu=function(i,e){i=i-0;var t=a1[i];return t};let ZV=class extends y{static get[Bu("0x1")](){return[KV,JV]}static get[Bu("0x0")](){return"FormatPainter"}};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function bi(i,e,t,n){e&&YV(i,e,n),t&&xn(i,t,n)}function xn(i,e,t){if(e.attributes)for(const[n,s]of Object.entries(e.attributes))i.setAttribute(n,s,t);e.styles&&i.setStyle(e.styles,t),e.classes&&i.addClass(e.classes,t)}function YV(i,e,t){if(e.attributes)for(const[n]of Object.entries(e.attributes))i.removeAttribute(n,t);if(e.styles)for(const n of Object.keys(e.styles))i.removeStyle(n,t);e.classes&&i.removeClass(e.classes,t)}function XV(i,e){const t=Ln(i);let n="attributes";for(n in e)n=="classes"?t[n]=Array.from(new Set([...i[n]||[],...e[n]])):t[n]={...i[n],...e[n]};return t}function Mi(i,e,t,n,s){const o=e.getAttribute(t),r={};for(const a of["attributes","styles","classes"]){if(a!=n){o&&o[a]&&(r[a]=o[a]);continue}if(n=="classes"){const l=new Set(o&&o.classes||[]);s(l),l.size&&(r[a]=Array.from(l));continue}const c=new Map(Object.entries(o&&o[a]||{}));s(c),c.size&&(r[a]=Object.fromEntries(c))}Object.keys(r).length?e.is("documentSelection")?i.setSelectionAttribute(t,r):i.setAttribute(t,r,e):o&&(e.is("documentSelection")?i.removeSelectionAttribute(t):i.removeAttribute(t,e))}function QV(i){return Ny(i).replace(/ /g,"")}function Nt(i){return`html${QV(i)}Attributes`}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function yl({model:i}){return(e,t)=>t.writer.createElement(i,{htmlContent:e.getCustomProperty("$rawContent")})}function eB(i,{view:e,isInline:t}){const n=i.t;return(s,{writer:o})=>{const r=n("HTML object"),a=ha(e,s,o),c=s.getAttribute(Nt(e));o.addClass("html-object-embed__content",a),c&&xn(o,c,a);const l=o.createContainerElement(t?"span":"div",{class:"html-object-embed","data-html-object-embed-label":r},a);return ki(l,o,{label:r})}}function ha(i,e,t){return t.createRawElement(i,null,(n,s)=>{s.setContentOf(n,e.getAttribute("htmlContent"))})}function tB({view:i,model:e,allowEmpty:t},n){return o=>{o.on(`element:${i}`,(r,a,c)=>{let l=n.processViewAttributes(a.viewItem,c);if(!(!l&&!c.consumable.test(a.viewItem,{name:!0}))){if(l=l||{},c.consumable.consume(a.viewItem,{name:!0}),a.modelRange||(a=Object.assign(a,c.convertChildren(a.viewItem,a.modelCursor))),t&&a.modelRange.isCollapsed&&Object.keys(l).length){const x=c.writer.createElement("htmlEmptyElement");if(!c.safeInsert(x,a.modelCursor))return;const d=c.getSplitParts(x);a.modelRange=c.writer.createRange(a.modelRange.start,c.writer.createPositionAfter(d[d.length-1])),c.updateConversionResult(x,a),s(x,l,c);return}for(const x of a.modelRange.getItems())s(x,l,c)}},{priority:"low"})};function s(o,r,a){if(a.schema.checkAttribute(o,e)){const c=o.getAttribute(e),l=XV(r,c||{});a.writer.setAttribute(e,l,o)}}}function Ou({model:i,view:e},t){return(n,{writer:s,consumable:o})=>{if(!n.hasAttribute(i))return null;const r=s.createContainerElement(e),a=n.getAttribute(i);return o.consume(n,`attribute:${i}`),xn(s,a,r),r.getFillerOffset=()=>null,t?ki(r,s):r}}function nB({priority:i,view:e}){return(t,n)=>{if(!t)return;const{writer:s}=n,o=s.createAttributeElement(e,null,{priority:i});return xn(s,t,o),o}}function ao({view:i},e){return t=>{t.on(`element:${i}`,(n,s,o)=>{if(!s.modelRange||s.modelRange.isCollapsed)return;const r=e.processViewAttributes(s.viewItem,o);r&&o.writer.setAttribute(Nt(s.viewItem.name),r,s.modelRange)},{priority:"low"})}}function co({view:i,model:e}){return t=>{t.on(`attribute:${Nt(i)}:${e}`,(n,s,o)=>{if(!o.consumable.consume(s.item,n.name))return;const{attributeOldValue:r,attributeNewValue:a}=s,c=o.writer,l=o.mapper.toViewElement(s.item);bi(c,r,a,l)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Lu={block:[{model:"codeBlock",view:"pre"},{model:"paragraph",view:"p"},{model:"blockQuote",view:"blockquote"},{model:"listItem",view:"li"},{model:"pageBreak",view:"div"},{model:"rawHtml",view:"div"},{model:"table",view:"table"},{model:"tableRow",view:"tr"},{model:"tableCell",view:"td"},{model:"tableCell",view:"th"},{model:"tableColumnGroup",view:"colgroup"},{model:"tableColumn",view:"col"},{model:"caption",view:"caption"},{model:"caption",view:"figcaption"},{model:"imageBlock",view:"img"},{model:"imageInline",view:"img"},{model:"htmlP",view:"p",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlBlockquote",view:"blockquote",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlTable",view:"table",modelSchema:{allowWhere:"$block",isBlock:!0}},{model:"htmlTbody",view:"tbody",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlThead",view:"thead",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlTfoot",view:"tfoot",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlCaption",view:"caption",modelSchema:{allowIn:"htmlTable",allowChildren:"$text",isBlock:!1}},{model:"htmlColgroup",view:"colgroup",modelSchema:{allowIn:"htmlTable",allowChildren:"col",isBlock:!1}},{model:"htmlCol",view:"col",modelSchema:{allowIn:"htmlColgroup",isBlock:!1}},{model:"htmlTr",view:"tr",modelSchema:{allowIn:["htmlTable","htmlThead","htmlTbody"],isLimit:!0}},{model:"htmlTd",view:"td",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlTh",view:"th",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlFigure",view:"figure",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFigcaption",view:"figcaption",modelSchema:{allowIn:"htmlFigure",allowChildren:"$text",isBlock:!1}},{model:"htmlAddress",view:"address",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlAside",view:"aside",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlMain",view:"main",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDetails",view:"details",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSummary",view:"summary",modelSchema:{allowChildren:"$text",allowIn:"htmlDetails",isBlock:!1}},{model:"htmlDiv",view:"div",paragraphLikeModel:"htmlDivParagraph",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlFieldset",view:"fieldset",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlLegend",view:"legend",modelSchema:{allowIn:"htmlFieldset",allowChildren:"$text"}},{model:"htmlHeader",view:"header",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFooter",view:"footer",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlForm",view:"form",modelSchema:{inheritAllFrom:"$container",isBlock:!0}},{model:"htmlHgroup",view:"hgroup",modelSchema:{allowChildren:["htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6"],isBlock:!1}},{model:"htmlH1",view:"h1",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH2",view:"h2",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH3",view:"h3",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH4",view:"h4",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH5",view:"h5",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH6",view:"h6",modelSchema:{inheritAllFrom:"$block"}},{model:"$htmlList",modelSchema:{allowWhere:"$container",allowChildren:["$htmlList","htmlLi"],isBlock:!1}},{model:"htmlDir",view:"dir",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlMenu",view:"menu",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlUl",view:"ul",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlOl",view:"ol",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlLi",view:"li",modelSchema:{allowIn:"$htmlList",allowChildren:"$text",isBlock:!1}},{model:"htmlPre",view:"pre",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlArticle",view:"article",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSection",view:"section",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlNav",view:"nav",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDivDl",view:"div",modelSchema:{allowChildren:["htmlDt","htmlDd"],allowIn:"htmlDl"}},{model:"htmlDl",view:"dl",modelSchema:{allowWhere:"$container",allowChildren:["htmlDt","htmlDd","htmlDivDl"],isBlock:!1}},{model:"htmlDt",view:"dt",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlDd",view:"dd",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlCenter",view:"center",modelSchema:{inheritAllFrom:"$container",isBlock:!1}}],inline:[{model:"htmlLiAttributes",view:"li",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlOlAttributes",view:"ol",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlUlAttributes",view:"ul",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"table"},{model:"htmlTheadAttributes",view:"thead",appliesToBlock:"table"},{model:"htmlTbodyAttributes",view:"tbody",appliesToBlock:"table"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"imageBlock"},{model:"htmlAcronym",view:"acronym",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTt",view:"tt",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlFont",view:"font",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTime",view:"time",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlVar",view:"var",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBig",view:"big",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSmall",view:"small",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSamp",view:"samp",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlQ",view:"q",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlOutput",view:"output",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlKbd",view:"kbd",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdi",view:"bdi",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdo",view:"bdo",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlAbbr",view:"abbr",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlA",view:"a",priority:5,coupledAttribute:"linkHref"},{model:"htmlStrong",view:"strong",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlB",view:"b",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlI",view:"i",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlEm",view:"em",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlS",view:"s",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDel",view:"del",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlIns",view:"ins",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlU",view:"u",coupledAttribute:"underline",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSub",view:"sub",coupledAttribute:"subscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSup",view:"sup",coupledAttribute:"superscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCode",view:"code",coupledAttribute:"code",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlMark",view:"mark",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSpan",view:"span",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCite",view:"cite",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlLabel",view:"label",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDfn",view:"dfn",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlObject",view:"object",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlIframe",view:"iframe",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlInput",view:"input",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlButton",view:"button",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlTextarea",view:"textarea",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlSelect",view:"select",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlVideo",view:"video",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlEmbed",view:"embed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlOembed",view:"oembed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlAudio",view:"audio",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlImg",view:"img",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlCanvas",view:"canvas",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlMeter",view:"meter",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlProgress",view:"progress",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlScript",view:"script",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlStyle",view:"style",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlCustomElement",view:"$customElement",modelSchema:{allowWhere:["$text","$block"],allowAttributesOf:"$inlineObject",isInline:!0}}]};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class is extends y{constructor(){super(...arguments),this._definitions=[]}static get pluginName(){return"DataSchema"}init(){for(const e of Lu.block)this.registerBlockElement(e);for(const e of Lu.inline)this.registerInlineElement(e)}registerBlockElement(e){this._definitions.push({...e,isBlock:!0})}registerInlineElement(e){this._definitions.push({...e,isInline:!0})}extendBlockElement(e){this._extendDefinition({...e,isBlock:!0})}extendInlineElement(e){this._extendDefinition({...e,isInline:!0})}getDefinitionsForView(e,t=!1){const n=new Set;for(const s of this._getMatchingViewDefinitions(e)){if(t)for(const o of this._getReferences(s.model))n.add(o);n.add(s)}return n}getDefinitionsForModel(e){return this._definitions.filter(t=>t.model==e)}_getMatchingViewDefinitions(e){return this._definitions.filter(t=>t.view&&iB(e,t.view))}*_getReferences(e){const t=["inheritAllFrom","inheritTypesFrom","allowWhere","allowContentOf","allowAttributesOf"],n=this._definitions.filter(s=>s.model==e);for(const{modelSchema:s}of n)if(s)for(const o of t)for(const r of ge(s[o]||[])){const a=this._definitions.filter(c=>c.model==r);for(const c of a)r!==e&&(yield*this._getReferences(c.model),yield c)}}_extendDefinition(e){const t=Array.from(this._definitions.entries()).filter(([,n])=>n.model==e.model);if(t.length==0){this._definitions.push(e);return}for(const[n,s]of t)this._definitions[n]=by({},s,e,(o,r)=>Array.isArray(o)?o.concat(r):void 0)}}function iB(i,e){return typeof i=="string"?i===e:i instanceof RegExp?i.test(e):!1}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class je extends y{constructor(e){super(e),this._dataSchema=e.plugins.get("DataSchema"),this._allowedAttributes=new Ct,this._disallowedAttributes=new Ct,this._allowedElements=new Set,this._disallowedElements=new Set,this._dataInitialized=!1,this._coupledAttributes=null,this._registerElementsAfterInit(),this._registerElementHandlers(),this._registerCoupledAttributesPostFixer(),this._registerAssociatedHtmlAttributesPostFixer()}static get pluginName(){return"DataFilter"}static get requires(){return[is,Yn]}loadAllowedConfig(e){for(const t of e){const n=t.name||/[\s\S]+/,s=Nu(t);this.allowElement(n),s.forEach(o=>this.allowAttributes(o))}}loadDisallowedConfig(e){for(const t of e){const n=t.name||/[\s\S]+/,s=Nu(t);s.length==0?this.disallowElement(n):s.forEach(o=>this.disallowAttributes(o))}}loadAllowedEmptyElementsConfig(e){for(const t of e)this.allowEmptyElement(t)}allowElement(e){for(const t of this._dataSchema.getDefinitionsForView(e,!0))this._addAllowedElement(t),this._coupledAttributes=null}disallowElement(e){for(const t of this._dataSchema.getDefinitionsForView(e,!1))this._disallowedElements.add(t.view)}allowEmptyElement(e){for(const t of this._dataSchema.getDefinitionsForView(e,!0))t.isInline&&this._dataSchema.extendInlineElement({...t,allowEmpty:!0})}allowAttributes(e){this._allowedAttributes.add(e)}disallowAttributes(e){this._disallowedAttributes.add(e)}processViewAttributes(e,t){return Mu(e,t,this._disallowedAttributes),Mu(e,t,this._allowedAttributes)}_addAllowedElement(e){if(!this._allowedElements.has(e)){if(this._allowedElements.add(e),"appliesToBlock"in e&&typeof e.appliesToBlock=="string")for(const t of this._dataSchema.getDefinitionsForModel(e.appliesToBlock))t.isBlock&&this._addAllowedElement(t);this._dataInitialized&&this.editor.data.once("set",()=>{this._fireRegisterEvent(e)},{priority:_t.highest+1})}}_registerElementsAfterInit(){this.editor.data.on("init",()=>{this._dataInitialized=!0;for(const e of this._allowedElements)this._fireRegisterEvent(e)},{priority:_t.highest+1})}_registerElementHandlers(){this.on("register",(e,t)=>{const n=this.editor.model.schema;if(t.isObject&&!n.isRegistered(t.model))this._registerObjectElement(t);else if(t.isBlock)this._registerBlockElement(t);else if(t.isInline)this._registerInlineElement(t);else throw new w("data-filter-invalid-definition",null,t);e.stop()},{priority:"lowest"})}_registerCoupledAttributesPostFixer(){const e=this.editor.model;e.document.registerPostFixer(t=>{const n=e.document.differ.getChanges();let s=!1;const o=this._getCoupledAttributesMap();for(const r of n){if(r.type!="attribute"||r.attributeNewValue!==null)continue;const a=o.get(r.attributeKey);if(a)for(const{item:c}of r.range.getWalker({shallow:!0}))for(const l of a)c.hasAttribute(l)&&(t.removeAttribute(l,c),s=!0)}return s})}_registerAssociatedHtmlAttributesPostFixer(){const e=this.editor.model;e.document.registerPostFixer(t=>{const n=e.document.differ.getChanges();let s=!1;for(const o of n)if(!(o.type!=="insert"||o.name==="$text"))for(const r of o.attributes.keys())!r.startsWith("html")||!r.endsWith("Attributes")||e.schema.checkAttribute(o.name,r)||(t.removeAttribute(r,o.position.nodeAfter),s=!0);return s})}_getCoupledAttributesMap(){if(this._coupledAttributes)return this._coupledAttributes;this._coupledAttributes=new Map;for(const e of this._allowedElements)if(e.coupledAttribute&&e.model){const t=this._coupledAttributes.get(e.coupledAttribute);t?t.push(e.model):this._coupledAttributes.set(e.coupledAttribute,[e.model])}return this._coupledAttributes}_fireRegisterEvent(e){e.view&&this._disallowedElements.has(e.view)||this.fire(e.view?`register:${e.view}`:"register",e)}_registerObjectElement(e){const t=this.editor,n=t.model.schema,s=t.conversion,{view:o,model:r}=e;n.register(r,e.modelSchema);/* istanbul ignore next: paranoid check -- @preserve */o&&(n.extend(e.model,{allowAttributes:[Nt(o),"htmlContent"]}),t.data.registerRawContentMatcher({name:o}),s.for("upcast").elementToElement({view:o,model:yl(e),converterPriority:_t.low+2}),s.for("upcast").add(ao(e,this)),s.for("editingDowncast").elementToStructure({model:{name:r,attributes:[Nt(o)]},view:eB(t,e)}),s.for("dataDowncast").elementToElement({model:r,view:(a,{writer:c})=>ha(o,a,c)}),s.for("dataDowncast").add(co(e)))}_registerBlockElement(e){const t=this.editor,n=t.model.schema,s=t.conversion,{view:o,model:r}=e;if(!n.isRegistered(e.model)){if(n.register(e.model,e.modelSchema),!o)return;s.for("upcast").elementToElement({model:r,view:o,converterPriority:_t.low+2}),s.for("downcast").elementToElement({model:r,view:o})}o&&(n.extend(e.model,{allowAttributes:Nt(o)}),s.for("upcast").add(ao(e,this)),s.for("downcast").add(co(e)))}_registerInlineElement(e){const t=this.editor,n=t.model.schema,s=t.conversion,o=e.model;e.appliesToBlock||(n.extend("$text",{allowAttributes:o}),e.attributeProperties&&n.setAttributeProperties(o,e.attributeProperties),s.for("upcast").add(tB(e,this)),s.for("downcast").attributeToElement({model:o,view:nB(e)}),e.allowEmpty&&(n.setAttributeProperties(o,{copyFromObject:!1}),n.isRegistered("htmlEmptyElement")||n.register("htmlEmptyElement",{inheritAllFrom:"$inlineObject"}),t.data.htmlProcessor.domConverter.registerInlineObjectMatcher(r=>r.name==e.view&&r.isEmpty&&Array.from(r.getAttributeKeys()).length?{name:!0}:null),s.for("editingDowncast").elementToElement({model:"htmlEmptyElement",view:Ou(e,!0)}),s.for("dataDowncast").elementToElement({model:"htmlEmptyElement",view:Ou(e)})))}}function Mu(i,e,t){const n=sB(i,e,t),{attributes:s,styles:o,classes:r}=rB(n),a={};if(s.size)for(const c of s)Gm(c)||s.delete(c);return s.size&&(a.attributes=Fu(s,c=>i.getAttribute(c))),o.size&&(a.styles=Fu(o,c=>i.getStyle(c))),r.size&&(a.classes=Array.from(r)),Object.keys(a).length?a:null}function sB(i,{consumable:e},t){const n=t.matchAll(i)||[],s=[];for(const o of n)oB(e,i,o),delete o.match.name,e.consume(i,o.match),s.push(o);return s}function oB(i,e,t){for(const n of["attributes","classes","styles"]){const s=t.match[n];if(s)for(const o of Array.from(s))i.test(e,{[n]:[o]})||Ly(s,o)}}function rB(i){const e={attributes:new Set,classes:new Set,styles:new Set};for(const t of i)for(const n in e)(t.match[n]||[]).forEach(o=>e[n].add(o));return e}function Fu(i,e){const t={};for(const n of i)e(n)!==void 0&&(t[n]=e(n));return t}function s0(i,e){const{name:t}=i,n=i[e];return wt(n)?Object.entries(n).map(([s,o])=>({name:t,[e]:{[s]:o}})):Array.isArray(n)?n.map(s=>({name:t,[e]:[s]})):[i]}function Nu(i){const{name:e,attributes:t,classes:n,styles:s}=i,o=[];return t&&o.push(...s0({name:e,attributes:t},"attributes")),n&&o.push(...s0({name:e,classes:n},"classes")),s&&o.push(...s0({name:e,styles:s},"styles")),o}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class aB extends y{static get requires(){return[je]}static get pluginName(){return"CodeBlockElementSupport"}init(){if(!this.editor.plugins.has("CodeBlockEditing"))return;const e=this.editor.plugins.get(je);e.on("register:pre",(t,n)=>{if(n.model!=="codeBlock")return;const s=this.editor,o=s.model.schema,r=s.conversion;o.extend("codeBlock",{allowAttributes:["htmlPreAttributes","htmlContentAttributes"]}),r.for("upcast").add(cB(e)),r.for("downcast").add(lB()),t.stop()})}}function cB(i){return e=>{e.on("element:code",(t,n,s)=>{const o=n.viewItem,r=o.parent;if(!r||!r.is("element","pre"))return;a(r,"htmlPreAttributes"),a(o,"htmlContentAttributes");function a(c,l){const x=i.processViewAttributes(c,s);x&&s.writer.setAttribute(l,x,n.modelRange)}},{priority:"low"})}}function lB(){return i=>{i.on("attribute:htmlPreAttributes:codeBlock",(e,t,n)=>{if(!n.consumable.consume(t.item,e.name))return;const{attributeOldValue:s,attributeNewValue:o}=t,a=n.mapper.toViewElement(t.item).parent;bi(n.writer,s,o,a)}),i.on("attribute:htmlContentAttributes:codeBlock",(e,t,n)=>{if(!n.consumable.consume(t.item,e.name))return;const{attributeOldValue:s,attributeNewValue:o}=t,r=n.mapper.toViewElement(t.item);bi(n.writer,s,o,r)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xB extends y{static get requires(){return[je]}static get pluginName(){return"DualContentModelElementSupport"}init(){this.editor.plugins.get(je).on("register",(t,n)=>{const s=n,o=this.editor,r=o.model.schema,a=o.conversion;if(!s.paragraphLikeModel||r.isRegistered(s.model)||r.isRegistered(s.paragraphLikeModel))return;const c={model:s.paragraphLikeModel,view:s.view};r.register(s.model,s.modelSchema),r.register(c.model,{inheritAllFrom:"$block"}),a.for("upcast").elementToElement({view:s.view,model:(l,{writer:x})=>this._hasBlockContent(l)?x.createElement(s.model):x.createElement(c.model),converterPriority:_t.low+.5}),a.for("downcast").elementToElement({view:s.view,model:s.model}),this._addAttributeConversion(s),a.for("downcast").elementToElement({view:c.view,model:c.model}),this._addAttributeConversion(c),t.stop()})}_hasBlockContent(e){const t=this.editor.editing.view,n=t.domConverter.blockElements;for(const s of t.createRangeIn(e).getItems())if(s.is("element")&&n.includes(s.name))return!0;return!1}_addAttributeConversion(e){const t=this.editor,n=t.conversion,s=t.plugins.get(je);t.model.schema.extend(e.model,{allowAttributes:Nt(e.view)}),n.for("upcast").add(ao(e,s)),n.for("downcast").add(co(e))}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dB extends y{static get requires(){return[is,ko]}static get pluginName(){return"HeadingElementSupport"}init(){const e=this.editor;if(!e.plugins.has("HeadingEditing"))return;const t=e.config.get("heading.options");this.registerHeadingElements(e,t)}registerHeadingElements(e,t){const n=e.plugins.get(is),s=[];for(const o of t)"model"in o&&"view"in o&&(n.registerBlockElement({view:o.view,model:o.model}),s.push(o.model));n.extendBlockElement({model:"htmlHgroup",modelSchema:{allowChildren:s}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Lr(i,e,t){const n=i.createRangeOn(e);for(const{item:s}of n.getWalker())if(s.is("element",t))return s}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uB extends y{static get requires(){return[je]}static get pluginName(){return"ImageElementSupport"}init(){const e=this.editor;if(!e.plugins.has("ImageInlineEditing")&&!e.plugins.has("ImageBlockEditing"))return;const t=e.model.schema,n=e.conversion,s=e.plugins.get(je);s.on("register:figure",()=>{n.for("upcast").add(mB(s))}),s.on("register:img",(o,r)=>{r.model!=="imageBlock"&&r.model!=="imageInline"||(t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["htmlImgAttributes","htmlFigureAttributes","htmlLinkAttributes"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["htmlA","htmlImgAttributes"]}),n.for("upcast").add(fB(s)),n.for("downcast").add(gB()),e.plugins.has("LinkImage")&&n.for("upcast").add(hB(s,e)),o.stop())})}}function fB(i){return e=>{e.on("element:img",(t,n,s)=>{if(!n.modelRange)return;const o=n.viewItem,r=i.processViewAttributes(o,s);r&&s.writer.setAttribute("htmlImgAttributes",r,n.modelRange)},{priority:"low"})}}function hB(i,e){const t=e.plugins.get("ImageUtils");return n=>{n.on("element:a",(s,o,r)=>{const a=o.viewItem;if(!t.findViewImgElement(a))return;const l=o.modelCursor.parent;if(!l.is("element","imageBlock"))return;const x=i.processViewAttributes(a,r);x&&r.writer.setAttribute("htmlLinkAttributes",x,l)},{priority:"low"})}}function mB(i){return e=>{e.on("element:figure",(t,n,s)=>{const o=n.viewItem;if(!n.modelRange||!o.hasClass("image"))return;const r=i.processViewAttributes(o,s);r&&s.writer.setAttribute("htmlFigureAttributes",r,n.modelRange)},{priority:"low"})}}function gB(){return i=>{e("htmlImgAttributes"),t("img","htmlImgAttributes"),t("figure","htmlFigureAttributes"),t("a","htmlLinkAttributes");function e(n){i.on(`attribute:${n}:imageInline`,(s,o,r)=>{if(!r.consumable.consume(o.item,s.name))return;const{attributeOldValue:a,attributeNewValue:c}=o,l=r.mapper.toViewElement(o.item);bi(r.writer,a,c,l)},{priority:"low"})}function t(n,s){i.on(`attribute:${s}:imageBlock`,(o,r,a)=>{if(!a.consumable.test(r.item,o.name))return;const{attributeOldValue:c,attributeNewValue:l}=r,x=a.mapper.toViewElement(r.item),d=Lr(a.writer,x,n);d&&(bi(a.writer,c,l,d),a.consumable.consume(r.item,o.name))},{priority:"low"}),n==="a"&&i.on("attribute:linkHref:imageBlock",(o,r,a)=>{if(!a.consumable.consume(r.item,"attribute:htmlLinkAttributes:imageBlock"))return;const c=a.mapper.toViewElement(r.item),l=Lr(a.writer,c,"a");xn(a.writer,r.item.getAttribute("htmlLinkAttributes"),l)},{priority:"low"})}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bB extends y{static get requires(){return[je]}static get pluginName(){return"MediaEmbedElementSupport"}init(){const e=this.editor;if(!e.plugins.has("MediaEmbed")||e.config.get("mediaEmbed.previewsInData"))return;const t=e.model.schema,n=e.conversion,s=this.editor.plugins.get(je),o=this.editor.plugins.get(is),r=e.config.get("mediaEmbed.elementName");o.registerBlockElement({model:"media",view:r}),s.on("register:figure",()=>{n.for("upcast").add(wB(s))}),s.on(`register:${r}`,(a,c)=>{c.model==="media"&&(t.extend("media",{allowAttributes:[Nt(r),"htmlFigureAttributes"]}),n.for("upcast").add(pB(s,r)),n.for("dataDowncast").add(_B(r)),a.stop())})}}function pB(i,e){const t=(n,s,o)=>{const r=s.viewItem;a(r,Nt(e));function a(c,l){const x=i.processViewAttributes(c,o);x&&o.writer.setAttribute(l,x,s.modelRange)}};return n=>{n.on(`element:${e}`,t,{priority:"low"})}}function wB(i){return e=>{e.on("element:figure",(t,n,s)=>{const o=n.viewItem;if(!n.modelRange||!o.hasClass("media"))return;const r=i.processViewAttributes(o,s);r&&s.writer.setAttribute("htmlFigureAttributes",r,n.modelRange)},{priority:"low"})}}function _B(i){return e=>{t(i,Nt(i)),t("figure","htmlFigureAttributes");function t(n,s){e.on(`attribute:${s}:media`,(o,r,a)=>{if(!a.consumable.consume(r.item,o.name))return;const{attributeOldValue:c,attributeNewValue:l}=r,x=a.mapper.toViewElement(r.item),d=Lr(a.writer,x,n);bi(a.writer,c,l,d)})}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vB extends y{static get requires(){return[je]}static get pluginName(){return"ScriptElementSupport"}init(){const e=this.editor.plugins.get(je);e.on("register:script",(t,n)=>{const s=this.editor,o=s.model.schema,r=s.conversion;o.register("htmlScript",n.modelSchema),o.extend("htmlScript",{allowAttributes:["htmlScriptAttributes","htmlContent"],isContent:!0}),s.data.registerRawContentMatcher({name:"script"}),r.for("upcast").elementToElement({view:"script",model:yl(n)}),r.for("upcast").add(ao(n,e)),r.for("downcast").elementToElement({model:"htmlScript",view:(a,{writer:c})=>ha("script",a,c)}),r.for("downcast").add(co(n)),t.stop()})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yB extends y{static get requires(){return[je]}static get pluginName(){return"TableElementSupport"}init(){const e=this.editor;if(!e.plugins.has("TableEditing"))return;const t=e.model.schema,n=e.conversion,s=e.plugins.get(je),o=e.plugins.get("TableUtils");s.on("register:figure",()=>{n.for("upcast").add(TB(s))}),s.on("register:table",(r,a)=>{a.model==="table"&&(t.extend("table",{allowAttributes:["htmlTableAttributes","htmlFigureAttributes","htmlTheadAttributes","htmlTbodyAttributes"]}),n.for("upcast").add(kB(s)),n.for("downcast").add(AB()),e.model.document.registerPostFixer(CB(e.model,o)),r.stop())})}}function CB(i,e){return t=>{const n=i.document.differ.getChanges();let s=!1;for(const o of n){if(o.type!="attribute"||o.attributeKey!="headingRows")continue;const r=o.range.start.nodeAfter,a=r.getAttribute("htmlTheadAttributes"),c=r.getAttribute("htmlTbodyAttributes");a&&!o.attributeNewValue?(t.removeAttribute("htmlTheadAttributes",r),s=!0):c&&o.attributeNewValue==e.getRows(r)&&(t.removeAttribute("htmlTbodyAttributes",r),s=!0)}return s}}function kB(i){return e=>{e.on("element:table",(t,n,s)=>{if(!n.modelRange)return;const o=n.viewItem;r(o,"htmlTableAttributes");for(const a of o.getChildren())a.is("element","thead")&&r(a,"htmlTheadAttributes"),a.is("element","tbody")&&r(a,"htmlTbodyAttributes");function r(a,c){const l=i.processViewAttributes(a,s);l&&s.writer.setAttribute(c,l,n.modelRange)}},{priority:"low"})}}function TB(i){return e=>{e.on("element:figure",(t,n,s)=>{const o=n.viewItem;if(!n.modelRange||!o.hasClass("table"))return;const r=i.processViewAttributes(o,s);r&&s.writer.setAttribute("htmlFigureAttributes",r,n.modelRange)},{priority:"low"})}}function AB(){return i=>{e("table","htmlTableAttributes"),e("figure","htmlFigureAttributes"),e("thead","htmlTheadAttributes"),e("tbody","htmlTbodyAttributes");function e(t,n){i.on(`attribute:${n}:table`,(s,o,r)=>{if(!r.consumable.test(o.item,s.name))return;const a=r.mapper.toViewElement(o.item),c=Lr(r.writer,a,t);c&&(r.consumable.consume(o.item,s.name),bi(r.writer,o.attributeOldValue,o.attributeNewValue,c))})}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class EB extends y{static get requires(){return[je]}static get pluginName(){return"StyleElementSupport"}init(){const e=this.editor.plugins.get(je);e.on("register:style",(t,n)=>{const s=this.editor,o=s.model.schema,r=s.conversion;o.register("htmlStyle",n.modelSchema),o.extend("htmlStyle",{allowAttributes:["htmlStyleAttributes","htmlContent"],isContent:!0}),s.data.registerRawContentMatcher({name:"style"}),r.for("upcast").elementToElement({view:"style",model:yl(n)}),r.for("upcast").add(ao(n,e)),r.for("downcast").elementToElement({model:"htmlStyle",view:(a,{writer:c})=>ha("style",a,c)}),r.for("downcast").add(co(n)),t.stop()})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class SB extends y{static get requires(){return[je]}static get pluginName(){return"DocumentListElementSupport"}init(){const e=this.editor;if(!e.plugins.has("DocumentListEditing"))return;const t=e.model.schema,n=e.conversion,s=e.plugins.get(je),o=e.plugins.get("DocumentListEditing"),r=["ul","ol","li"];o.registerDowncastStrategy({scope:"item",attributeName:"htmlLiAttributes",setAttributeOnDowncast:xn}),o.registerDowncastStrategy({scope:"list",attributeName:"htmlUlAttributes",setAttributeOnDowncast:xn}),o.registerDowncastStrategy({scope:"list",attributeName:"htmlOlAttributes",setAttributeOnDowncast:xn}),s.on("register",(a,c)=>{if(!r.includes(c.view)||(a.stop(),t.checkAttribute("$block","htmlLiAttributes")))return;const l=r.map(x=>Nt(x));t.extend("$listItem",{allowAttributes:l}),n.for("upcast").add(x=>{x.on("element:ul",o0("htmlUlAttributes",s),{priority:"low"}),x.on("element:ol",o0("htmlOlAttributes",s),{priority:"low"}),x.on("element:li",o0("htmlLiAttributes",s),{priority:"low"})})}),o.on("postFixer",(a,{listNodes:c,writer:l})=>{for(const{node:x,previousNodeInList:d}of c)if(d){if(d.getAttribute("listType")==x.getAttribute("listType")){const u=Du(d.getAttribute("listType")),f=d.getAttribute(u);!Zi(x.getAttribute(u),f)&&l.model.schema.checkAttribute(x,u)&&(l.setAttribute(u,f,x),a.return=!0)}if(d.getAttribute("listItemId")==x.getAttribute("listItemId")){const u=d.getAttribute("htmlLiAttributes");!Zi(x.getAttribute("htmlLiAttributes"),u)&&l.model.schema.checkAttribute(x,"htmlLiAttributes")&&(l.setAttribute("htmlLiAttributes",u,x),a.return=!0)}}}),o.on("postFixer",(a,{listNodes:c,writer:l})=>{for(const{node:x}of c){const d=x.getAttribute("listType");d!=="numbered"&&x.getAttribute("htmlOlAttributes")&&(l.removeAttribute("htmlOlAttributes",x),a.return=!0),d==="numbered"&&x.getAttribute("htmlUlAttributes")&&(l.removeAttribute("htmlUlAttributes",x),a.return=!0)}})}afterInit(){const e=this.editor;if(!e.commands.get("indentList"))return;const t=e.commands.get("indentList");this.listenTo(t,"afterExecute",(n,s)=>{e.model.change(o=>{for(const r of s){const a=Du(r.getAttribute("listType"));e.model.schema.checkAttribute(r,a)&&o.setAttribute(a,{},r)}})})}}function o0(i,e){return(t,n,s)=>{const o=n.viewItem;n.modelRange||Object.assign(n,s.convertChildren(n.viewItem,n.modelCursor));const r=e.processViewAttributes(o,s);for(const a of n.modelRange.getItems({shallow:!0}))a.hasAttribute("listItemId")&&(a.hasAttribute(i)||s.writer.model.schema.checkAttribute(a,i)&&s.writer.setAttribute(i,r||{},a))}}function Du(i){return i==="numbered"?"htmlOlAttributes":"htmlUlAttributes"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class IB extends y{static get requires(){return[je,is]}static get pluginName(){return"CustomElementSupport"}init(){const e=this.editor.plugins.get(je),t=this.editor.plugins.get(is);e.on("register:$customElement",(n,s)=>{n.stop();const o=this.editor,r=o.model.schema,a=o.conversion,c=o.editing.view.domConverter.unsafeElements,l=o.data.htmlProcessor.domConverter.preElements;r.register(s.model,s.modelSchema),r.extend(s.model,{allowAttributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"],isContent:!0}),a.for("upcast").elementToElement({view:/.*/,model:(x,d)=>{if(x.name=="$comment"||!PB(x.name)||t.getDefinitionsForView(x.name).size)return null;c.includes(x.name)||c.push(x.name),l.includes(x.name)||l.push(x.name);const u=d.writer.createElement(s.model,{htmlElementName:x.name}),f=e.processViewAttributes(x,d);f&&d.writer.setAttribute("htmlCustomElementAttributes",f,u);const b=new $t(x.document).createDocumentFragment(x),p=o.data.processor.toData(b);d.writer.setAttribute("htmlContent",p,u);for(const{item:C}of o.editing.view.createRangeIn(x))d.consumable.consume(C,{name:!0});return u},converterPriority:"low"}),a.for("editingDowncast").elementToElement({model:{name:s.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(x,{writer:d})=>{const u=x.getAttribute("htmlElementName"),f=d.createRawElement(u);return x.hasAttribute("htmlCustomElementAttributes")&&xn(d,x.getAttribute("htmlCustomElementAttributes"),f),f}}),a.for("dataDowncast").elementToElement({model:{name:s.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(x,{writer:d})=>{const u=x.getAttribute("htmlElementName"),f=x.getAttribute("htmlContent"),m=d.createRawElement(u,null,(b,p)=>{p.setContentOf(b,f);const C=b.firstChild;for(C.remove();C.firstChild;)b.appendChild(C.firstChild)});return x.hasAttribute("htmlCustomElementAttributes")&&xn(d,x.getAttribute("htmlCustomElementAttributes"),m),m}})})}}function PB(i){try{document.createElement(i)}catch{return!1}return!0}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class RB extends y{static get pluginName(){return"GeneralHtmlSupport"}static get requires(){return[je,aB,xB,dB,uB,bB,vB,yB,EB,SB,IB]}init(){const e=this.editor,t=e.plugins.get(je);t.loadAllowedEmptyElementsConfig(e.config.get("htmlSupport.allowEmpty")||[]),t.loadAllowedConfig(e.config.get("htmlSupport.allow")||[]),t.loadDisallowedConfig(e.config.get("htmlSupport.disallow")||[])}getGhsAttributeNameForElement(e){const t=this.editor.plugins.get("DataSchema"),n=Array.from(t.getDefinitionsForView(e,!1)),s=n.find(o=>o.isInline&&!n[0].isObject);return s?s.model:Nt(e)}addModelHtmlClass(e,t,n){const s=this.editor.model,o=this.getGhsAttributeNameForElement(e);s.change(r=>{for(const a of Fi(s,n,o))Mi(r,a,o,"classes",c=>{for(const l of ge(t))c.add(l)})})}removeModelHtmlClass(e,t,n){const s=this.editor.model,o=this.getGhsAttributeNameForElement(e);s.change(r=>{for(const a of Fi(s,n,o))Mi(r,a,o,"classes",c=>{for(const l of ge(t))c.delete(l)})})}setModelHtmlAttributes(e,t,n){const s=this.editor.model,o=this.getGhsAttributeNameForElement(e);s.change(r=>{for(const a of Fi(s,n,o))Mi(r,a,o,"attributes",c=>{for(const[l,x]of Object.entries(t))c.set(l,x)})})}removeModelHtmlAttributes(e,t,n){const s=this.editor.model,o=this.getGhsAttributeNameForElement(e);s.change(r=>{for(const a of Fi(s,n,o))Mi(r,a,o,"attributes",c=>{for(const l of ge(t))c.delete(l)})})}setModelHtmlStyles(e,t,n){const s=this.editor.model,o=this.getGhsAttributeNameForElement(e);s.change(r=>{for(const a of Fi(s,n,o))Mi(r,a,o,"styles",c=>{for(const[l,x]of Object.entries(t))c.set(l,x)})})}removeModelHtmlStyles(e,t,n){const s=this.editor.model,o=this.getGhsAttributeNameForElement(e);s.change(r=>{for(const a of Fi(s,n,o))Mi(r,a,o,"styles",c=>{for(const l of ge(t))c.delete(l)})})}}function*Fi(i,e,t){if(e)if(!(Symbol.iterator in e)&&e.is("documentSelection")&&e.isCollapsed)i.schema.checkAttributeInSelection(e,t)&&(yield e);else for(const n of VB(i,e,t))yield*n.getItems({shallow:!0})}function VB(i,e,t){return!(Symbol.iterator in e)&&(e.is("node")||e.is("$text")||e.is("$textProxy"))?i.schema.checkAttribute(e,t)?[i.createRangeOn(e)]:[]:i.schema.getValidRanges(i.createSelection(e).getRanges(),t)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zt{constructor(e,t){this._startElement=e,this._referenceIndent=e.getAttribute("listIndent"),this._isForward=t.direction=="forward",this._includeSelf=!!t.includeSelf,this._sameAttributes=ge(t.sameAttributes||[]),this._sameIndent=!!t.sameIndent,this._lowerIndent=!!t.lowerIndent,this._higherIndent=!!t.higherIndent}static first(e,t){const s=new this(e,t)[Symbol.iterator]();return Be(s)}*[Symbol.iterator](){const e=[];for(const{node:t}of To(this._getStartNode(),this._isForward?"forward":"backward")){const n=t.getAttribute("listIndent");if(n<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=n}else if(n>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){e.push(t);continue}}else{if(!this._sameIndent){if(this._higherIndent){e.length&&(yield*e,e.length=0);break}continue}if(this._sameAttributes.some(s=>t.getAttribute(s)!==this._startElement.getAttribute(s)))break}e.length&&(yield*e,e.length=0),yield t}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}function*To(i,e="forward"){const t=e=="forward",n=[];let s=null;for(;Oe(i);){let o=null;if(s){const r=i.getAttribute("listIndent"),a=s.getAttribute("listIndent");r>a?n[a]=s:r<a?(o=n[r],n.length=r):o=s}yield{node:i,previous:s,previousNodeInList:o},s=i,i=t?i.nextSibling:i.previousSibling}}class BB{constructor(e){this._listHead=e}[Symbol.iterator](){return To(this._listHead,"forward")}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ss{static next(){return Vt()}}function Oe(i){return!!i&&i.is("element")&&i.hasAttribute("listItemId")}function Cl(i,e={}){return[...Gn(i,{...e,direction:"backward"}),...Gn(i,{...e,direction:"forward"})]}function Gn(i,e={}){const t=e.direction=="forward",n=Array.from(new zt(i,{...e,includeSelf:t,sameIndent:!0,sameAttributes:"listItemId"}));return t?n:n.reverse()}function OB(i){return Array.from(new zt(i,{direction:"forward",higherIndent:!0}))}function c1(i){const e=new zt(i,{sameIndent:!0,sameAttributes:"listType"}),t=new zt(i,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward"});return[...Array.from(e).reverse(),...t]}function pi(i){return!zt.first(i,{sameIndent:!0,sameAttributes:"listItemId"})}function zu(i){return!zt.first(i,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function Ao(i,e={}){i=ge(i);const t=e.withNested!==!1,n=new Set;for(const s of i)for(const o of Cl(s,{higherIndent:t}))n.add(o);return Ti(n)}function ma(i){i=ge(i);const e=new Set;for(const t of i)for(const n of c1(t))e.add(n);return Ti(e)}function kl(i,e){const t=Gn(i,{direction:"forward"}),n=ss.next();for(const s of t)e.setAttribute("listItemId",n,s);return t}function nc(i,e,t){const n={};for(const[o,r]of e.getAttributes())o.startsWith("list")&&(n[o]=r);const s=Gn(i,{direction:"forward"});for(const o of s)t.setAttributes(n,o);return s}function ic(i,e,{expand:t,indentBy:n=1}={}){i=ge(i);const s=t?Ao(i):i;for(const o of s){const r=o.getAttribute("listIndent")+n;r<0?ga(o,e):e.setAttribute("listIndent",r,o)}return s}function LB(i,e){i=ge(i);const t=Ao(i),n=new Set,s=Math.min(...t.map(r=>r.getAttribute("listIndent"))),o=new Map;for(const r of t)o.set(r,zt.first(r,{lowerIndent:!0}));for(const r of t){if(n.has(r))continue;n.add(r);const a=r.getAttribute("listIndent")-1;if(a<0){ga(r,e);continue}if(r.getAttribute("listIndent")==s){const c=FB(r,o.get(r),e);for(const l of c)n.add(l);if(c.length)continue}e.setAttribute("listIndent",a,r)}return Ti(n)}function ga(i,e){i=ge(i);for(const t of i)t.is("element","listItem")&&e.rename(t,"paragraph");for(const t of i)for(const n of t.getAttributeKeys())n.startsWith("list")&&e.removeAttribute(n,t);return i}function lo(i){if(!i.length)return!1;const e=i[0].getAttribute("listItemId");return e?!i.some(t=>t.getAttribute("listItemId")!=e):!1}function MB(i,e){const t=[];let n=Number.POSITIVE_INFINITY;for(const{node:s}of To(i.nextSibling,"forward")){const o=s.getAttribute("listIndent");if(o==0)break;o<n&&(n=o);const r=o-n;e.setAttribute("listIndent",r,s),t.push(s)}return t}function Ti(i){return Array.from(i).filter(e=>e.root.rootName!=="$graveyard").sort((e,t)=>e.index-t.index)}function xo(i){const e=i.document.selection.getSelectedElement();return e&&i.schema.isObject(e)&&i.schema.isBlock(e)?e:null}function r0(i,e){return e.checkChild(i.parent,"listItem")&&e.checkChild(i,"$text")&&!e.isObject(i)}function FB(i,e,t){return Gn(e,{direction:"forward"}).pop().index>i.index?nc(i,e,t):[]}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hu extends q{constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,t=$u(e.document.selection);e.change(n=>{const s=[];lo(t)&&!pi(t[0])?(this._direction=="forward"&&s.push(...ic(t,n)),s.push(...kl(t[0],n))):this._direction=="forward"?s.push(...ic(t,n,{expand:!0})):s.push(...LB(t,n));for(const o of s){if(!o.hasAttribute("listType"))continue;const r=zt.first(o,{sameIndent:!0});r&&n.setAttribute("listType",r.getAttribute("listType"),o)}this._fireAfterExecute(s)})}_fireAfterExecute(e){this.fire("afterExecute",Ti(new Set(e)))}_checkEnabled(){let e=$u(this.editor.model.document.selection),t=e[0];if(!t)return!1;if(this._direction=="backward"||lo(e)&&!pi(e[0]))return!0;e=Ao(e),t=e[0];const n=zt.first(t,{sameIndent:!0});return n?n.getAttribute("listType")==t.getAttribute("listType"):!1}}function $u(i){const e=Array.from(i.getSelectedBlocks()),t=e.findIndex(n=>!Oe(n));return t!=-1&&(e.length=t),e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Uu extends q{constructor(e,t){super(e),this.type=t}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,n=t.document,s=xo(t),o=Array.from(n.selection.getSelectedBlocks()).filter(a=>t.schema.checkAttribute(a,"listType")||r0(a,t.schema)),r=e.forceValue!==void 0?!e.forceValue:this.value;t.change(a=>{if(r){const c=o[o.length-1],l=Gn(c,{direction:"forward"}),x=[];l.length>1&&x.push(...kl(l[1],a)),x.push(...ga(o,a)),x.push(...MB(c,a)),this._fireAfterExecute(x)}else if((s||n.selection.isCollapsed)&&Oe(o[0])){const c=c1(s||o[0]);for(const l of c)a.setAttribute("listType",this.type,l);this._fireAfterExecute(c)}else{const c=[];for(const l of o)if(!l.hasAttribute("listType"))!l.is("element","listItem")&&r0(l,t.schema)&&a.rename(l,"listItem"),a.setAttributes({listIndent:0,listItemId:ss.next(),listType:this.type},l),c.push(l);else for(const x of Ao(l,{withNested:!1}))x.getAttribute("listType")!=this.type&&(a.setAttribute("listType",this.type,x),c.push(x));this._fireAfterExecute(c)}})}_fireAfterExecute(e){this.fire("afterExecute",Ti(new Set(e)))}_getValue(){const e=this.editor.model.document.selection,t=Array.from(e.getSelectedBlocks());if(!t.length)return!1;for(const n of t)if(n.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const e=this.editor.model,t=e.schema,n=e.document.selection,s=Array.from(n.getSelectedBlocks());if(!s.length)return!1;if(this.value)return!0;for(const o of s)if(t.checkAttribute(o,"listType")||r0(o,t))return!0;return!1}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wu extends q{constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:e=!1}={}){const t=this.editor.model,n=t.document.selection,s=[];t.change(o=>{const{firstElement:r,lastElement:a}=this._getMergeSubjectElements(n,e),c=r.getAttribute("listIndent")||0,l=a.getAttribute("listIndent"),x=a.getAttribute("listItemId");if(c!=l){const d=OB(a);s.push(...ic([a,...d],o,{indentBy:c-l,expand:c<l}))}if(e){let d=n;n.isCollapsed&&(d=o.createSelection(o.createRange(o.createPositionAt(r,"end"),o.createPositionAt(a,0)))),t.deleteContent(d,{doNotResetEntireContent:n.isCollapsed});const u=d.getLastPosition().parent,f=u.nextSibling;s.push(u),f&&f!==a&&f.getAttribute("listItemId")==x&&s.push(...nc(f,u,o))}else s.push(...nc(a,r,o));this._fireAfterExecute(s)})}_fireAfterExecute(e){this.fire("afterExecute",Ti(new Set(e)))}_checkEnabled(){const e=this.editor.model,t=e.document.selection,n=xo(e);if(t.isCollapsed||n){const s=n||t.getFirstPosition().parent;if(!Oe(s))return!1;const o=this._direction=="backward"?s.previousSibling:s.nextSibling;if(!o||lo([s,o]))return!1}else{const s=t.getLastPosition(),o=t.getFirstPosition();if(s.parent===o.parent||!Oe(s.parent))return!1}return!0}_getMergeSubjectElements(e,t){const n=this.editor.model,s=xo(n);let o,r;if(e.isCollapsed||s){const a=s||e.getFirstPosition().parent,c=pi(a);this._direction=="backward"?(r=a,c&&!t?o=zt.first(a,{sameIndent:!0,lowerIndent:!0}):o=a.previousSibling):(o=a,r=a.nextSibling)}else o=e.getFirstPosition().parent,r=e.getLastPosition().parent;return{firstElement:o,lastElement:r}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ju extends q{constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(t=>{const n=kl(this._getStartBlock(),t);this._fireAfterExecute(n)})}_fireAfterExecute(e){this.fire("afterExecute",Ti(new Set(e)))}_checkEnabled(){const e=this.editor.model.document.selection,t=this._getStartBlock();return e.isCollapsed&&Oe(t)&&!pi(t)}_getStartBlock(){const t=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?t:t.nextSibling}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NB extends y{static get pluginName(){return"DocumentListUtils"}expandListBlocksToCompleteList(e){return ma(e)}isFirstBlockOfListItem(e){return pi(e)}isListItemBlock(e){return Oe(e)}expandListBlocksToCompleteItems(e,t={}){return Ao(e,t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function l1(i){return i.is("element","ol")||i.is("element","ul")}function Mr(i){return i.is("element","li")}function DB(i){let e=0,t=i.parent;for(;t;){if(Mr(t))e++;else{const n=t.previousSibling;n&&Mr(n)&&e++}t=t.parent}return e}function zB(i,e,t,n=d1(t,e)){return i.createAttributeElement(x1(t),null,{priority:2*e/100-100,id:n})}function HB(i,e,t){return i.createAttributeElement("li",null,{priority:(2*e+1)/100-100,id:t})}function x1(i){return i=="numbered"?"ol":"ul"}function d1(i,e){return`list-${i}-${e}`}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Wt(i,e){const t=i.nodeBefore;if(Oe(t)){let n=t;for(const{node:s}of To(n,"backward"))if(n=s,e.has(n))return;e.set(t,n)}else{const n=i.nodeAfter;Oe(n)&&e.set(n,n)}}function $B(i,e){let t=0,n=-1,s=null,o=!1;for(const{node:r}of i){const a=r.getAttribute("listIndent");if(a>t){let c;s===null?(s=a-t,c=t):(s>a&&(s=a),c=a-s),c>n+1&&(c=n+1),e.setAttribute("listIndent",c,r),o=!0,n=c}else s=null,t=a+1,n=a}return o}function UB(i,e,t){const n=new Set;let s=!1;for(const{node:o}of i){if(n.has(o))continue;let r=o.getAttribute("listType"),a=o.getAttribute("listItemId");if(e.has(a)&&(a=ss.next()),e.add(a),o.is("element","listItem")){o.getAttribute("listItemId")!=a&&(t.setAttribute("listItemId",a,o),s=!0);continue}for(const c of Gn(o,{direction:"forward"}))n.add(c),c.getAttribute("listType")!=r&&(a=ss.next(),r=c.getAttribute("listType")),c.getAttribute("listItemId")!=a&&(t.setAttribute("listItemId",a,c),s=!0)}return s}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function WB(){return(i,e,t)=>{const{writer:n,schema:s}=t;if(!e.modelRange)return;const o=Array.from(e.modelRange.getItems({shallow:!0})).filter(d=>s.checkAttribute(d,"listItemId"));if(!o.length)return;const r=ss.next(),a=DB(e.viewItem);let c=e.viewItem.parent&&e.viewItem.parent.is("element","ol")?"numbered":"bulleted";const l=o[0].getAttribute("listType");l&&(c=l);const x={listItemId:r,listIndent:a,listType:c};for(const d of o)d.hasAttribute("listItemId")||n.setAttributes(x,d);o.length>1&&o[1].getAttribute("listItemId")!=x.listItemId&&t.keepEmptyElement(o[0])}}function qu(){return(i,e,t)=>{if(!t.consumable.test(e.viewItem,{name:!0}))return;const n=new $t(e.viewItem.document);for(const s of Array.from(e.viewItem.getChildren()))!Mr(s)&&!l1(s)&&n.remove(s)}}function jB(i,e,t,n){return()=>{const a=i.document.differ.getChanges(),c=[],l=new Map,x=new Set;for(const d of a)if(d.type=="insert"&&d.name!="$text")Wt(d.position,l),d.attributes.has("listItemId")?x.add(d.position.nodeAfter):Wt(d.position.getShiftedBy(d.length),l);else if(d.type=="remove"&&d.attributes.has("listItemId"))Wt(d.position,l);else if(d.type=="attribute"){const u=d.range.start.nodeAfter;t.includes(d.attributeKey)?(Wt(d.range.start,l),d.attributeNewValue===null?(Wt(d.range.start.getShiftedBy(1),l),o(u)&&c.push(u)):x.add(u)):Oe(u)&&o(u)&&c.push(u)}for(const d of l.values())c.push(...s(d,x));for(const d of new Set(c))e.reconvertItem(d)};function s(a,c){const l=[],x=new Set,d=[];for(const{node:u,previous:f}of To(a,"forward")){if(x.has(u))continue;const m=u.getAttribute("listIndent");f&&m<f.getAttribute("listIndent")&&(d.length=m+1),d[m]=Object.fromEntries(Array.from(u.getAttributes()).filter(([p])=>t.includes(p)));const b=Gn(u,{direction:"forward"});for(const p of b)x.add(p),(o(p,b)||r(p,d,c))&&l.push(p)}return l}function o(a,c){const l=e.mapper.toViewElement(a);if(!l)return!1;if(n.fire("checkElement",{modelElement:a,viewElement:l}))return!0;if(!a.is("element","paragraph")&&!a.is("element","listItem"))return!1;const d=u1(a,t,c);return d&&l.is("element","p")?!0:!!(!d&&l.is("element","span"))}function r(a,c,l){if(l.has(a))return!1;const x=e.mapper.toViewElement(a);let d=c.length-1;for(let u=x.parent;!u.is("editableElement");u=u.parent){const f=Mr(u),m=l1(u);if(!m&&!f)continue;const b=`checkAttributes:${f?"item":"list"}`;if(n.fire(b,{viewElement:u,modelAttributes:c[d]}))break;if(m&&(d--,d<0))return!1}return!0}}function Gu(i,e,t,{dataPipeline:n}={}){const s=YB(i);return(o,r,a)=>{const{writer:c,mapper:l,consumable:x}=a,d=r.item;if(!i.includes(r.attributeKey)||!s(d,x))return;const u=qB(d,l,t);GB(u,c,l),JB(u,c);const f=KB(d,u,e,c,{dataPipeline:n});ZB(d,f,e,c)}}function Ku(i,{dataPipeline:e}={}){return(t,{writer:n})=>{if(!u1(t,i))return null;if(!e)return n.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const s=n.createContainerElement("p");return n.setCustomProperty("dataPipeline:transparentRendering",!0,s),s}}function qB(i,e,t){const n=t.createRangeOn(i);return e.toViewRange(n).getTrimmed().end.nodeBefore}function GB(i,e,t){for(;i.parent.is("attributeElement")&&i.parent.getCustomProperty("listItemWrapper");)e.unwrap(e.createRangeIn(i.parent),i.parent);const n=e.createPositionBefore(i).getWalker({direction:"backward"}),s=[];for(const{item:o}of n){if(o.is("element")&&t.toModelElement(o))break;o.is("element")&&o.getCustomProperty("listItemMarker")&&s.push(o)}for(const o of s)e.remove(o)}function KB(i,e,t,n,{dataPipeline:s}){let o=n.createRangeOn(e);if(!pi(i))return o;for(const r of t){if(r.scope!="itemMarker")continue;const a=r.createElement(n,i,{dataPipeline:s});if(!a||(n.setCustomProperty("listItemMarker",!0,a),n.insert(o.start,a),o=n.createRange(n.createPositionBefore(a),n.createPositionAfter(e)),!r.createWrapperElement||!r.canWrapElement))continue;const c=r.createWrapperElement(n,i,{dataPipeline:s});n.setCustomProperty("listItemWrapper",!0,c),r.canWrapElement(i)?o=n.wrap(o,c):(o=n.wrap(n.createRangeOn(a),c),o=n.createRange(o.start,n.createPositionAfter(e)))}return o}function JB(i,e){let t=i.parent;for(;t.is("attributeElement")&&["ul","ol","li"].includes(t.name);){const n=t.parent;e.unwrap(e.createRangeOn(i),t),t=n}}function ZB(i,e,t,n){if(!i.hasAttribute("listIndent"))return;const s=i.getAttribute("listIndent");let o=i;for(let r=s;r>=0;r--){const a=HB(n,r,o.getAttribute("listItemId")),c=zB(n,r,o.getAttribute("listType"));for(const l of t)(l.scope=="list"||l.scope=="item")&&o.hasAttribute(l.attributeName)&&l.setAttributeOnDowncast(n,o.getAttribute(l.attributeName),l.scope=="list"?c:a);if(e=n.wrap(e,a),e=n.wrap(e,c),r==0||(o=zt.first(o,{lowerIndent:!0}),!o))break}}function YB(i){return(e,t)=>{const n=[];for(const s of i)e.hasAttribute(s)&&n.push(`attribute:${s}`);return n.every(s=>t.test(e,s)!==!1)?(n.forEach(s=>t.consume(e,s)),!0):!1}}function u1(i,e,t=Cl(i)){if(!Oe(i))return!1;for(const n of i.getAttributeKeys())if(!n.startsWith("selection:")&&!e.includes(n))return!1;return t.length<2}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const fr=["listType","listIndent","listItemId"];class sc extends y{static get pluginName(){return"DocumentListEditing"}static get requires(){return[ko,qn,NB,Zt]}constructor(e){super(e),this._downcastStrategies=[],e.config.define("list.multiBlock",!0)}init(){const e=this.editor,t=e.model,n=e.config.get("list.multiBlock");if(e.plugins.has("ListEditing"))throw new w("document-list-feature-conflict",this,{conflictPlugin:"ListEditing"});t.schema.register("$listItem",{allowAttributes:fr}),n?(t.schema.extend("$container",{allowAttributesOf:"$listItem"}),t.schema.extend("$block",{allowAttributesOf:"$listItem"}),t.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):t.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const s of fr)t.schema.setAttributeProperties(s,{copyOnReplace:!0});e.commands.add("numberedList",new Uu(e,"numbered")),e.commands.add("bulletedList",new Uu(e,"bulleted")),e.commands.add("indentList",new Hu(e,"forward")),e.commands.add("outdentList",new Hu(e,"backward")),e.commands.add("splitListItemBefore",new ju(e,"before")),e.commands.add("splitListItemAfter",new ju(e,"after")),n&&(e.commands.add("mergeListItemBackward",new Wu(e,"backward")),e.commands.add("mergeListItemForward",new Wu(e,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration()}afterInit(){const t=this.editor.commands,n=t.get("indent"),s=t.get("outdent");n&&n.registerChildCommand(t.get("indentList"),{priority:"high"}),s&&s.registerChildCommand(t.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(e){this._downcastStrategies.push(e)}getListAttributeNames(){return[...fr,...this._downcastStrategies.map(e=>e.attributeName)]}_setupDeleteIntegration(){const e=this.editor,t=e.commands.get("mergeListItemBackward"),n=e.commands.get("mergeListItemForward");this.listenTo(e.editing.view.document,"delete",(s,o)=>{const r=e.model.document.selection;xo(e.model)||e.model.change(()=>{const a=r.getFirstPosition();if(r.isCollapsed&&o.direction=="backward"){if(!a.isAtStart)return;const c=a.parent;if(!Oe(c))return;if(!zt.first(c,{sameAttributes:"listType",sameIndent:!0})&&c.getAttribute("listIndent")===0)zu(c)||e.execute("splitListItemAfter"),e.execute("outdentList");else{if(!t||!t.isEnabled)return;t.execute({shouldMergeOnBlocksContentLevel:Ju(e.model,"backward")})}o.preventDefault(),s.stop()}else{if(r.isCollapsed&&!r.getLastPosition().isAtEnd||!n||!n.isEnabled)return;n.execute({shouldMergeOnBlocksContentLevel:Ju(e.model,"forward")}),o.preventDefault(),s.stop()}})},{context:"li"})}_setupEnterIntegration(){const e=this.editor,t=e.model,n=e.commands,s=n.get("enter");this.listenTo(e.editing.view.document,"enter",(o,r)=>{const a=t.document,c=a.selection.getFirstPosition().parent;if(a.selection.isCollapsed&&Oe(c)&&c.isEmpty&&!r.isSoft){const l=pi(c),x=zu(c);l&&x?(e.execute("outdentList"),r.preventDefault(),o.stop()):l&&!x?(e.execute("splitListItemAfter"),r.preventDefault(),o.stop()):x&&(e.execute("splitListItemBefore"),r.preventDefault(),o.stop())}},{context:"li"}),this.listenTo(s,"afterExecute",()=>{const o=n.get("splitListItemBefore");if(o.refresh(),!o.isEnabled)return;const a=e.model.document.selection.getLastPosition().parent;Cl(a).length===2&&o.execute()})}_setupTabIntegration(){const e=this.editor;this.listenTo(e.editing.view.document,"tab",(t,n)=>{const s=n.shiftKey?"outdentList":"indentList";this.editor.commands.get(s).isEnabled&&(e.execute(s),n.stopPropagation(),n.preventDefault(),t.stop())},{context:"li"})}_setupConversion(){const e=this.editor,t=e.model,n=this.getListAttributeNames(),s=e.config.get("list.multiBlock"),o=s?"paragraph":"listItem";e.conversion.for("upcast").elementToElement({view:"li",model:(r,{writer:a})=>a.createElement(o,{listType:""})}).elementToElement({view:"p",model:(r,{writer:a})=>r.parent&&r.parent.is("element","li")?a.createElement(o,{listType:""}):null,converterPriority:"high"}).add(r=>{r.on("element:li",WB()),r.on("element:ul",qu(),{priority:"high"}),r.on("element:ol",qu(),{priority:"high"})}),s||e.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),e.conversion.for("editingDowncast").elementToElement({model:o,view:Ku(n),converterPriority:"high"}).add(r=>{r.on("attribute",Gu(n,this._downcastStrategies,t))}),e.conversion.for("dataDowncast").elementToElement({model:o,view:Ku(n,{dataPipeline:!0}),converterPriority:"high"}).add(r=>{r.on("attribute",Gu(n,this._downcastStrategies,t,{dataPipeline:!0}))}),this.listenTo(t.document,"change:data",jB(t,e.editing,n,this),{priority:"high"}),this.on("checkAttributes:item",(r,{viewElement:a,modelAttributes:c})=>{a.id!=c.listItemId&&(r.return=!0,r.stop())}),this.on("checkAttributes:list",(r,{viewElement:a,modelAttributes:c})=>{(a.name!=x1(c.listType)||a.id!=d1(c.listType,c.listIndent))&&(r.return=!0,r.stop())})}_setupModelPostFixing(){const e=this.editor.model,t=this.getListAttributeNames();e.document.registerPostFixer(n=>XB(e,n,t,this)),this.on("postFixer",(n,{listNodes:s,writer:o})=>{n.return=$B(s,o)||n.return},{priority:"high"}),this.on("postFixer",(n,{listNodes:s,writer:o,seenIds:r})=>{n.return=UB(s,r,o)||n.return},{priority:"high"})}_setupClipboardIntegration(){const e=this.editor.model,t=this.editor.plugins.get("ClipboardPipeline");this.listenTo(e,"insertContent",QB(e),{priority:"high"}),this.listenTo(t,"outputTransformation",(n,s)=>{e.change(o=>{const r=Array.from(s.content.getChildren()),a=r[r.length-1];if(r.length>1&&a.is("element")&&a.isEmpty&&r.slice(0,-1).every(Oe)&&o.remove(a),s.method=="copy"||s.method=="cut"){const c=Array.from(s.content.getChildren());lo(c)&&ga(c,o)}})})}}function XB(i,e,t,n){const s=i.document.differ.getChanges(),o=new Map,r=n.editor.config.get("list.multiBlock");let a=!1;for(const l of s){if(l.type=="insert"&&l.name!="$text"){const x=l.position.nodeAfter;if(!i.schema.checkAttribute(x,"listItemId"))for(const d of Array.from(x.getAttributeKeys()))t.includes(d)&&(e.removeAttribute(d,x),a=!0);Wt(l.position,o),l.attributes.has("listItemId")||Wt(l.position.getShiftedBy(l.length),o);for(const{item:d,previousPosition:u}of i.createRangeIn(x))Oe(d)&&Wt(u,o)}else l.type=="remove"?Wt(l.position,o):l.type=="attribute"&&t.includes(l.attributeKey)&&(Wt(l.range.start,o),l.attributeNewValue===null&&Wt(l.range.start.getShiftedBy(1),o));if(!r&&l.type=="attribute"&&fr.includes(l.attributeKey)){const x=l.range.start.nodeAfter;l.attributeNewValue===null&&x&&x.is("element","listItem")?(e.rename(x,"paragraph"),a=!0):l.attributeOldValue===null&&x&&x.is("element")&&x.name!="listItem"&&(e.rename(x,"listItem"),a=!0)}}const c=new Set;for(const l of o.values())a=n.fire("postFixer",{listNodes:new BB(l),listHead:l,writer:e,seenIds:c})||a;return a}function QB(i){return(e,[t,n])=>{const s=t.is("documentFragment")?Array.from(t.getChildren()):[t];if(!s.length)return;const r=(n?i.createSelection(n):i.document.selection).getFirstPosition();let a;if(Oe(r.parent))a=r.parent;else if(Oe(r.nodeBefore))a=r.nodeBefore;else return;i.change(c=>{const l=a.getAttribute("listType"),x=a.getAttribute("listIndent"),d=s[0].getAttribute("listIndent")||0,u=Math.max(x-d,0);for(const f of s){const m=Oe(f);a.is("element","listItem")&&f.is("element","paragraph")&&c.rename(f,"listItem"),c.setAttributes({listIndent:(m?f.getAttribute("listIndent"):0)+u,listItemId:m?f.getAttribute("listItemId"):ss.next(),listType:l},f)}})}}function Ju(i,e){const t=i.document.selection;if(!t.isCollapsed)return!xo(i);if(e==="forward")return!0;const s=t.getFirstPosition().parent,o=s.previousSibling;return i.schema.isObject(o)?!1:o.isEmpty?!0:lo([s,o])}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Zu(i,e,t,n){i.ui.componentFactory.add(e,s=>{const o=i.commands.get(e),r=new G(s);return r.set({label:t,icon:n,tooltip:!0,isToggleable:!0}),r.bind("isOn","isEnabled").to(o,"value","isEnabled"),r.on("execute",()=>{i.execute(e),i.editing.view.focus()}),r})}const Tl='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',Al='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eO extends y{static get pluginName(){return"ListUI"}init(){const e=this.editor.t;Zu(this.editor,"numberedList",e("Numbered List"),Tl),Zu(this.editor,"bulletedList",e("Bulleted List"),Al)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tO extends y{static get requires(){return[sc,eO]}static get pluginName(){return"DocumentList"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nO extends q{refresh(){const e=this._getValue();this.value=e,this.isEnabled=e!=null}execute({startIndex:e=1}={}){const t=this.editor.model,n=t.document;let s=Array.from(n.selection.getSelectedBlocks()).filter(o=>Oe(o)&&o.getAttribute("listType")=="numbered");s=ma(s),t.change(o=>{for(const r of s)o.setAttribute("listStart",e>=0?e:1,r)})}_getValue(){const t=this.editor.model.document,n=Be(t.selection.getSelectedBlocks());return n&&Oe(n)&&n.getAttribute("listType")=="numbered"?n.getAttribute("listStart"):null}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const f1={},h1={},m1={},g1=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:i,typeAttribute:e,listType:t}of g1)f1[i]=t,h1[i]=e,e&&(m1[e]=i);function b1(){return g1.map(i=>i.listStyle)}function El(i){return f1[i]||null}function p1(i){return m1[i]||null}function oc(i){return h1[i]||null}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iO extends q{constructor(e,t,n){super(e),this.defaultType=t,this._supportedTypes=n}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,n=t.document;t.change(s=>{this._tryToConvertItemsToList(e);let o=Array.from(n.selection.getSelectedBlocks()).filter(r=>r.hasAttribute("listType"));if(o.length){o=ma(o);for(const r of o)s.setAttribute("listStyle",e.type||this.defaultType,r)}})}isStyleTypeSupported(e){return this._supportedTypes?this._supportedTypes.includes(e):!0}_getValue(){const e=Be(this.editor.model.document.selection.getSelectedBlocks());return Oe(e)?e.getAttribute("listStyle"):null}_checkEnabled(){const e=this.editor,t=e.commands.get("numberedList"),n=e.commands.get("bulletedList");return t.isEnabled||n.isEnabled}_tryToConvertItemsToList(e){if(!e.type)return;const t=El(e.type);if(!t)return;const n=this.editor,s=`${t}List`;n.commands.get(s).value||n.execute(s)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sO extends q{refresh(){const e=this._getValue();this.value=e,this.isEnabled=e!=null}execute(e={}){const t=this.editor.model,n=t.document;let s=Array.from(n.selection.getSelectedBlocks()).filter(o=>Oe(o)&&o.getAttribute("listType")=="numbered");s=ma(s),t.change(o=>{for(const r of s)o.setAttribute("listReversed",!!e.reversed,r)})}_getValue(){const t=this.editor.model.document,n=Be(t.selection.getSelectedBlocks());return Oe(n)&&n.getAttribute("listType")=="numbered"?n.getAttribute("listReversed"):null}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yu(i){return(e,t,n)=>{const{writer:s,schema:o,consumable:r}=n;if(r.test(t.viewItem,i.viewConsumables)===!1)return;t.modelRange||Object.assign(t,n.convertChildren(t.viewItem,t.modelCursor));let a=!1;for(const c of t.modelRange.getItems({shallow:!0}))o.checkAttribute(c,i.attributeName)&&i.appliesToListItem(c)&&(c.hasAttribute(i.attributeName)||(s.setAttribute(i.attributeName,i.getAttributeOnUpcast(t.viewItem),c),a=!0));a&&r.consume(t.viewItem,i.viewConsumables)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oO extends y{static get pluginName(){return"DocumentListPropertiesUtils"}getAllSupportedStyleTypes(){return b1()}getListTypeFromListStyleType(e){return El(e)}getListStyleTypeFromTypeAttribute(e){return p1(e)}getTypeAttributeFromListStyleType(e){return oc(e)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ks="default";class rO extends y{static get requires(){return[sc,oO]}static get pluginName(){return"DocumentListPropertiesEditing"}constructor(e){super(e),e.config.define("list.properties",{styles:!0,startIndex:!1,reversed:!1})}init(){const e=this.editor,t=e.model,n=e.plugins.get(sc),s=e.config.get("list.properties"),o=aO(s);for(const r of o)r.addCommand(e),t.schema.extend("$listItem",{allowAttributes:r.attributeName}),n.registerDowncastStrategy({scope:"list",attributeName:r.attributeName,setAttributeOnDowncast(a,c,l){r.setAttributeOnDowncast(a,c,l)}});e.conversion.for("upcast").add(r=>{for(const a of o)r.on("element:ol",Yu(a)),r.on("element:ul",Yu(a))}),n.on("checkAttributes:list",(r,{viewElement:a,modelAttributes:c})=>{for(const l of o)l.getAttributeOnUpcast(a)!=c[l.attributeName]&&(r.return=!0,r.stop())}),this.listenTo(e.commands.get("indentList"),"afterExecute",(r,a)=>{t.change(c=>{for(const l of a)for(const x of o)x.appliesToListItem(l)&&c.setAttribute(x.attributeName,x.defaultValue,l)})}),n.on("postFixer",(r,{listNodes:a,writer:c})=>{for(const{node:l}of a)for(const x of o)x.hasValidAttribute(l)||(x.appliesToListItem(l)?c.setAttribute(x.attributeName,x.defaultValue,l):c.removeAttribute(x.attributeName,l),r.return=!0)}),n.on("postFixer",(r,{listNodes:a,writer:c})=>{for(const{node:l,previousNodeInList:x}of a)if(x&&x.getAttribute("listType")==l.getAttribute("listType"))for(const d of o){const{attributeName:u}=d;if(!d.appliesToListItem(l))continue;const f=x.getAttribute(u);l.getAttribute(u)!=f&&(c.setAttribute(u,f,l),r.return=!0)}})}}function aO(i){const e=[];if(i.styles){const t=typeof i.styles=="object"&&i.styles.useAttribute;e.push({attributeName:"listStyle",defaultValue:ks,viewConsumables:{styles:"list-style-type"},addCommand(n){let s=b1();t&&(s=s.filter(o=>!!oc(o))),n.commands.add("listStyle",new iO(n,ks,s))},appliesToListItem(n){return n.getAttribute("listType")=="numbered"||n.getAttribute("listType")=="bulleted"},hasValidAttribute(n){if(!this.appliesToListItem(n))return!n.hasAttribute("listStyle");if(!n.hasAttribute("listStyle"))return!1;const s=n.getAttribute("listStyle");return s==ks?!0:El(s)==n.getAttribute("listType")},setAttributeOnDowncast(n,s,o){if(s&&s!==ks)if(t){const r=oc(s);if(r){n.setAttribute("type",r,o);return}}else{n.setStyle("list-style-type",s,o);return}n.removeStyle("list-style-type",o),n.removeAttribute("type",o)},getAttributeOnUpcast(n){const s=n.getStyle("list-style-type");if(s)return s;const o=n.getAttribute("type");return o?p1(o):ks}})}return i.reversed&&e.push({attributeName:"listReversed",defaultValue:!1,viewConsumables:{attributes:"reversed"},addCommand(t){t.commands.add("listReversed",new sO(t))},appliesToListItem(t){return t.getAttribute("listType")=="numbered"},hasValidAttribute(t){return this.appliesToListItem(t)==t.hasAttribute("listReversed")},setAttributeOnDowncast(t,n,s){n?t.setAttribute("reversed","reversed",s):t.removeAttribute("reversed",s)},getAttributeOnUpcast(t){return t.hasAttribute("reversed")}}),i.startIndex&&e.push({attributeName:"listStart",defaultValue:1,viewConsumables:{attributes:"start"},addCommand(t){t.commands.add("listStart",new nO(t))},appliesToListItem(t){return t.getAttribute("listType")=="numbered"},hasValidAttribute(t){return this.appliesToListItem(t)==t.hasAttribute("listStart")},setAttributeOnDowncast(t,n,s){n==0||n>1?t.setAttribute("start",n,s):t.removeAttribute("start",s)},getAttributeOnUpcast(t){const n=t.getAttribute("start");return n>=0?n:1}}),e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cO extends D{constructor(e,t){super(e);const n=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),t&&this.children.addMany(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",n.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:n.if("isCollapsed","hidden"),"aria-labelledby":n.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}_createButtonView(){const e=new G(this.locale),t=e.bindTemplate;return e.set({withText:!0,icon:sl}),e.extendTemplate({attributes:{"aria-expanded":t.to("isOn",n=>String(n))}}),e.bind("label").to(this),e.bind("isOn").to(this,"isCollapsed",n=>!n),e.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lO extends D{constructor(e,{enabledProperties:t,styleButtonViews:n,styleGridAriaLabel:s}){super(e),this.stylesView=null,this.additionalPropertiesCollapsibleView=null,this.startIndexFieldView=null,this.reversedSwitchButtonView=null,this.focusTracker=new Se,this.keystrokes=new Le,this.focusables=new dt;const o=["ck","ck-list-properties"];this.children=this.createCollection(),this.focusCycler=new ut({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),t.styles?(this.stylesView=this._createStylesView(n,s),this.children.add(this.stylesView)):o.push("ck-list-properties_without-styles"),(t.startIndex||t.reversed)&&(this._addNumberedListPropertyViews(t),o.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:o},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const e of this.stylesView.children)this.stylesView.focusTracker.add(e.element);mo({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>U.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element);const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(e,t){const n=new D(this.locale);return n.children=n.createCollection(),n.children.addMany(e),n.setTemplate({tag:"div",attributes:{"aria-label":t,class:["ck","ck-list-styles-list"]},children:n.children}),n.children.delegate("execute").to(this),n.focus=function(){this.children.first.focus()},n.focusTracker=new Se,n.keystrokes=new Le,n.render(),n.keystrokes.listenTo(n.element),n}_addNumberedListPropertyViews(e){const t=this.locale.t,n=[];e.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),n.push(this.startIndexFieldView)),e.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),n.push(this.reversedSwitchButtonView)),e.styles?(this.additionalPropertiesCollapsibleView=new cO(this.locale,n),this.additionalPropertiesCollapsibleView.set({label:t("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(n,"isEnabled",(...s)=>s.some(o=>o)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(s,o,r)=>{r||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(n)}_createStartIndexField(){const e=this.locale.t,t=new Ge(this.locale,dI);return t.set({label:e("Start at"),class:"ck-numbered-list-properties__start-index"}),t.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),t.fieldView.on("input",()=>{const n=t.fieldView.element,s=n.valueAsNumber;Number.isNaN(s)||(n.checkValidity()?this.fire("listStart",{startIndex:s}):t.errorText=e("Start index must be greater than 0."))}),t}_createReversedSwitchButton(){const e=this.locale.t,t=new _o(this.locale);return t.set({withText:!0,label:e("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),t.delegate("execute").to(this,"listReversed"),t}}const xO='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>',dO='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>',uO='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>',fO='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>',hO='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>',mO='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>',gO='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>',bO='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>',pO='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wO extends y{static get pluginName(){return"ListPropertiesUI"}init(){const e=this.editor,t=e.locale.t,n=e.config.get("list.properties");n.styles&&e.ui.componentFactory.add("bulletedList",Xu({editor:e,parentCommandName:"bulletedList",buttonLabel:t("Bulleted List"),buttonIcon:Al,styleGridAriaLabel:t("Bulleted list styles toolbar"),styleDefinitions:[{label:t("Toggle the disc list style"),tooltip:t("Disc"),type:"disc",icon:xO},{label:t("Toggle the circle list style"),tooltip:t("Circle"),type:"circle",icon:dO},{label:t("Toggle the square list style"),tooltip:t("Square"),type:"square",icon:uO}]})),(n.styles||n.startIndex||n.reversed)&&e.ui.componentFactory.add("numberedList",Xu({editor:e,parentCommandName:"numberedList",buttonLabel:t("Numbered List"),buttonIcon:Tl,styleGridAriaLabel:t("Numbered list styles toolbar"),styleDefinitions:[{label:t("Toggle the decimal list style"),tooltip:t("Decimal"),type:"decimal",icon:fO},{label:t("Toggle the decimal with leading zero list style"),tooltip:t("Decimal with leading zero"),type:"decimal-leading-zero",icon:hO},{label:t("Toggle the lower–roman list style"),tooltip:t("Lower–roman"),type:"lower-roman",icon:mO},{label:t("Toggle the upper–roman list style"),tooltip:t("Upper-roman"),type:"upper-roman",icon:gO},{label:t("Toggle the lower–latin list style"),tooltip:t("Lower-latin"),type:"lower-latin",icon:bO},{label:t("Toggle the upper–latin list style"),tooltip:t("Upper-latin"),type:"upper-latin",icon:pO}]}))}}function Xu({editor:i,parentCommandName:e,buttonLabel:t,buttonIcon:n,styleGridAriaLabel:s,styleDefinitions:o}){const r=i.commands.get(e);return a=>{const c=Ne(a,Co),l=c.buttonView;return c.bind("isEnabled").to(r),c.class="ck-list-styles-dropdown",l.on("execute",()=>{i.execute(e),i.editing.view.focus()}),l.set({label:t,icon:n,tooltip:!0,isToggleable:!0}),l.bind("isOn").to(r,"value",x=>!!x),c.once("change:isOpen",()=>{const x=vO({editor:i,dropdownView:c,parentCommandName:e,styleGridAriaLabel:s,styleDefinitions:o});c.panelView.children.add(x)}),c.on("execute",()=>{i.editing.view.focus()}),c}}function _O({editor:i,listStyleCommand:e,parentCommandName:t}){const n=i.locale,s=i.commands.get(t);return({label:o,type:r,icon:a,tooltip:c})=>{const l=new G(n);return l.set({label:o,icon:a,tooltip:c}),e.on("change:value",()=>{l.isOn=e.value===r}),l.on("execute",()=>{s.value?e.value!==r?i.execute("listStyle",{type:r}):i.execute("listStyle",{type:e.defaultType}):i.model.change(()=>{i.execute("listStyle",{type:r})})}),l}}function vO({editor:i,dropdownView:e,parentCommandName:t,styleDefinitions:n,styleGridAriaLabel:s}){const o=i.locale,r=i.config.get("list.properties");let a=null;if(t!="numberedList"&&(r.startIndex=!1,r.reversed=!1),r.styles){const l=i.commands.get("listStyle"),x=_O({editor:i,parentCommandName:t,listStyleCommand:l}),d=typeof l.isStyleTypeSupported=="function"?u=>l.isStyleTypeSupported(u.type):()=>!0;a=n.filter(d).map(x)}const c=new lO(o,{styleGridAriaLabel:s,enabledProperties:r,styleButtonViews:a});if(r.styles&&xa(e,()=>c.stylesView.children.find(l=>l.isOn)),r.startIndex){const l=i.commands.get("listStart");c.startIndexFieldView.bind("isEnabled").to(l),c.startIndexFieldView.fieldView.bind("value").to(l),c.on("listStart",(x,d)=>i.execute("listStart",d))}if(r.reversed){const l=i.commands.get("listReversed");c.reversedSwitchButtonView.bind("isEnabled").to(l),c.reversedSwitchButtonView.bind("isOn").to(l,"value",x=>!!x),c.on("listReversed",()=>{const x=l.value;i.execute("listReversed",{reversed:!x})})}return c.delegate("execute").to(e),c}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yO extends y{static get requires(){return[rO,wO]}static get pluginName(){return"DocumentListProperties"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */po("Ctrl+Enter");const CO='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */po("Ctrl+Enter");/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ba extends q{constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=t.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,s=t.document.selection,o=e.value,r=e.batch,a=c=>{if(s.isCollapsed)o?c.setSelectionAttribute(this.attributeKey,o):c.removeSelectionAttribute(this.attributeKey);else{const l=t.schema.getValidRanges(s.getRanges(),this.attributeKey);for(const x of l)o?c.setAttribute(this.attributeKey,o,x):c.removeAttribute(this.attributeKey,x)}};r?t.enqueueChange(r,c=>{a(c)}):t.change(c=>{a(c)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Tt="fontSize",At="fontFamily",rn="fontColor",Tn="fontBackgroundColor";function w1(i,e){const t={model:{key:i,values:[]},view:{},upcastAlso:{}};for(const n of e)t.model.values.push(n.model),t.view[n.model]=n.view,n.upcastAlso&&(t.upcastAlso[n.model]=n.upcastAlso);return t}function _1(i){return e=>TO(e.getStyle(i))}function v1(i){return(e,{writer:t})=>t.createAttributeElement("span",{style:`${i}:${e}`},{priority:7})}function kO({dropdownView:i,colors:e,columns:t,removeButtonLabel:n,colorPickerLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerViewConfig:a}){const c=i.locale,l=new Tg(c,{colors:e,columns:t,removeButtonLabel:n,colorPickerLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerViewConfig:a});return i.colorSelectorView=l,i.panelView.children.add(l),l}function TO(i){return i.replace(/\s/g,"")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AO extends ba{constructor(e){super(e,At)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function y1(i){return i.map(EO).filter(e=>e!==void 0)}function EO(i){if(typeof i=="object")return i;if(i==="default")return{title:"Default",model:void 0};if(typeof i=="string")return SO(i)}function SO(i){const e=i.replace(/"|'/g,"").split(","),t=e[0],n=e.map(IO).join(", ");return{title:t,model:n,view:{name:"span",styles:{"font-family":n},priority:7}}}function IO(i){return i=i.trim(),i.indexOf(" ")>0&&(i=`'${i}'`),i}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class PO extends y{static get pluginName(){return"FontFamilyEditing"}constructor(e){super(e),e.config.define(At,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:At}),e.model.schema.setAttributeProperties(At,{isFormatting:!0,copyOnEnter:!0});const t=y1(e.config.get("fontFamily.options")).filter(s=>s.model),n=w1(At,t);e.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(n),e.commands.add(At,new AO(e))}_prepareAnyValueConverters(){const e=this.editor;e.conversion.for("downcast").attributeToElement({model:At,view:(t,{writer:n})=>n.createAttributeElement("span",{style:"font-family:"+t},{priority:7})}),e.conversion.for("upcast").elementToAttribute({model:{key:At,value:t=>t.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:At,value:t=>t.getAttribute("face")}})}}const RO='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class VO extends y{static get pluginName(){return"FontFamilyUI"}init(){const e=this.editor,t=e.t,n=this._getLocalizedOptions(),s=e.commands.get(At),o=t("Font Family");e.ui.componentFactory.add(At,r=>{const a=Ne(r);return Mn(a,()=>BO(n,s),{role:"menu",ariaLabel:o}),a.buttonView.set({label:o,icon:RO,tooltip:!0}),a.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),a.bind("isEnabled").to(s),this.listenTo(a,"execute",c=>{e.execute(c.source.commandName,{value:c.source.commandParam}),e.editing.view.focus()}),a})}_getLocalizedOptions(){const e=this.editor,t=e.t;return y1(e.config.get(At).options).map(s=>(s.title==="Default"&&(s.title=t("Default")),s))}}function BO(i,e){const t=new De;for(const n of i){const s={type:"button",model:new Rn({commandName:At,commandParam:n.model,label:n.title,role:"menuitemradio",withText:!0})};s.model.bind("isOn").to(e,"value",o=>o===n.model?!0:!o||!n.model?!1:o.split(",")[0].replace(/'/g,"").toLowerCase()===n.model.toLowerCase()),n.view&&typeof n.view!="string"&&n.view.styles&&s.model.set("labelStyle",`font-family: ${n.view.styles["font-family"]}`),t.add(s)}return t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OO extends y{static get requires(){return[PO,VO]}static get pluginName(){return"FontFamily"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class LO extends ba{constructor(e){super(e,Tt)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Sl(i){return i.map(e=>MO(e)).filter(e=>e!==void 0)}const Qu={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function MO(i){if(typeof i=="number"&&(i=String(i)),typeof i=="object"&&DO(i))return rc(i);const e=NO(i);if(e)return rc(e);if(i==="default")return{model:void 0,title:"Default"};if(!zO(i))return FO(i)}function FO(i){return typeof i=="string"&&(i={title:i,model:`${parseFloat(i)}px`}),i.view={name:"span",styles:{"font-size":i.model}},rc(i)}function rc(i){return i.view&&typeof i.view!="string"&&!i.view.priority&&(i.view.priority=7),i}function NO(i){return typeof i=="string"?Qu[i]:Qu[i.model]}function DO(i){return i.title&&i.model&&i.view}function zO(i){let e;if(typeof i=="object")if(i.model)e=parseFloat(i.model);else throw new w("font-size-invalid-definition",null,i);else e=parseFloat(i);return isNaN(e)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ef=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class HO extends y{static get pluginName(){return"FontSizeEditing"}constructor(e){super(e),e.config.define(Tt,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Tt}),e.model.schema.setAttributeProperties(Tt,{isFormatting:!0,copyOnEnter:!0});const t=e.config.get("fontSize.supportAllValues"),n=Sl(this.editor.config.get("fontSize.options")).filter(o=>o.model),s=w1(Tt,n);t?(this._prepareAnyValueConverters(s),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(s),e.commands.add(Tt,new LO(e))}_prepareAnyValueConverters(e){const t=this.editor,n=e.model.values.filter(s=>!ra(String(s))&&!ug(String(s)));if(n.length)throw new w("font-size-invalid-use-of-named-presets",null,{presets:n});t.conversion.for("downcast").attributeToElement({model:Tt,view:(s,{writer:o})=>{if(s)return o.createAttributeElement("span",{style:"font-size:"+s},{priority:7})}}),t.conversion.for("upcast").elementToAttribute({model:{key:Tt,value:s=>s.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:Tt,value:t=>{const n=t.getAttribute("size"),s=n[0]==="-"||n[0]==="+";let o=parseInt(n,10);s&&(o=3+o);const r=ef.length-1,a=Math.min(Math.max(o,0),r);return ef[a]}}})}}const $O='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class UO extends y{static get pluginName(){return"FontSizeUI"}init(){const e=this.editor,t=e.t,n=this._getLocalizedOptions(),s=e.commands.get(Tt),o=t("Font Size");e.ui.componentFactory.add(Tt,r=>{const a=Ne(r);return Mn(a,()=>WO(n,s),{role:"menu",ariaLabel:o}),a.buttonView.set({label:o,icon:$O,tooltip:!0}),a.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),a.bind("isEnabled").to(s),this.listenTo(a,"execute",c=>{e.execute(c.source.commandName,{value:c.source.commandParam}),e.editing.view.focus()}),a})}_getLocalizedOptions(){const e=this.editor,t=e.t,n={Default:t("Default"),Tiny:t("Tiny"),Small:t("Small"),Big:t("Big"),Huge:t("Huge")};return Sl(e.config.get(Tt).options).map(o=>{const r=n[o.title];return r&&r!=o.title&&(o=Object.assign({},o,{title:r})),o})}}function WO(i,e){const t=new De;for(const n of i){const s={type:"button",model:new Rn({commandName:Tt,commandParam:n.model,label:n.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};n.view&&typeof n.view!="string"&&(n.view.styles&&s.model.set("labelStyle",`font-size:${n.view.styles["font-size"]}`),n.view.classes&&s.model.set("class",`${s.model.class} ${n.view.classes}`)),s.model.bind("isOn").to(e,"value",o=>o===n.model),t.add(s)}return t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jO extends y{static get requires(){return[HO,UO]}static get pluginName(){return"FontSize"}normalizeSizeOptions(e){return Sl(e)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qO extends ba{constructor(e){super(e,rn)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class GO extends y{static get pluginName(){return"FontColorEditing"}constructor(e){super(e),e.config.define(rn,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:rn,value:_1("color")}}),e.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:rn,value:t=>t.getAttribute("color")}}),e.conversion.for("downcast").attributeToElement({model:rn,view:v1("color")}),e.commands.add(rn,new qO(e)),e.model.schema.extend("$text",{allowAttributes:rn}),e.model.schema.setAttributeProperties(rn,{isFormatting:!0,copyOnEnter:!0})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class C1 extends y{constructor(e,{commandName:t,componentName:n,icon:s,dropdownLabel:o}){super(e),this.commandName=t,this.componentName=n,this.icon=s,this.dropdownLabel=o,this.columns=e.config.get(`${this.componentName}.columns`),this.colorSelectorView=void 0}init(){const e=this.editor,t=e.locale,n=t.t,s=e.commands.get(this.commandName),o=e.config.get(this.componentName),r=Js(o.colors),a=Ks(t,r),c=o.documentColors,l=o.colorPicker!==!1;e.ui.componentFactory.add(this.componentName,x=>{const d=Ne(x);let u=!1;return this.colorSelectorView=kO({dropdownView:d,colors:a.map(f=>({label:f.label,color:f.model,options:{hasBorder:f.hasBorder}})),columns:this.columns,removeButtonLabel:n("Remove color"),colorPickerLabel:n("Color picker"),documentColorsLabel:c!==0?n("Document colors"):"",documentColorsCount:c===void 0?this.columns:c,colorPickerViewConfig:l?o.colorPicker||{}:!1}),this.colorSelectorView.bind("selectedColor").to(s,"value"),d.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),d.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),d.bind("isEnabled").to(s),this.colorSelectorView.on("execute",(f,m)=>{d.isOpen&&e.execute(this.commandName,{value:m.value,batch:this._undoStepBatch}),m.source!=="colorPicker"&&e.editing.view.focus(),m.source==="colorPickerSaveButton"&&(d.isOpen=!1)}),this.colorSelectorView.on("colorPicker:show",()=>{this._undoStepBatch=e.model.createBatch()}),this.colorSelectorView.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(d.isOpen=!1,e.execute("undo",this._undoStepBatch)),e.editing.view.focus()}),d.on("change:isOpen",(f,m,b)=>{u||(u=!0,d.colorSelectorView.appendUI()),b&&(c!==0&&this.colorSelectorView.updateDocumentColors(e.model,this.componentName),this.colorSelectorView.updateSelectedColors(),this.colorSelectorView.showColorGridsFragment())}),xa(d,()=>d.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(f=>f.isOn)),d})}}const KO='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JO extends C1{constructor(e){const t=e.locale.t;super(e,{commandName:rn,componentName:rn,icon:KO,dropdownLabel:t("Font Color")})}static get pluginName(){return"FontColorUI"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ZO extends y{static get requires(){return[GO,JO]}static get pluginName(){return"FontColor"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class YO extends ba{constructor(e){super(e,Tn)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XO extends y{static get pluginName(){return"FontBackgroundColorEditing"}constructor(e){super(e),e.config.define(Tn,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.data.addStyleProcessorRules(gl),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:Tn,value:_1("background-color")}}),e.conversion.for("downcast").attributeToElement({model:Tn,view:v1("background-color")}),e.commands.add(Tn,new YO(e)),e.model.schema.extend("$text",{allowAttributes:Tn}),e.model.schema.setAttributeProperties(Tn,{isFormatting:!0,copyOnEnter:!0})}}const QO='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eL extends C1{constructor(e){const t=e.locale.t;super(e,{commandName:Tn,componentName:Tn,icon:QO,dropdownLabel:t("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tL extends y{static get requires(){return[XO,eL]}static get pluginName(){return"FontBackgroundColor"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nL extends q{refresh(){const e=this.editor.model,t=e.schema,n=e.document.selection;this.isEnabled=iL(n,t,e)}execute(){const e=this.editor.model;e.change(t=>{const n=t.createElement("horizontalLine");e.insertObject(n,null,null,{setSelection:"after"})})}}function iL(i,e,t){const n=sL(i,t);return e.checkChild(n,"horizontalLine")}function sL(i,e){const n=fa(i,e).start.parent;return n.isEmpty&&!n.is("element","$root")?n.parent:n}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oL extends y{static get pluginName(){return"HorizontalLineEditing"}init(){const e=this.editor,t=e.model.schema,n=e.t,s=e.conversion;t.register("horizontalLine",{inheritAllFrom:"$blockObject"}),s.for("dataDowncast").elementToElement({model:"horizontalLine",view:(o,{writer:r})=>r.createEmptyElement("hr")}),s.for("editingDowncast").elementToStructure({model:"horizontalLine",view:(o,{writer:r})=>{const a=n("Horizontal line"),c=r.createContainerElement("div",null,r.createEmptyElement("hr"));return r.addClass("ck-horizontal-line",c),r.setCustomProperty("hr",!0,c),rL(c,r,a)}}),s.for("upcast").elementToElement({view:"hr",model:"horizontalLine"}),e.commands.add("horizontalLine",new nL(e))}}function rL(i,e,t){return e.setCustomProperty("horizontalLine",!0,i),ki(i,e,{label:t})}const k1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class aL extends y{static get pluginName(){return"HorizontalLineUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add("horizontalLine",n=>{const s=e.commands.get("horizontalLine"),o=new G(n);return o.set({label:t("Horizontal line"),icon:k1,tooltip:!0}),o.bind("isEnabled").to(s,"isEnabled"),this.listenTo(o,"execute",()=>{e.execute("horizontalLine"),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cL extends y{static get requires(){return[oL,aL,Yn]}static get pluginName(){return"HorizontalLine"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lL extends q{refresh(){const e=this.editor.model,t=e.schema,n=e.document.selection,s=tf(n);this.isEnabled=xL(n,t,e),this.value=s?s.getAttribute("value")||"":null}execute(e){const t=this.editor.model,n=t.document.selection;t.change(s=>{let o;this.value!==null?o=tf(n):(o=s.createElement("rawHtml"),t.insertObject(o,null,null,{setSelection:"on"})),s.setAttribute("value",e,o)})}}function xL(i,e,t){const n=dL(i,t);return e.checkChild(n,"rawHtml")}function dL(i,e){const n=fa(i,e).start.parent;return n.isEmpty&&!n.is("rootElement")?n.parent:n}function tf(i){const e=i.getSelectedElement();return e&&e.is("element","rawHtml")?e:null}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uL extends y{static get pluginName(){return"HtmlEmbedEditing"}constructor(e){super(e),this._widgetButtonViewReferences=new Set,e.config.define("htmlEmbed",{showPreviews:!1,sanitizeHtml:t=>(be("html-embed-provide-sanitize-function"),{html:t,hasChanged:!1})})}init(){const e=this.editor;e.model.schema.register("rawHtml",{inheritAllFrom:"$blockObject",allowAttributes:["value"]}),e.commands.add("htmlEmbed",new lL(e)),this._setupConversion()}_setupConversion(){const e=this.editor,t=e.t,n=e.editing.view,s=this._widgetButtonViewReferences,o=e.config.get("htmlEmbed");this.editor.editing.view.on("render",()=>{for(const x of s){if(x.element&&x.element.isConnected)return;x.destroy(),s.delete(x)}},{priority:"lowest"}),e.data.registerRawContentMatcher({name:"div",classes:"raw-html-embed"}),e.conversion.for("upcast").elementToElement({view:{name:"div",classes:"raw-html-embed"},model:(x,{writer:d})=>d.createElement("rawHtml",{value:x.getCustomProperty("$rawContent")})}),e.conversion.for("dataDowncast").elementToElement({model:"rawHtml",view:(x,{writer:d})=>d.createRawElement("div",{class:"raw-html-embed"},function(u){u.innerHTML=x.getAttribute("value")||""})}),e.conversion.for("editingDowncast").elementToStructure({model:{name:"rawHtml",attributes:["value"]},view:(x,{writer:d})=>{let u,f,m;const b=d.createRawElement("div",{class:"raw-html-embed__content-wrapper"},function(_){u=_,r({editor:e,domElement:_,state:f,props:m}),u.addEventListener("mousedown",()=>{if(f.isEditable){const R=e.model;R.document.selection.getSelectedElement()!==x&&R.change(I=>I.setSelection(x,"on"))}},!0)}),p={makeEditable(){f=Object.assign({},f,{isEditable:!0}),r({domElement:u,editor:e,state:f,props:m}),n.change(_=>{_.setAttribute("data-cke-ignore-events","true",b)}),u.querySelector("textarea").focus()},save(_){_!==f.getRawHtmlValue()?(e.execute("htmlEmbed",_),e.editing.view.focus()):this.cancel()},cancel(){f=Object.assign({},f,{isEditable:!1}),r({domElement:u,editor:e,state:f,props:m}),e.editing.view.focus(),n.change(_=>{_.removeAttribute("data-cke-ignore-events",b)})}};f={showPreviews:o.showPreviews,isEditable:!1,getRawHtmlValue:()=>x.getAttribute("value")||""},m={sanitizeHtml:o.sanitizeHtml,textareaPlaceholder:t("Paste raw HTML here..."),onEditClick(){p.makeEditable()},onSaveClick(_){p.save(_)},onCancelClick(){p.cancel()}};const C=d.createContainerElement("div",{class:"raw-html-embed","data-html-embed-label":t("HTML snippet"),dir:e.locale.uiLanguageDirection},b);return d.setCustomProperty("rawHtmlApi",p,C),d.setCustomProperty("rawHtml",!0,C),ki(C,d,{label:t("HTML snippet"),hasSelectionHandle:!0})}});function r({editor:x,domElement:d,state:u,props:f}){d.textContent="";const m=d.ownerDocument;let b;if(u.isEditable){const C={isDisabled:!1,placeholder:f.textareaPlaceholder};b=c({domDocument:m,state:u,props:C}),d.append(b)}else if(u.showPreviews){const C={sanitizeHtml:f.sanitizeHtml};d.append(l({domDocument:m,state:u,props:C,editor:x}))}else{const C={isDisabled:!0,placeholder:f.textareaPlaceholder};d.append(c({domDocument:m,state:u,props:C}))}const p={onEditClick:f.onEditClick,onSaveClick:()=>{f.onSaveClick(b.value)},onCancelClick:f.onCancelClick};d.prepend(a({editor:x,domDocument:m,state:u,props:p}))}function a({editor:x,domDocument:d,state:u,props:f}){const m=Hn(d,"div",{class:"raw-html-embed__buttons-wrapper"});if(u.isEditable){const b=a0(x,"save",f.onSaveClick),p=a0(x,"cancel",f.onCancelClick);m.append(b.element,p.element),s.add(b).add(p)}else{const b=a0(x,"edit",f.onEditClick);m.append(b.element),s.add(b)}return m}function c({domDocument:x,state:d,props:u}){const f=Hn(x,"textarea",{placeholder:u.placeholder,class:"ck ck-reset ck-input ck-input-text raw-html-embed__source"});return f.disabled=u.isDisabled,f.value=d.getRawHtmlValue(),f}function l({editor:x,domDocument:d,state:u,props:f}){const m=f.sanitizeHtml(u.getRawHtmlValue()),b=u.getRawHtmlValue().length>0?t("No preview available"):t("Empty snippet content"),p=Hn(d,"div",{class:"ck ck-reset_all raw-html-embed__preview-placeholder"},b),C=Hn(d,"div",{class:"raw-html-embed__preview-content",dir:x.locale.contentLanguageDirection}),R=d.createRange().createContextualFragment(m.html);return C.appendChild(R),Hn(d,"div",{class:"raw-html-embed__preview"},[p,C])}}}function a0(i,e,t){const{t:n}=i.locale,s=new G(i.locale),o=i.commands.get("htmlEmbed");return s.set({class:`raw-html-embed__${e}-button`,icon:K.pencil,tooltip:!0,tooltipPosition:i.locale.uiLanguageDirection==="rtl"?"e":"w"}),s.render(),e==="edit"?(s.set({icon:K.pencil,label:n("Edit source")}),s.bind("isEnabled").to(o)):e==="save"?(s.set({icon:K.check,label:n("Save changes")}),s.bind("isEnabled").to(o)):s.set({icon:K.cancel,label:n("Cancel")}),s.on("execute",t),s}const T1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fL extends y{static get pluginName(){return"HtmlEmbedUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add("htmlEmbed",n=>{const s=e.commands.get("htmlEmbed"),o=new G(n);return o.set({label:t("Insert HTML"),icon:T1,tooltip:!0}),o.bind("isEnabled").to(s,"isEnabled"),this.listenTo(o,"execute",()=>{e.execute("htmlEmbed"),e.editing.view.focus(),e.editing.view.document.selection.getSelectedElement().getCustomProperty("rawHtmlApi").makeEditable()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hL extends y{static get requires(){return[uL,fL,Yn]}static get pluginName(){return"HtmlEmbed"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function mL(i){return i.createContainerElement("span",{class:"image-inline"},i.createEmptyElement("img"))}function nf(i){return i.createContainerElement("figure",{class:"image"},[i.createEmptyElement("img"),i.createSlot("children")])}function A1(i,e){const t=i.plugins.get("ImageUtils"),n=i.plugins.has("ImageInlineEditing")&&i.plugins.has("ImageBlockEditing");return o=>t.isInlineImageView(o)?n&&(o.getStyle("display")=="block"||o.findAncestor(t.isBlockImageView)?"imageBlock":"imageInline")!==e?null:s(o):null;function s(o){const r={name:!0};return o.hasAttribute("src")&&(r.attributes=["src"]),r}}function Il(i,e){const t=Be(e.getSelectedBlocks());return!t||i.isObject(t)||t.isEmpty&&t.name!="listItem"?"imageBlock":"imageInline"}function Fr(i){return i&&i.endsWith("px")?parseInt(i):null}function Nr(i){const e=Fr(i.getStyle("width")),t=Fr(i.getStyle("height"));return!!(e&&t)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const gL=/^(image|image-inline)$/;class kt extends y{constructor(){super(...arguments),this._domEmitter=new(bt())}static get pluginName(){return"ImageUtils"}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},t=null,n=null,s={}){const o=this.editor,r=o.model,a=r.document.selection,c=E1(o,t||a,n);e={...Object.fromEntries(a.getAttributes()),...e};for(const l in e)r.schema.checkAttribute(c,l)||delete e[l];return r.change(l=>{const{setImageSizes:x=!0}=s,d=l.createElement(c,e);return r.insertObject(d,t,null,{setSelection:"on",findOptimalPosition:!t&&c!="imageInline"?"auto":void 0}),d.parent?(x&&this.setImageNaturalSizeAttributes(d),d):null})}setImageNaturalSizeAttributes(e){const t=e.getAttribute("src");t&&(e.getAttribute("width")||e.getAttribute("height")||this.editor.model.change(n=>{const s=new U.window.Image;this._domEmitter.listenTo(s,"load",()=>{!e.getAttribute("width")&&!e.getAttribute("height")&&this.editor.model.enqueueChange(n.batch,o=>{o.setAttribute("width",s.naturalWidth,e),o.setAttribute("height",s.naturalHeight,e)}),this._domEmitter.stopListening(s,"load")}),s.src=t}))}getClosestSelectedImageWidget(e){const t=e.getFirstPosition();if(!t)return null;const n=e.getSelectedElement();if(n&&this.isImageWidget(n))return n;let s=t.parent;for(;s;){if(s.is("element")&&this.isImageWidget(s))return s;s=s.parent}return null}getClosestSelectedImageElement(e){const t=e.getSelectedElement();return this.isImage(t)?t:e.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(e){return e.findAncestor({classes:gL})}isImageAllowed(){const t=this.editor.model.document.selection;return bL(this.editor,t)&&pL(t)}toImageWidget(e,t,n){return t.setCustomProperty("image",!0,e),ki(e,t,{label:()=>{const r=this.findViewImgElement(e).getAttribute("alt");return r?`${r} ${n}`:n}})}isImageWidget(e){return!!e.getCustomProperty("image")&&Ke(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const t=this.editor.editing.view;for(const{item:n}of t.createRangeIn(e))if(this.isInlineImageView(n))return n}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function bL(i,e){if(E1(i,e,null)=="imageBlock"){const n=wL(e,i.model);if(i.model.schema.checkChild(n,"imageBlock"))return!0}else if(i.model.schema.checkChild(e.focus,"imageInline"))return!0;return!1}function pL(i){return[...i.focus.getAncestors()].every(e=>!e.is("element","imageBlock"))}function wL(i,e){const n=fa(i,e).start.parent;return n.isEmpty&&!n.is("element","$root")?n.parent:n}function E1(i,e,t){const n=i.model.schema,s=i.config.get("image.insert.type");return i.plugins.has("ImageBlockEditing")?i.plugins.has("ImageInlineEditing")?t||(s==="inline"?"imageInline":s!=="auto"?"imageBlock":e.is("selection")?Il(n,e):n.checkChild(e,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _L extends q{refresh(){const n=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!n,this.isEnabled&&n.hasAttribute("alt")?this.value=n.getAttribute("alt"):this.value=!1}execute(e){const t=this.editor,n=t.plugins.get("ImageUtils"),s=t.model,o=n.getClosestSelectedImageElement(s.document.selection);s.change(r=>{r.setAttribute("alt",e.newValue,o)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vL extends y{static get requires(){return[kt]}static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new _L(this.editor))}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yL extends D{constructor(e){super(e);const t=this.locale.t;this.focusTracker=new Se,this.keystrokes=new Le,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(t("Save"),K.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(t("Cancel"),K.cancel,"ck-button-cancel","cancel"),this._focusables=new dt,this._focusCycler=new ut({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),as({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,t,n,s){const o=new G(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:n}}),s&&o.delegate("execute").to(this,s),o}_createLabeledInputView(){const e=this.locale.t,t=new Ge(this.locale,Rt);return t.label=e("Text alternative"),t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function CL(i){const e=i.plugins.get("ContextualBalloon");if(i.plugins.get("ImageUtils").getClosestSelectedImageWidget(i.editing.view.document.selection)){const n=S1(i);e.updatePosition(n)}}function S1(i){const e=i.editing.view,t=ot.defaultPositions,n=i.plugins.get("ImageUtils");return{target:e.domConverter.mapViewToDom(n.getClosestSelectedImageWidget(e.document.selection)),positions:[t.northArrowSouth,t.northArrowSouthWest,t.northArrowSouthEast,t.southArrowNorth,t.southArrowNorthWest,t.southArrowNorthEast,t.viewportStickyNorth]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kL extends y{static get requires(){return[fn]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("imageTextAlternative",n=>{const s=e.commands.get("imageTextAlternative"),o=new G(n);return o.set({label:t("Change image text alternative"),icon:K.textAlternative,tooltip:!0}),o.bind("isEnabled").to(s,"isEnabled"),o.bind("isOn").to(s,"value",r=>!!r),this.listenTo(o,"execute",()=>{this._showForm()}),o})}_createForm(){const e=this.editor,n=e.editing.view.document,s=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(Jr(yL))(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(o,r)=>{this._hideForm(!0),r()}),this.listenTo(e.ui,"update",()=>{s.getClosestSelectedImageWidget(n.selection)?this._isVisible&&CL(e):this._hideForm(!0)}),rs({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const e=this.editor,t=e.commands.get("imageTextAlternative"),n=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:S1(e)}),n.fieldView.value=n.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class I1 extends y{static get requires(){return[vL,kL]}static get pluginName(){return"ImageTextAlternative"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function TL(i){const e=(t,n,s)=>{if(!s.consumable.test(n.viewItem,{name:!0,classes:"image"}))return;const o=i.findViewImgElement(n.viewItem);if(!o||!s.consumable.test(o,{name:!0}))return;s.consumable.consume(n.viewItem,{name:!0,classes:"image"});const r=s.convertItem(o,n.modelCursor),a=Be(r.modelRange.getItems());if(!a){s.consumable.revert(n.viewItem,{name:!0,classes:"image"});return}s.convertChildren(n.viewItem,a),s.updateConversionResult(a,n)};return t=>{t.on("element:figure",e)}}function P1(i,e){const t=(n,s,o)=>{if(!o.consumable.consume(s.item,n.name))return;const r=o.writer,a=o.mapper.toViewElement(s.item),c=i.findViewImgElement(a);s.attributeNewValue===null?(r.removeAttribute("srcset",c),r.removeAttribute("sizes",c)):s.attributeNewValue&&(r.setAttribute("srcset",s.attributeNewValue,c),r.setAttribute("sizes","100vw",c))};return n=>{n.on(`attribute:srcset:${e}`,t)}}function Dr(i,e,t){const n=(s,o,r)=>{if(!r.consumable.consume(o.item,s.name))return;const a=r.writer,c=r.mapper.toViewElement(o.item),l=i.findViewImgElement(c);a.setAttribute(o.attributeKey,o.attributeNewValue||"",l)};return s=>{s.on(`attribute:${t}:${e}`,n)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pl extends gn{observe(e){this.listenTo(e,"load",(t,n)=>{const s=n.target;this.checkShouldIgnoreEventFromTarget(s)||s.tagName=="IMG"&&this._fireEvents(n)},{useCapture:!0})}stopObserving(e){this.stopListening(e)}_fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AL extends q{constructor(e){super(e);const t=e.config.get("image.insert.type");e.plugins.has("ImageBlockEditing")||t==="block"&&be("image-block-plugin-required"),e.plugins.has("ImageInlineEditing")||t==="inline"&&be("image-inline-plugin-required")}refresh(){const e=this.editor.plugins.get("ImageUtils");this.isEnabled=e.isImageAllowed()}execute(e){const t=ge(e.source),n=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(n.getAttributes());t.forEach((r,a)=>{const c=n.getSelectedElement();if(typeof r=="string"&&(r={src:r}),a&&c&&s.isImage(c)){const l=this.editor.model.createPositionAfter(c);s.insertImage({...r,...o},l)}else s.insertImage({...r,...o})})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class EL extends q{constructor(e){super(e),this.decorate("cleanupImage")}refresh(){const t=this.editor.plugins.get("ImageUtils"),n=this.editor.model.document.selection.getSelectedElement();this.isEnabled=t.isImage(n),this.value=this.isEnabled?n.getAttribute("src"):null}execute(e){const t=this.editor.model.document.selection.getSelectedElement(),n=this.editor.plugins.get("ImageUtils");this.editor.model.change(s=>{s.setAttribute("src",e.source,t),this.cleanupImage(s,t),n.setImageNaturalSizeAttributes(t)})}cleanupImage(e,t){e.removeAttribute("srcset",t),e.removeAttribute("sizes",t),e.removeAttribute("sources",t),e.removeAttribute("width",t),e.removeAttribute("height",t),e.removeAttribute("alt",t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class R1 extends y{static get requires(){return[kt]}static get pluginName(){return"ImageEditing"}init(){const e=this.editor,t=e.conversion;e.editing.view.addObserver(Pl),t.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const n=new AL(e),s=new EL(e);e.commands.add("insertImage",n),e.commands.add("replaceImageSource",s),e.commands.add("imageInsert",n)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class V1 extends y{static get requires(){return[kt]}static get pluginName(){return"ImageSizeAttributes"}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(e){const t=this.editor,n=t.plugins.get("ImageUtils"),s=e==="imageBlock"?"figure":"img";t.conversion.for("upcast").attributeToAttribute({view:{name:s,styles:{width:/.+/}},model:{key:"width",value:r=>Nr(r)?Fr(r.getStyle("width")):null}}).attributeToAttribute({view:{name:s,key:"width"},model:"width"}).attributeToAttribute({view:{name:s,styles:{height:/.+/}},model:{key:"height",value:r=>Nr(r)?Fr(r.getStyle("height")):null}}).attributeToAttribute({view:{name:s,key:"height"},model:"height"}),t.conversion.for("editingDowncast").add(r=>{o(r,"width","width",!0),o(r,"height","height",!0)}),t.conversion.for("dataDowncast").add(r=>{o(r,"width","width",!1),o(r,"height","height",!1)});function o(r,a,c,l){r.on(`attribute:${a}:${e}`,(x,d,u)=>{if(!u.consumable.consume(d.item,x.name))return;const f=u.writer,m=u.mapper.toViewElement(d.item),b=n.findViewImgElement(m);if(d.attributeNewValue!==null?f.setAttribute(c,d.attributeNewValue,b):f.removeAttribute(c,b),d.item.hasAttribute("sources"))return;const p=d.item.hasAttribute("resizedWidth");if(e==="imageInline"&&!p&&!l)return;const C=d.item.getAttribute("width"),_=d.item.getAttribute("height");C&&_&&f.setStyle("aspect-ratio",`${C}/${_}`,b)})}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class B1 extends q{constructor(e,t){super(e),this._modelElementName=t}refresh(){const t=this.editor.plugins.get("ImageUtils"),n=t.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=t.isInlineImage(n):this.isEnabled=t.isBlockImage(n)}execute(e={}){const t=this.editor,n=this.editor.model,s=t.plugins.get("ImageUtils"),o=s.getClosestSelectedImageElement(n.document.selection),r=Object.fromEntries(o.getAttributes());return!r.src&&!r.uploadId?null:n.change(a=>{const{setImageSizes:c=!0}=e,l=Array.from(n.markers).filter(u=>u.getRange().containsItem(o)),x=s.insertImage(r,n.createSelection(o,"on"),this._modelElementName,{setImageSizes:c});if(!x)return null;const d=a.createRangeOn(x);for(const u of l){const f=u.getRange(),m=f.root.rootName!="$graveyard"?f.getJoined(d,!0):d;a.updateMarker(u,{range:m})}return{oldElement:o,newElement:x}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class O1 extends y{static get requires(){return[kt]}static get pluginName(){return"ImagePlaceholder"}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const e=this.editor.model.schema;e.isRegistered("imageBlock")&&e.extend("imageBlock",{allowAttributes:["placeholder"]}),e.isRegistered("imageInline")&&e.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const e=this.editor,t=e.conversion,n=e.plugins.get("ImageUtils");t.for("editingDowncast").add(s=>{s.on("attribute:placeholder",(o,r,a)=>{if(!a.consumable.test(r.item,o.name)||!r.item.is("element","imageBlock")&&!r.item.is("element","imageInline"))return;a.consumable.consume(r.item,o.name);const c=a.writer,l=a.mapper.toViewElement(r.item),x=n.findViewImgElement(l);r.attributeNewValue?(c.addClass("image_placeholder",x),c.setStyle("background-image",`url(${r.attributeNewValue})`,x),c.setCustomProperty("editingPipeline:doNotReuseOnce",!0,x)):(c.removeClass("image_placeholder",x),c.removeStyle("background-image",x))})})}_setupLoadListener(){const e=this.editor,t=e.model,n=e.editing,s=n.view,o=e.plugins.get("ImageUtils");s.addObserver(Pl),this.listenTo(s.document,"imageLoaded",(r,a)=>{const c=s.domConverter.mapDomToView(a.target);if(!c)return;const l=o.getImageWidgetFromImageView(c);if(!l)return;const x=n.mapper.toModelElement(l);!x||!x.hasAttribute("placeholder")||t.enqueueChange({isUndoable:!1},d=>{d.removeAttribute("placeholder",x)})})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class L1 extends y{static get requires(){return[R1,V1,kt,O1,Zt]}static get pluginName(){return"ImageBlockEditing"}init(){const e=this.editor;e.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),e.plugins.has("ImageInlineEditing")&&(e.commands.add("imageTypeBlock",new B1(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,n=e.conversion,s=e.plugins.get("ImageUtils");n.for("dataDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:r})=>nf(r)}),n.for("editingDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:r})=>s.toImageWidget(nf(r),r,t("image widget"))}),n.for("downcast").add(Dr(s,"imageBlock","src")).add(Dr(s,"imageBlock","alt")).add(P1(s,"imageBlock")),n.for("upcast").elementToElement({view:A1(e,"imageBlock"),model:(o,{writer:r})=>r.createElement("imageBlock",o.hasAttribute("src")?{src:o.getAttribute("src")}:void 0)}).add(TL(s))}_setupClipboardIntegration(){const e=this.editor,t=e.model,n=e.editing.view,s=e.plugins.get("ImageUtils"),o=e.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(r,a)=>{const c=Array.from(a.content.getChildren());let l;if(!c.every(s.isInlineImageView))return;a.targetRanges?l=e.editing.mapper.toModelRange(a.targetRanges[0]):l=t.document.selection.getFirstRange();const x=t.createSelection(l);if(Il(t.schema,x)==="imageBlock"){const d=new $t(n.document),u=c.map(f=>d.createElement("figure",{class:"image"},f));a.content=d.createDocumentFragment(u)}}),this.listenTo(o,"contentInsertion",(r,a)=>{a.method==="paste"&&t.change(c=>{const l=c.createRangeIn(a.content);for(const x of l.getItems())x.is("element","imageBlock")&&s.setImageNaturalSizeAttributes(x)})})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class SL extends y{static get requires(){return[L1,Yn,I1]}static get pluginName(){return"ImageBlock"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class IL extends y{static get requires(){return[R1,V1,kt,O1,Zt]}static get pluginName(){return"ImageInlineEditing"}init(){const e=this.editor,t=e.model.schema;t.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"]}),t.addChildCheck((n,s)=>{if(n.endsWith("caption")&&s.name==="imageInline")return!1}),this._setupConversion(),e.plugins.has("ImageBlockEditing")&&(e.commands.add("imageTypeInline",new B1(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,n=e.conversion,s=e.plugins.get("ImageUtils");n.for("dataDowncast").elementToElement({model:"imageInline",view:(o,{writer:r})=>r.createEmptyElement("img")}),n.for("editingDowncast").elementToStructure({model:"imageInline",view:(o,{writer:r})=>s.toImageWidget(mL(r),r,t("image widget"))}),n.for("downcast").add(Dr(s,"imageInline","src")).add(Dr(s,"imageInline","alt")).add(P1(s,"imageInline")),n.for("upcast").elementToElement({view:A1(e,"imageInline"),model:(o,{writer:r})=>r.createElement("imageInline",o.hasAttribute("src")?{src:o.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const e=this.editor,t=e.model,n=e.editing.view,s=e.plugins.get("ImageUtils"),o=e.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(r,a)=>{const c=Array.from(a.content.getChildren());let l;if(!c.every(s.isBlockImageView))return;a.targetRanges?l=e.editing.mapper.toModelRange(a.targetRanges[0]):l=t.document.selection.getFirstRange();const x=t.createSelection(l);if(Il(t.schema,x)==="imageInline"){const d=new $t(n.document),u=c.map(f=>f.childCount===1?(Array.from(f.getAttributes()).forEach(m=>d.setAttribute(...m,s.findViewImgElement(f))),f.getChild(0)):f);a.content=d.createDocumentFragment(u)}}),this.listenTo(o,"contentInsertion",(r,a)=>{a.method==="paste"&&t.change(c=>{const l=c.createRangeIn(a.content);for(const x of l.getItems())x.is("element","imageInline")&&s.setImageNaturalSizeAttributes(x)})})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class PL extends y{static get requires(){return[IL,Yn,I1]}static get pluginName(){return"ImageInline"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class RL extends y{static get requires(){return[SL,PL]}static get pluginName(){return"Image"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class M1 extends y{static get pluginName(){return"ImageCaptionUtils"}static get requires(){return[kt]}getCaptionFromImageModelElement(e){for(const t of e.getChildren())if(t&&t.is("element","caption"))return t;return null}getCaptionFromModelSelection(e){const t=this.editor.plugins.get("ImageUtils"),n=e.getFirstPosition().findAncestor("caption");return n&&t.isBlockImage(n.parent)?n:null}matchImageCaptionViewElement(e){const t=this.editor.plugins.get("ImageUtils");return e.name=="figcaption"&&t.isBlockImageView(e.parent)?{name:!0}:null}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class VL extends q{refresh(){const e=this.editor,t=e.plugins.get("ImageCaptionUtils"),n=e.plugins.get("ImageUtils");if(!e.plugins.has(L1)){this.isEnabled=!1,this.value=!1;return}const s=e.model.document.selection,o=s.getSelectedElement();if(!o){const r=t.getCaptionFromModelSelection(s);this.isEnabled=!!r,this.value=!!r;return}this.isEnabled=n.isImage(o),this.isEnabled?this.value=!!t.getCaptionFromImageModelElement(o):this.value=!1}execute(e={}){const{focusCaptionOnShow:t}=e;this.editor.model.change(n=>{this.value?this._hideImageCaption(n):this._showImageCaption(n,t)})}_showImageCaption(e,t){const s=this.editor.model.document.selection,o=this.editor.plugins.get("ImageCaptionEditing"),r=this.editor.plugins.get("ImageUtils");let a=s.getSelectedElement();const c=o._getSavedCaption(a);r.isInlineImage(a)&&(this.editor.execute("imageTypeBlock"),a=s.getSelectedElement());const l=c||e.createElement("caption");e.append(l,a),t&&e.setSelection(l,"in")}_hideImageCaption(e){const t=this.editor,n=t.model.document.selection,s=t.plugins.get("ImageCaptionEditing"),o=t.plugins.get("ImageCaptionUtils");let r=n.getSelectedElement(),a;r?a=o.getCaptionFromImageModelElement(r):(a=o.getCaptionFromModelSelection(n),r=a.parent),s._saveCaption(r,a),e.setSelection(r,"on"),e.remove(a)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class BL extends y{static get requires(){return[kt,M1]}static get pluginName(){return"ImageCaptionEditing"}constructor(e){super(e),this._savedCaptionsMap=new WeakMap}init(){const e=this.editor,t=e.model.schema;t.isRegistered("caption")?t.extend("caption",{allowIn:"imageBlock"}):t.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new VL(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const e=this.editor,t=e.editing.view,n=e.plugins.get("ImageUtils"),s=e.plugins.get("ImageCaptionUtils"),o=e.t;e.conversion.for("upcast").elementToElement({view:r=>s.matchImageCaptionViewElement(r),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(r,{writer:a})=>n.isBlockImage(r.parent)?a.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(r,{writer:a})=>{if(!n.isBlockImage(r.parent))return null;const c=a.createEditableElement("figcaption");a.setCustomProperty("imageCaption",!0,c),c.placeholder=o("Enter image caption"),ol({view:t,element:c,keepOnFocus:!0});const l=r.parent.getAttribute("alt"),x=l?o("Caption for image: %0",[l]):o("Caption for the image");return pl(c,a,{label:x})}})}_setupImageTypeCommandsIntegration(){const e=this.editor,t=e.plugins.get("ImageUtils"),n=e.plugins.get("ImageCaptionUtils"),s=e.commands.get("imageTypeInline"),o=e.commands.get("imageTypeBlock"),r=a=>{if(!a.return)return;const{oldElement:c,newElement:l}=a.return;/* istanbul ignore if: paranoid check -- @preserve */if(!c)return;if(t.isBlockImage(c)){const d=n.getCaptionFromImageModelElement(c);if(d){this._saveCaption(l,d);return}}const x=this._getSavedCaption(c);x&&this._saveCaption(l,x)};s&&this.listenTo(s,"execute",r,{priority:"low"}),o&&this.listenTo(o,"execute",r,{priority:"low"})}_getSavedCaption(e){const t=this._savedCaptionsMap.get(e);return t?he.fromJSON(t):null}_saveCaption(e,t){this._savedCaptionsMap.set(e,t.toJSON())}_registerCaptionReconversion(){const e=this.editor,t=e.model,n=e.plugins.get("ImageUtils"),s=e.plugins.get("ImageCaptionUtils");t.document.on("change:data",()=>{const o=t.document.differ.getChanges();for(const r of o){if(r.attributeKey!=="alt")continue;const a=r.range.start.nodeAfter;if(n.isBlockImage(a)){const c=s.getCaptionFromImageModelElement(a);if(!c)return;e.editing.reconvertItem(c)}}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OL extends y{static get requires(){return[M1]}static get pluginName(){return"ImageCaptionUI"}init(){const e=this.editor,t=e.editing.view,n=e.plugins.get("ImageCaptionUtils"),s=e.t;e.ui.componentFactory.add("toggleImageCaption",o=>{const r=e.commands.get("toggleImageCaption"),a=new G(o);return a.set({icon:K.caption,tooltip:!0,isToggleable:!0}),a.bind("isOn","isEnabled").to(r,"value","isEnabled"),a.bind("label").to(r,"value",c=>s(c?"Toggle caption off":"Toggle caption on")),this.listenTo(a,"execute",()=>{e.execute("toggleImageCaption",{focusCaptionOnShow:!0});const c=n.getCaptionFromModelSelection(e.model.document.selection);if(c){const l=e.editing.mapper.toViewElement(c);t.scrollToTheSelection(),t.change(x=>{x.addClass("image__caption_highlighted",l)})}e.editing.view.focus()}),a})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class LL extends y{static get requires(){return[BL,OL]}static get pluginName(){return"ImageCaption"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ML extends ue(){constructor(){super();const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=t=>{this.loaded=t.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const t=this._reader;return this.total=e.size,new Promise((n,s)=>{t.onload=()=>{const o=t.result;this._data=o,n(o)},t.onerror=()=>{s("error")},t.onabort=()=>{s("aborted")},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xi extends y{constructor(){super(...arguments),this.loaders=new De,this._loadersMap=new Map,this._pendingAction=null}static get pluginName(){return"FileRepository"}static get requires(){return[qd]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,t)=>t?e/t*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return be("filerepository-no-upload-adapter"),null;const t=new sf(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(t),this._loadersMap.set(e,t),e instanceof Promise&&t.file.then(n=>{this._loadersMap.set(n,t)}).catch(()=>{}),t.on("change:uploaded",()=>{let n=0;for(const s of this.loaders)n+=s.uploaded;this.uploaded=n}),t.on("change:uploadTotal",()=>{let n=0;for(const s of this.loaders)s.uploadTotal&&(n+=s.uploadTotal);this.uploadTotal=n}),t}destroyLoader(e){const t=e instanceof sf?e:this.getLoader(e);t._destroy(),this.loaders.remove(t),this._loadersMap.forEach((n,s)=>{n===t&&this._loadersMap.delete(s)})}_updatePendingAction(){const e=this.editor.plugins.get(qd);if(this.loaders.length){if(!this._pendingAction){const t=this.editor.t,n=s=>`${t("Upload in progress")} ${parseInt(s)}%.`;this._pendingAction=e.add(n(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",n)}}else e.remove(this._pendingAction),this._pendingAction=null}}class sf extends ue(){constructor(e,t){super(),this.id=Vt(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=t(this),this._reader=new ML,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(n,s)=>s?n/s*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new w("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if(this.status!=="reading")throw this.status;return this.status="idle",e}).catch(e=>{throw e==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:e)})}upload(){if(this.status!="idle")throw new w("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{throw this.status==="aborted"?"aborted":(this.status="error",e)})}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?e=="reading"?this._reader.abort():e=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const t={};return t.promise=new Promise((n,s)=>{t.rejecter=s,t.isFulfilled=!1,e.then(o=>{t.isFulfilled=!0,n(o)}).catch(o=>{t.isFulfilled=!0,s(o)})}),t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class FL extends D{constructor(e){super(e),this.buttonView=new G(e),this._fileInputView=new NL(e),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.setTemplate({tag:"span",attributes:{class:"ck-file-dialog-button"},children:[this.buttonView,this._fileInputView]}),this.buttonView.on("execute",()=>{this._fileInputView.open()})}focus(){this.buttonView.focus()}}class NL extends D{constructor(e){super(e),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class DL extends y{static get requires(){return[xi]}static get pluginName(){return"SimpleUploadAdapter"}init(){const e=this.editor.config.get("simpleUpload");if(e){if(!e.uploadUrl){be("simple-upload-adapter-missing-uploadurl");return}this.editor.plugins.get(xi).createUploadAdapter=t=>new zL(t,e)}}}class zL{constructor(e,t){this.loader=e,this.options=t}upload(){return this.loader.file.then(e=>new Promise((t,n)=>{this._initRequest(),this._initListeners(t,n,e),this._sendRequest(e)}))}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const e=this.xhr=new XMLHttpRequest;e.open("POST",this.options.uploadUrl,!0),e.responseType="json"}_initListeners(e,t,n){const s=this.xhr,o=this.loader,r=`Couldn't upload file: ${n.name}.`;s.addEventListener("error",()=>t(r)),s.addEventListener("abort",()=>t()),s.addEventListener("load",()=>{const a=s.response;if(!a||a.error)return t(a&&a.error&&a.error.message?a.error.message:r);const c=a.url?{default:a.url}:a.urls;e({...a,urls:c})});/* istanbul ignore else -- @preserve */s.upload&&s.upload.addEventListener("progress",a=>{a.lengthComputable&&(o.uploadTotal=a.total,o.uploaded=a.loaded)})}_sendRequest(e){const t=this.options.headers||{},n=this.options.withCredentials||!1;for(const o of Object.keys(t))this.xhr.setRequestHeader(o,t[o]);this.xhr.withCredentials=n;const s=new FormData;s.append("upload",e),this.xhr.send(s)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function F1(i){const e=i.map(t=>t.replace("+","\\+"));return new RegExp(`^image\\/(${e.join("|")})$`)}function HL(i){return new Promise((e,t)=>{const n=i.getAttribute("src");fetch(n).then(s=>s.blob()).then(s=>{const o=N1(s,n),a=`image.${o.replace("image/","")}`,c=new File([s],a,{type:o});e(c)}).catch(s=>s&&s.name==="TypeError"?UL(n).then(e).catch(t):t(s))})}function $L(i,e){return!i.isInlineImageView(e)||!e.getAttribute("src")?!1:!!e.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!e.getAttribute("src").match(/^blob:/g)}function N1(i,e){return i.type?i.type:e.match(/data:(image\/\w+);base64/)?e.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function UL(i){return WL(i).then(e=>{const t=N1(e,i),s=`image.${t.replace("image/","")}`;return new File([e],s,{type:t})})}function WL(i){return new Promise((e,t)=>{const n=U.document.createElement("img");n.addEventListener("load",()=>{const s=U.document.createElement("canvas");s.width=n.width,s.height=n.height,s.getContext("2d").drawImage(n,0,0),s.toBlob(r=>r?e(r):t())}),n.addEventListener("error",()=>t()),n.src=i})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jL extends y{static get pluginName(){return"ImageUploadUI"}init(){const e=this.editor,t=e.t,n=s=>{const o=new FL(s),r=e.commands.get("uploadImage"),a=e.config.get("image.upload.types"),c=F1(a);return o.set({acceptedType:a.map(l=>`image/${l}`).join(","),allowMultipleFiles:!0}),o.buttonView.set({label:t("Insert image"),icon:K.image,tooltip:!0}),o.buttonView.bind("isEnabled").to(r),o.on("done",(l,x)=>{const d=Array.from(x).filter(u=>c.test(u.type));d.length&&(e.execute("uploadImage",{file:d}),e.editing.view.focus())}),o};e.ui.componentFactory.add("uploadImage",n),e.ui.componentFactory.add("imageUpload",n)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qL extends y{static get pluginName(){return"ImageUploadProgress"}constructor(e){super(e),this.uploadStatusChange=(t,n,s)=>{const o=this.editor,r=n.item,a=r.getAttribute("uploadId");if(!s.consumable.consume(n.item,t.name))return;const c=o.plugins.get("ImageUtils"),l=o.plugins.get(xi),x=a?n.attributeNewValue:null,d=this.placeholder,u=o.editing.mapper.toViewElement(r),f=s.writer;if(x=="reading"){of(u,f),rf(c,d,u,f);return}if(x=="uploading"){const m=l.loaders.get(a);of(u,f),m?(af(u,f),KL(u,f,m,o.editing.view),QL(c,u,f,m)):rf(c,d,u,f);return}x=="complete"&&l.loaders.get(a)&&ZL(u,f,o.editing.view),JL(u,f),af(u,f),GL(u,f)},this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function of(i,e){i.hasClass("ck-appear")||e.addClass("ck-appear",i)}function GL(i,e){e.removeClass("ck-appear",i)}function rf(i,e,t,n){t.hasClass("ck-image-upload-placeholder")||n.addClass("ck-image-upload-placeholder",t);const s=i.findViewImgElement(t);s.getAttribute("src")!==e&&n.setAttribute("src",e,s),D1(t,"placeholder")||n.insert(n.createPositionAfter(s),XL(n))}function af(i,e){i.hasClass("ck-image-upload-placeholder")&&e.removeClass("ck-image-upload-placeholder",i),z1(i,e,"placeholder")}function KL(i,e,t,n){const s=YL(e);e.insert(e.createPositionAt(i,"end"),s),t.on("change:uploadedPercent",(o,r,a)=>{n.change(c=>{c.setStyle("width",a+"%",s)})})}function JL(i,e){z1(i,e,"progressBar")}function ZL(i,e,t){const n=e.createUIElement("div",{class:"ck-image-upload-complete-icon"});e.insert(e.createPositionAt(i,"end"),n),setTimeout(()=>{t.change(s=>s.remove(s.createRangeOn(n)))},3e3)}function YL(i){const e=i.createUIElement("div",{class:"ck-progress-bar"});return i.setCustomProperty("progressBar",!0,e),e}function XL(i){const e=i.createUIElement("div",{class:"ck-upload-placeholder-loader"});return i.setCustomProperty("placeholder",!0,e),e}function D1(i,e){for(const t of i.getChildren())if(t.getCustomProperty(e))return t}function z1(i,e,t){const n=D1(i,t);n&&e.remove(e.createRangeOn(n))}function QL(i,e,t,n){if(n.data){const s=i.findViewImgElement(e);t.setAttribute("src",n.data,s)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eM extends q{refresh(){const e=this.editor,t=e.plugins.get("ImageUtils"),n=e.model.document.selection.getSelectedElement();this.isEnabled=t.isImageAllowed()||t.isImage(n)}execute(e){const t=ge(e.file),n=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(n.getAttributes());t.forEach((r,a)=>{const c=n.getSelectedElement();if(a&&c&&s.isImage(c)){const l=this.editor.model.createPositionAfter(c);this._uploadImage(r,o,l)}else this._uploadImage(r,o)})}_uploadImage(e,t,n){const s=this.editor,r=s.plugins.get(xi).createLoader(e),a=s.plugins.get("ImageUtils");r&&a.insertImage({...t,uploadId:r.id},n)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tM extends y{static get requires(){return[xi,ou,Zt,kt]}static get pluginName(){return"ImageUploadEditing"}constructor(e){super(e),e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}init(){const e=this.editor,t=e.model.document,n=e.conversion,s=e.plugins.get(xi),o=e.plugins.get("ImageUtils"),r=e.plugins.get("ClipboardPipeline"),a=F1(e.config.get("image.upload.types")),c=new eM(e);e.commands.add("uploadImage",c),e.commands.add("imageUpload",c),n.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(e.editing.view.document,"clipboardInput",(l,x)=>{if(nM(x.dataTransfer))return;const d=Array.from(x.dataTransfer.files).filter(u=>u?a.test(u.type):!1);d.length&&(l.stop(),e.model.change(u=>{x.targetRanges&&u.setSelection(x.targetRanges.map(f=>e.editing.mapper.toModelRange(f))),e.execute("uploadImage",{file:d})}))}),this.listenTo(r,"inputTransformation",(l,x)=>{const d=Array.from(e.editing.view.createRangeIn(x.content)).map(f=>f.item).filter(f=>$L(o,f)&&!f.getAttribute("uploadProcessed")).map(f=>({promise:HL(f),imageElement:f}));if(!d.length)return;const u=new $t(e.editing.view.document);for(const f of d){u.setAttribute("uploadProcessed",!0,f.imageElement);const m=s.createLoader(f.promise);m&&(u.setAttribute("src","",f.imageElement),u.setAttribute("uploadId",m.id,f.imageElement))}}),e.editing.view.document.on("dragover",(l,x)=>{x.preventDefault()}),t.on("change",()=>{const l=t.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),x=new Set;for(const d of l)if(d.type=="insert"&&d.name!="$text"){const u=d.position.nodeAfter,f=d.position.root.rootName=="$graveyard";for(const m of iM(e,u)){const b=m.getAttribute("uploadId");if(!b)continue;const p=s.loaders.get(b);p&&(f?x.has(b)||p.abort():(x.add(b),this._uploadImageElements.set(b,m),p.status=="idle"&&this._readAndUpload(p)))}}}),this.on("uploadComplete",(l,{imageElement:x,data:d})=>{const u=d.urls?d.urls:d;this.editor.model.change(f=>{f.setAttribute("src",u.default,x),this._parseAndSetSrcsetAttributeOnImage(u,x,f),o.setImageNaturalSizeAttributes(x)})},{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this.editor.plugins.has("ImageInlineEditing")&&e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]})}_readAndUpload(e){const t=this.editor,n=t.model,s=t.locale.t,o=t.plugins.get(xi),r=t.plugins.get(ou),a=t.plugins.get("ImageUtils"),c=this._uploadImageElements;return n.enqueueChange({isUndoable:!1},x=>{x.setAttribute("uploadStatus","reading",c.get(e.id))}),e.read().then(()=>{const x=e.upload(),d=c.get(e.id);/* istanbul ignore next -- @preserve */if(ee.isSafari){const u=t.editing.mapper.toViewElement(d),f=a.findViewImgElement(u);t.editing.view.once("render",()=>{if(!f.parent)return;const m=t.editing.view.domConverter.mapViewToDom(f.parent);if(!m)return;const b=m.style.display;m.style.display="none",m._ckHack=m.offsetHeight,m.style.display=b})}return n.enqueueChange({isUndoable:!1},u=>{u.setAttribute("uploadStatus","uploading",d)}),x}).then(x=>{n.enqueueChange({isUndoable:!1},d=>{const u=c.get(e.id);d.setAttribute("uploadStatus","complete",u),this.fire("uploadComplete",{data:x,imageElement:u})}),l()}).catch(x=>{if(e.status!=="error"&&e.status!=="aborted")throw x;e.status=="error"&&x&&r.showWarning(x,{title:s("Upload failed"),namespace:"upload"}),n.enqueueChange({isUndoable:!1},d=>{d.remove(c.get(e.id))}),l()});function l(){n.enqueueChange({isUndoable:!1},x=>{const d=c.get(e.id);x.removeAttribute("uploadId",d),x.removeAttribute("uploadStatus",d),c.delete(e.id)}),o.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,t,n){let s=0;const o=Object.keys(e).filter(r=>{const a=parseInt(r,10);if(!isNaN(a))return s=Math.max(s,a),!0}).map(r=>`${e[r]} ${r}w`).join(", ");if(o!=""){const r={srcset:o};!t.hasAttribute("width")&&!t.hasAttribute("height")&&(r.width=s),n.setAttributes(r,t)}}}function nM(i){return Array.from(i.types).includes("text/html")&&i.getData("text/html")!==""}function iM(i,e){const t=i.plugins.get("ImageUtils");return Array.from(i.model.createRangeOn(e)).filter(n=>t.isImage(n.item)).map(n=>n.item)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sM extends y{static get pluginName(){return"ImageUpload"}static get requires(){return[tM,jL,qL]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oM extends q{refresh(){const e=this.editor,n=e.plugins.get("ImageUtils").getClosestSelectedImageElement(e.model.document.selection);this.isEnabled=!!n,!n||!n.hasAttribute("resizedWidth")?this.value=null:this.value={width:n.getAttribute("resizedWidth"),height:null}}execute(e){const t=this.editor,n=t.model,s=t.plugins.get("ImageUtils"),o=s.getClosestSelectedImageElement(n.document.selection);this.value={width:e.width,height:null},o&&n.change(r=>{r.setAttribute("resizedWidth",e.width,o),r.removeAttribute("resizedHeight",o),s.setImageNaturalSizeAttributes(o)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class H1 extends y{static get requires(){return[kt]}static get pluginName(){return"ImageResizeEditing"}constructor(e){super(e),e.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const e=this.editor,t=new oM(e);this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline"),e.commands.add("resizeImage",t),e.commands.add("imageResize",t)}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(e){const t=this.editor,n=t.plugins.get("ImageUtils");t.conversion.for("downcast").add(s=>s.on(`attribute:resizedWidth:${e}`,(o,r,a)=>{if(!a.consumable.consume(r.item,o.name))return;const c=a.writer,l=a.mapper.toViewElement(r.item);r.attributeNewValue!==null?(c.setStyle("width",r.attributeNewValue,l),c.addClass("image_resized",l)):(c.removeStyle("width",l),c.removeClass("image_resized",l))})),t.conversion.for("dataDowncast").attributeToAttribute({model:{name:e,key:"resizedHeight"},view:s=>({key:"style",value:{height:s}})}),t.conversion.for("editingDowncast").add(s=>s.on(`attribute:resizedHeight:${e}`,(o,r,a)=>{if(!a.consumable.consume(r.item,o.name))return;const c=a.writer,l=a.mapper.toViewElement(r.item),x=e==="imageInline"?n.findViewImgElement(l):l;r.attributeNewValue!==null?c.setStyle("height",r.attributeNewValue,x):c.removeStyle("height",x)})),t.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:s=>Nr(s)?null:s.getStyle("width")}}),t.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:s=>Nr(s)?null:s.getStyle("height")}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const c0={small:K.objectSizeSmall,medium:K.objectSizeMedium,large:K.objectSizeLarge,original:K.objectSizeFull};class rM extends y{static get requires(){return[H1]}static get pluginName(){return"ImageResizeButtons"}constructor(e){super(e),this._resizeUnit=e.config.get("image.resizeUnit")}init(){const e=this.editor,t=e.config.get("image.resizeOptions"),n=e.commands.get("resizeImage");this.bind("isEnabled").to(n);for(const s of t)this._registerImageResizeButton(s);this._registerImageResizeDropdown(t)}_registerImageResizeButton(e){const t=this.editor,{name:n,value:s,icon:o}=e,r=s?s+this._resizeUnit:null;t.ui.componentFactory.add(n,a=>{const c=new G(a),l=t.commands.get("resizeImage"),x=this._getOptionLabelValue(e,!0);if(!c0[o])throw new w("imageresizebuttons-missing-icon",t,e);return c.set({label:x,icon:c0[o],tooltip:x,isToggleable:!0}),c.bind("isEnabled").to(this),c.bind("isOn").to(l,"value",cf(r)),this.listenTo(c,"execute",()=>{t.execute("resizeImage",{width:r})}),c})}_registerImageResizeDropdown(e){const t=this.editor,n=t.t,s=e.find(r=>!r.value),o=r=>{const a=t.commands.get("resizeImage"),c=Ne(r,g6),l=c.buttonView,x=n("Resize image");return l.set({tooltip:x,commandValue:s.value,icon:c0.medium,isToggleable:!0,label:this._getOptionLabelValue(s),withText:!0,class:"ck-resize-image-button",ariaLabel:x,ariaLabelledBy:void 0}),l.bind("label").to(a,"value",d=>d&&d.width?d.width:this._getOptionLabelValue(s)),c.bind("isEnabled").to(this),Mn(c,()=>this._getResizeDropdownListItemDefinitions(e,a),{ariaLabel:n("Image resize list"),role:"menu"}),this.listenTo(c,"execute",d=>{t.execute(d.source.commandName,{width:d.source.commandValue}),t.editing.view.focus()}),c};t.ui.componentFactory.add("resizeImage",o),t.ui.componentFactory.add("imageResize",o)}_getOptionLabelValue(e,t=!1){const n=this.editor.t;return e.label?e.label:t?e.value?n("Resize image to %0",e.value+this._resizeUnit):n("Resize image to the original size"):e.value?e.value+this._resizeUnit:n("Original")}_getResizeDropdownListItemDefinitions(e,t){const n=new De;return e.map(s=>{const o=s.value?s.value+this._resizeUnit:null,r={type:"button",model:new Rn({commandName:"resizeImage",commandValue:o,label:this._getOptionLabelValue(s),role:"menuitemradio",withText:!0,icon:null})};r.model.bind("isOn").to(t,"value",cf(o)),n.add(r)}),n}}function cf(i){return e=>{const t=e;return i===null&&t===i?!0:t!==null&&t.width===i}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const aM="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",l0="image_resized";class cM extends y{static get requires(){return[Za,kt]}static get pluginName(){return"ImageResizeHandles"}init(){const e=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(e),this._setupResizerCreator()}_setupResizerCreator(){const e=this.editor,t=e.editing.view,n=e.plugins.get("ImageUtils");t.addObserver(Pl),this.listenTo(t.document,"imageLoaded",(s,o)=>{if(!o.target.matches(aM))return;const r=e.editing.view.domConverter,a=r.domToView(o.target),c=n.getImageWidgetFromImageView(a);let l=this.editor.plugins.get(Za).getResizerByViewElement(c);if(l){l.redraw();return}const x=e.editing.mapper,d=x.toModelElement(c);l=e.plugins.get(Za).attachTo({unit:e.config.get("image.resizeUnit"),modelElement:d,viewElement:c,editor:e,getHandleHost(u){return u.querySelector("img")},getResizeHost(){return r.mapViewToDom(x.toViewElement(d.parent))},isCentered(){const u=d.getAttribute("imageStyle");return!u||u=="block"||u=="alignCenter"},onCommit(u){t.change(f=>{f.removeClass(l0,c)}),e.execute("resizeImage",{width:u})}}),l.on("updateSize",()=>{c.hasClass(l0)||t.change(f=>{f.addClass(l0,c)});const u=d.name==="imageInline"?a:c;u.getStyle("height")&&t.change(f=>{f.removeStyle("height",u)})}),l.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lM extends y{static get requires(){return[H1,cM,rM]}static get pluginName(){return"ImageResize"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xM extends q{constructor(e,t){super(e),this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(t.map(n=>{if(n.isDefault)for(const s of n.modelElements)this._defaultStyles[s]=n.name;return[n.name,n]}))}refresh(){const n=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!n,this.isEnabled?n.hasAttribute("imageStyle")?this.value=n.getAttribute("imageStyle"):this.value=this._defaultStyles[n.name]:this.value=!1}execute(e={}){const t=this.editor,n=t.model,s=t.plugins.get("ImageUtils");n.change(o=>{const r=e.value,{setImageSizes:a=!0}=e;let c=s.getClosestSelectedImageElement(n.document.selection);r&&this.shouldConvertImageType(r,c)&&(this.editor.execute(s.isBlockImage(c)?"imageTypeInline":"imageTypeBlock",{setImageSizes:a}),c=s.getClosestSelectedImageElement(n.document.selection)),!r||this._styles.get(r).isDefault?o.removeAttribute("imageStyle",c):o.setAttribute("imageStyle",r,c),a&&s.setImageNaturalSizeAttributes(c)})}shouldConvertImageType(e,t){return!this._styles.get(e).modelElements.includes(t.name)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const{objectFullWidth:dM,objectInline:$1,objectLeft:U1,objectRight:ac,objectCenter:cc,objectBlockLeft:W1,objectBlockRight:j1}=K,hr={get inline(){return{name:"inline",title:"In line",icon:$1,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:U1,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:W1,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:cc,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:ac,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:j1,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:cc,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:ac,modelElements:["imageBlock"],className:"image-style-side"}}},q1={full:dM,left:W1,right:j1,center:cc,inlineLeft:U1,inlineRight:ac,inline:$1},G1=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function uM(i){return(i.configuredStyles.options||[]).map(n=>mM(n)).filter(n=>gM(n,i))}function fM(i,e){return i&&e?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:i?{options:["block","side"]}:e?{options:["inline","alignLeft","alignRight"]}:{}}function hM(i){return i.has("ImageBlockEditing")&&i.has("ImageInlineEditing")?[...G1]:[]}function mM(i){return typeof i=="string"?hr[i]?i={...hr[i]}:i={name:i}:i=bM(hr[i.name],i),typeof i.icon=="string"&&(i.icon=q1[i.icon]||i.icon),i}function gM(i,{isBlockPluginLoaded:e,isInlinePluginLoaded:t}){const{modelElements:n,name:s}=i;if(!n||!n.length||!s)return K1({style:i}),!1;{const o=[e?"imageBlock":null,t?"imageInline":null];if(!n.some(r=>o.includes(r)))return be("image-style-missing-dependency",{style:i,missingPlugins:n.map(r=>r==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function bM(i,e){const t={...e};for(const n in i)Object.prototype.hasOwnProperty.call(e,n)||(t[n]=i[n]);return t}function K1(i){be("image-style-configuration-definition-invalid",i)}const lc={normalizeStyles:uM,getDefaultStylesConfiguration:fM,getDefaultDropdownDefinitions:hM,warnInvalidStyle:K1,DEFAULT_OPTIONS:hr,DEFAULT_ICONS:q1,DEFAULT_DROPDOWN_DEFINITIONS:G1};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function pM(i){return(e,t,n)=>{if(!n.consumable.consume(t.item,e.name))return;const s=lf(t.attributeNewValue,i),o=lf(t.attributeOldValue,i),r=n.mapper.toViewElement(t.item),a=n.writer;o&&a.removeClass(o.className,r),s&&a.addClass(s.className,r)}}function wM(i){const e={imageInline:i.filter(t=>!t.isDefault&&t.modelElements.includes("imageInline")),imageBlock:i.filter(t=>!t.isDefault&&t.modelElements.includes("imageBlock"))};return(t,n,s)=>{if(!n.modelRange)return;const o=n.viewItem,r=Be(n.modelRange.getItems());if(r&&s.schema.checkAttribute(r,"imageStyle"))for(const a of e[r.name])s.consumable.consume(o,{classes:a.className})&&s.writer.setAttribute("imageStyle",a.name,r)}}function lf(i,e){for(const t of e)if(t.name===i)return t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class J1 extends y{static get pluginName(){return"ImageStyleEditing"}static get requires(){return[kt]}init(){const{normalizeStyles:e,getDefaultStylesConfiguration:t}=lc,n=this.editor,s=n.plugins.has("ImageBlockEditing"),o=n.plugins.has("ImageInlineEditing");n.config.define("image.styles",t(s,o)),this.normalizedStyles=e({configuredStyles:n.config.get("image.styles"),isBlockPluginLoaded:s,isInlinePluginLoaded:o}),this._setupConversion(s,o),this._setupPostFixer(),n.commands.add("imageStyle",new xM(n,this.normalizedStyles))}_setupConversion(e,t){const n=this.editor,s=n.model.schema,o=pM(this.normalizedStyles),r=wM(this.normalizedStyles);n.editing.downcastDispatcher.on("attribute:imageStyle",o),n.data.downcastDispatcher.on("attribute:imageStyle",o),e&&(s.extend("imageBlock",{allowAttributes:"imageStyle"}),n.data.upcastDispatcher.on("element:figure",r,{priority:"low"})),t&&(s.extend("imageInline",{allowAttributes:"imageStyle"}),n.data.upcastDispatcher.on("element:img",r,{priority:"low"}))}_setupPostFixer(){const e=this.editor,t=e.model.document,n=e.plugins.get(kt),s=new Map(this.normalizedStyles.map(o=>[o.name,o]));t.registerPostFixer(o=>{let r=!1;for(const a of t.differ.getChanges())if(a.type=="insert"||a.type=="attribute"&&a.attributeKey=="imageStyle"){let c=a.type=="insert"?a.position.nodeAfter:a.range.start.nodeAfter;if(c&&c.is("element","paragraph")&&c.childCount>0&&(c=c.getChild(0)),!n.isImage(c))continue;const l=c.getAttribute("imageStyle");if(!l)continue;const x=s.get(l);(!x||!x.modelElements.includes(c.name))&&(o.removeAttribute("imageStyle",c),r=!0)}return r})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _M extends y{static get requires(){return[J1]}static get pluginName(){return"ImageStyleUI"}get localizedDefaultStylesTitles(){const e=this.editor.t;return{"Wrap text":e("Wrap text"),"Break text":e("Break text"),"In line":e("In line"),"Full size image":e("Full size image"),"Side image":e("Side image"),"Left aligned image":e("Left aligned image"),"Centered image":e("Centered image"),"Right aligned image":e("Right aligned image")}}init(){const e=this.editor.plugins,t=this.editor.config.get("image.toolbar")||[],n=e.get("ImageStyleEditing"),s=xf(n.normalizedStyles,this.localizedDefaultStylesTitles);for(const r of s)this._createButton(r);const o=xf([...t.filter(Ee),...lc.getDefaultDropdownDefinitions(e)],this.localizedDefaultStylesTitles);for(const r of o)this._createDropdown(r,s)}_createDropdown(e,t){const n=this.editor.ui.componentFactory;n.add(e.name,s=>{let o;const{defaultItem:r,items:a,title:c}=e,l=a.filter(f=>t.find(({name:m})=>df(m)===f)).map(f=>{const m=n.create(f);return f===r&&(o=m),m});a.length!==l.length&&lc.warnInvalidStyle({dropdown:e});const x=Ne(s,Co),d=x.buttonView,u=d.arrowView;return la(x,l,{enableActiveItemFocusOnDropdownOpen:!0}),d.set({label:uf(c,o.label),class:null,tooltip:!0}),u.unbind("label"),u.set({label:c}),d.bind("icon").toMany(l,"isOn",(...f)=>{const m=f.findIndex(oi);return m<0?o.icon:l[m].icon}),d.bind("label").toMany(l,"isOn",(...f)=>{const m=f.findIndex(oi);return uf(c,m<0?o.label:l[m].label)}),d.bind("isOn").toMany(l,"isOn",(...f)=>f.some(oi)),d.bind("class").toMany(l,"isOn",(...f)=>f.some(oi)?"ck-splitbutton_flatten":void 0),d.on("execute",()=>{l.some(({isOn:f})=>f)?x.isOpen=!x.isOpen:o.fire("execute")}),x.bind("isEnabled").toMany(l,"isEnabled",(...f)=>f.some(oi)),this.listenTo(x,"execute",()=>{this.editor.editing.view.focus()}),x})}_createButton(e){const t=e.name;this.editor.ui.componentFactory.add(df(t),n=>{const s=this.editor.commands.get("imageStyle"),o=new G(n);return o.set({label:e.title,icon:e.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(s,"isEnabled"),o.bind("isOn").to(s,"value",r=>r===t),o.on("execute",this._executeCommand.bind(this,t)),o})}_executeCommand(e){this.editor.execute("imageStyle",{value:e}),this.editor.editing.view.focus()}}function xf(i,e){for(const t of i)e[t.title]&&(t.title=e[t.title]);return i}function df(i){return`imageStyle:${i}`}function uf(i,e){return(i?i+": ":"")+e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vM extends y{static get requires(){return[J1,_M]}static get pluginName(){return"ImageStyle"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yM extends y{static get requires(){return[ns,kt]}static get pluginName(){return"ImageToolbar"}afterInit(){const e=this.editor,t=e.t,n=e.plugins.get(ns),s=e.plugins.get("ImageUtils");n.register("image",{ariaLabel:t("Image toolbar"),items:CM(e.config.get("image.toolbar")||[]),getRelatedElement:o=>s.getClosestSelectedImageWidget(o)})}}function CM(i){return i.map(e=>Ee(e)?e.name:e)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kM extends y{static get pluginName(){return"IndentEditing"}init(){const e=this.editor;e.commands.add("indent",new cd(e)),e.commands.add("outdent",new cd(e))}}const xc='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',dc='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TM extends y{static get pluginName(){return"IndentUI"}init(){const e=this.editor,t=e.locale,n=e.t,s=t.uiLanguageDirection=="ltr"?xc:dc,o=t.uiLanguageDirection=="ltr"?dc:xc;this._defineButton("indent",n("Increase indent"),s),this._defineButton("outdent",n("Decrease indent"),o)}_defineButton(e,t,n){const s=this.editor;s.ui.componentFactory.add(e,o=>{const r=s.commands.get(e),a=new G(o);return a.set({label:t,icon:n,tooltip:!0}),a.bind("isEnabled").to(r,"isEnabled"),this.listenTo(a,"execute",()=>{s.execute(e),s.editing.view.focus()}),a})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AM extends y{static get pluginName(){return"Indent"}static get requires(){return[kM,TM]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Yo extends q{constructor(e,t){super(e),this._indentBehavior=t}refresh(){const t=this.editor.model,n=Be(t.document.selection.getSelectedBlocks());if(!n||!this._isIndentationChangeAllowed(n)){this.isEnabled=!1;return}this.isEnabled=this._indentBehavior.checkEnabled(n.getAttribute("blockIndent"))}execute(){const e=this.editor.model,t=this._getBlocksToChange();e.change(n=>{for(const s of t){const o=s.getAttribute("blockIndent"),r=this._indentBehavior.getNextIndent(o);r?n.setAttribute("blockIndent",r,s):n.removeAttribute("blockIndent",s)}})}_getBlocksToChange(){const t=this.editor.model.document.selection;return Array.from(t.getSelectedBlocks()).filter(s=>this._isIndentationChangeAllowed(s))}_isIndentationChangeAllowed(e){const t=this.editor;return t.model.schema.checkAttribute(e,"blockIndent")?!t.plugins.has("DocumentListUtils")||!this._indentBehavior.isForward?!0:!t.plugins.get("DocumentListUtils").isListItemBlock(e):!1}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ff{constructor(e){this.isForward=e.direction==="forward",this.offset=e.offset,this.unit=e.unit}checkEnabled(e){const t=parseFloat(e||"0");return this.isForward||t>0}getNextIndent(e){const t=parseFloat(e||"0");if(!(!e||e.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;const s=this.isForward?this.offset:-this.offset,o=t+s;return o>0?o+this.unit:void 0}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hf{constructor(e){this.isForward=e.direction==="forward",this.classes=e.classes}checkEnabled(e){const t=this.classes.indexOf(e);return this.isForward?t<this.classes.length-1:t>=0}getNextIndent(e){const t=this.classes.indexOf(e),n=this.isForward?1:-1;return this.classes[t+n]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const EM=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];class SM extends y{constructor(e){super(e),e.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}init(){const e=this.editor,t=e.config.get("indentBlock");t.classes&&t.classes.length?(this._setupConversionUsingClasses(t.classes),e.commands.add("indentBlock",new Yo(e,new hf({direction:"forward",classes:t.classes}))),e.commands.add("outdentBlock",new Yo(e,new hf({direction:"backward",classes:t.classes})))):(e.data.addStyleProcessorRules(dS),this._setupConversionUsingOffset(),e.commands.add("indentBlock",new Yo(e,new ff({direction:"forward",offset:t.offset,unit:t.unit}))),e.commands.add("outdentBlock",new Yo(e,new ff({direction:"backward",offset:t.offset,unit:t.unit}))))}afterInit(){const e=this.editor,t=e.model.schema,n=e.commands.get("indent"),s=e.commands.get("outdent"),o=e.config.get("heading.options");(o&&o.map(c=>c.model)||EM).forEach(c=>{t.isRegistered(c)&&t.extend(c,{allowAttributes:"blockIndent"})}),t.setAttributeProperties("blockIndent",{isFormatting:!0}),n.registerChildCommand(e.commands.get("indentBlock")),s.registerChildCommand(e.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const e=this.editor.conversion,n=this.editor.locale.contentLanguageDirection==="rtl"?"margin-right":"margin-left";e.for("upcast").attributeToAttribute({view:{styles:{[n]:/[\s\S]+/}},model:{key:"blockIndent",value:s=>{if(!s.is("element","li"))return s.getStyle(n)}}}),e.for("downcast").attributeToAttribute({model:"blockIndent",view:s=>({key:"style",value:{[n]:s}})})}_setupConversionUsingClasses(e){const t={model:{key:"blockIndent",values:[]},view:{}};for(const n of e)t.model.values.push(n),t.view[n]={key:"class",value:[n]};this.editor.conversion.attributeToAttribute(t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class IM{constructor(){this._definitions=new Set}get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach(t=>this._definitions.add(t)):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",(t,n,s)=>{if(!s.consumable.test(n.item,"attribute:linkHref")||!(n.item.is("selection")||s.schema.isInline(n.item)))return;const o=s.writer,r=o.document.selection;for(const a of this._definitions){const c=o.createAttributeElement("a",a.attributes,{priority:5});a.classes&&o.addClass(a.classes,c);for(const l in a.styles)o.setStyle(l,a.styles[l],c);o.setCustomProperty("link",!0,c),a.callback(n.attributeNewValue)?n.item.is("selection")?o.wrap(r.getFirstRange(),c):o.wrap(s.mapper.toViewRange(n.range),c):o.unwrap(s.mapper.toViewRange(n.range),c)}},{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:imageBlock",(t,n,{writer:s,mapper:o})=>{const r=o.toViewElement(n.item),a=Array.from(r.getChildren()).find(c=>c.is("element","a"));for(const c of this._definitions){const l=Gt(c.attributes);if(c.callback(n.attributeNewValue)){for(const[x,d]of l)x==="class"?s.addClass(d,a):s.setAttribute(x,d,a);c.classes&&s.addClass(c.classes,a);for(const x in c.styles)s.setStyle(x,c.styles[x],a)}else{for(const[x,d]of l)x==="class"?s.removeClass(d,a):s.removeAttribute(x,a);c.classes&&s.removeClass(c.classes,a);for(const x in c.styles)s.removeStyle(x,a)}}})}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const PM=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,RM=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i,VM=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,BM=/^((\w+:(\/{2,})?)|(\W))/i,mr="Ctrl+K";function OM(i){return i.is("attributeElement")&&!!i.getCustomProperty("link")}function mf(i,{writer:e}){const t=e.createAttributeElement("a",{href:i},{priority:5});return e.setCustomProperty("link",!0,t),t}function Z1(i){const e=String(i);return LM(e)?e:"#"}function LM(i){return!!i.replace(PM,"").match(RM)}function MM(i,e){const t={"Open in a new tab":i("Open in a new tab"),Downloadable:i("Downloadable")};return e.forEach(n=>("label"in n&&t[n.label]&&(n.label=t[n.label]),n)),e}function FM(i){const e=[];if(i)for(const[t,n]of Object.entries(i)){const s=Object.assign({},n,{id:`link${am(t)}`});e.push(s)}return e}function uc(i,e){return i?e.checkAttribute(i.name,"linkHref"):!1}function NM(i){return VM.test(i)}function Rl(i,e){const t=NM(i)?"mailto:":e,n=!!t&&!Y1(i);return i&&n?t+i:i}function Y1(i){return BM.test(i)}function gf(i){window.open(i,"_blank","noopener")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class DM extends q{constructor(){super(...arguments),this.manualDecorators=new De,this.automaticDecorators=new IM}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,t=e.document.selection,n=t.getSelectedElement()||Be(t.getSelectedBlocks());uc(n,e.schema)?(this.value=n.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(n,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));for(const s of this.manualDecorators)s.value=this._getDecoratorStateFromModel(s.id)}execute(e,t={}){const n=this.editor.model,s=n.document.selection,o=[],r=[];for(const a in t)t[a]?o.push(a):r.push(a);n.change(a=>{if(s.isCollapsed){const c=s.getFirstPosition();if(s.hasAttribute("linkHref")){const l=bf(s);let x=gi(c,"linkHref",s.getAttribute("linkHref"),n);s.getAttribute("linkHref")===l&&(x=this._updateLinkContent(n,a,x,e)),a.setAttribute("linkHref",e,x),o.forEach(d=>{a.setAttribute(d,!0,x)}),r.forEach(d=>{a.removeAttribute(d,x)}),a.setSelection(a.createPositionAfter(x.end.nodeBefore))}else if(e!==""){const l=Gt(s.getAttributes());l.set("linkHref",e),o.forEach(d=>{l.set(d,!0)});const{end:x}=n.insertContent(a.createText(e,l),c);a.setSelection(x)}["linkHref",...o,...r].forEach(l=>{a.removeSelectionAttribute(l)})}else{const c=n.schema.getValidRanges(s.getRanges(),"linkHref"),l=[];for(const d of s.getSelectedBlocks())n.schema.checkAttribute(d,"linkHref")&&l.push(a.createRangeOn(d));const x=l.slice();for(const d of c)this._isRangeToUpdate(d,l)&&x.push(d);for(const d of x){let u=d;if(x.length===1){const f=bf(s);s.getAttribute("linkHref")===f&&(u=this._updateLinkContent(n,a,d,e),a.setSelection(a.createSelection(u)))}a.setAttribute("linkHref",e,u),o.forEach(f=>{a.setAttribute(f,!0,u)}),r.forEach(f=>{a.removeAttribute(f,u)})}}})}_getDecoratorStateFromModel(e){const t=this.editor.model,n=t.document.selection,s=n.getSelectedElement();return uc(s,t.schema)?s.getAttribute(e):n.getAttribute(e)}_isRangeToUpdate(e,t){for(const n of t)if(n.containsRange(e))return!1;return!0}_updateLinkContent(e,t,n,s){const o=t.createText(s,{linkHref:s});return e.insertContent(o,n)}}function bf(i){if(i.isCollapsed){const e=i.getFirstPosition();return e.textNode&&e.textNode.data}else{const e=Array.from(i.getFirstRange().getItems());if(e.length>1)return null;const t=e[0];return t.is("$text")||t.is("$textProxy")?t.data:null}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zM extends q{refresh(){const e=this.editor.model,t=e.document.selection,n=t.getSelectedElement();uc(n,e.schema)?this.isEnabled=e.schema.checkAttribute(n,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref")}execute(){const e=this.editor,t=this.editor.model,n=t.document.selection,s=e.commands.get("link");t.change(o=>{const r=n.isCollapsed?[gi(n.getFirstPosition(),"linkHref",n.getAttribute("linkHref"),t)]:t.schema.getValidRanges(n.getRanges(),"linkHref");for(const a of r)if(o.removeAttribute("linkHref",a),s)for(const c of s.manualDecorators)o.removeAttribute(c.id,a)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class HM extends ue(){constructor({id:e,label:t,attributes:n,classes:s,styles:o,defaultValue:r}){super(),this.id=e,this.set("value",void 0),this.defaultValue=r,this.label=t,this.attributes=n,this.classes=s,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const $M="ck-link_selected",pf="automatic",UM="manual",WM=/^(https?:)?\/\//;class Vl extends y{static get pluginName(){return"LinkEditing"}static get requires(){return[hu,Lg,Zt]}constructor(e){super(e),e.config.define("link",{addTargetToExternalLinks:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:mf}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(s,o)=>mf(Z1(s),o)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:s=>s.getAttribute("href")}}),e.commands.add("link",new DM(e)),e.commands.add("unlink",new zM(e));const t=MM(e.t,FM(e.config.get("link.decorators")));this._enableAutomaticDecorators(t.filter(s=>s.mode===pf)),this._enableManualDecorators(t.filter(s=>s.mode===UM)),e.plugins.get(hu).registerAttribute("linkHref"),LP(e,"linkHref","a",$M),this._enableLinkOpen(),this._enableInsertContentSelectionAttributesFixer(),this._enableClickingAfterLink(),this._enableTypingOverLink(),this._handleDeleteContentAfterLink(),this._enableClipboardIntegration()}_enableAutomaticDecorators(e){const t=this.editor,s=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&s.add({id:"linkIsExternal",mode:pf,callback:o=>!!o&&WM.test(o),attributes:{target:"_blank",rel:"noopener noreferrer"}}),s.add(e),s.length&&t.conversion.for("downcast").add(s.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;const t=this.editor,s=t.commands.get("link").manualDecorators;e.forEach(o=>{t.model.schema.extend("$text",{allowAttributes:o.id});const r=new HM(o);s.add(r),t.conversion.for("downcast").attributeToElement({model:r.id,view:(a,{writer:c,schema:l},{item:x})=>{if((x.is("selection")||l.isInline(x))&&a){const d=c.createAttributeElement("a",r.attributes,{priority:5});r.classes&&c.addClass(r.classes,d);for(const u in r.styles)c.setStyle(u,r.styles[u],d);return c.setCustomProperty("link",!0,d),d}}}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",...r._createPattern()},model:{key:r.id}})})}_enableLinkOpen(){const e=this.editor,n=e.editing.view.document;this.listenTo(n,"click",(s,o)=>{if(!(ee.isMac?o.domEvent.metaKey:o.domEvent.ctrlKey))return;let a=o.domTarget;if(a.tagName.toLowerCase()!="a"&&(a=a.closest("a")),!a)return;const c=a.getAttribute("href");c&&(s.stop(),o.preventDefault(),gf(c))},{context:"$capture"}),this.listenTo(n,"keydown",(s,o)=>{const a=e.commands.get("link").value;a&&o.keyCode===se.enter&&o.altKey&&(s.stop(),gf(a))})}_enableInsertContentSelectionAttributesFixer(){const t=this.editor.model,n=t.document.selection;this.listenTo(t,"insertContent",()=>{const s=n.anchor.nodeBefore,o=n.anchor.nodeAfter;n.hasAttribute("linkHref")&&s&&s.hasAttribute("linkHref")&&(o&&o.hasAttribute("linkHref")||t.change(r=>{x0(r,d0(t.schema))}))},{priority:"low"})}_enableClickingAfterLink(){const e=this.editor,t=e.model;e.editing.view.addObserver(oa);let n=!1;this.listenTo(e.editing.view.document,"mousedown",()=>{n=!0}),this.listenTo(e.editing.view.document,"selectionChange",()=>{if(!n)return;n=!1;const s=t.document.selection;if(!s.isCollapsed||!s.hasAttribute("linkHref"))return;const o=s.getFirstPosition(),r=gi(o,"linkHref",s.getAttribute("linkHref"),t);(o.isTouching(r.start)||o.isTouching(r.end))&&t.change(a=>{x0(a,d0(t.schema))})})}_enableTypingOverLink(){const e=this.editor,t=e.editing.view;let n=null,s=!1;this.listenTo(t.document,"delete",()=>{s=!0},{priority:"high"}),this.listenTo(e.model,"deleteContent",()=>{const o=e.model.document.selection;if(!o.isCollapsed){if(s){s=!1;return}wf(e)&&jM(e.model)&&(n=o.getAttributes())}},{priority:"high"}),this.listenTo(e.model,"insertContent",(o,[r])=>{s=!1,wf(e)&&n&&(e.model.change(a=>{for(const[c,l]of n)a.setAttribute(c,l,r)}),n=null)},{priority:"high"})}_handleDeleteContentAfterLink(){const e=this.editor,t=e.model,n=t.document.selection,s=e.editing.view;let o=!1,r=!1;this.listenTo(s.document,"delete",(a,c)=>{r=c.direction==="backward"},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{o=!1;const a=n.getFirstPosition(),c=n.getAttribute("linkHref");if(!c)return;const l=gi(a,"linkHref",c,t);o=l.containsPosition(a)||l.end.isEqual(a)},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{r&&(r=!1,!o&&e.model.enqueueChange(a=>{x0(a,d0(t.schema))}))},{priority:"low"})}_enableClipboardIntegration(){const e=this.editor,t=e.model,n=this.editor.config.get("link.defaultProtocol");n&&this.listenTo(e.plugins.get("ClipboardPipeline"),"contentInsertion",(s,o)=>{t.change(r=>{const a=r.createRangeIn(o.content);for(const c of a.getItems())if(c.hasAttribute("linkHref")){const l=Rl(c.getAttribute("linkHref"),n);r.setAttribute("linkHref",l,c)}})})}}function x0(i,e){i.removeSelectionAttribute("linkHref");for(const t of e)i.removeSelectionAttribute(t)}function jM(i){const e=i.document.selection,t=e.getFirstPosition(),n=e.getLastPosition(),s=t.nodeAfter;if(!s||!s.is("$text")||!s.hasAttribute("linkHref"))return!1;const o=n.textNode||n.nodeBefore;return s===o?!0:gi(t,"linkHref",s.getAttribute("linkHref"),i).containsRange(i.createRange(t,n),!0)}function wf(i){return i.model.change(t=>t.batch).isTyping}function d0(i){return i.getDefinition("$text").allowAttributes.filter(t=>t.startsWith("link"))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qM extends D{constructor(e,t){super(e),this.focusTracker=new Se,this.keystrokes=new Le,this._focusables=new dt;const n=e.t;this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(n("Save"),K.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(n("Cancel"),K.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(t),this.children=this._createFormChildren(t.manualDecorators),this._focusCycler=new ut({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const s=["ck","ck-link-form","ck-responsive-form"];t.manualDecorators.length&&s.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:s,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,t)=>(e[t.name]=t.isOn,e),{})}render(){super.render(),as({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createUrlInput(){const e=this.locale.t,t=new Ge(this.locale,Rt);return t.label=e("Link URL"),t}_createButton(e,t,n,s){const o=new G(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:n}}),s&&o.delegate("execute").to(this,s),o}_createManualDecoratorSwitches(e){const t=this.createCollection();for(const n of e.manualDecorators){const s=new _o(this.locale);s.set({name:n.id,label:n.label,withText:!0}),s.bind("isOn").toMany([n,e],"value",(o,r)=>r===void 0&&o===void 0?!!n.defaultValue:!!o),s.on("execute",()=>{n.set("value",!s.isOn)}),t.add(s)}return t}_createFormChildren(e){const t=this.createCollection();if(t.add(this.urlInputView),e.length){const n=new D;n.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(s=>({tag:"li",children:[s],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(n)}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t}}const GM='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KM extends D{constructor(e){super(e),this.focusTracker=new Se,this.keystrokes=new Le,this._focusables=new dt;const t=e.t;this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(t("Unlink"),GM,"unlink"),this.editButtonView=this._createButton(t("Edit link"),K.pencil,"edit"),this.set("href",void 0),this._focusCycler=new ut({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(e,t,n){const s=new G(this.locale);return s.set({label:e,icon:t,tooltip:!0}),s.delegate("execute").to(this,n),s}_createPreviewButton(){const e=new G(this.locale),t=this.bindTemplate,n=this.t;return e.set({withText:!0,tooltip:n("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:t.to("href",s=>s&&Z1(s)),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",s=>s||n("This link has no URL")),e.bind("isEnabled").to(this,"href",s=>!!s),e.template.tag="a",e.template.eventListeners={},e}}const X1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const tn="link-ui";class Q1 extends y{constructor(){super(...arguments),this.actionsView=null,this.formView=null}static get requires(){return[fn]}static get pluginName(){return"LinkUI"}init(){const e=this.editor;e.editing.view.addObserver(xg),this._balloon=e.plugins.get(fn),this._createToolbarLinkButton(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:tn,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:tn,view:{name:"span",classes:["ck-fake-link-selection","ck-fake-link-selection_collapsed"]}})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const e=this.editor,t=new KM(e.locale),n=e.commands.get("link"),s=e.commands.get("unlink");return t.bind("href").to(n,"value"),t.editButtonView.bind("isEnabled").to(n),t.unlinkButtonView.bind("isEnabled").to(s),this.listenTo(t,"edit",()=>{this._addFormView()}),this.listenTo(t,"unlink",()=>{e.execute("unlink"),this._hideUI()}),t.keystrokes.set("Esc",(o,r)=>{this._hideUI(),r()}),t.keystrokes.set(mr,(o,r)=>{this._addFormView(),r()}),t}_createFormView(){const e=this.editor,t=e.commands.get("link"),n=e.config.get("link.defaultProtocol"),s=new(Jr(qM))(e.locale,t);return s.urlInputView.fieldView.bind("value").to(t,"value"),s.urlInputView.bind("isEnabled").to(t,"isEnabled"),s.saveButtonView.bind("isEnabled").to(t),this.listenTo(s,"submit",()=>{const{value:o}=s.urlInputView.fieldView.element,r=Rl(o,n);e.execute("link",r,s.getDecoratorSwitchesState()),this._closeFormView()}),this.listenTo(s,"cancel",()=>{this._closeFormView()}),s.keystrokes.set("Esc",(o,r)=>{this._closeFormView(),r()}),s}_createToolbarLinkButton(){const e=this.editor,t=e.commands.get("link"),n=e.t;e.ui.componentFactory.add("link",s=>{const o=new G(s);return o.isEnabled=!0,o.label=n("Link"),o.icon=X1,o.keystroke=mr,o.tooltip=!0,o.isToggleable=!0,o.bind("isEnabled").to(t,"isEnabled"),o.bind("isOn").to(t,"value",r=>!!r),this.listenTo(o,"execute",()=>this._showUI(!0)),o})}_enableBalloonActivators(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(mr,(n,s)=>{s(),e.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,t)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),t())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,t)=>{this._isUIVisible&&(this._hideUI(),t())}),rs({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const t=this.editor.commands.get("link");this.formView.disableCssTransitions(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions(),this.formView.urlInputView.fieldView.element.value=t.value||""}_closeFormView(){const e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),e.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const e=this.editor,t=e.editing.view.document;let n=this._getSelectedLinkElement(),s=r();const o=()=>{const a=this._getSelectedLinkElement(),c=r();n&&!a||!n&&c!==s?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),n=a,s=c};function r(){return t.selection.focus.getAncestors().reverse().find(a=>a.is("element"))}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const e=this._balloon.visibleView;return!!this.formView&&e==this.formView||this._areActionsVisible}_getBalloonPositionData(){const e=this.editor.editing.view,t=this.editor.model,n=e.document;let s;if(t.markers.has(tn)){const o=Array.from(this.editor.editing.mapper.markerNameToElements(tn)),r=e.createRange(e.createPositionBefore(o[0]),e.createPositionAfter(o[o.length-1]));s=e.domConverter.viewRangeToDom(r)}else s=()=>{const o=this._getSelectedLinkElement();return o?e.domConverter.mapViewToDom(o):e.domConverter.viewRangeToDom(n.selection.getFirstRange())};return{target:s}}_getSelectedLinkElement(){const e=this.editor.editing.view,t=e.document.selection,n=t.getSelectedElement();if(t.isCollapsed||n&&Ke(n))return u0(t.getFirstPosition());{const s=t.getFirstRange().getTrimmed(),o=u0(s.start),r=u0(s.end);return!o||o!=r?null:e.createRangeIn(o).getTrimmed().isEqual(s)?o:null}}_showFakeVisualSelection(){const e=this.editor.model;e.change(t=>{const n=e.document.selection.getFirstRange();if(e.markers.has(tn))t.updateMarker(tn,{range:n});else if(n.start.isAtEnd){const s=n.start.getLastMatchingPosition(({item:o})=>!e.schema.isContent(o),{boundaries:n});t.addMarker(tn,{usingOperation:!1,affectsData:!1,range:t.createRange(s,n.end)})}else t.addMarker(tn,{usingOperation:!1,affectsData:!1,range:n})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(tn)&&e.change(t=>{t.removeMarker(tn)})}}function u0(i){return i.getAncestors().find(e=>OM(e))||null}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const JM=4,ZM=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),YM=2;class XM extends y{static get requires(){return[qn]}static get pluginName(){return"AutoLink"}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling()}_enableTypingHandling(){const e=this.editor,t=new Dg(e.model,n=>{if(!QM(n))return;const s=_f(n.substr(0,n.length-1));if(s)return{url:s}});t.on("matched:data",(n,s)=>{const{batch:o,range:r,url:a}=s;if(!o.isTyping)return;const c=r.end.getShiftedBy(-1),l=c.getShiftedBy(-a.length),x=e.model.createRange(l,c);this._applyAutoLink(a,x)}),t.bind("isEnabled").to(this)}_enableEnterHandling(){const e=this.editor,t=e.model,n=e.commands.get("enter");n&&n.on("execute",()=>{const s=t.document.selection.getFirstPosition();if(!s.parent.previousSibling)return;const o=t.createRangeIn(s.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(o)})}_enableShiftEnterHandling(){const e=this.editor,t=e.model,n=e.commands.get("shiftEnter");n&&n.on("execute",()=>{const s=t.document.selection.getFirstPosition(),o=t.createRange(t.createPositionAt(s.parent,0),s.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(o)})}_checkAndApplyAutoLinkOnRange(e){const t=this.editor.model,{text:n,range:s}=Ng(e,t),o=_f(n);if(o){const r=t.createRange(s.end.getShiftedBy(-o.length),s.end);this._applyAutoLink(o,r)}}_applyAutoLink(e,t){const n=this.editor.model,s=this.editor.config.get("link.defaultProtocol"),o=Rl(e,s);!this.isEnabled||!eF(t,n)||!Y1(o)||tF(t)||this._persistAutoLink(o,t)}_persistAutoLink(e,t){const n=this.editor.model,s=this.editor.plugins.get("Delete");n.enqueueChange(o=>{o.setAttribute("linkHref",e,t),n.enqueueChange(()=>{s.requestUndoOnBackspace()})})}}function QM(i){return i.length>JM&&i[i.length-1]===" "&&i[i.length-2]!==" "}function _f(i){const e=ZM.exec(i);return e?e[YM]:null}function eF(i,e){return e.schema.checkAttributeInSelection(e.createSelection(i),"linkHref")}function tF(i){const e=i.start.nodeAfter;return!!e&&e.hasAttribute("linkHref")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nF extends y{static get requires(){return[Vl,Q1,XM]}static get pluginName(){return"Link"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iF extends y{static get requires(){return["ImageEditing","ImageUtils",Vl]}static get pluginName(){return"LinkImageEditing"}init(){const e=this.editor,t=e.model.schema;e.plugins.has("ImageBlockEditing")&&t.extend("imageBlock",{allowAttributes:["linkHref"]}),e.conversion.for("upcast").add(sF(e)),e.conversion.for("downcast").add(oF(e)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const e=this.editor,n=e.commands.get("link").automaticDecorators;n.length&&e.conversion.for("downcast").add(n.getDispatcherForLinkedImage())}_enableManualDecorators(){const e=this.editor,t=e.commands.get("link");for(const n of t.manualDecorators)e.plugins.has("ImageBlockEditing")&&e.model.schema.extend("imageBlock",{allowAttributes:n.id}),e.plugins.has("ImageInlineEditing")&&e.model.schema.extend("imageInline",{allowAttributes:n.id}),e.conversion.for("downcast").add(rF(n)),e.conversion.for("upcast").add(aF(e,n))}}function sF(i){const e=i.plugins.has("ImageInlineEditing"),t=i.plugins.get("ImageUtils");return n=>{n.on("element:a",(s,o,r)=>{const a=o.viewItem,c=t.findViewImgElement(a);if(!c)return;const l=c.findAncestor(f=>t.isBlockImageView(f));if(e&&!l)return;const x={attributes:["href"]};if(!r.consumable.consume(a,x))return;const d=a.getAttribute("href");if(!d)return;let u=o.modelCursor.parent;if(!u.is("element","imageBlock")){const f=r.convertItem(c,o.modelCursor);o.modelRange=f.modelRange,o.modelCursor=f.modelCursor,u=o.modelCursor.nodeBefore}u&&u.is("element","imageBlock")&&r.writer.setAttribute("linkHref",d,u)},{priority:"high"})}}function oF(i){const e=i.plugins.get("ImageUtils");return t=>{t.on("attribute:linkHref:imageBlock",(n,s,o)=>{if(!o.consumable.consume(s.item,n.name))return;const r=o.mapper.toViewElement(s.item),a=o.writer,c=Array.from(r.getChildren()).find(d=>d.is("element","a")),l=e.findViewImgElement(r),x=l.parent.is("element","picture")?l.parent:l;if(c)s.attributeNewValue?a.setAttribute("href",s.attributeNewValue,c):(a.move(a.createRangeOn(x),a.createPositionAt(r,0)),a.remove(c));else{const d=a.createContainerElement("a",{href:s.attributeNewValue});a.insert(a.createPositionAt(r,0),d),a.move(a.createRangeOn(x),a.createPositionAt(d,0))}},{priority:"high"})}}function rF(i){return e=>{e.on(`attribute:${i.id}:imageBlock`,(t,n,s)=>{const o=s.mapper.toViewElement(n.item),r=Array.from(o.getChildren()).find(a=>a.is("element","a"));if(r){for(const[a,c]of Gt(i.attributes))s.writer.setAttribute(a,c,r);i.classes&&s.writer.addClass(i.classes,r);for(const a in i.styles)s.writer.setStyle(a,i.styles[a],r)}})}}function aF(i,e){const t=i.plugins.has("ImageInlineEditing"),n=i.plugins.get("ImageUtils");return s=>{s.on("element:a",(o,r,a)=>{const c=r.viewItem,l=n.findViewImgElement(c);if(!l)return;const x=l.findAncestor(m=>n.isBlockImageView(m));if(t&&!x)return;const u=new Ct(e._createPattern()).match(c);if(!u||!a.consumable.consume(c,u.match))return;const f=r.modelCursor.nodeBefore||r.modelCursor.parent;a.writer.setAttribute(e.id,!0,f)},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cF extends y{static get requires(){return[Vl,Q1,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}init(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",(n,s)=>{this._isSelectedLinkedImage(e.model.document.selection)&&(s.preventDefault(),n.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("linkImage",n=>{const s=new G(n),o=e.plugins.get("LinkUI"),r=e.commands.get("link");return s.set({isEnabled:!0,label:t("Link image"),icon:X1,keystroke:mr,tooltip:!0,isToggleable:!0}),s.bind("isEnabled").to(r,"isEnabled"),s.bind("isOn").to(r,"value",a=>!!a),this.listenTo(s,"execute",()=>{this._isSelectedLinkedImage(e.model.document.selection)?o._addActionsView():o._showUI(!0)}),s})}_isSelectedLinkedImage(e){const t=e.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(t)&&t.hasAttribute("linkHref")}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lF extends y{static get requires(){return[iF,cF]}static get pluginName(){return"LinkImage"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function vf(i,e){const t=(n,s,o)=>{if(!o.consumable.consume(s.item,n.name))return;const r=s.attributeNewValue,a=o.writer,c=o.mapper.toViewElement(s.item),l=[...c.getChildren()].find(d=>d.getCustomProperty("media-content"));a.remove(l);const x=i.getMediaViewElement(a,r,e);a.insert(a.createPositionAt(c,0),x)};return n=>{n.on("attribute:url:media",t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function xF(i,e,t){return e.setCustomProperty("media",!0,i),ki(i,e,{label:t})}function dF(i){const e=i.getSelectedElement();return e&&uF(e)?e:null}function uF(i){return!!i.getCustomProperty("media")&&Ke(i)}function yf(i,e,t,n){return i.createContainerElement("figure",{class:"media"},[e.getMediaViewElement(i,t,n),i.createSlot()])}function Cf(i){const e=i.getSelectedElement();return e&&e.is("element","media")?e:null}function eb(i,e,t,n){i.change(s=>{const o=s.createElement("media",{url:e});i.insertObject(o,t,null,{setSelection:"on",findOptimalPosition:n?"auto":void 0})})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fF extends q{refresh(){const e=this.editor.model,t=e.document.selection,n=Cf(t);this.value=n?n.getAttribute("url"):void 0,this.isEnabled=mF(t)||hF(t,e)}execute(e){const t=this.editor.model,n=t.document.selection,s=Cf(n);s?t.change(o=>{o.setAttribute("url",e,s)}):eb(t,e,n,!0)}}function hF(i,e){let n=fa(i,e).start.parent;return n.isEmpty&&!e.schema.isLimit(n)&&(n=n.parent),e.schema.checkChild(n,"media")}function mF(i){const e=i.getSelectedElement();return!!e&&e.name==="media"}const gF='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const bF="0 0 64 42";class pF{constructor(e,t){const n=t.providers,s=t.extraProviders||[],o=new Set(t.removeProviders),r=n.concat(s).filter(a=>{const c=a.name;return c?!o.has(c):(be("media-embed-no-provider-name",{provider:a}),!1)});this.locale=e,this.providerDefinitions=r}hasMedia(e){return!!this._getMedia(e)}getMediaViewElement(e,t,n){return this._getMedia(t).getViewElement(e,n)}_getMedia(e){if(!e)return new kf(this.locale);e=e.trim();for(const t of this.providerDefinitions){const n=t.html,s=ge(t.url);for(const o of s){const r=this._getUrlMatches(e,o);if(r)return new kf(this.locale,e,r,n)}}return null}_getUrlMatches(e,t){let n=e.match(t);if(n)return n;let s=e.replace(/^https?:\/\//,"");return n=s.match(t),n||(s=s.replace(/^www\./,""),n=s.match(t),n)?n:null}}class kf{constructor(e,t,n,s){this.url=this._getValidUrl(t),this._locale=e,this._match=n,this._previewRenderer=s}getViewElement(e,t){const n={};let s;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(n["data-oembed-url"]=this.url),t.renderForEditingView&&(n.class="ck-media__wrapper");const o=this._getPreviewHtml(t);s=e.createRawElement("div",n,(r,a)=>{a.setContentOf(r,o)})}else this.url&&(n.url=this.url),s=e.createEmptyElement(t.elementName,n);return e.setCustomProperty("media-content",!0,s),s}_getPreviewHtml(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const e=new mn,t=this._locale.t;return e.content=gF,e.viewBox=bF,new gt({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[e]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":t("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(e){return e?e.match(/^https?/)?e:"https://"+e:null}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zr extends y{static get pluginName(){return"MediaEmbedEditing"}constructor(e){super(e),e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:/^dailymotion\.com\/video\/(\w+)/,html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:t=>{const n=t[1],s=t[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${n}${s?`?start=${s}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new pF(e.locale,e.config.get("mediaEmbed"))}init(){const e=this.editor,t=e.model.schema,n=e.t,s=e.conversion,o=e.config.get("mediaEmbed.previewsInData"),r=e.config.get("mediaEmbed.elementName"),a=this.registry;e.commands.add("mediaEmbed",new fF(e)),t.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),s.for("dataDowncast").elementToStructure({model:"media",view:(c,{writer:l})=>{const x=c.getAttribute("url");return yf(l,a,x,{elementName:r,renderMediaPreview:!!x&&o})}}),s.for("dataDowncast").add(vf(a,{elementName:r,renderMediaPreview:o})),s.for("editingDowncast").elementToStructure({model:"media",view:(c,{writer:l})=>{const x=c.getAttribute("url"),d=yf(l,a,x,{elementName:r,renderForEditingView:!0});return xF(d,l,n("media widget"))}}),s.for("editingDowncast").add(vf(a,{elementName:r,renderForEditingView:!0})),s.for("upcast").elementToElement({view:c=>["oembed",r].includes(c.name)&&c.getAttribute("url")?{name:!0}:null,model:(c,{writer:l})=>{const x=c.getAttribute("url");return a.hasMedia(x)?l.createElement("media",{url:x}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(c,{writer:l})=>{const x=c.getAttribute("data-oembed-url");return a.hasMedia(x)?l.createElement("media",{url:x}):null}}).add(c=>{const l=(x,d,u)=>{if(!u.consumable.consume(d.viewItem,{name:!0,classes:"media"}))return;const{modelRange:f,modelCursor:m}=u.convertChildren(d.viewItem,d.modelCursor);d.modelRange=f,d.modelCursor=m,Be(f.getItems())||u.consumable.revert(d.viewItem,{name:!0,classes:"media"})};c.on("element:figure",l)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const wF=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class _F extends y{static get requires(){return[Gg,qn,Zg]}static get pluginName(){return"AutoMediaEmbed"}constructor(e){super(e),this._timeoutId=null,this._positionToInsert=null}init(){const e=this.editor,t=e.model.document,n=e.plugins.get("ClipboardPipeline");this.listenTo(n,"inputTransformation",()=>{const o=t.selection.getFirstRange(),r=nt.fromPosition(o.start);r.stickiness="toPrevious";const a=nt.fromPosition(o.end);a.stickiness="toNext",t.once("change:data",()=>{this._embedMediaBetweenPositions(r,a),r.detach(),a.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(U.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(e,t){const n=this.editor,s=n.plugins.get(zr).registry,o=new Mt(e,t),r=o.getWalker({ignoreElementEnd:!0});let a="";for(const l of r)l.item.is("$textProxy")&&(a+=l.item.data);if(a=a.trim(),!a.match(wF)){o.detach();return}if(!s.hasMedia(a)){o.detach();return}if(!n.commands.get("mediaEmbed").isEnabled){o.detach();return}this._positionToInsert=nt.fromPosition(e),this._timeoutId=U.window.setTimeout(()=>{n.model.change(l=>{this._timeoutId=null,l.remove(o),o.detach();let x=null;this._positionToInsert.root.rootName!=="$graveyard"&&(x=this._positionToInsert),eb(n.model,a,x,!1),this._positionToInsert.detach(),this._positionToInsert=null}),n.plugins.get(qn).requestUndoOnBackspace()},100)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vF extends D{constructor(e,t){super(t);const n=t.t;this.focusTracker=new Se,this.keystrokes=new Le,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(n("Save"),K.check,"ck-button-save"),this.saveButtonView.type="submit",this.saveButtonView.bind("isEnabled").to(this,"mediaURLInputValue",s=>!!s),this.cancelButtonView=this._createButton(n("Cancel"),K.cancel,"ck-button-cancel","cancel"),this._focusables=new dt,this._focusCycler=new ut({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),as({view:this}),[this.urlInputView,this.saveButtonView,this.cancelButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element);const t=n=>n.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.element.value=e.trim()}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const e=this.locale.t,t=new Ge(this.locale,Rt),n=t.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),t.label=e("Media URL"),t.infoText=this._urlInputViewInfoDefault,n.on("input",()=>{t.infoText=n.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=n.element.value.trim()}),t}_createButton(e,t,n,s){const o=new G(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:n}}),s&&o.delegate("execute").to(this,s),o}}const yF='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V7.176v.001z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class CF extends y{static get requires(){return[zr]}static get pluginName(){return"MediaEmbedUI"}init(){const e=this.editor,t=e.commands.get("mediaEmbed");e.ui.componentFactory.add("mediaEmbed",n=>{const s=Ne(n);return this._setUpDropdown(s,t),s})}_setUpDropdown(e,t){const n=this.editor,s=n.t,o=e.buttonView,r=n.plugins.get(zr).registry;e.once("change:isOpen",()=>{const a=new(Jr(vF))(kF(n.t,r),n.locale);e.panelView.children.add(a),o.on("open",()=>{a.disableCssTransitions(),a.url=t.value||"",a.urlInputView.fieldView.select(),a.enableCssTransitions()},{priority:"low"}),e.on("submit",()=>{a.isValid()&&(n.execute("mediaEmbed",a.url),n.editing.view.focus())}),e.on("change:isOpen",()=>a.resetFormStatus()),e.on("cancel",()=>{n.editing.view.focus()}),a.delegate("submit","cancel").to(e),a.urlInputView.fieldView.bind("value").to(t,"value"),a.urlInputView.bind("isEnabled").to(t,"isEnabled")}),e.bind("isEnabled").to(t),o.set({label:s("Insert media"),icon:yF,tooltip:!0})}}function kF(i,e){return[t=>{if(!t.url.length)return i("The URL must not be empty.")},t=>{if(!e.hasMedia(t.url))return i("This media URL is not supported.")}]}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TF extends y{static get requires(){return[zr,CF,_F,Yn]}static get pluginName(){return"MediaEmbed"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AF extends y{static get requires(){return[ns]}static get pluginName(){return"MediaEmbedToolbar"}afterInit(){const e=this.editor,t=e.t;e.plugins.get(ns).register("mediaEmbed",{ariaLabel:t("Media toolbar"),items:e.config.get("mediaEmbed.toolbar")||[],getRelatedElement:dF})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class EF extends q{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}refresh(){const e=this.editor.model,t=e.document;this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"mention")}execute(e){const t=this.editor.model,s=t.document.selection,o=typeof e.mention=="string"?{id:e.mention}:e.mention,r=o.id,a=e.range||s.getFirstRange();if(!t.canEditAt(a))return;const c=e.text||r,l=tb({_text:c,id:r},o);if(e.marker.length!=1)throw new w("mentioncommand-incorrect-marker",this);if(r.charAt(0)!=e.marker)throw new w("mentioncommand-incorrect-id",this);t.change(x=>{const d=Gt(s.getAttributes()),u=new Map(d.entries());u.set("mention",l),t.insertContent(x.createText(c,u),a),t.insertContent(x.createText(" ",d),a.start.getShiftedBy(c.length))})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class SF extends y{static get pluginName(){return"MentionEditing"}init(){const e=this.editor,t=e.model,n=t.document;t.schema.extend("$text",{allowAttributes:"mention"}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",key:"data-mention",classes:"mention"},model:{key:"mention",value:s=>nb(s)}}),e.conversion.for("downcast").attributeToElement({model:"mention",view:PF}),e.conversion.for("downcast").add(IF),n.registerPostFixer(s=>BF(s,n,t.schema)),n.registerPostFixer(s=>OF(s,n)),n.registerPostFixer(s=>RF(s,n)),e.commands.add("mention",new EF(e))}}function tb(i,e){return Object.assign({uid:Vt()},i,e||{})}function nb(i,e){const t=i.getAttribute("data-mention"),n=i.getChild(0);if(!n)return;const s={id:t,_text:n.data};return tb(s,e)}function IF(i){i.on("attribute:mention",(e,t,n)=>{const s=t.attributeNewValue;if(!t.item.is("$textProxy")||!s)return;const o=t.range.start;(o.textNode||o.nodeAfter).data!=s._text&&n.consumable.consume(t.item,e.name)},{priority:"highest"})}function PF(i,{writer:e}){if(!i)return;const t={class:"mention","data-mention":i.id},n={id:i.uid,priority:20};return e.createAttributeElement("span",t,n)}function RF(i,e){const t=e.selection,n=t.focus;return t.isCollapsed&&t.hasAttribute("mention")&&VF(n)?(i.removeSelectionAttribute("mention"),!0):!1}function VF(i){const e=i.isAtStart;return i.nodeBefore&&i.nodeBefore.is("$text")||e}function BF(i,e,t){const n=e.differ.getChanges();let s=!1;for(const o of n){if(o.type=="attribute")continue;const r=o.position;if(o.name=="$text"){const a=r.textNode&&r.textNode.nextSibling;s=ni(r.textNode,i)||s,s=ni(a,i)||s,s=ni(r.nodeBefore,i)||s,s=ni(r.nodeAfter,i)||s}if(o.name!="$text"&&o.type=="insert"){const a=r.nodeAfter;for(const c of i.createRangeIn(a).getItems())s=ni(c,i)||s}if(o.type=="insert"&&t.isInline(o.name)){const a=r.nodeAfter&&r.nodeAfter.nextSibling;s=ni(r.nodeBefore,i)||s,s=ni(a,i)||s}}return s}function OF(i,e){const t=e.differ.getChanges();let n=!1;for(const s of t)if(s.type==="attribute"&&s.attributeKey!="mention"){const o=s.range.start.nodeBefore,r=s.range.end.nodeAfter;for(const a of[o,r])ib(a)&&a.getAttribute(s.attributeKey)!=s.attributeNewValue&&(i.setAttribute(s.attributeKey,s.attributeNewValue,a),n=!0)}return n}function ib(i){if(!i||!(i.is("$text")||i.is("$textProxy"))||!i.hasAttribute("mention"))return!1;const e=i.data,n=i.getAttribute("mention")._text;return e!=n}function ni(i,e){return ib(i)?(e.removeAttribute("mention",i),!0):!1}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class LF extends aa{constructor(e){super(e),this.extendTemplate({attributes:{class:["ck-mentions"],tabindex:"-1"}})}selectFirst(){this.select(0)}selectNext(){const e=this.selected,t=this.items.getIndex(e);this.select(t+1)}selectPrevious(){const e=this.selected,t=this.items.getIndex(e);this.select(t-1)}select(e){let t=0;e>0&&e<this.items.length?t=e:e<0&&(t=this.items.length-1);const n=this.items.get(t);this.selected!==n&&(this.selected&&this.selected.removeHighlight(),n.highlight(),this.selected=n,this._isItemVisibleInScrolledArea(n)||(this.element.scrollTop=n.element.offsetTop))}executeSelected(){this.selected.fire("execute")}_isItemVisibleInScrolledArea(e){return new te(this.element).contains(new te(e.element))}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class MF extends D{constructor(e,t){super(e),this.template=void 0,this.domElement=t,this.domElement.classList.add("ck-button"),this.set("isOn",!1),this.on("change:isOn",(n,s,o)=>{o?(this.domElement.classList.add("ck-on"),this.domElement.classList.remove("ck-off")):(this.domElement.classList.add("ck-off"),this.domElement.classList.remove("ck-on"))}),this.listenTo(this.domElement,"click",()=>{this.fire("execute")})}render(){super.render(),this.element=this.domElement}focus(){this.domElement.focus()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class FF extends ca{highlight(){const e=this.children.first;e.isOn=!0}removeHighlight(){const e=this.children.first;e.isOn=!1}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Xo=3,NF=[se.arrowup,se.arrowdown,se.esc],DF=[se.enter,se.tab];class zF extends y{static get pluginName(){return"MentionUI"}static get requires(){return[fn]}constructor(e){super(e),this._items=new De,this._mentionsView=this._createMentionView(),this._mentionsConfigurations=new Map,this._requestFeedDebounced=un(this._requestFeed,100),e.config.define("mention",{feeds:[]})}init(){const e=this.editor,t=e.config.get("mention.commitKeys")||DF,n=NF.concat(t);this._balloon=e.plugins.get(fn),e.editing.view.document.on("keydown",(r,a)=>{o(a.keyCode)&&this._isUIVisible&&(a.preventDefault(),r.stop(),a.keyCode==se.arrowdown&&this._mentionsView.selectNext(),a.keyCode==se.arrowup&&this._mentionsView.selectPrevious(),t.includes(a.keyCode)&&this._mentionsView.executeSelected(),a.keyCode==se.esc&&this._hideUIAndRemoveMarker())},{priority:"highest"}),rs({emitter:this._mentionsView,activator:()=>this._isUIVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUIAndRemoveMarker()});const s=e.config.get("mention.feeds");for(const r of s){const{feed:a,marker:c,dropdownLimit:l}=r;if(!GF(c))throw new w("mentionconfig-incorrect-marker",null,{marker:c});const x=typeof a=="function"?a.bind(this.editor):WF(a),d=r.itemRenderer,u={marker:c,feedCallback:x,itemRenderer:d,dropdownLimit:l};this._mentionsConfigurations.set(c,u)}this._setupTextWatcher(s),this.listenTo(e,"change:isReadOnly",()=>{this._hideUIAndRemoveMarker()}),this.on("requestFeed:response",(r,a)=>this._handleFeedResponse(a)),this.on("requestFeed:error",()=>this._hideUIAndRemoveMarker());function o(r){return n.includes(r)}}destroy(){super.destroy(),this._mentionsView.destroy()}get _isUIVisible(){return this._balloon.visibleView===this._mentionsView}_createMentionView(){const e=this.editor.locale,t=new LF(e);return t.items.bindTo(this._items).using(n=>{const{item:s,marker:o}=n,{dropdownLimit:r}=this._mentionsConfigurations.get(o),a=r||this.editor.config.get("mention.dropdownLimit")||10;if(t.items.length>=a)return null;const c=new FF(e),l=this._renderItem(s,o);return l.delegate("execute").to(c),c.children.add(l),c.item=s,c.marker=o,c.on("execute",()=>{t.fire("execute",{item:s,marker:o})}),c}),t.on("execute",(n,s)=>{const o=this.editor,r=o.model,a=s.item,c=s.marker,l=o.model.markers.get("mention"),x=r.createPositionAt(r.document.selection.focus),d=r.createPositionAt(l.getStart()),u=r.createRange(d,x);this._hideUIAndRemoveMarker(),o.execute("mention",{mention:a,text:a.text,marker:c,range:u}),o.editing.view.focus()}),t}_getItemRenderer(e){const{itemRenderer:t}=this._mentionsConfigurations.get(e);return t}_requestFeed(e,t){this._lastRequested=t;const{feedCallback:n}=this._mentionsConfigurations.get(e),s=n(t);if(!(s instanceof Promise)){this.fire("requestFeed:response",{feed:s,marker:e,feedText:t});return}s.then(r=>{this._lastRequested==t?this.fire("requestFeed:response",{feed:r,marker:e,feedText:t}):this.fire("requestFeed:discarded",{feed:r,marker:e,feedText:t})}).catch(r=>{this.fire("requestFeed:error",{error:r}),be("mention-feed-callback-error",{marker:e})})}_setupTextWatcher(e){const t=this.editor,n=e.map(r=>({...r,pattern:ob(r.marker,r.minimumCharacters||0)})),s=new Dg(t.model,$F(n));s.on("matched",(r,a)=>{const c=sb(n,a.text),x=t.model.document.selection.focus,d=t.model.createPositionAt(x.parent,c.position);if(jF(x)||qF(d)){this._hideUIAndRemoveMarker();return}const u=UF(c,a.text),f=c.marker.length+u.length,m=x.getShiftedBy(-f),b=x.getShiftedBy(-u.length),p=t.model.createRange(m,b);if(f0(t)){const C=t.model.markers.get("mention");t.model.change(_=>{_.updateMarker(C,{range:p})})}else t.model.change(C=>{C.addMarker("mention",{range:p,usingOperation:!1,affectsData:!1})});this._requestFeedDebounced(c.marker,u)}),s.on("unmatched",()=>{this._hideUIAndRemoveMarker()});const o=t.commands.get("mention");return s.bind("isEnabled").to(o),s}_handleFeedResponse(e){const{feed:t,marker:n}=e;if(!f0(this.editor))return;this._items.clear();for(const o of t){const r=typeof o!="object"?{id:o,text:o}:o;this._items.add({item:r,marker:n})}const s=this.editor.model.markers.get("mention");this._items.length?this._showOrUpdateUI(s):this._hideUIAndRemoveMarker()}_showOrUpdateUI(e){this._isUIVisible?this._balloon.updatePosition(this._getBalloonPanelPositionData(e,this._mentionsView.position)):this._balloon.add({view:this._mentionsView,position:this._getBalloonPanelPositionData(e,this._mentionsView.position),singleViewMode:!0}),this._mentionsView.position=this._balloon.view.position,this._mentionsView.selectFirst()}_hideUIAndRemoveMarker(){this._balloon.hasView(this._mentionsView)&&this._balloon.remove(this._mentionsView),f0(this.editor)&&this.editor.model.change(e=>e.removeMarker("mention")),this._mentionsView.position=void 0}_renderItem(e,t){const n=this.editor;let s,o=e.id;const r=this._getItemRenderer(t);if(r){const a=r(e);typeof a!="string"?s=new MF(n.locale,a):o=a}if(!s){const a=new G(n.locale);a.label=o,a.withText=!0,s=a}return s}_getBalloonPanelPositionData(e,t){const n=this.editor,s=n.editing,o=s.view.domConverter,r=s.mapper,a=n.locale.uiLanguageDirection;return{target:()=>{let c=e.getRange();c.start.root.rootName=="$graveyard"&&(c=n.model.document.selection.getFirstRange());const l=r.toViewRange(c);return te.getDomRangeRects(o.viewRangeToDom(l)).pop()},limiter:()=>{const c=this.editor.editing.view,x=c.document.selection.editableElement;return x?c.domConverter.mapViewToDom(x.root):null},positions:HF(t,a)}}}function HF(i,e){const t={caret_se:n=>({top:n.bottom+Xo,left:n.right,name:"caret_se",config:{withArrow:!1}}),caret_ne:(n,s)=>({top:n.top-s.height-Xo,left:n.right,name:"caret_ne",config:{withArrow:!1}}),caret_sw:(n,s)=>({top:n.bottom+Xo,left:n.right-s.width,name:"caret_sw",config:{withArrow:!1}}),caret_nw:(n,s)=>({top:n.top-s.height-Xo,left:n.right-s.width,name:"caret_nw",config:{withArrow:!1}})};return Object.prototype.hasOwnProperty.call(t,i)?[t[i]]:e!=="rtl"?[t.caret_se,t.caret_sw,t.caret_ne,t.caret_nw]:[t.caret_sw,t.caret_se,t.caret_nw,t.caret_ne]}function sb(i,e){let t;for(const n of i){const s=e.lastIndexOf(n.marker);s>0&&!e.substring(s-1).match(n.pattern)||(!t||s>=t.position)&&(t={marker:n.marker,position:s,minimumCharacters:n.minimumCharacters,pattern:n.pattern})}return t}function ob(i,e){const t=e==0?"*":`{${e},}`,o=`(?:^|[ ${ee.features.isRegExpUnicodePropertySupported?`\\p{Ps}\\p{Pi}"'`:`\\(\\[{"'`}])([${i}])(.${t})$`;return new RegExp(o,"u")}function $F(i){return t=>{const n=sb(i,t);if(!n)return!1;let s=0;n.position!==0&&(s=n.position-1);const o=t.substring(s);return n.pattern.test(o)}}function UF(i,e){let t=0;i.position!==0&&(t=i.position-1);const n=ob(i.marker,0);return e.substring(t).match(n)[2]}function WF(i){return e=>i.filter(n=>(typeof n=="string"?n:String(n.id)).toLowerCase().includes(e.toLowerCase()))}function jF(i){const e=i.textNode&&i.textNode.hasAttribute("mention"),t=i.nodeBefore;return e||t&&t.is("$text")&&t.hasAttribute("mention")}function qF(i){const e=i.nodeAfter;return e&&e.is("$text")&&e.hasAttribute("mention")}function GF(i){return i&&i.length==1}function f0(i){return i.model.markers.has("mention")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KF extends y{toMentionAttribute(e,t){return nb(e,t)}static get pluginName(){return"Mention"}static get requires(){return[SF,zF]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JF extends q{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}refresh(){const e=this.editor.model,t=e.document,n=Be(t.selection.getSelectedBlocks());this.value=!!n&&n.is("element","paragraph"),this.isEnabled=!!n&&Tf(n,e.schema)}execute(e={}){const t=this.editor.model,n=t.document,s=e.selection||n.selection;t.canEditAt(s)&&t.change(o=>{const r=s.getSelectedBlocks();for(const a of r)!a.is("element","paragraph")&&Tf(a,t.schema)&&o.rename(a,"paragraph")})}}function Tf(i,e){return e.checkChild(i.parent,"paragraph")&&!e.isObject(i)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ZF extends q{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}execute(e){const t=this.editor.model,n=e.attributes;let s=e.position;t.canEditAt(s)&&t.change(o=>{if(s=this._findPositionToInsertParagraph(s,o),!s)return;const r=o.createElement("paragraph");n&&t.schema.setAllowedAttributes(r,n,o),t.insertContent(r,s),o.setSelection(r,"in")})}_findPositionToInsertParagraph(e,t){const n=this.editor.model;if(n.schema.checkChild(e,"paragraph"))return e;const s=n.schema.findAllowedParent(e,"paragraph");if(!s)return null;const o=e.parent,r=n.schema.checkChild(o,"$text");return o.isEmpty||r&&e.isAtEnd?n.createPositionAfter(o):!o.isEmpty&&r&&e.isAtStart?n.createPositionBefore(o):t.split(e,s).position}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pa extends y{static get pluginName(){return"Paragraph"}init(){const e=this.editor,t=e.model;e.commands.add("paragraph",new JF(e)),e.commands.add("insertParagraph",new ZF(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(n,{writer:s})=>!pa.paragraphLikeElements.has(n.name)||n.isEmpty?null:s.createElement("paragraph"),view:/.+/,converterPriority:"low"})}}pa.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function YF(i,e){if(!i.childCount)return;const t=new $t(i.document),n=QF(i,t);if(!n.length)return;let s=null,o=1;n.forEach((r,a)=>{const c=aN(n[a-1],r),l=c?null:n[a-1],x=lN(l,r);if(c&&(s=null,o=1),!s||x!==0){const u=eN(r,e);if(!s)s=Af(u,r.element,t);else if(r.indent>o){const f=s.getChild(s.childCount-1),m=f.getChild(f.childCount-1);s=Af(u,m,t),o+=1}else if(r.indent<o){const f=o-r.indent;s=xN(s,f),o=r.indent}r.indent<=o&&(s.is("element",u.type)||(s=t.rename(u.type,s)))}const d=sN(r.element,t);t.appendChild(d,s)})}function XF(i,e){for(const t of e.createRangeIn(i)){const n=t.item;if(n.is("element","li")){const s=n.getChild(0);s&&s.is("element","p")&&e.unwrapElement(s)}}}function QF(i,e){const t=e.createRangeIn(i),n=new Ct({name:/^p|h\d+$/,styles:{"mso-list":/.*/}}),s=[];for(const o of t)if(o.type==="elementStart"&&n.match(o.item)){const r=oN(o.item);s.push({element:o.item,id:r.id,order:r.order,indent:r.indent})}return s}function eN(i,e){const t=new RegExp(`@list l${i.id}:level${i.indent}\\s*({[^}]*)`,"gi"),n=/mso-level-number-format:([^;]{0,100});/gi,s=/mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi,o=t.exec(e);let r="decimal",a="ol",c=null;if(o&&o[1]){const l=n.exec(o[1]);if(l&&l[1]&&(r=l[1].trim(),a=r!=="bullet"&&r!=="image"?"ol":"ul"),r==="bullet"){const x=tN(i.element);x&&(r=x)}else{const x=s.exec(o[1]);x&&x[1]&&(c=parseInt(x[1]))}}return{type:a,startIndex:c,style:iN(r)}}function tN(i){const e=nN(i);if(!e)return null;const t=e._data;return t==="o"?"circle":t==="·"?"disc":t==="§"?"square":null}function nN(i){if(i.getChild(0).is("$text"))return null;for(const e of i.getChildren()){if(!e.is("element","span"))continue;const t=e.getChild(0);if(t)return t.is("$text")?t:t.getChild(0)}/* istanbul ignore next -- @preserve */return null}function iN(i){if(i.startsWith("arabic-leading-zero"))return"decimal-leading-zero";switch(i){case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return i;default:return null}}function Af(i,e,t){const n=e.parent,s=t.createElement(i.type),o=n.getChildIndex(e)+1;return t.insertChild(o,s,n),i.style&&t.setStyle("list-style-type",i.style,s),i.startIndex&&i.startIndex>1&&t.setAttribute("start",i.startIndex,s),s}function sN(i,e){return rN(i,e),e.removeStyle("text-indent",i),e.rename("li",i)}function oN(i){const e={},t=i.getStyle("mso-list");if(t){const n=t.match(/(^|\s{1,100})l(\d+)/i),s=t.match(/\s{0,100}lfo(\d+)/i),o=t.match(/\s{0,100}level(\d+)/i);n&&s&&o&&(e.id=n[2],e.order=s[1],e.indent=parseInt(o[1]))}return e}function rN(i,e){const t=new Ct({name:"span",styles:{"mso-list":"Ignore"}}),n=e.createRangeIn(i);for(const s of n)s.type==="elementStart"&&t.match(s.item)&&e.remove(s.item)}function aN(i,e){if(!i)return!0;if(i.id!==e.id)return e.indent-i.indent!==1;const t=e.element.previousSibling;return t?!cN(t):!0}function cN(i){return i.is("element","ol")||i.is("element","ul")}function lN(i,e){return i?e.indent-i.indent:e.indent-1}function xN(i,e){const t=i.getAncestors({parentFirst:!0});let n=null,s=0;for(const o of t)if((o.is("element","ul")||o.is("element","ol"))&&s++,s===e){n=o;break}return n}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function dN(i,e){if(!i.childCount)return;const t=new $t(i.document),n=fN(i,t);hN(n,i,t),gN(n,i,t),mN(i,t);const s=bN(i,t);s.length&&wN(s,pN(e),t)}function uN(i){return btoa(i.match(/\w{2}/g).map(e=>String.fromCharCode(parseInt(e,16))).join(""))}function fN(i,e){const t=e.createRangeIn(i),n=new Ct({name:/v:(.+)/}),s=[];for(const o of t){if(o.type!="elementStart")continue;const r=o.item,a=r.previousSibling,c=a&&a.is("element")?a.name:null;n.match(r)&&r.getAttribute("o:gfxdata")&&c!=="v:shapetype"&&s.push(o.item.getAttribute("id"))}return s}function hN(i,e,t){const n=t.createRangeIn(e),s=new Ct({name:"img"}),o=[];for(const r of n)if(r.item.is("element")&&s.match(r.item)){const a=r.item,c=a.getAttribute("v:shapes")?a.getAttribute("v:shapes").split(" "):[];c.length&&c.every(l=>i.indexOf(l)>-1)?o.push(a):a.getAttribute("src")||o.push(a)}for(const r of o)t.remove(r)}function mN(i,e){const t=e.createRangeIn(i),n=new Ct({name:/v:(.+)/}),s=[];for(const o of t)o.type=="elementStart"&&n.match(o.item)&&s.push(o.item);for(const o of s)e.remove(o)}function gN(i,e,t){const n=t.createRangeIn(e),s=[];for(const a of n)if(a.type=="elementStart"&&a.item.is("element","v:shape")){const c=a.item.getAttribute("id");if(i.includes(c))continue;o(a.item.parent.getChildren(),c)||s.push(a.item)}for(const a of s){const c={src:r(a)};a.hasAttribute("alt")&&(c.alt=a.getAttribute("alt"));const l=t.createElement("img",c);t.insertChild(a.index+1,l,a.parent)}function o(a,c){for(const l of a){/* istanbul ignore else -- @preserve */if(l.is("element")&&(l.name=="img"&&l.getAttribute("v:shapes")==c||o(l.getChildren(),c)))return!0}return!1}function r(a){for(const c of a.getChildren()){/* istanbul ignore else -- @preserve */if(c.is("element")&&c.getAttribute("src"))return c.getAttribute("src")}}}function bN(i,e){const t=e.createRangeIn(i),n=new Ct({name:"img"}),s=[];for(const o of t)o.item.is("element")&&n.match(o.item)&&o.item.getAttribute("src").startsWith("file://")&&s.push(o.item);return s}function pN(i){if(!i)return[];const e=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,t=new RegExp("(?:("+e.source+"))([\\da-fA-F\\s]+)\\}","g"),n=i.match(t),s=[];if(n)for(const o of n){let r=!1;o.includes("\\pngblip")?r="image/png":o.includes("\\jpegblip")&&(r="image/jpeg"),r&&s.push({hex:o.replace(e,"").replace(/[^\da-fA-F]/g,""),type:r})}return s}function wN(i,e,t){if(i.length===e.length)for(let n=0;n<i.length;n++){const s=`data:${e[n].type};base64,${uN(e[n].hex)}`;t.setAttribute("src",s,i[n])}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function _N(i){const e=[],t=new $t(i.document);for(const{item:n}of t.createRangeIn(i))if(n.is("element")){for(const s of n.getClassNames())/\bmso/gi.exec(s)&&t.removeClass(s,n);for(const s of n.getStyleNames())/\bmso/gi.exec(s)&&t.removeStyle(s,n);n.is("element","w:sdt")&&e.push(n)}for(const n of e){const s=n.parent,o=s.getChildIndex(n);t.insertChild(o,n.getChildren(),s),t.remove(n)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const vN=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,yN=/xmlns:o="urn:schemas-microsoft-com/i;class Bl{constructor(e){this.document=e}isActive(e){return vN.test(e)||yN.test(e)}execute(e){const{body:t,stylesString:n}=e._parsedData;YF(t,n),dN(t,e.dataTransfer.getData("text/rtf")),_N(t),e.content=t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function CN(i,e){for(const t of i.getChildren())if(t.is("element","b")&&t.getStyle("font-weight")==="normal"){const n=i.getChildIndex(t);e.remove(t),e.insertChild(n,t.getChildren(),i)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kN(i,e){const t=new vo(e.document.stylesProcessor),n=new yo(t,{renderingMode:"data"}),s=n.blockElements,o=n.inlineObjectElements,r=[];for(const a of e.createRangeIn(i)){const c=a.item;if(c.is("element","br")){const l=Ef(c,"forward",e,{blockElements:s,inlineObjectElements:o}),x=Ef(c,"backward",e,{blockElements:s,inlineObjectElements:o}),d=Sf(l,s);(Sf(x,s)||d)&&r.push(c)}}for(const a of r)a.hasClass("Apple-interchange-newline")?e.remove(a):e.replace(a,e.createElement("p"))}function Ef(i,e,t,{blockElements:n,inlineObjectElements:s}){let o=t.createPositionAt(i,e=="forward"?"after":"before");return o=o.getLastMatchingPosition(({item:r})=>r.is("element")&&!n.includes(r.name)&&!s.includes(r.name),{direction:e}),e=="forward"?o.nodeAfter:o.nodeBefore}function Sf(i,e){return!!i&&i.is("element")&&e.includes(i.name)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const TN=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class AN{constructor(e){this.document=e}isActive(e){return TN.test(e)}execute(e){const t=new $t(this.document),{body:n}=e._parsedData;CN(n,t),XF(n,t),kN(n,t),e.content=n}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function EN(i,e){for(const t of i.getChildren())t.is("element","table")&&t.hasAttribute("xmlns")&&e.removeAttribute("xmlns",t)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function SN(i,e){for(const t of i.getChildren())if(t.is("element","google-sheets-html-origin")){const n=i.getChildIndex(t);e.remove(t),e.insertChild(n,t.getChildren(),i)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function IN(i,e){for(const t of i.getChildren())t.is("element","table")&&t.getStyle("width")==="0px"&&e.removeStyle("width",t)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function PN(i,e){for(const t of Array.from(i.getChildren()))t.is("element","style")&&e.remove(t)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const RN=/<google-sheets-html-origin/i;class VN{constructor(e){this.document=e}isActive(e){return RN.test(e)}execute(e){const t=new $t(this.document),{body:n}=e._parsedData;SN(n,t),EN(n,t),IN(n,t),PN(n,t),e.content=n}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function BN(i){return If(If(i)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/(<span\s+style=['"]letter-spacing:[^'"]+?['"]>)[\r\n]+(<\/span>)/g,"$1 $2").replace(/ <\//g," </").replace(/ <o:p><\/o:p>/g," <o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}function ON(i){i.querySelectorAll("span[style*=spacerun]").forEach(e=>{const t=e,n=t.innerText.length||0;t.innerText=Array(n+1).join("  ").substr(0,n)})}function If(i){return i.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length===1?" ":Array(t.length+1).join("  ").substr(0,t.length))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ol(i,e){const t=new DOMParser;i=i.replace(/<!--\[if gte vml 1]>/g,"");const n=BN(FN(i)),s=t.parseFromString(n,"text/html");ON(s);const o=s.body.innerHTML,r=LN(s,e),a=MN(s);return{body:r,bodyString:o,styles:a.styles,stylesString:a.stylesString}}function LN(i,e){const t=new vo(e),n=new yo(t,{renderingMode:"data"}),s=i.createDocumentFragment(),o=i.body.childNodes;for(;o.length>0;)s.appendChild(o[0]);return n.domToView(s,{skipComments:!0})}function MN(i){const e=[],t=[],n=Array.from(i.getElementsByTagName("style"));for(const s of n)s.sheet&&s.sheet.cssRules&&s.sheet.cssRules.length&&(e.push(s.sheet),t.push(s.innerHTML));return{styles:e,stylesString:t.join(" ")}}function FN(i){const e="</body>",t="</html>",n=i.indexOf(e);if(n<0)return i;const s=i.indexOf(t,n+e.length);return i.substring(0,n+e.length)+(s>=0?i.substring(s):"")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NN extends y{static get pluginName(){return"PasteFromOffice"}static get requires(){return[Zt]}init(){const e=this.editor,t=e.plugins.get("ClipboardPipeline"),n=e.editing.view.document,s=[];s.push(new Bl(n)),s.push(new AN(n)),s.push(new VN(n)),t.on("inputTransformation",(o,r)=>{if(r._isTransformedWithPasteFromOffice||e.model.document.selection.getFirstPosition().parent.is("element","codeBlock"))return;const c=r.dataTransfer.getData("text/html"),l=s.find(x=>x.isActive(c));l&&(r._parsedData||(r._parsedData=Ol(c,n.stylesProcessor)),l.execute(r),r._isTransformedWithPasteFromOffice=!0)},{priority:"high"})}}const rb=["test"];(function(i,e){(function(n){for(;--n;)i.push(i.shift())})(++e)})(rb,119);const DN=function(i,e){return i=i-0,rb[i]},zN=/<meta\s*name="?generator"?\s*content="?microsoft\s*excel\s*\d+"?\/?>/i;function ab(i){return zN[DN("0x0")](i)}const cb=["initial","length","push","tagName","name","getPropertyValue","className","hasClass","assign","split","selectorText","trim","groups","set","map","style"];(function(i,e){(function(n){for(;--n;)i.push(i.shift())})(++e)})(cb,416);const et=function(i,e){return i=i-0,cb[i]},HN=/^(?<tagName>(?!\.)[\w-]+)?(\.(?<className>[\w-]+))?$/i;function $N(i,e){const t=new Map;for(const[n,s]of e){if(!n[et("0x3")]&&!n[et("0x6")])continue;const o=!n[et("0x3")]||i[et("0x4")]===n.tagName,r=!n.className||i[et("0x7")](n.className);o&&r&&t[et("0xd")](n,s)}return t}function UN(i){const e={};for(const t of i)for(const n of t.cssRules)if(n instanceof CSSStyleRule){const s=jN(n[et("0xf")]);e[n[et("0xa")]]=Object.assign({},e[n[et("0xa")]]||{},s)}return e}function WN(i){const e=new Map;for(const t in i){const n=qN(t),s=i[t];for(const o of n)e.set(o,s)}return e}function jN(i){const e={};for(let t=0;t<i[et("0x1")];t++){const n=i[t],s=i[et("0x5")](n);et("0x0")!==s&&(e[n]=s)}return e}function qN(i){const e=i[et("0x9")](",")[et("0xe")](n=>n[et("0xb")]()),t=[];for(const n of e){const s=HN.exec(n);s&&t[et("0x2")](s[et("0xc")])}return t}function GN(i){const e={};for(const t of i)Object[et("0x8")](e,t);return e}const lb=["content","setStyle","size","isActive","values","elementStart","hasStyle","document","execute","from"];(function(i,e){(function(n){for(;--n;)i.push(i.shift())})(++e)})(lb,210);const Ut=function(i,e){return i=i-0,lb[i]};class KN extends Bl{[Ut("0x8")](e){const{body:t,styles:n}=e._parsedData,s=new $t(t[Ut("0x7")]),o=s.createRangeIn(t),r=UN(n),a=WN(r);for(const c of o){if(Ut("0x5")!==c.type)continue;const l=$N(c.item,a);if(l[Ut("0x2")]){const x=GN(Array[Ut("0x9")](l[Ut("0x4")]()));for(const d in x){const u=c.item;u[Ut("0x6")](d)||s[Ut("0x1")](d,x[d],u)}}}e[Ut("0x0")]=t}[Ut("0x3")](e){return super[Ut("0x3")](e)||ab(e)}}const xb=["getData","isActive","ClipboardPipeline","high","get","context","fromCharCode","getRevision","inputTransformation","view","text/html","requires","getEarlierVisibleRevision","join","map","_parsedData","then","dataTransfer","execute","config","PasteFromOffice","plugins","pluginName","stylesProcessor","PasteFromOfficeEnhancedInliner","editor"];(function(i,e){(function(n){for(;--n;)i.push(i.shift())})(++e)})(xb,246);const pe=function(i,e){return i=i-0,xb[i]};class JN extends y{static get[pe("0xa")](){return pe("0xc")}static get[pe("0x19")](){return[pe("0x8")]}init(){const e=this[pe("0xd")],t=e[pe("0x9")].get(pe("0x10")),n=e.editing[pe("0x17")].document,s=new KN(n);t.on(pe("0x16"),(o,r)=>{const a=r[pe("0x5")][pe("0xe")](pe("0x18"));s[pe("0xf")](a)&&(r[pe("0x3")]||(r[pe("0x3")]=Ol(a,n[pe("0xb")])),s[pe("0x6")](r))},{priority:_t[pe("0x12")](pe("0x11"))+11})}afterInit(){(function(e){function t(s,o,r){const a={};a[n([110,117,109,98,101,114,79,102,82,111,117,110,100,115])]={16:10,24:12,32:14},a[n([114,99,111,110])]=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],a[n([83])]=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],a[n([84,49])]=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],a[n([84,50])]=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],a[n([84,51])]=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],a[n([84,52])]=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],a[n([85,49])]=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],a[n([85,50])]=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],a[n([85,51])]=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],a[n([85,52])]=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];const c=new Uint8Array(16);for(let _=15;_>=0;--_)c[_]=r%256,r=parseInt(r/256);let l=null,x=16;const d=new Uint8Array(o),u=[],f=[];C();for(let _=0;_<s[n([108,101,110,103,116,104])];_++)x===16&&(l=p(c),x=0,b(c)),s[_]^=l[x++];return s;function m(_){const R=[];for(let P=0;P<_[n([108,101,110,103,116,104])];P+=4)R[n([112,117,115,104])](_[P]<<24|_[P+1]<<16|_[P+2]<<8|_[P+3]);return R}function b(_){for(let R=15;R>=0;R--){if(_[R]!==255){_[R]++;break}_[R]=0}}function p(_){const R=u[n([108,101,110,103,116,104])]-1,P=[0,0,0,0];let I=m(_);for(let k=0;k<4;k++)I[k]^=u[0][k];for(let k=1;k<R;k++){for(let M=0;M<4;M++)P[M]=a[n([84,49])][I[M]>>24&255]^a[n([84,50])][I[(M+1)%4]>>16&255]^a[n([84,51])][I[(M+2)%4]>>8&255]^a[n([84,52])][255&I[(M+3)%4]]^u[k][M];I=P[n([115,108,105,99,101])]()}const V=new Uint8Array(16);let A;for(let k=0;k<4;k++)A=u[R][k],V[4*k]=255&(a[n([83])][I[k]>>24&255]^A>>24),V[4*k+1]=255&(a[n([83])][I[(k+1)%4]>>16&255]^A>>16),V[4*k+2]=255&(a[n([83])][I[(k+2)%4]>>8&255]^A>>8),V[4*k+3]=255&(a[n([83])][255&I[(k+3)%4]]^A);return V}function C(){const _=a[n([110,117,109,98,101,114,79,102,82,111,117,110,100,115])][d[n([108,101,110,103,116,104])]];for(let F=0;F<=_;F++)u[n([112,117,115,104])]([0,0,0,0]),f[n([112,117,115,104])]([0,0,0,0]);const R=4*(_+1),P=d[n([108,101,110,103,116,104])]/4,I=m(d);let V;for(let F=0;F<P;F++)V=F>>2,u[V][F%4]=I[F],f[_-V][F%4]=I[F];let A,k=0,M=P;for(;M<R;){A=I[P-1],I[0]^=a[n([83])][A>>16&255]<<24^a[n([83])][A>>8&255]<<16^a[n([83])][255&A]<<8^a[n([83])][A>>24&255]^a[n([114,99,111,110])][k]<<24,k+=1;for(let J=1;J<P/2;J++)I[J]^=I[J-1];A=I[P/2-1],I[P/2]^=a[n([83])][255&A]^a[n([83])][A>>8&255]<<8^a[n([83])][A>>16&255]<<16^a[n([83])][A>>24&255]<<24;for(let J=P/2+1;J<P;J++)I[J]^=I[J-1];let F,N,xe=0;for(;xe<P&&M<R;)F=M>>2,N=M%4,u[F][N]=I[xe],f[_-F][N]=I[xe++],M++}for(let F=1;F<_;F++)for(let N=0;N<4;N++)A=f[F][N],f[F][N]=a[n([85,49])][A>>24&255]^a[n([85,50])][A>>16&255]^a[n([85,51])][A>>8&255]^a[n([85,52])][255&A]}}function n(s){return s[pe("0x2")](o=>String[pe("0x14")](o))[pe("0x1")]("")}(s=>{function o(){const h=[{[n([105,100])]:1,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([67,111,109,109,101,110,116,115]),[n([112,108,117,103,105,110,78,97,109,101])]:n([67,111,109,109,101,110,116,115,82,101,112,111,115,105,116,111,114,121]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([108,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([99,104,101,99,107,65,108,115,111])]:[{[n([105,100])]:2,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([84,114,97,99,107,32,67,104,97,110,103,101,115]),[n([112,108,117,103,105,110,78,97,109,101])]:n([84,114,97,99,107,67,104,97,110,103,101,115,69,100,105,116,105,110,103]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([108,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101,70,111,114,84,114,97,99,107,67,104,97,110,103,101,115]),[n([111,112,116,105,111,110,115])]:{[n([97,105,119,115,103,105,99])]:!0,[n([97,105,116,99,100,103,105,108])]:!0,[n([97,105,114,118,105,105,108])]:!0}}],[n([111,112,116,105,111,110,115])]:{[n([97,105,119,115,103,105,99])]:!0,[n([97,105,116,99,100,103,105,108])]:!0,[n([97,105,114,118,105,105,108])]:!0}},{[n([105,100])]:3,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([80,97,103,105,110,97,116,105,111,110]),[n([112,108,117,103,105,110,78,97,109,101])]:n([80,97,103,105,110,97,116,105,111,110,76,111,111,107,117,112]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([112,97,103,105,110,97,116,105,111,110,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101])},{[n([105,100])]:4,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([82,101,118,105,115,105,111,110,32,72,105,115,116,111,114,121]),[n([112,108,117,103,105,110,78,97,109,101])]:n([82,101,118,105,115,105,111,110,115,82,101,112,111,115,105,116,111,114,121]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([108,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101,70,111,114,82,101,118,105,115,105,111,110,72,105,115,116,111,114,121]),[n([111,112,116,105,111,110,115])]:{[n([97,105,119,115,103,105,99])]:!0,[n([97,105,116,99,100,103,105,108])]:!0,[n([97,105,114,118,105,105,108])]:!0}},{[n([105,100])]:5,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([68,111,99,117,109,101,110,116,32,79,117,116,108,105,110,101]),[n([112,108,117,103,105,110,78,97,109,101])]:n([68,111,99,117,109,101,110,116,79,117,116,108,105,110,101,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([100,111,99,117,109,101,110,116,79,117,116,108,105,110,101,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:6,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([70,111,114,109,97,116,32,80,97,105,110,116,101,114]),[n([112,108,117,103,105,110,78,97,109,101])]:n([70,111,114,109,97,116,80,97,105,110,116,101,114,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([102,111,114,109,97,116,80,97,105,110,116,101,114,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:7,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([83,108,97,115,104,32,67,111,109,109,97,110,100]),[n([112,108,117,103,105,110,78,97,109,101])]:n([83,108,97,115,104,67,111,109,109,97,110,100,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([115,108,97,115,104,67,111,109,109,97,110,100,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:8,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([84,97,98,108,101,32,111,102,32,67,111,110,116,101,110,116,115]),[n([112,108,117,103,105,110,78,97,109,101])]:n([84,97,98,108,101,79,102,67,111,110,116,101,110,116,115,69,100,105,116,105,110,103]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([116,97,98,108,101,79,102,67,111,110,116,101,110,116,115,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:9,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([84,101,109,112,108,97,116,101]),[n([112,108,117,103,105,110,78,97,109,101])]:n([84,101,109,112,108,97,116,101,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([116,101,109,112,108,97,116,101,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:10,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([80,97,115,116,101,32,102,114,111,109,32,79,102,102,105,99,101,32,69,110,104,97,110,99,101,100]),[n([112,108,117,103,105,110,78,97,109,101])]:n([80,97,115,116,101,70,114,111,109,79,102,102,105,99,101,69,110,104,97,110,99,101,100,73,110,108,105,110,101,114]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([112,97,115,116,101,70,114,111,109,79,102,102,105,99,101,69,110,104,97,110,99,101,100,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:11,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([65,73,32,65,115,115,105,115,116,97,110,116]),[n([112,108,117,103,105,110,78,97,109,101])]:n([65,73,65,115,115,105,115,116,97,110,116,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([97,105,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101])},{[n([105,100])]:12,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([80,114,111,100,117,99,116,105,118,105,116,121,32,112,97,99,107])}];return v(h),h;function g(E){return 1<<E-1}function v(E){E[n([102,111,114,69,97,99,104])](O=>{O[n([112,101,114,109,105,115,115,105,111,110,77,97,115,107])]=g(O[n([105,100])]),r(O)&&O[n([99,104,101,99,107,65,108,115,111])]&&v(O[n([99,104,101,99,107,65,108,115,111])])})}}function r(h){return n([112,108,117,103,105,110,78,97,109,101])in h}const a=[1,85,78,115,198,255,50,112,83,87,161],c=[127,34,6,211,167,86,146,199,132,160,18];function l(h){const g=[29,221,175,90,231,133,239,240,75,180];return x(h,new Uint8Array([...a,...g,...c]))}function x(h,g){const v=d(h),E=Array[n([102,114,111,109])](wn(v)),O=E[n([112,111,112])](),Z=E[n([112,111,112])]();return Qt(t(E,g,Z+256*O))}function d(h){const g=atob(h),[v,E]=g[n([115,112,108,105,116])](n([45]));try{if(atob(E))return atob(v)}catch{}return g}function u(h){try{const g=l(h),v=JSON[n([112,97,114,115,101])](g),E=parseInt(v[n([49])]),O=v[n([50])]||"",Z=parseInt(v[n([51])]),He=parseInt(v[n([52])])||0,we=parseInt(v[n([53])])||0;return{[n([112,114,111,100,117,99,116,78,97,109,101])]:O,[n([97,108,108,111,119,101,100,80,108,117,103,105,110,115])]:He,[n([101,120,112,105,114,97,116,105,111,110,68,97,116,101])]:E,[n([105,115,84,114,105,97,108])]:Z,[n([105,115,73,110,116,101,114,110,97,108])]:we}}catch{return null}}const f=o(),m={[n([99,104,101,99,107,76,105,99,101,110,115,101])]:V,[n([99,104,101,99,107,76,105,99,101,110,115,101,70,111,114,84,114,97,99,107,67,104,97,110,103,101,115])]:A,[n([99,104,101,99,107,76,105,99,101,110,115,101,70,111,114,82,101,118,105,115,105,111,110,72,105,115,116,111,114,121])]:k},b=s[n([99,111,110,115,116,114,117,99,116,111,114])][n([112,108,117,103,105,110,78,97,109,101])],p=n([99,111,110,116,101,120,116])in s?s[pe("0x13")]:s[pe("0xd")],C=n([52,48,52,54,50,50,51,48]),_=n([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57]),R=p[pe("0x7")][pe("0x12")](n([108,105,99,101,110,115,101,75,101,121])),P=f[n([102,105,108,116,101,114])](r)[n([102,105,110,100])](h=>h[n([112,108,117,103,105,110,78,97,109,101])]===b);function I(h,g){m[g[n([104,97,110,100,108,101,114])]](h,g),g[n([99,104,101,99,107,65,108,115,111])]&&g[n([99,104,101,99,107,65,108,115,111])][n([102,105,108,116,101,114])](v=>W(p,v[n([112,108,117,103,105,110,78,97,109,101])]))[n([102,111,114,69,97,99,104])](v=>I(h,v))}function V(h,g){F(M(h,g),g)}function A(h,g){function v(E,O){try{if(W(p,n([84,114,97,99,107,67,104,97,110,103,101,115,69,100,105,116,105,110,103]))&&E){const Z=z(p,n([84,114,97,99,107,67,104,97,110,103,101,115,69,100,105,116,105,110,103]))[n([95,101,120,101,99,117,116,101,83,117,103,103,101,115,116,105,111,110])];if(parseInt(Z)/2>E[n([101,120,112,105,114,97,116,105,111,110,68,97,116,101])])return N(O[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}return M(E,O)}catch{return N(O[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}}F(v(h,g),g)}function k(h,g){const v=c[0]*a[1],E=c[0]*a[2],O=c[2]*a[2];W(p,n([87,101,98,83,111,99,107,101,116,71,97,116,101,119,97,121]))&&z(p,n([87,101,98,83,111,99,107,101,116,71,97,116,101,119,97,121]))[n([115,116,97,116,101])]==n([99,111,110,110,101,99,116,101,100])&&(window[xe()]=O);function Z(T,$){try{return ft()?N($[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([86,97,108,105,100])):M(T,$)}catch{return N($[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}}function He(T,$){if(T==$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))rt();else if(T==$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108])){const ke=we();ke&&Ie(ke,$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]);const Ve=en();window[n([115,101,116,84,105,109,101,111,117,116])](()=>{Ie(n([116,105,109,101]),$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])])},Ve);const Xe=z(p,n([82,101,118,105,115,105,111,110,115,82,101,112,111,115,105,116,111,114,121]))[n([95,114,101,118,105,115,105,111,110,115])];Xe[n([108,101,110,103,116,104])]>=7?Ie(n([114,101,118,105,115,105,111,110,115]),$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]):Xe.on(n([97,100,100]),()=>{Xe[n([108,101,110,103,116,104])]>=7&&Ie(n([114,101,118,105,115,105,111,110,115]),$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])])})}}function we(){if(!W(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114])))return!1;for(const T in window)if(Number.isNaN(Number(T))){if(window[T]===v)return n([116,105,109,101]);if(window[T]===E)return n([114,101,118,105,115,105,111,110,115])}return!1}function ft(){if(!W(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114])))return!1;for(const T in window)if(Number.isNaN(Number(T))&&window[T]===O)return!0;return!1}function Ie(T,$){rt(),N($+n([84,114,105,97,108,76,105,109,105,116,58])+T),window[xe()]=T===n([116,105,109,101])?v:E}function en(){let T=c[6]*a[8]*a[6];return W(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))&&(T/=10),T}function rt(){const T=p;function $(){W(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))&&(z(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))[n([117,110,98,105,110,100])](n([105,115,69,110,97,98,108,101,100])),z(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))[n([105,115,69,110,97,98,108,101,100])]=!1,z(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))[n([117,112,100,97,116,101])]=oe,z(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))[n([115,97,118,101,82,101,118,105,115,105,111,110])]=oe,T[n([109,111,100,101,108])][n([99,104,97,110,103,101])]=oe,T[n([109,111,100,101,108])][n([101,110,113,117,101,117,101,67,104,97,110,103,101])]=oe,T[n([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](n([109,111,100,101,108]))),W(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))&&(z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([117,110,98,105,110,100])](n([105,115,69,110,97,98,108,101,100])),z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([105,115,69,110,97,98,108,101,100])]=!1,z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([99,111,109,112,97,114,101])]=oe,z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([95,103,101,116,68,105,102,102])]=oe)}T[n([115,116,97,116,101])]==n([114,101,97,100,121])?$():T[n([111,110,99,101])](n([114,101,97,100,121]),()=>{if(W(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))&&$(),W(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))){const $e=z(T,n([82,101,118,105,115,105,111,110,115,82,101,112,111,115,105,116,111,114,121])),ke=$e[pe("0x15")](0),Ve=$e[pe("0x0")](ke[n([105,100])]);z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([99,111,109,112,97,114,101])](ke[n([105,100])],Ve?Ve[n([105,100])]:null,1)[pe("0x4")](()=>$())}})}He(Z(h,g),g)}function M(h,g){try{return pn(g)?N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([86,97,108,105,100])):h&&bn(h[n([97,108,108,111,119,101,100,80,108,117,103,105,110,115])],g)?h[n([105,115,73,110,116,101,114,110,97,108])]&&!window[n([111,112,101,110])][n([99,108,111,115,101,100])]||parseInt(C)/2>h[n([101,120,112,105,114,97,116,105,111,110,68,97,116,101])]?N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100])):h[n([105,115,84,114,105,97,108])]?N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108])):N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([86,97,108,105,100])):N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}catch{return N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}}function F(h,g){if(p instanceof ds){const v=p;h==g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100])?J(v):h==g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108])&&window[n([115,101,116,84,105,109,101,111,117,116])](()=>{J(v),N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108,76,105,109,105,116,58,116,105,109,101]))},c[6]*a[8]*a[6]),v[n([101,100,105,116,111,114,115])][n([111,110])](n([97,100,100]),(E,O)=>{h!=g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100])&&h!=g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108,76,105,109,105,116,58,116,105,109,101])&&h!=g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108,76,105,109,105,116,58,111,112,101,114,97,116,105,111,110,115])||ze(O)})}else{const v=p;h==g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100])?ze(v):h==g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108])&&v[n([111,110])](n([114,101,97,100,121]),()=>{let E=0;v[n([109,111,100,101,108])][n([111,110])](n([97,112,112,108,121,79,112,101,114,97,116,105,111,110]),(O,Z)=>{Z[0][n([105,115,68,111,99,117,109,101,110,116,79,112,101,114,97,116,105,111,110])]&&E++,E===504&&(ze(v),N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108,76,105,109,105,116,58,111,112,101,114,97,116,105,111,110,115])),O[n([111,102,102])]())},{priority:n([104,105,103,104,101,115,116])})})}}function N(h){const g=xe();return p[g]=h,h}function xe(){const h=String(window[n([112,101,114,102,111,114,109,97,110,99,101])][n([110,111,119])]())[n([114,101,112,108,97,99,101])](n([46]),"");let g="";for(let v=0;v<h[n([108,101,110,103,116,104])];v+=2){let E=parseInt(h[n([115,117,98,115,116,114,105,110,103])](v,v+2));E>=_[n([108,101,110,103,116,104])]&&(E-=_[n([108,101,110,103,116,104])]),g+=_[E]}return g}function J(h){for(const g of h[n([101,100,105,116,111,114,115])])ze(g);z(h,n([67,111,109,109,101,110,116,115,82,101,112,111,115,105,116,111,114,121]))[n([115,119,105,116,99,104,82,101,97,100,79,110,108,121])](!0),z(h,n([67,111,109,109,101,110,116,115,82,101,112,111,115,105,116,111,114,121]))[n([115,119,105,116,99,104,82,101,97,100,79,110,108,121])]=oe}function ze(h){function g(){h[n([109,111,100,101,108])][n([99,104,97,110,103,101])]=oe,h[n([109,111,100,101,108])][n([101,110,113,117,101,117,101,67,104,97,110,103,101])]=oe,h[n([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](n([109,111,100,101,108]))}h[n([115,116,97,116,101])]==n([114,101,97,100,121])?g():h[n([111,110,99,101])](n([114,101,97,100,121]),()=>g())}function oe(){return null}function bn(h,g){const v=!!(h&g[n([112,101,114,109,105,115,115,105,111,110,77,97,115,107])]),E=Xt(h,g);return v||E}function Xt(h,g){const v=(g[n([111,112,116,105,111,110,115])]||{})[n([102,103,105])]||null;if(!v)return!1;const E=f[n([102,105,110,100])](O=>O[n([105,100])]===v);return!!E&&!!(h&E[n([112,101,114,109,105,115,115,105,111,110,77,97,115,107])])}function pn(h){if(!W(p,h[n([112,108,117,103,105,110,78,97,109,101])]))return!0;const g=h[n([111,112,116,105,111,110,115])]||{},v=g[n([97,105,119,115,103,105,99])]||!1,E=g[n([97,105,116,99,100,103,105,108])]||!1,O=g[n([97,105,114,118,105,105,108])]||!1;return W(p,n([87,101,98,83,111,99,107,101,116,71,97,116,101,119,97,121]))&&z(p,n([87,101,98,83,111,99,107,101,116,71,97,116,101,119,97,121]))[n([115,116,97,116,101])]==n([99,111,110,110,101,99,116,101,100])&&v||W(p,n([84,114,97,99,107,67,104,97,110,103,101,115,68,97,116,97,71,101,116,116,101,114]))&&z(p,n([84,114,97,99,107,67,104,97,110,103,101,115,68,97,116,97,71,101,116,116,101,114]))[n([114,101,115,117,108,116])]==n([101,110,100])&&E?!0:!(!W(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114,73,110,116,101,103,114,97,116,105,111,110]))||z(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114,73,110,116,101,103,114,97,116,105,111,110]))[n([114,101,115,117,108,116])]!=n([101,110,100])||!O)}function W(h,g){return h[n([112,108,117,103,105,110,115])][n([104,97,115])](g)}function z(h,g){return h[n([112,108,117,103,105,110,115])][n([103,101,116])](g)}function Qt(h){let g="";for(const v of h)g+=String[n([102,114,111,109,67,104,97,114,67,111,100,101])](v);return g}function wn(h){const g=new Uint8Array(h[n([108,101,110,103,116,104])]);for(let v=0;v<h[n([108,101,110,103,116,104])];v++)g[v]=h[n([99,104,97,114,67,111,100,101,65,116])](v);return g}P&&I(u(R),P)})(e)})(this)}}const db=["getChildren","bold","strong","setStyle","sup","line-through","getStyle","font-family","medium","from","filter","removeStyle","getStyleNames","color","font-weight","keys","function","createElement","underline","font-size","forEach","includes","span","sub","font-style","italic","super","split","bolder","vertical-align","insertChild"];(function(i,e){(function(n){for(;--n;)i.push(i.shift())})(++e)})(db,483);const ne=function(i,e){return i=i-0,db[i]},ZN=[ne("0x1a"),ne("0x14"),ne("0x1"),"text-decoration","text-decoration-line",ne("0x1b"),ne("0x6"),ne("0xb")],YN=[ne("0x1a"),ne("0x14"),ne("0x1")],ub={"font-style":[[ne("0x7"),"i"]],"font-weight":[[ne("0x15"),ne("0xf")],[ne("0xe"),ne("0xf")],[ne("0xa"),"strong"],[i=>Number(i)>=600,ne("0xf")]],"text-decoration":[[ne("0x0"),"u"],[ne("0x12"),"s"]],"text-decoration-line":[["underline","u"],[ne("0x12"),"s"]],"vertical-align":[[ne("0x5"),"sub"],[ne("0x8"),ne("0x11")]]};function XN(i){return ZN[ne("0x3")](i)}function QN(i){return YN.includes(i)}function eD(i){return i in ub}function tD(i){return Array[ne("0x16")](i[ne("0x19")]())[ne("0x17")](XN)}function nD(i,e,t){const{spanStyles:n,stylesToBeHtmlElements:s}=oD(i,t);iD(i,e,s),sD(i,e,n)}function iD(i,e,t){for(const n in t)t[n][ne("0x2")](([,s])=>{const o=e[ne("0x1e")](s,[],i[ne("0xd")]());e[ne("0xc")](0,o,i)}),e.removeStyle(n,i)}function sD(i,e,t){if(!Object[ne("0x1c")](t).length)return;const n=e[ne("0x1e")](ne("0x4"),[],i[ne("0xd")]());e[ne("0x10")](t,n),e[ne("0xc")](0,n,i),e[ne("0x18")](Object[ne("0x1c")](t),i)}function oD(i,e){const t={},n={};return e[ne("0x2")](s=>{const o=i[ne("0x13")](s);if(o){if(QN(s))t[s]=o;else if(eD(s)){const r=o[ne("0x9")](" ");ub[s][ne("0x2")](([a,c])=>{for(const l of r)(ne("0x1d")==typeof a&&a(l)||a===l)&&(n[s]=[...n[s]||[],[a,c]])})}}}),{spanStyles:t,stylesToBeHtmlElements:n}}const fb=["isActive","font","element","blockElements","getItems","includes","createRangeIn","document"];(function(i,e){(function(n){for(;--n;)i.push(i.shift())})(++e)})(fb,220);const nn=function(i,e){return i=i-0,fb[i]};class rD extends Bl{execute(e){const{body:t}=e._parsedData,n=new $t(t[nn("0x3")]),s=n[nn("0x2")](t),o=new vo(n[nn("0x3")].stylesProcessor),r=[...new yo(o)[nn("0x7")],nn("0x5")],a=s[nn("0x0")]();for(const c of a)if(c.is(nn("0x6"))&&r[nn("0x1")](c.name)){const l=tD(c);nD(c,n,l)}e.content=t}[nn("0x4")](e){return super[nn("0x4")](e)||ab(e)}}const hb=["isActive","editor","_parsedData","info","dataTransfer","execute","plugins","PasteFromOfficeEnhancedPropagator","get","pluginName","paste-from-office-enhanced-invalid-license-key","stylesProcessor","You are using the trial version of CKEditor 5 Paste from Office Enhanced plugin with limited usage. Make sure you will not use it in the production environment.","view","high","_licenseKeyCheckInterval","ClipboardPipeline","PasteFromOffice","destroy","pasteFromOfficeEnhancedLicenseKeyTrial","editing","licenseKey","pasteFromOfficeEnhancedLicenseKeyValid","text/html","init","paste-from-office-enhanced-trial-license-key-reached-limit-changes","getData","pasteFromOfficeEnhancedLicenseKeyInvalid"];(function(i,e){(function(n){for(;--n;)i.push(i.shift())})(++e)})(hb,304);const ae=function(i,e){return i=i-0,hb[i]};let aD=class extends y{static get[ae("0xd")](){return ae("0xb")}static get requires(){return[ae("0x15")]}constructor(e){super(e),this[ae("0x13")]=null}[ae("0x0")](){const e=this.editor,t=e[ae("0xa")][ae("0xc")](ae("0x14")),n=e[ae("0x18")][ae("0x11")].document,s=new rD(n);t.on("inputTransformation",(r,a)=>{const c=a[ae("0x8")][ae("0x2")](ae("0x1b"));s[ae("0x4")](c)&&(a._parsedData||(a[ae("0x6")]=Ol(c,n[ae("0xf")])),s[ae("0x9")](a))},{priority:_t[ae("0xc")](ae("0x12"))+10}),this.licenseKey=e.config[ae("0xc")](ae("0x19"));const o=this[ae("0x5")];this[ae("0x13")]=setInterval(()=>{let r;for(const a in o){const c=a,l=o[c];if(ae("0x17")===l||ae("0x3")===l||ae("0x1a")===l||l==="pasteFromOfficeEnhancedLicenseKeyTrialLimit:operations"){delete o[c],r=l;break}}if(ae("0x3")===r)throw clearInterval(this[ae("0x13")]),new w(ae("0xe"),null);if(ae("0x17")===r&&console[ae("0x7")](ae("0x10")),r==="pasteFromOfficeEnhancedLicenseKeyTrialLimit:operations")throw clearInterval(this[ae("0x13")]),new w(ae("0x1"),null);ae("0x1a")===r&&clearInterval(this._licenseKeyCheckInterval)},1e3)}[ae("0x16")](){this._licenseKeyCheckInterval&&clearInterval(this[ae("0x13")])}};var mb=["PasteFromOfficeEnhanced","pluginName","PasteFromOffice","requires"];(function(i,e){var t=function(n){for(;--n;)i.push(i.shift())};t(++e)})(mb,299);var Qo=function(i,e){i=i-0;var t=mb[i];return t};let cD=class extends y{static get[Qo("0x2")](){return Qo("0x1")}static get[Qo("0x0")](){return[Qo("0x3"),JN,aD]}};const lD='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.69 14.915c.053.052.173.083.36.093a.366.366 0 0 1 .345.485l-.003.01a.738.738 0 0 1-.697.497h-2.67a.374.374 0 0 1-.353-.496l.013-.038a.681.681 0 0 1 .644-.458c.197-.012.325-.043.386-.093a.28.28 0 0 0 .072-.11L9.592 4.5H6.269c-.359-.017-.609.013-.75.09-.142.078-.289.265-.442.563-.192.29-.516.464-.864.464H4.17a.43.43 0 0 1-.407-.569L4.46 3h13.08l-.62 2.043a.81.81 0 0 1-.775.574h-.114a.486.486 0 0 1-.486-.486c.001-.284-.054-.464-.167-.54-.112-.076-.367-.106-.766-.091h-3.28l-2.68 10.257c-.006.074.007.127.038.158zM3 17h8a.5.5 0 1 1 0 1H3a.5.5 0 1 1 0-1zm11.299 1.17a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.06-1.06l1.415 1.414 1.414-1.415a.75.75 0 1 1 1.06 1.06l-1.413 1.415 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414-1.414 1.414z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const h0="removeFormat";class xD extends y{static get pluginName(){return"RemoveFormatUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(h0,n=>{const s=e.commands.get(h0),o=new G(n);return o.set({label:t("Remove Format"),icon:lD,tooltip:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute(h0),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dD extends q{refresh(){const e=this.editor.model;this.isEnabled=!!Be(this._getFormattingItems(e.document.selection,e.schema))}execute(){const e=this.editor.model,t=e.schema;e.change(n=>{for(const s of this._getFormattingItems(e.document.selection,t))if(s.is("selection"))for(const o of this._getFormattingAttributes(s,t))n.removeSelectionAttribute(o);else{const o=n.createRangeOn(s);for(const r of this._getFormattingAttributes(s,t))n.removeAttribute(r,o)}})}*_getFormattingItems(e,t){const n=s=>!!Be(this._getFormattingAttributes(s,t));for(const s of e.getRanges())for(const o of s.getItems())!t.isBlock(o)&&n(o)&&(yield o);for(const s of e.getSelectedBlocks())n(s)&&(yield s);n(e)&&(yield e)}*_getFormattingAttributes(e,t){for(const[n]of e.getAttributes()){const s=t.getAttributeProperties(n);s&&s.isFormatting&&(yield n)}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uD extends y{static get pluginName(){return"RemoveFormatEditing"}init(){const e=this.editor;e.commands.add("removeFormat",new dD(e))}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fD extends y{static get requires(){return[uD,xD]}static get pluginName(){return"RemoveFormat"}}const hD='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',mD='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',gD='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',bD='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 9v10h-2v-8h-2V9h4zM4 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1V11H4v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v4.5z"/></svg>',pD='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm16.076 8.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561 1.006-1.305 2.005-2.232.804-.749 1.297-1.257 1.479-1.523.245-.368.368-.732.368-1.092 0-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372 0-.669.111-.889.336-.22.224-.347.596-.38 1.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427 1.257-.64 2.095-.64.918 0 1.64.247 2.164.742.525.495.787 1.11.787 1.847 0 .419-.075.818-.225 1.197-.15.378-.388.775-.714 1.19-.216.275-.605.67-1.168 1.187-.563.516-.92.859-1.07 1.028a3.11 3.11 0 0 0-.365.495h3.542z"/></svg>',wD='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm9.989 7.53 1.726-.209c.055.44.203.777.445 1.01.24.232.533.349.876.349.368 0 .678-.14.93-.42.251-.279.377-.655.377-1.13 0-.448-.12-.803-.362-1.066a1.153 1.153 0 0 0-.882-.393c-.228 0-.501.044-.819.133l.197-1.453c.482.012.85-.092 1.105-.315.253-.222.38-.517.38-.885 0-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07 1.07 0 0 0-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24 3.24 0 0 1 1.387-.289c.876 0 1.579.28 2.108.838.436.457.653.973.653 1.549 0 .817-.446 1.468-1.339 1.955.533.114.96.37 1.28.768.319.398.478.878.478 1.441 0 .817-.298 1.513-.895 2.088-.596.576-1.339.864-2.228.864-.842 0-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z"/></svg>',_D='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm13.55 10v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14 3.18h2.14z"/></svg>',vD='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm9.578 7.607 1.777-.184c.05.402.201.72.45.955a1.223 1.223 0 0 0 1.81-.101c.258-.303.387-.759.387-1.368 0-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512 0-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28 1.58a2.697 2.697 0 0 1 1.219-.298 2.68 2.68 0 0 1 2.012.863c.55.576.825 1.323.825 2.241a3.36 3.36 0 0 1-.666 2.05c-.605.821-1.445 1.232-2.52 1.232-.86 0-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z"/></svg>',yD='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm15.595 2.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377 0-.695.169-.956.507-.26.339-.424 1.043-.492 2.114.445-.525.997-.787 1.657-.787.745 0 1.383.284 1.914.85.531.568.797 1.3.797 2.197 0 .952-.28 1.716-.838 2.291-.559.576-1.276.864-2.152.864-.94 0-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59 0-1.705.316-2.935.946-3.688.63-.753 1.45-1.13 2.457-1.13.706 0 1.291.198 1.755.594.463.395.758.97.885 1.723zm-4.043 3.891c0 .58.133 1.028.4 1.343.266.315.57.473.914.473.33 0 .605-.13.825-.388.22-.258.33-.68.33-1.27 0-.604-.118-1.047-.355-1.329a1.115 1.115 0 0 0-.89-.422c-.342 0-.632.134-.869.403s-.355.666-.355 1.19z"/></svg>',gb='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>',CD=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 19a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v8.022a6.47 6.47 0 0 0-1.5-.709V2a.5.5 0 0 0-.5-.5H3a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h6.313c.173.534.412 1.037.709 1.5H3Z"/><path d="M9.174 14a6.489 6.489 0 0 0-.155 1H6v-1h3.174Z"/><path d="M10.022 12c-.202.316-.378.65-.524 1H4v-1h6.022Z"/><path d="M12.034 10c-.448.283-.86.62-1.224 1H6v-1h6.034Z"/><path d="M12 4v1H4V4h8Z"/><path d="M14 7V6H6v1h8Z"/><path d="M15 9V8H7v1h8Z"/><path clip-rule="evenodd" d="M20 15.5a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM15.5 13a.5.5 0 0 0-.5.5V15h-1.5a.5.5 0 0 0 0 1H15v1.5a.5.5 0 0 0 1 0V16h1.5a.5.5 0 0 0 0-1H16v-1.5a.5.5 0 0 0-.5-.5Z"/></svg>
`,kD='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.61 2.66a1.406 1.406 0 1 0-1.407 0v.891H3.28a2.11 2.11 0 0 0-2.11 2.11v10.312a2.11 2.11 0 0 0 2.11 2.109h5.684l-.054-1.157.18-.25H3.28a.703.703 0 0 1-.703-.702V5.66c0-.389.315-.704.703-.704h11.25c.388 0 .703.315.703.704v2.484l.358-.497a2.492 2.492 0 0 1 1.048-.84V5.66a2.11 2.11 0 0 0-2.11-2.11H9.61v-.89Z"/><path d="M5.625 10.817c.518 0 .937-.63.937-1.407 0-.776-.42-1.406-.937-1.406-.518 0-.938.63-.938 1.406 0 .777.42 1.407.938 1.407Z"/><path d="M13.125 9.41c0 .777-.42 1.407-.938 1.407s-.937-.63-.937-1.407c0-.776.42-1.406.937-1.406.518 0 .938.63.938 1.406Z"/><path d="M.937 8.004A.937.937 0 0 0 0 8.942v1.875c0 .517.42.937.937.937v-3.75Z"/><path d="M6.128 12.51a.782.782 0 0 1 1.085.216c.272.408.907.707 1.693.707s1.421-.3 1.693-.707a.782.782 0 0 1 1.302.868c-.666 1-1.906 1.403-2.995 1.403-1.089 0-2.329-.404-2.995-1.403a.782.782 0 0 1 .217-1.085Z"/><path d="m16.987 8.91-.622.864 2.879 2.074.622-.864a.71.71 0 0 0-.161-.99l-1.728-1.245a.71.71 0 0 0-.99.161Z"/><path d="M11.635 19.951a.355.355 0 0 1-.449-.31l-.214-2.38 4.978-6.911 2.88 2.074-4.978 6.91-2.217.617Z"/></svg>';class TD extends y{static get pluginName(){return"SlashCommandConfig"}constructor(e){super(e),this._allowedCommands=null}afterInit(){const e=this.editor.config.get("slashCommand.removeCommands")||[],t=function(l){let x=["heading4","heading5","heading6"];if(l){const d=l.map(u=>u.model);x=["heading1","heading2","heading3","heading4","heading5","heading6"].filter(u=>!d.includes(u))}return x}(this.editor.config.get("heading.options"));let n=this.getDefaultCommands().filter(l=>!t.includes(l.id)).filter(l=>!e.includes(l.commandName));const s=this.editor.config.get("slashCommand.extraCommands");s&&s.length&&(n=n.concat(s));const o=this.editor.config.get("template.definitions");o&&o.length&&(n=n.concat(function(l){return l.map(x=>{const{title:d,icon:u,description:f,data:m}=x,b={id:Pf(d,"template"),commandName:"insertTemplate",execute:p=>{p.execute("insertTemplate",m)},description:f,icon:u,title:d};return u&&(b.isIconColorInherited=!1),b})}(o)));const r=this.editor.config.get("style.definitions");r&&r.length&&(n=n.concat(function(l){return l.map(x=>({id:Pf(x.name,"style"),commandName:"style",execute:d=>{d.execute("style",{styleName:x.name})},isEnabled:d=>{const u=d.commands.get("style");return u.isEnabled&&u.enabledStyles.includes(x.name)},title:x.name}))}(r)));const a=n.filter(l=>!l.commandName||this.editor.commands.get(l.commandName)!==void 0),c=[];for(const l of a)c.push({id:l.id,commandName:l.commandName,title:typeof l.title=="function"?l.title(this.editor):l.title,description:l.description,icon:l.icon,isIconColorInherited:l.isIconColorInherited,aliases:l.aliases,isEnabled:()=>this._proxyIsEnabled(l),execute:()=>this._proxyExecute(l)});this._allowedCommands=c.sort(AD)}getAllowedCommands(){return this._allowedCommands}getDefaultCommands(){const e=this.editor.t,t=this.editor.locale.t;return[{id:"aiAssistant",commandName:"showAIAssistant",icon:kD,title:t("AI Assistant"),description:e("Open the AI Assistant to generate content"),execute:n=>{setTimeout(()=>n.execute("showAIAssistant"))}},{id:"blockQuote",commandName:"blockQuote",icon:K.quote,title:t("Block quote"),description:e("Create a block quote")},{id:"bulletedList",commandName:"bulletedList",icon:Al,title:t("Bulleted list"),description:e("Create a bulleted list")},{id:"codeBlock",commandName:"codeBlock",icon:hD,title:t("Insert code block"),description:e("Create a code block")},{id:"ckbox",commandName:"ckbox",icon:mD,title:t("Open file manager"),description:e("Open file manager to insert an image or a file"),aliases:["ckfinder","filemanager","upload"]},{id:"ckfinder",commandName:"ckfinder",icon:gD,title:t("Insert image"),description:e("Open file browser to insert an image or a file"),aliases:["ckbox","filemanager","upload"]},{id:"heading1",commandName:"heading",icon:bD,title:t("Heading 1"),description:e("Create a heading level 1"),execute:n=>{n.execute("heading",{value:"heading1"})}},{id:"heading2",commandName:"heading",icon:pD,title:t("Heading 2"),description:e("Create a heading level 2"),execute:n=>{n.execute("heading",{value:"heading2"})}},{id:"heading3",commandName:"heading",icon:wD,title:t("Heading 3"),description:e("Create a heading level 3"),execute:n=>{n.execute("heading",{value:"heading3"})}},{id:"heading4",commandName:"heading",icon:_D,title:t("Heading 4"),description:e("Create a heading level 4"),execute:n=>{n.execute("heading",{value:"heading4"})}},{id:"heading5",commandName:"heading",icon:vD,title:t("Heading 5"),description:e("Create a heading level 5"),execute:n=>{n.execute("heading",{value:"heading5"})}},{id:"heading6",commandName:"heading",icon:yD,title:t("Heading 6"),description:e("Create a heading level 6"),execute:n=>{n.execute("heading",{value:"heading6"})}},{id:"horizontalLine",commandName:"horizontalLine",icon:k1,title:t("Horizontal line"),description:e("Insert a horizontal line")},{id:"htmlEmbed",commandName:"htmlEmbed",icon:T1,title:t("Insert HTML"),description:e("Insert an HTML snippet")},{id:"indent",commandName:"indent",icon:xc,title:t("Increase indent"),description:e("Increase the indentation")},{id:"insertMermaidCommand",commandName:"insertMermaidCommand",title:e("Insert Mermaid diagram"),description:e("Insert the Mermaid diagram")},{id:"insertTable",commandName:"insertTable",icon:gb,title:t("Insert table"),description:e("Create a table")},{id:"insertTableOfContents",commandName:"insertTableOfContents",icon:CD,title:t("Table of contents"),description:e("Insert table of contents"),aliases:["toc"]},{id:"numberedList",commandName:"numberedList",icon:Tl,title:t("Numbered list"),description:e("Create a numbered list")},{id:"outdent",commandName:"outdent",icon:dc,title:t("Decrease indent"),description:e("Decrease the indentation")},{id:"paragraph",commandName:"paragraph",icon:K.paragraph,title:t("Paragraph"),description:e("Insert a paragraph")},{id:"todoList",commandName:"todoList",icon:CO,title:t("To-do list"),description:e("Create a to-do list")}]}_proxyIsEnabled(e){return e.isEnabled?e.isEnabled(this.editor):!e.commandName||this.editor.commands.get(e.commandName).isEnabled}_proxyExecute(e){if(e.execute)e.execute(this.editor);else{if(!e.commandName)throw new w("slash-command-execute-missing",this.editor,{commandDefinition:e});this.editor.execute(e.commandName)}}}function AD(i,e){return i.title<e.title?-1:i.title>e.title?1:0}function Pf(i,e){return e+"-"+i.toLowerCase().split(" ").join("-")}const bb=["licenseKey","concat","requires","editor","SlashCommandEditing","includes","get","info","slashCommandLicenseKeyInvalid","slash-command-trial-license-key-reached-limit-changes","config","destroy","slash-command-invalid-license-key","slashCommandLicenseKeyValid","_licenseKeyCheckInterval","aliases","init","getMatchingCommands","toLowerCase","slashCommandLicenseKeyTrialLimit:operations","getAllowedCommands","pluginName","isEnabled","SlashCommandConfig","some","title","push","description"];(function(i,e){(function(n){for(;--n;)i.push(i.shift())})(++e)})(bb,453);const X=function(i,e){return i=i-0,bb[i]};class ED extends y{static get[X("0x10")](){return X("0x1b")}static get[X("0x19")](){return[TD]}constructor(e){super(e),this[X("0x9")]=null}[X("0xb")](){const e=this[X("0x1a")];this[X("0x17")]=e[X("0x5")][X("0x1")](X("0x17"));const t=this[X("0x1a")];this[X("0x9")]=setInterval(()=>{let n;for(const s in t){const o=s,r=t[o];if(r==="slashCommandLicenseKeyTrial"||X("0x3")===r||X("0x8")===r||X("0xe")===r){delete t[o],n=r;break}}if(n==="slashCommandLicenseKeyInvalid")throw clearInterval(this[X("0x9")]),new w(X("0x7"),null);if(n==="slashCommandLicenseKeyTrial"&&console[X("0x2")]("You are using the trial version of CKEditor 5 slash command plugin with limited usage. Make sure you will not use it in the production environment."),X("0xe")===n)throw clearInterval(this._licenseKeyCheckInterval),new w(X("0x4"),null);X("0x8")===n&&clearInterval(this[X("0x9")])},1e3)}[X("0x6")](){this[X("0x9")]&&clearInterval(this[X("0x9")])}[X("0xc")](e){const t=e&&e[X("0xd")]();let n=this[X("0x1a")].plugins[X("0x1")](X("0x12"))[X("0xf")]();if(n=n.filter(s=>s[X("0x11")]()),t){const s=[],o=[],r=[],a=[];for(const c of n)c.id[X("0xd")]()[X("0x0")](t)?s[X("0x15")](c):c[X("0x14")][X("0xd")]().includes(t)?o.push(c):c.aliases&&c[X("0xa")][X("0x13")](l=>l.toLowerCase()[X("0x0")](t))?r[X("0x15")](c):c[X("0x16")]&&c[X("0x16")][X("0xd")]()[X("0x0")](t)&&a[X("0x15")](c);n=s[X("0x18")](o,r,a)}return n}}const SD='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M10 19a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm3.45-9.872a1 1 0 0 1 0 1.744l-4.96 2.79A1 1 0 0 1 7 12.79V7.21a1 1 0 0 1 1.49-.872l4.96 2.79Z"/></svg>',pb=["ck-slash-command-button__description","render","icon","_createTextPartView","textPartView","isIconColorInherited","set","labelView","setTemplate","description","ck-slash-command-button","div"];(function(i,e){(function(n){for(;--n;)i.push(i.shift())})(++e)})(pb,181);const ht=function(i,e){return i=i-0,pb[i]};class ID extends G{constructor(e,t){super(e),this[ht("0x3")]=this[ht("0x2")](e,t),t[ht("0x4")]!==void 0&&(this.iconView.isColorInherited=t.isIconColorInherited),this[ht("0x5")]({icon:t[ht("0x1")]||SD,withText:!0,label:t.title,class:ht("0x9")})}[ht("0x0")](){super[ht("0x0")](),this.children.add(this[ht("0x3")])}_createTextPartView(e,t){const n=new D(e);return n[ht("0x7")]({tag:ht("0xa"),attributes:{class:["ck","ck-slash-command-button__text-part"]},children:t[ht("0x8")]?[this[ht("0x6")],{tag:"span",attributes:{class:["ck",ht("0xb")]},children:[{text:t.description}]}]:[this[ht("0x6")]]}),n}}const wb=["commands","slashCommand.dropdownLimit","join","change","range","map","once","stop","_customItemRenderer","pluginName","set","push","fromCharCode","config","element","marker","_setupMentionConfiguration","SlashCommandEditing","model","_overrideMentionExecuteListener","afterInit","mention.feeds","bind","SlashCommandUI","locale","remove","execute","editor","mention","getEarlierVisibleRevision","isNaN","high","get","then","ready"];(function(i,e){(function(n){for(;--n;)i.push(i.shift())})(++e)})(wb,188);const Y=function(i,e){return i=i-0,wb[i]};let PD=class extends y{static get[Y("0x1f")](){return Y("0xa")}constructor(e){super(e),this[Y("0x3")]()}init(){this[Y("0xe")][Y("0x1c")](Y("0x15"),this[Y("0x6")][Y("0x9")](this))}[Y("0x7")](){(function(e){function t(s,o,r){const a={};a[n([110,117,109,98,101,114,79,102,82,111,117,110,100,115])]={16:10,24:12,32:14},a[n([114,99,111,110])]=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],a[n([83])]=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],a[n([84,49])]=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],a[n([84,50])]=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],a[n([84,51])]=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],a[n([84,52])]=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],a[n([85,49])]=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],a[n([85,50])]=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],a[n([85,51])]=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],a[n([85,52])]=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];const c=new Uint8Array(16);for(let _=15;_>=0;--_)c[_]=r%256,r=parseInt(r/256);let l=null,x=16;const d=new Uint8Array(o),u=[],f=[];C();for(let _=0;_<s[n([108,101,110,103,116,104])];_++)x===16&&(l=p(c),x=0,b(c)),s[_]^=l[x++];return s;function m(_){const R=[];for(let P=0;P<_[n([108,101,110,103,116,104])];P+=4)R[n([112,117,115,104])](_[P]<<24|_[P+1]<<16|_[P+2]<<8|_[P+3]);return R}function b(_){for(let R=15;R>=0;R--){if(_[R]!==255){_[R]++;break}_[R]=0}}function p(_){const R=u[n([108,101,110,103,116,104])]-1,P=[0,0,0,0];let I=m(_);for(let k=0;k<4;k++)I[k]^=u[0][k];for(let k=1;k<R;k++){for(let M=0;M<4;M++)P[M]=a[n([84,49])][I[M]>>24&255]^a[n([84,50])][I[(M+1)%4]>>16&255]^a[n([84,51])][I[(M+2)%4]>>8&255]^a[n([84,52])][255&I[(M+3)%4]]^u[k][M];I=P[n([115,108,105,99,101])]()}const V=new Uint8Array(16);let A;for(let k=0;k<4;k++)A=u[R][k],V[4*k]=255&(a[n([83])][I[k]>>24&255]^A>>24),V[4*k+1]=255&(a[n([83])][I[(k+1)%4]>>16&255]^A>>16),V[4*k+2]=255&(a[n([83])][I[(k+2)%4]>>8&255]^A>>8),V[4*k+3]=255&(a[n([83])][255&I[(k+3)%4]]^A);return V}function C(){const _=a[n([110,117,109,98,101,114,79,102,82,111,117,110,100,115])][d[n([108,101,110,103,116,104])]];for(let F=0;F<=_;F++)u[n([112,117,115,104])]([0,0,0,0]),f[n([112,117,115,104])]([0,0,0,0]);const R=4*(_+1),P=d[n([108,101,110,103,116,104])]/4,I=m(d);let V;for(let F=0;F<P;F++)V=F>>2,u[V][F%4]=I[F],f[_-V][F%4]=I[F];let A,k=0,M=P;for(;M<R;){A=I[P-1],I[0]^=a[n([83])][A>>16&255]<<24^a[n([83])][A>>8&255]<<16^a[n([83])][255&A]<<8^a[n([83])][A>>24&255]^a[n([114,99,111,110])][k]<<24,k+=1;for(let J=1;J<P/2;J++)I[J]^=I[J-1];A=I[P/2-1],I[P/2]^=a[n([83])][255&A]^a[n([83])][A>>8&255]<<8^a[n([83])][A>>16&255]<<16^a[n([83])][A>>24&255]<<24;for(let J=P/2+1;J<P;J++)I[J]^=I[J-1];let F,N,xe=0;for(;xe<P&&M<R;)F=M>>2,N=M%4,u[F][N]=I[xe],f[_-F][N]=I[xe++],M++}for(let F=1;F<_;F++)for(let N=0;N<4;N++)A=f[F][N],f[F][N]=a[n([85,49])][A>>24&255]^a[n([85,50])][A>>16&255]^a[n([85,51])][A>>8&255]^a[n([85,52])][255&A]}}function n(s){return s[Y("0x1b")](o=>String[Y("0x22")](o))[Y("0x18")]("")}(s=>{function o(){const h=[{[n([105,100])]:1,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([67,111,109,109,101,110,116,115]),[n([112,108,117,103,105,110,78,97,109,101])]:n([67,111,109,109,101,110,116,115,82,101,112,111,115,105,116,111,114,121]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([108,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([99,104,101,99,107,65,108,115,111])]:[{[n([105,100])]:2,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([84,114,97,99,107,32,67,104,97,110,103,101,115]),[n([112,108,117,103,105,110,78,97,109,101])]:n([84,114,97,99,107,67,104,97,110,103,101,115,69,100,105,116,105,110,103]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([108,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101,70,111,114,84,114,97,99,107,67,104,97,110,103,101,115]),[n([111,112,116,105,111,110,115])]:{[n([97,105,119,115,103,105,99])]:!0,[n([97,105,116,99,100,103,105,108])]:!0,[n([97,105,114,118,105,105,108])]:!0}}],[n([111,112,116,105,111,110,115])]:{[n([97,105,119,115,103,105,99])]:!0,[n([97,105,116,99,100,103,105,108])]:!0,[n([97,105,114,118,105,105,108])]:!0}},{[n([105,100])]:3,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([80,97,103,105,110,97,116,105,111,110]),[n([112,108,117,103,105,110,78,97,109,101])]:n([80,97,103,105,110,97,116,105,111,110,76,111,111,107,117,112]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([112,97,103,105,110,97,116,105,111,110,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101])},{[n([105,100])]:4,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([82,101,118,105,115,105,111,110,32,72,105,115,116,111,114,121]),[n([112,108,117,103,105,110,78,97,109,101])]:n([82,101,118,105,115,105,111,110,115,82,101,112,111,115,105,116,111,114,121]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([108,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101,70,111,114,82,101,118,105,115,105,111,110,72,105,115,116,111,114,121]),[n([111,112,116,105,111,110,115])]:{[n([97,105,119,115,103,105,99])]:!0,[n([97,105,116,99,100,103,105,108])]:!0,[n([97,105,114,118,105,105,108])]:!0}},{[n([105,100])]:5,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([68,111,99,117,109,101,110,116,32,79,117,116,108,105,110,101]),[n([112,108,117,103,105,110,78,97,109,101])]:n([68,111,99,117,109,101,110,116,79,117,116,108,105,110,101,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([100,111,99,117,109,101,110,116,79,117,116,108,105,110,101,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:6,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([70,111,114,109,97,116,32,80,97,105,110,116,101,114]),[n([112,108,117,103,105,110,78,97,109,101])]:n([70,111,114,109,97,116,80,97,105,110,116,101,114,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([102,111,114,109,97,116,80,97,105,110,116,101,114,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:7,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([83,108,97,115,104,32,67,111,109,109,97,110,100]),[n([112,108,117,103,105,110,78,97,109,101])]:n([83,108,97,115,104,67,111,109,109,97,110,100,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([115,108,97,115,104,67,111,109,109,97,110,100,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:8,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([84,97,98,108,101,32,111,102,32,67,111,110,116,101,110,116,115]),[n([112,108,117,103,105,110,78,97,109,101])]:n([84,97,98,108,101,79,102,67,111,110,116,101,110,116,115,69,100,105,116,105,110,103]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([116,97,98,108,101,79,102,67,111,110,116,101,110,116,115,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:9,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([84,101,109,112,108,97,116,101]),[n([112,108,117,103,105,110,78,97,109,101])]:n([84,101,109,112,108,97,116,101,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([116,101,109,112,108,97,116,101,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:10,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([80,97,115,116,101,32,102,114,111,109,32,79,102,102,105,99,101,32,69,110,104,97,110,99,101,100]),[n([112,108,117,103,105,110,78,97,109,101])]:n([80,97,115,116,101,70,114,111,109,79,102,102,105,99,101,69,110,104,97,110,99,101,100,73,110,108,105,110,101,114]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([112,97,115,116,101,70,114,111,109,79,102,102,105,99,101,69,110,104,97,110,99,101,100,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:11,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([65,73,32,65,115,115,105,115,116,97,110,116]),[n([112,108,117,103,105,110,78,97,109,101])]:n([65,73,65,115,115,105,115,116,97,110,116,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([97,105,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101])},{[n([105,100])]:12,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([80,114,111,100,117,99,116,105,118,105,116,121,32,112,97,99,107])}];return v(h),h;function g(E){return 1<<E-1}function v(E){E[n([102,111,114,69,97,99,104])](O=>{O[n([112,101,114,109,105,115,115,105,111,110,77,97,115,107])]=g(O[n([105,100])]),r(O)&&O[n([99,104,101,99,107,65,108,115,111])]&&v(O[n([99,104,101,99,107,65,108,115,111])])})}}function r(h){return n([112,108,117,103,105,110,78,97,109,101])in h}const a=[1,85,78,115,198,255,50,112,83,87,161],c=[127,34,6,211,167,86,146,199,132,160,18];function l(h){const g=[29,221,175,90,231,133,239,240,75,180];return x(h,new Uint8Array([...a,...g,...c]))}function x(h,g){const v=d(h),E=Array[n([102,114,111,109])](wn(v)),O=E[n([112,111,112])](),Z=E[n([112,111,112])]();return Qt(t(E,g,Z+256*O))}function d(h){const g=atob(h),[v,E]=g[n([115,112,108,105,116])](n([45]));try{if(atob(E))return atob(v)}catch{}return g}function u(h){try{const g=l(h),v=JSON[n([112,97,114,115,101])](g),E=parseInt(v[n([49])]),O=v[n([50])]||"",Z=parseInt(v[n([51])]),He=parseInt(v[n([52])])||0,we=parseInt(v[n([53])])||0;return{[n([112,114,111,100,117,99,116,78,97,109,101])]:O,[n([97,108,108,111,119,101,100,80,108,117,103,105,110,115])]:He,[n([101,120,112,105,114,97,116,105,111,110,68,97,116,101])]:E,[n([105,115,84,114,105,97,108])]:Z,[n([105,115,73,110,116,101,114,110,97,108])]:we}}catch{return null}}const f=o(),m={[n([99,104,101,99,107,76,105,99,101,110,115,101])]:V,[n([99,104,101,99,107,76,105,99,101,110,115,101,70,111,114,84,114,97,99,107,67,104,97,110,103,101,115])]:A,[n([99,104,101,99,107,76,105,99,101,110,115,101,70,111,114,82,101,118,105,115,105,111,110,72,105,115,116,111,114,121])]:k},b=s[n([99,111,110,115,116,114,117,99,116,111,114])][n([112,108,117,103,105,110,78,97,109,101])],p=n([99,111,110,116,101,120,116])in s?s.context:s.editor,C=n([52,48,52,54,50,50,51,48]),_=n([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57]),R=p.config[Y("0x13")](n([108,105,99,101,110,115,101,75,101,121])),P=f[n([102,105,108,116,101,114])](r)[n([102,105,110,100])](h=>h[n([112,108,117,103,105,110,78,97,109,101])]===b);function I(h,g){m[g[n([104,97,110,100,108,101,114])]](h,g),g[n([99,104,101,99,107,65,108,115,111])]&&g[n([99,104,101,99,107,65,108,115,111])][n([102,105,108,116,101,114])](v=>W(p,v[n([112,108,117,103,105,110,78,97,109,101])]))[n([102,111,114,69,97,99,104])](v=>I(h,v))}function V(h,g){F(M(h,g),g)}function A(h,g){function v(E,O){try{if(W(p,n([84,114,97,99,107,67,104,97,110,103,101,115,69,100,105,116,105,110,103]))&&E){const Z=z(p,n([84,114,97,99,107,67,104,97,110,103,101,115,69,100,105,116,105,110,103]))[n([95,101,120,101,99,117,116,101,83,117,103,103,101,115,116,105,111,110])];if(parseInt(Z)/2>E[n([101,120,112,105,114,97,116,105,111,110,68,97,116,101])])return N(O[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}return M(E,O)}catch{return N(O[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}}F(v(h,g),g)}function k(h,g){const v=c[0]*a[1],E=c[0]*a[2],O=c[2]*a[2];W(p,n([87,101,98,83,111,99,107,101,116,71,97,116,101,119,97,121]))&&z(p,n([87,101,98,83,111,99,107,101,116,71,97,116,101,119,97,121]))[n([115,116,97,116,101])]==n([99,111,110,110,101,99,116,101,100])&&(window[xe()]=O);function Z(T,$){try{return ft()?N($[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([86,97,108,105,100])):M(T,$)}catch{return N($[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}}function He(T,$){if(T==$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))rt();else if(T==$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108])){const ke=we();ke&&Ie(ke,$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]);const Ve=en();window[n([115,101,116,84,105,109,101,111,117,116])](()=>{Ie(n([116,105,109,101]),$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])])},Ve);const Xe=z(p,n([82,101,118,105,115,105,111,110,115,82,101,112,111,115,105,116,111,114,121]))[n([95,114,101,118,105,115,105,111,110,115])];Xe[n([108,101,110,103,116,104])]>=7?Ie(n([114,101,118,105,115,105,111,110,115]),$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]):Xe.on(n([97,100,100]),()=>{Xe[n([108,101,110,103,116,104])]>=7&&Ie(n([114,101,118,105,115,105,111,110,115]),$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])])})}}function we(){if(!W(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114])))return!1;for(const T in window)if(Number[Y("0x11")](Number(T))){if(window[T]===v)return n([116,105,109,101]);if(window[T]===E)return n([114,101,118,105,115,105,111,110,115])}return!1}function ft(){if(!W(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114])))return!1;for(const T in window)if(Number.isNaN(Number(T))&&window[T]===O)return!0;return!1}function Ie(T,$){rt(),N($+n([84,114,105,97,108,76,105,109,105,116,58])+T),window[xe()]=T===n([116,105,109,101])?v:E}function en(){let T=c[6]*a[8]*a[6];return W(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))&&(T/=10),T}function rt(){const T=p;function $(){W(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))&&(z(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))[n([117,110,98,105,110,100])](n([105,115,69,110,97,98,108,101,100])),z(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))[n([105,115,69,110,97,98,108,101,100])]=!1,z(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))[n([117,112,100,97,116,101])]=oe,z(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))[n([115,97,118,101,82,101,118,105,115,105,111,110])]=oe,T[n([109,111,100,101,108])][n([99,104,97,110,103,101])]=oe,T[n([109,111,100,101,108])][n([101,110,113,117,101,117,101,67,104,97,110,103,101])]=oe,T[n([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](n([109,111,100,101,108]))),W(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))&&(z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([117,110,98,105,110,100])](n([105,115,69,110,97,98,108,101,100])),z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([105,115,69,110,97,98,108,101,100])]=!1,z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([99,111,109,112,97,114,101])]=oe,z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([95,103,101,116,68,105,102,102])]=oe)}T[n([115,116,97,116,101])]==n([114,101,97,100,121])?$():T[n([111,110,99,101])](n([114,101,97,100,121]),()=>{if(W(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))&&$(),W(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))){const $e=z(T,n([82,101,118,105,115,105,111,110,115,82,101,112,111,115,105,116,111,114,121])),ke=$e.getRevision(0),Ve=$e[Y("0x10")](ke[n([105,100])]);z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([99,111,109,112,97,114,101])](ke[n([105,100])],Ve?Ve[n([105,100])]:null,1)[Y("0x14")](()=>$())}})}He(Z(h,g),g)}function M(h,g){try{return pn(g)?N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([86,97,108,105,100])):h&&bn(h[n([97,108,108,111,119,101,100,80,108,117,103,105,110,115])],g)?h[n([105,115,73,110,116,101,114,110,97,108])]&&!window[n([111,112,101,110])][n([99,108,111,115,101,100])]||parseInt(C)/2>h[n([101,120,112,105,114,97,116,105,111,110,68,97,116,101])]?N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100])):h[n([105,115,84,114,105,97,108])]?N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108])):N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([86,97,108,105,100])):N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}catch{return N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}}function F(h,g){if(p instanceof ds){const v=p;h==g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100])?J(v):h==g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108])&&window[n([115,101,116,84,105,109,101,111,117,116])](()=>{J(v),N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108,76,105,109,105,116,58,116,105,109,101]))},c[6]*a[8]*a[6]),v[n([101,100,105,116,111,114,115])][n([111,110])](n([97,100,100]),(E,O)=>{h!=g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100])&&h!=g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108,76,105,109,105,116,58,116,105,109,101])&&h!=g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108,76,105,109,105,116,58,111,112,101,114,97,116,105,111,110,115])||ze(O)})}else{const v=p;h==g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100])?ze(v):h==g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108])&&v[n([111,110])](n([114,101,97,100,121]),()=>{let E=0;v[n([109,111,100,101,108])][n([111,110])](n([97,112,112,108,121,79,112,101,114,97,116,105,111,110]),(O,Z)=>{Z[0][n([105,115,68,111,99,117,109,101,110,116,79,112,101,114,97,116,105,111,110])]&&E++,E===504&&(ze(v),N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108,76,105,109,105,116,58,111,112,101,114,97,116,105,111,110,115])),O[n([111,102,102])]())},{priority:n([104,105,103,104,101,115,116])})})}}function N(h){const g=xe();return p[g]=h,h}function xe(){const h=String(window[n([112,101,114,102,111,114,109,97,110,99,101])][n([110,111,119])]())[n([114,101,112,108,97,99,101])](n([46]),"");let g="";for(let v=0;v<h[n([108,101,110,103,116,104])];v+=2){let E=parseInt(h[n([115,117,98,115,116,114,105,110,103])](v,v+2));E>=_[n([108,101,110,103,116,104])]&&(E-=_[n([108,101,110,103,116,104])]),g+=_[E]}return g}function J(h){for(const g of h[n([101,100,105,116,111,114,115])])ze(g);z(h,n([67,111,109,109,101,110,116,115,82,101,112,111,115,105,116,111,114,121]))[n([115,119,105,116,99,104,82,101,97,100,79,110,108,121])](!0),z(h,n([67,111,109,109,101,110,116,115,82,101,112,111,115,105,116,111,114,121]))[n([115,119,105,116,99,104,82,101,97,100,79,110,108,121])]=oe}function ze(h){function g(){h[n([109,111,100,101,108])][n([99,104,97,110,103,101])]=oe,h[n([109,111,100,101,108])][n([101,110,113,117,101,117,101,67,104,97,110,103,101])]=oe,h[n([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](n([109,111,100,101,108]))}h[n([115,116,97,116,101])]==n([114,101,97,100,121])?g():h[n([111,110,99,101])](n([114,101,97,100,121]),()=>g())}function oe(){return null}function bn(h,g){const v=!!(h&g[n([112,101,114,109,105,115,115,105,111,110,77,97,115,107])]),E=Xt(h,g);return v||E}function Xt(h,g){const v=(g[n([111,112,116,105,111,110,115])]||{})[n([102,103,105])]||null;if(!v)return!1;const E=f[n([102,105,110,100])](O=>O[n([105,100])]===v);return!!E&&!!(h&E[n([112,101,114,109,105,115,115,105,111,110,77,97,115,107])])}function pn(h){if(!W(p,h[n([112,108,117,103,105,110,78,97,109,101])]))return!0;const g=h[n([111,112,116,105,111,110,115])]||{},v=g[n([97,105,119,115,103,105,99])]||!1,E=g[n([97,105,116,99,100,103,105,108])]||!1,O=g[n([97,105,114,118,105,105,108])]||!1;return W(p,n([87,101,98,83,111,99,107,101,116,71,97,116,101,119,97,121]))&&z(p,n([87,101,98,83,111,99,107,101,116,71,97,116,101,119,97,121]))[n([115,116,97,116,101])]==n([99,111,110,110,101,99,116,101,100])&&v||W(p,n([84,114,97,99,107,67,104,97,110,103,101,115,68,97,116,97,71,101,116,116,101,114]))&&z(p,n([84,114,97,99,107,67,104,97,110,103,101,115,68,97,116,97,71,101,116,116,101,114]))[n([114,101,115,117,108,116])]==n([101,110,100])&&E?!0:!(!W(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114,73,110,116,101,103,114,97,116,105,111,110]))||z(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114,73,110,116,101,103,114,97,116,105,111,110]))[n([114,101,115,117,108,116])]!=n([101,110,100])||!O)}function W(h,g){return h[n([112,108,117,103,105,110,115])][n([104,97,115])](g)}function z(h,g){return h[n([112,108,117,103,105,110,115])][n([103,101,116])](g)}function Qt(h){let g="";for(const v of h)g+=String[n([102,114,111,109,67,104,97,114,67,111,100,101])](v);return g}function wn(h){const g=new Uint8Array(h[n([108,101,110,103,116,104])]);for(let v=0;v<h[n([108,101,110,103,116,104])];v++)g[v]=h[n([99,104,97,114,67,111,100,101,65,116])](v);return g}P&&I(u(R),P)})(e)})(this)}[Y("0x3")](){const e=this[Y("0xe")],t=this[Y("0xe")].plugins[Y("0x13")](Y("0x4")),n=e[Y("0x0")].get(Y("0x8"));n[Y("0x21")]({marker:"/",feed:s=>t.getMatchingCommands(s),itemRenderer:this[Y("0x1e")][Y("0x9")](this),dropdownLimit:e[Y("0x0")][Y("0x13")](Y("0x17"))||1/0}),e[Y("0x0")][Y("0x20")](Y("0x8"),n)}[Y("0x6")](){const e=this.editor;e[Y("0x16")].get(Y("0xf")).on(Y("0xd"),(t,n)=>{const s=n[0],o=e[Y("0x5")];s[Y("0x2")]==="/"&&o[Y("0x19")](r=>{r[Y("0xc")](s[Y("0x1a")]),s[Y("0xf")].execute(),t[Y("0x1d")]()})},{priority:Y("0x12")})}[Y("0x1e")](e){const t=this[Y("0xe")][Y("0xb")],n=new ID(t,e);return n.render(),n[Y("0x1")]}};var _b=["Mention","requires","pluginName","SlashCommand"];(function(i,e){var t=function(n){for(;--n;)i.push(i.shift())};t(++e)})(_b,103);var er=function(i,e){i=i-0;var t=_b[i];return t};let RD=class extends y{static get[er("0x2")](){return[er("0x1"),ED,PD]}static get[er("0x3")](){return er("0x0")}};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class VD extends da{constructor(e,t){super(e);const n=e.t;this.set("class","ck-special-characters-navigation"),this.groupDropdownView=this._createGroupDropdown(t),this.groupDropdownView.panelPosition=e.uiLanguageDirection==="rtl"?"se":"sw",this.label=n("Special characters"),this.children.add(this.groupDropdownView)}get currentGroupName(){return this.groupDropdownView.value}focus(){this.groupDropdownView.focus()}_createGroupDropdown(e){const t=this.locale,n=t.t,s=Ne(t),o=this._getCharacterGroupListItemDefinitions(s,e),r=n("Character categories");return s.set("value",o.first.model.name),s.buttonView.bind("label").to(s,"value",a=>e.get(a)),s.buttonView.set({isOn:!1,withText:!0,tooltip:r,class:["ck-dropdown__button_label-width_auto"],ariaLabel:r,ariaLabelledBy:void 0}),s.on("execute",a=>{s.value=a.source.name}),s.delegate("execute").to(this),Mn(s,o,{ariaLabel:r,role:"menu"}),s}_getCharacterGroupListItemDefinitions(e,t){const n=new De;for(const[s,o]of t){const r=new Rn({name:s,label:o,withText:!0,role:"menuitemradio"});r.bind("isOn").to(e,"value",a=>a===r.name),n.add({type:"button",model:r})}return n}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class BD extends D{constructor(e){super(e),this.tiles=this.createCollection(),this.setTemplate({tag:"div",children:[{tag:"div",attributes:{class:["ck","ck-character-grid__tiles"]},children:this.tiles}],attributes:{class:["ck","ck-character-grid"]}}),this.focusTracker=new Se,this.keystrokes=new Le,mo({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.tiles,numberOfColumns:()=>U.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}createTile(e,t){const n=new G(this.locale);return n.set({label:e,withText:!0,class:"ck-character-grid__tile"}),n.extendTemplate({attributes:{title:t},on:{mouseover:n.bindTemplate.to("mouseover"),focus:n.bindTemplate.to("focus")}}),n.on("mouseover",()=>{this.fire("tileHover",{name:t,character:e})}),n.on("focus",()=>{this.fire("tileFocus",{name:t,character:e})}),n.on("execute",()=>{this.fire("execute",{name:t,character:e})}),n}render(){super.render();for(const e of this.tiles)this.focusTracker.add(e.element);this.tiles.on("change",(e,{added:t,removed:n})=>{if(t.length>0)for(const s of t)this.focusTracker.add(s.element);if(n.length>0)for(const s of n)this.focusTracker.remove(s.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}focus(){this.tiles.first.focus()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OD extends D{constructor(e){super(e);const t=this.bindTemplate;this.set("character",null),this.set("name",null),this.bind("code").to(this,"character",LD),this.setTemplate({tag:"div",children:[{tag:"span",attributes:{class:["ck-character-info__name"]},children:[{text:t.to("name",n=>n||"​")}]},{tag:"span",attributes:{class:["ck-character-info__code"]},children:[{text:t.to("code")}]}],attributes:{class:["ck","ck-character-info"]}})}}function LD(i){return i===null?"":"U+"+("0000"+i.codePointAt(0).toString(16)).slice(-4)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class MD extends D{constructor(e,t,n,s){super(e),this.navigationView=t,this.gridView=n,this.infoView=s,this.items=this.createCollection(),this.focusTracker=new Se,this.keystrokes=new Le,this._focusCycler=new ut({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",children:[this.navigationView,this.gridView,this.infoView],attributes:{tabindex:"-1"}}),this.items.add(this.navigationView.groupDropdownView.buttonView),this.items.add(this.gridView)}render(){super.render(),this.focusTracker.add(this.navigationView.groupDropdownView.buttonView.element),this.focusTracker.add(this.gridView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.navigationView.focus()}}const FD='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2.5a7.47 7.47 0 0 1 4.231 1.31 7.268 7.268 0 0 1 2.703 3.454 7.128 7.128 0 0 1 .199 4.353c-.39 1.436-1.475 2.72-2.633 3.677h2.013c0-.226.092-.443.254-.603a.876.876 0 0 1 1.229 0c.163.16.254.377.254.603v.853c0 .209-.078.41-.22.567a.873.873 0 0 1-.547.28l-.101.006h-4.695a.517.517 0 0 1-.516-.518v-1.265c0-.21.128-.398.317-.489a5.601 5.601 0 0 0 2.492-2.371 5.459 5.459 0 0 0 .552-3.693 5.53 5.53 0 0 0-1.955-3.2A5.71 5.71 0 0 0 10 4.206 5.708 5.708 0 0 0 6.419 5.46 5.527 5.527 0 0 0 4.46 8.663a5.457 5.457 0 0 0 .554 3.695 5.6 5.6 0 0 0 2.497 2.37.55.55 0 0 1 .317.49v1.264c0 .286-.23.518-.516.518H2.618a.877.877 0 0 1-.614-.25.845.845 0 0 1-.254-.603v-.853c0-.226.091-.443.254-.603a.876.876 0 0 1 1.228 0c.163.16.255.377.255.603h1.925c-1.158-.958-2.155-2.241-2.545-3.678a7.128 7.128 0 0 1 .199-4.352 7.268 7.268 0 0 1 2.703-3.455A7.475 7.475 0 0 1 10 2.5z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const m0="All";class ND extends y{static get requires(){return[Fg]}static get pluginName(){return"SpecialCharacters"}constructor(e){super(e);const t=e.t;this._characters=new Map,this._groups=new Map,this._allSpecialCharactersGroupLabel=t("All")}init(){const e=this.editor,t=e.t,n=e.commands.get("insertText");e.ui.componentFactory.add("specialCharacters",s=>{const o=Ne(s);let r;return o.buttonView.set({label:t("Special characters"),icon:FD,tooltip:!0}),o.bind("isEnabled").to(n),o.on("execute",(a,c)=>{e.execute("insertText",{text:c.character}),e.editing.view.focus()}),o.on("change:isOpen",()=>{if(!r){r=this._createDropdownPanelContent(s,o);const a=new MD(s,r.navigationView,r.gridView,r.infoView);o.panelView.children.add(a)}r.infoView.set({character:null,name:null})}),o})}addItems(e,t,n={label:e}){if(e===m0)throw new w("special-character-invalid-group-name",null);const s=this._getGroup(e,n.label);for(const o of t)s.items.add(o.title),this._characters.set(o.title,o.character)}getGroups(){const e=Array.from(this._groups.keys()),t=this.editor.config.get("specialCharacters.order")||[],n=t.find(s=>!e.includes(s));if(n)throw new w("special-character-invalid-order-group-name",null,{invalidGroup:n});return new Set([...t,...e])}getCharactersForGroup(e){if(e===m0)return new Set(this._characters.keys());const t=this._groups.get(e);if(t)return t.items}getCharacter(e){return this._characters.get(e)}_getGroup(e,t){return this._groups.has(e)||this._groups.set(e,{items:new Set,label:t}),this._groups.get(e)}_updateGrid(e,t){t.tiles.clear();const n=this.getCharactersForGroup(e);for(const s of n){const o=this.getCharacter(s);t.tiles.add(t.createTile(o,s))}}_createDropdownPanelContent(e,t){const n=Array.from(this.getGroups()).map(c=>[c,this._groups.get(c).label]),s=new Map([[m0,this._allSpecialCharactersGroupLabel],...n]),o=new VD(e,s),r=new BD(e),a=new OD(e);return r.delegate("execute").to(t),r.on("tileHover",(c,l)=>{a.set(l)}),r.on("tileFocus",(c,l)=>{a.set(l)}),o.on("execute",()=>{this._updateGrid(o.currentGroupName,r)}),this._updateGrid(o.currentGroupName,r),{navigationView:o,gridView:r,infoView:a}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vb extends y{static get pluginName(){return"SpecialCharactersArrows"}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Arrows",[{title:t("leftwards simple arrow"),character:"←"},{title:t("rightwards simple arrow"),character:"→"},{title:t("upwards simple arrow"),character:"↑"},{title:t("downwards simple arrow"),character:"↓"},{title:t("leftwards double arrow"),character:"⇐"},{title:t("rightwards double arrow"),character:"⇒"},{title:t("upwards double arrow"),character:"⇑"},{title:t("downwards double arrow"),character:"⇓"},{title:t("leftwards dashed arrow"),character:"⇠"},{title:t("rightwards dashed arrow"),character:"⇢"},{title:t("upwards dashed arrow"),character:"⇡"},{title:t("downwards dashed arrow"),character:"⇣"},{title:t("leftwards arrow to bar"),character:"⇤"},{title:t("rightwards arrow to bar"),character:"⇥"},{title:t("upwards arrow to bar"),character:"⤒"},{title:t("downwards arrow to bar"),character:"⤓"},{title:t("up down arrow with base"),character:"↨"},{title:t("back with leftwards arrow above"),character:"🔙"},{title:t("end with leftwards arrow above"),character:"🔚"},{title:t("on with exclamation mark with left right arrow above"),character:"🔛"},{title:t("soon with rightwards arrow above"),character:"🔜"},{title:t("top with upwards arrow above"),character:"🔝"}],{label:t("Arrows")})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yb extends y{static get pluginName(){return"SpecialCharactersText"}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Text",[{character:"‹",title:t("Single left-pointing angle quotation mark")},{character:"›",title:t("Single right-pointing angle quotation mark")},{character:"«",title:t("Left-pointing double angle quotation mark")},{character:"»",title:t("Right-pointing double angle quotation mark")},{character:"‘",title:t("Left single quotation mark")},{character:"’",title:t("Right single quotation mark")},{character:"“",title:t("Left double quotation mark")},{character:"”",title:t("Right double quotation mark")},{character:"‚",title:t("Single low-9 quotation mark")},{character:"„",title:t("Double low-9 quotation mark")},{character:"¡",title:t("Inverted exclamation mark")},{character:"¿",title:t("Inverted question mark")},{character:"‥",title:t("Two dot leader")},{character:"…",title:t("Horizontal ellipsis")},{character:"‡",title:t("Double dagger")},{character:"‰",title:t("Per mille sign")},{character:"‱",title:t("Per ten thousand sign")},{character:"‼",title:t("Double exclamation mark")},{character:"⁈",title:t("Question exclamation mark")},{character:"⁉",title:t("Exclamation question mark")},{character:"⁇",title:t("Double question mark")},{character:"©",title:t("Copyright sign")},{character:"®",title:t("Registered sign")},{character:"™",title:t("Trade mark sign")},{character:"§",title:t("Section sign")},{character:"¶",title:t("Paragraph sign")},{character:"⁋",title:t("Reversed paragraph sign")}],{label:t("Text")})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cb extends y{static get pluginName(){return"SpecialCharactersMathematical"}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Mathematical",[{character:"<",title:t("Less-than sign")},{character:">",title:t("Greater-than sign")},{character:"≤",title:t("Less-than or equal to")},{character:"≥",title:t("Greater-than or equal to")},{character:"–",title:t("En dash")},{character:"—",title:t("Em dash")},{character:"¯",title:t("Macron")},{character:"‾",title:t("Overline")},{character:"°",title:t("Degree sign")},{character:"−",title:t("Minus sign")},{character:"±",title:t("Plus-minus sign")},{character:"÷",title:t("Division sign")},{character:"⁄",title:t("Fraction slash")},{character:"×",title:t("Multiplication sign")},{character:"ƒ",title:t("Latin small letter f with hook")},{character:"∫",title:t("Integral")},{character:"∑",title:t("N-ary summation")},{character:"∞",title:t("Infinity")},{character:"√",title:t("Square root")},{character:"∼",title:t("Tilde operator")},{character:"≅",title:t("Approximately equal to")},{character:"≈",title:t("Almost equal to")},{character:"≠",title:t("Not equal to")},{character:"≡",title:t("Identical to")},{character:"∈",title:t("Element of")},{character:"∉",title:t("Not an element of")},{character:"∋",title:t("Contains as member")},{character:"∏",title:t("N-ary product")},{character:"∧",title:t("Logical and")},{character:"∨",title:t("Logical or")},{character:"¬",title:t("Not sign")},{character:"∩",title:t("Intersection")},{character:"∪",title:t("Union")},{character:"∂",title:t("Partial differential")},{character:"∀",title:t("For all")},{character:"∃",title:t("There exists")},{character:"∅",title:t("Empty set")},{character:"∇",title:t("Nabla")},{character:"∗",title:t("Asterisk operator")},{character:"∝",title:t("Proportional to")},{character:"∠",title:t("Angle")},{character:"¼",title:t("Vulgar fraction one quarter")},{character:"½",title:t("Vulgar fraction one half")},{character:"¾",title:t("Vulgar fraction three quarters")}],{label:t("Mathematical")})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kb extends y{static get pluginName(){return"SpecialCharactersLatin"}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Latin",[{character:"Ā",title:t("Latin capital letter a with macron")},{character:"ā",title:t("Latin small letter a with macron")},{character:"Ă",title:t("Latin capital letter a with breve")},{character:"ă",title:t("Latin small letter a with breve")},{character:"Ą",title:t("Latin capital letter a with ogonek")},{character:"ą",title:t("Latin small letter a with ogonek")},{character:"Ć",title:t("Latin capital letter c with acute")},{character:"ć",title:t("Latin small letter c with acute")},{character:"Ĉ",title:t("Latin capital letter c with circumflex")},{character:"ĉ",title:t("Latin small letter c with circumflex")},{character:"Ċ",title:t("Latin capital letter c with dot above")},{character:"ċ",title:t("Latin small letter c with dot above")},{character:"Č",title:t("Latin capital letter c with caron")},{character:"č",title:t("Latin small letter c with caron")},{character:"Ď",title:t("Latin capital letter d with caron")},{character:"ď",title:t("Latin small letter d with caron")},{character:"Đ",title:t("Latin capital letter d with stroke")},{character:"đ",title:t("Latin small letter d with stroke")},{character:"Ē",title:t("Latin capital letter e with macron")},{character:"ē",title:t("Latin small letter e with macron")},{character:"Ĕ",title:t("Latin capital letter e with breve")},{character:"ĕ",title:t("Latin small letter e with breve")},{character:"Ė",title:t("Latin capital letter e with dot above")},{character:"ė",title:t("Latin small letter e with dot above")},{character:"Ę",title:t("Latin capital letter e with ogonek")},{character:"ę",title:t("Latin small letter e with ogonek")},{character:"Ě",title:t("Latin capital letter e with caron")},{character:"ě",title:t("Latin small letter e with caron")},{character:"Ĝ",title:t("Latin capital letter g with circumflex")},{character:"ĝ",title:t("Latin small letter g with circumflex")},{character:"Ğ",title:t("Latin capital letter g with breve")},{character:"ğ",title:t("Latin small letter g with breve")},{character:"Ġ",title:t("Latin capital letter g with dot above")},{character:"ġ",title:t("Latin small letter g with dot above")},{character:"Ģ",title:t("Latin capital letter g with cedilla")},{character:"ģ",title:t("Latin small letter g with cedilla")},{character:"Ĥ",title:t("Latin capital letter h with circumflex")},{character:"ĥ",title:t("Latin small letter h with circumflex")},{character:"Ħ",title:t("Latin capital letter h with stroke")},{character:"ħ",title:t("Latin small letter h with stroke")},{character:"Ĩ",title:t("Latin capital letter i with tilde")},{character:"ĩ",title:t("Latin small letter i with tilde")},{character:"Ī",title:t("Latin capital letter i with macron")},{character:"ī",title:t("Latin small letter i with macron")},{character:"Ĭ",title:t("Latin capital letter i with breve")},{character:"ĭ",title:t("Latin small letter i with breve")},{character:"Į",title:t("Latin capital letter i with ogonek")},{character:"į",title:t("Latin small letter i with ogonek")},{character:"İ",title:t("Latin capital letter i with dot above")},{character:"ı",title:t("Latin small letter dotless i")},{character:"Ĳ",title:t("Latin capital ligature ij")},{character:"ĳ",title:t("Latin small ligature ij")},{character:"Ĵ",title:t("Latin capital letter j with circumflex")},{character:"ĵ",title:t("Latin small letter j with circumflex")},{character:"Ķ",title:t("Latin capital letter k with cedilla")},{character:"ķ",title:t("Latin small letter k with cedilla")},{character:"ĸ",title:t("Latin small letter kra")},{character:"Ĺ",title:t("Latin capital letter l with acute")},{character:"ĺ",title:t("Latin small letter l with acute")},{character:"Ļ",title:t("Latin capital letter l with cedilla")},{character:"ļ",title:t("Latin small letter l with cedilla")},{character:"Ľ",title:t("Latin capital letter l with caron")},{character:"ľ",title:t("Latin small letter l with caron")},{character:"Ŀ",title:t("Latin capital letter l with middle dot")},{character:"ŀ",title:t("Latin small letter l with middle dot")},{character:"Ł",title:t("Latin capital letter l with stroke")},{character:"ł",title:t("Latin small letter l with stroke")},{character:"Ń",title:t("Latin capital letter n with acute")},{character:"ń",title:t("Latin small letter n with acute")},{character:"Ņ",title:t("Latin capital letter n with cedilla")},{character:"ņ",title:t("Latin small letter n with cedilla")},{character:"Ň",title:t("Latin capital letter n with caron")},{character:"ň",title:t("Latin small letter n with caron")},{character:"ŉ",title:t("Latin small letter n preceded by apostrophe")},{character:"Ŋ",title:t("Latin capital letter eng")},{character:"ŋ",title:t("Latin small letter eng")},{character:"Ō",title:t("Latin capital letter o with macron")},{character:"ō",title:t("Latin small letter o with macron")},{character:"Ŏ",title:t("Latin capital letter o with breve")},{character:"ŏ",title:t("Latin small letter o with breve")},{character:"Ő",title:t("Latin capital letter o with double acute")},{character:"ő",title:t("Latin small letter o with double acute")},{character:"Œ",title:t("Latin capital ligature oe")},{character:"œ",title:t("Latin small ligature oe")},{character:"Ŕ",title:t("Latin capital letter r with acute")},{character:"ŕ",title:t("Latin small letter r with acute")},{character:"Ŗ",title:t("Latin capital letter r with cedilla")},{character:"ŗ",title:t("Latin small letter r with cedilla")},{character:"Ř",title:t("Latin capital letter r with caron")},{character:"ř",title:t("Latin small letter r with caron")},{character:"Ś",title:t("Latin capital letter s with acute")},{character:"ś",title:t("Latin small letter s with acute")},{character:"Ŝ",title:t("Latin capital letter s with circumflex")},{character:"ŝ",title:t("Latin small letter s with circumflex")},{character:"Ş",title:t("Latin capital letter s with cedilla")},{character:"ş",title:t("Latin small letter s with cedilla")},{character:"Š",title:t("Latin capital letter s with caron")},{character:"š",title:t("Latin small letter s with caron")},{character:"Ţ",title:t("Latin capital letter t with cedilla")},{character:"ţ",title:t("Latin small letter t with cedilla")},{character:"Ť",title:t("Latin capital letter t with caron")},{character:"ť",title:t("Latin small letter t with caron")},{character:"Ŧ",title:t("Latin capital letter t with stroke")},{character:"ŧ",title:t("Latin small letter t with stroke")},{character:"Ũ",title:t("Latin capital letter u with tilde")},{character:"ũ",title:t("Latin small letter u with tilde")},{character:"Ū",title:t("Latin capital letter u with macron")},{character:"ū",title:t("Latin small letter u with macron")},{character:"Ŭ",title:t("Latin capital letter u with breve")},{character:"ŭ",title:t("Latin small letter u with breve")},{character:"Ů",title:t("Latin capital letter u with ring above")},{character:"ů",title:t("Latin small letter u with ring above")},{character:"Ű",title:t("Latin capital letter u with double acute")},{character:"ű",title:t("Latin small letter u with double acute")},{character:"Ų",title:t("Latin capital letter u with ogonek")},{character:"ų",title:t("Latin small letter u with ogonek")},{character:"Ŵ",title:t("Latin capital letter w with circumflex")},{character:"ŵ",title:t("Latin small letter w with circumflex")},{character:"Ŷ",title:t("Latin capital letter y with circumflex")},{character:"ŷ",title:t("Latin small letter y with circumflex")},{character:"Ÿ",title:t("Latin capital letter y with diaeresis")},{character:"Ź",title:t("Latin capital letter z with acute")},{character:"ź",title:t("Latin small letter z with acute")},{character:"Ż",title:t("Latin capital letter z with dot above")},{character:"ż",title:t("Latin small letter z with dot above")},{character:"Ž",title:t("Latin capital letter z with caron")},{character:"ž",title:t("Latin small letter z with caron")},{character:"ſ",title:t("Latin small letter long s")}],{label:t("Latin")})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tb extends y{static get pluginName(){return"SpecialCharactersCurrency"}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Currency",[{character:"$",title:t("Dollar sign")},{character:"€",title:t("Euro sign")},{character:"¥",title:t("Yen sign")},{character:"£",title:t("Pound sign")},{character:"¢",title:t("Cent sign")},{character:"₠",title:t("Euro-currency sign")},{character:"₡",title:t("Colon sign")},{character:"₢",title:t("Cruzeiro sign")},{character:"₣",title:t("French franc sign")},{character:"₤",title:t("Lira sign")},{character:"¤",title:t("Currency sign")},{character:"₿",title:t("Bitcoin sign")},{character:"₥",title:t("Mill sign")},{character:"₦",title:t("Naira sign")},{character:"₧",title:t("Peseta sign")},{character:"₨",title:t("Rupee sign")},{character:"₩",title:t("Won sign")},{character:"₪",title:t("New sheqel sign")},{character:"₫",title:t("Dong sign")},{character:"₭",title:t("Kip sign")},{character:"₮",title:t("Tugrik sign")},{character:"₯",title:t("Drachma sign")},{character:"₰",title:t("German penny sign")},{character:"₱",title:t("Peso sign")},{character:"₲",title:t("Guarani sign")},{character:"₳",title:t("Austral sign")},{character:"₴",title:t("Hryvnia sign")},{character:"₵",title:t("Cedi sign")},{character:"₶",title:t("Livre tournois sign")},{character:"₷",title:t("Spesmilo sign")},{character:"₸",title:t("Tenge sign")},{character:"₹",title:t("Indian rupee sign")},{character:"₺",title:t("Turkish lira sign")},{character:"₻",title:t("Nordic mark sign")},{character:"₼",title:t("Manat sign")},{character:"₽",title:t("Ruble sign")}],{label:t("Currency")})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class DD extends y{static get pluginName(){return"SpecialCharactersEssentials"}static get requires(){return[Tb,yb,Cb,vb,kb]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zD extends G{constructor(e,t){super(e),this.styleDefinition=t,this.previewView=this._createPreview(),this.set({label:t.name,class:"ck-style-grid__button",withText:!0}),this.extendTemplate({attributes:{role:"option"}}),this.children.add(this.previewView,0)}_createPreview(){const e=new D(this.locale);return e.setTemplate({tag:"div",attributes:{class:["ck","ck-reset_all-excluded","ck-style-grid__button__preview","ck-content"],"aria-hidden":"true"},children:[this.styleDefinition.previewTemplate]}),e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class HD extends D{constructor(e,t){super(e),this.focusTracker=new Se,this.keystrokes=new Le,this.set("activeStyles",[]),this.set("enabledStyles",[]),this.children=this.createCollection(),this.children.delegate("execute").to(this);for(const n of t){const s=new zD(e,n);this.children.add(s)}this.on("change:activeStyles",()=>{for(const n of this.children)n.isOn=this.activeStyles.includes(n.styleDefinition.name)}),this.on("change:enabledStyles",()=>{for(const n of this.children)n.isEnabled=this.enabledStyles.includes(n.styleDefinition.name)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-style-grid"],role:"listbox"},children:this.children})}render(){super.render();for(const e of this.children)this.focusTracker.add(e.element);mo({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.children,numberOfColumns:3,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection}),this.keystrokes.listenTo(this.element)}focus(){this.children.first.focus()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rf extends D{constructor(e,t,n){super(e),this.labelView=new Pt(e),this.labelView.text=t,this.gridView=new HD(e,n),this.setTemplate({tag:"div",attributes:{class:["ck","ck-style-panel__style-group"],role:"group","aria-labelledby":this.labelView.id},children:[this.labelView,this.gridView]})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $D extends D{constructor(e,t){super(e);const n=e.t;this.focusTracker=new Se,this.keystrokes=new Le,this.children=this.createCollection(),this.blockStylesGroupView=new Rf(e,n("Block styles"),t.block),this.inlineStylesGroupView=new Rf(e,n("Text styles"),t.inline),this.set("activeStyles",[]),this.set("enabledStyles",[]),this._focusables=new dt,this._focusCycler=new ut({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:["shift + tab"],focusNext:["tab"]}}),t.block.length&&this.children.add(this.blockStylesGroupView),t.inline.length&&this.children.add(this.inlineStylesGroupView),this.blockStylesGroupView.gridView.delegate("execute").to(this),this.inlineStylesGroupView.gridView.delegate("execute").to(this),this.blockStylesGroupView.gridView.bind("activeStyles","enabledStyles").to(this,"activeStyles","enabledStyles"),this.inlineStylesGroupView.gridView.bind("activeStyles","enabledStyles").to(this,"activeStyles","enabledStyles"),this.setTemplate({tag:"div",attributes:{class:["ck","ck-style-panel"]},children:this.children})}render(){super.render(),this._focusables.add(this.blockStylesGroupView.gridView),this._focusables.add(this.inlineStylesGroupView.gridView),this.focusTracker.add(this.blockStylesGroupView.gridView.element),this.focusTracker.add(this.inlineStylesGroupView.gridView.element),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const UD=["caption","colgroup","dd","dt","figcaption","legend","li","optgroup","option","rp","rt","summary","tbody","td","tfoot","th","thead","tr"];class Vn extends y{static get pluginName(){return"StyleUtils"}constructor(e){super(e),this.decorate("isStyleEnabledForBlock"),this.decorate("isStyleActiveForBlock"),this.decorate("getAffectedBlocks"),this.decorate("isStyleEnabledForInlineSelection"),this.decorate("isStyleActiveForInlineSelection"),this.decorate("getAffectedInlineSelectable"),this.decorate("getStylePreview"),this.decorate("configureGHSDataFilter")}init(){this._htmlSupport=this.editor.plugins.get("GeneralHtmlSupport")}normalizeConfig(e,t=[]){const n={block:[],inline:[]};for(const s of t){const o=[],r=[];for(const c of e.getDefinitionsForView(s.element)){const l="appliesToBlock"in c?c.appliesToBlock:!1;if(c.isBlock||l){if(typeof l=="string")o.push(l);else if(c.isBlock){const x=c;o.push(c.model),x.paragraphLikeModel&&o.push(x.paragraphLikeModel)}}else r.push(c.model)}const a=this.getStylePreview(s,[{text:"AaBbCcDdEeFfGgHhIiJj"}]);o.length?n.block.push({...s,previewTemplate:a,modelElements:o,isBlock:!0}):n.inline.push({...s,previewTemplate:a,ghsAttributes:r})}return n}isStyleEnabledForBlock(e,t){const n=this.editor.model,s=this._htmlSupport.getGhsAttributeNameForElement(e.element);return n.schema.checkAttribute(t,s)?e.modelElements.includes(t.name):!1}isStyleActiveForBlock(e,t){const n=this._htmlSupport.getGhsAttributeNameForElement(e.element),s=t.getAttribute(n);return this.hasAllClasses(s,e.classes)}getAffectedBlocks(e,t){return e.modelElements.includes(t.name)?[t]:null}isStyleEnabledForInlineSelection(e,t){const n=this.editor.model;for(const s of e.ghsAttributes)if(n.schema.checkAttributeInSelection(t,s))return!0;return!1}isStyleActiveForInlineSelection(e,t){for(const n of e.ghsAttributes){const s=this._getValueFromFirstAllowedNode(t,n);if(this.hasAllClasses(s,e.classes))return!0}return!1}getAffectedInlineSelectable(e,t){return t}getStylePreview(e,t){const{element:n,classes:s}=e;return{tag:jD(n)?n:"div",attributes:{class:s},children:t}}hasAllClasses(e,t){return Ee(e)&&WD(e)&&t.every(n=>e.classes.includes(n))}configureGHSDataFilter({block:e,inline:t}){const n=this.editor.plugins.get("DataFilter");n.loadAllowedConfig(e.map(Vf)),n.loadAllowedConfig(t.map(Vf))}_getValueFromFirstAllowedNode(e,t){const s=this.editor.model.schema;if(e.isCollapsed)return e.getAttribute(t);for(const o of e.getRanges())for(const r of o.getItems())if(s.checkAttribute(r,t))return r.getAttribute(t);return null}}function WD(i){return!!i.classes&&Array.isArray(i.classes)}function jD(i){return!UD.includes(i)}function Vf({element:i,classes:e}){return{name:i,classes:e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qD extends y{static get pluginName(){return"StyleUI"}static get requires(){return[Vn]}init(){const e=this.editor,t=e.plugins.get("DataSchema"),n=e.plugins.get("StyleUtils"),s=e.config.get("style.definitions"),o=n.normalizeConfig(t,s);e.ui.componentFactory.add("style",r=>{const a=r.t,c=Ne(r),l=e.commands.get("style");return c.once("change:isOpen",()=>{const x=new $D(r,o);c.panelView.children.add(x),x.delegate("execute").to(c),x.bind("activeStyles").to(l,"value"),x.bind("enabledStyles").to(l,"enabledStyles")}),c.bind("isEnabled").to(l),c.buttonView.withText=!0,c.buttonView.bind("label").to(l,"value",x=>x.length>1?a("Multiple styles"):x.length===1?x[0]:a("Styles")),c.bind("class").to(l,"value",x=>{const d=["ck-style-dropdown"];return x.length>1&&d.push("ck-style-dropdown_multiple-active"),d.join(" ")}),c.on("execute",x=>{e.execute("style",{styleName:x.source.styleDefinition.name}),e.editing.view.focus()}),c})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class GD extends q{constructor(e,t){super(e),this.set("value",[]),this.set("enabledStyles",[]),this._styleDefinitions=t,this._styleUtils=this.editor.plugins.get(Vn)}refresh(){const e=this.editor.model,t=e.document.selection,n=new Set,s=new Set;for(const r of this._styleDefinitions.inline)this._styleUtils.isStyleEnabledForInlineSelection(r,t)&&s.add(r.name),this._styleUtils.isStyleActiveForInlineSelection(r,t)&&n.add(r.name);const o=Be(t.getSelectedBlocks())||t.getFirstPosition().parent;if(o){const r=o.getAncestors({includeSelf:!0,parentFirst:!0});for(const a of r){if(a.is("rootElement"))break;for(const c of this._styleDefinitions.block)this._styleUtils.isStyleEnabledForBlock(c,a)&&(s.add(c.name),this._styleUtils.isStyleActiveForBlock(c,a)&&n.add(c.name));if(e.schema.isObject(a))break}}this.enabledStyles=Array.from(s).sort(),this.isEnabled=this.enabledStyles.length>0,this.value=this.isEnabled?Array.from(n).sort():[]}execute({styleName:e,forceValue:t}){if(!this.enabledStyles.includes(e)){be("style-command-executed-with-incorrect-style-name");return}const n=this.editor.model,s=n.document.selection,o=this.editor.plugins.get("GeneralHtmlSupport"),r=[...this._styleDefinitions.inline,...this._styleDefinitions.block],a=r.filter(({name:x})=>this.value.includes(x)),c=r.find(({name:x})=>x==e),l=t===void 0?!this.value.includes(c.name):t;n.change(()=>{let x;JD(c)?x=this._findAffectedBlocks(ZD(s),c):x=[this._styleUtils.getAffectedInlineSelectable(c,s)];for(const d of x)l?o.addModelHtmlClass(c.element,c.classes,d):o.removeModelHtmlClass(c.element,KD(a,c),d)})}_findAffectedBlocks(e,t){const n=new Set;for(const s of e){const o=s.getAncestors({includeSelf:!0,parentFirst:!0});for(const r of o){if(r.is("rootElement"))break;const a=this._styleUtils.getAffectedBlocks(t,r);if(a){for(const c of a)n.add(c);break}}}return n}}function KD(i,e){return i.reduce((t,n)=>n.name===e.name?t:t.filter(s=>!n.classes.includes(s)),e.classes)}function JD(i){return"isBlock"in i}function ZD(i){const e=Array.from(i.getSelectedBlocks());return e.length?e:[i.getFirstPosition().parent]}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class YD extends y{static get pluginName(){return"DocumentListStyleSupport"}static get requires(){return[Vn,"GeneralHtmlSupport"]}init(){const e=this.editor;e.plugins.has("DocumentListEditing")&&(this._styleUtils=e.plugins.get(Vn),this._documentListUtils=this.editor.plugins.get("DocumentListUtils"),this._htmlSupport=this.editor.plugins.get("GeneralHtmlSupport"),this.listenTo(this._styleUtils,"isStyleEnabledForBlock",(t,[n,s])=>{this._isStyleEnabledForBlock(n,s)&&(t.return=!0,t.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"isStyleActiveForBlock",(t,[n,s])=>{this._isStyleActiveForBlock(n,s)&&(t.return=!0,t.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getAffectedBlocks",(t,[n,s])=>{const o=this._getAffectedBlocks(n,s);o&&(t.return=o,t.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getStylePreview",(t,[n,s])=>{const o=this._getStylePreview(n,s);o&&(t.return=o,t.stop())},{priority:"high"}))}_isStyleEnabledForBlock(e,t){const n=this.editor.model;if(!["ol","ul","li"].includes(e.element)||!this._documentListUtils.isListItemBlock(t))return!1;const s=this._htmlSupport.getGhsAttributeNameForElement(e.element);if(e.element=="ol"||e.element=="ul"){if(!n.schema.checkAttribute(t,s))return!1;const o=t.getAttribute("listType")=="numbered"?"ol":"ul";return e.element==o}else return n.schema.checkAttribute(t,s)}_isStyleActiveForBlock(e,t){const n=this._htmlSupport.getGhsAttributeNameForElement(e.element),s=t.getAttribute(n);return this._styleUtils.hasAllClasses(s,e.classes)}_getAffectedBlocks(e,t){return this._isStyleEnabledForBlock(e,t)?e.element=="li"?this._documentListUtils.expandListBlocksToCompleteItems(t,{withNested:!1}):this._documentListUtils.expandListBlocksToCompleteList(t):null}_getStylePreview(e,t){const{element:n,classes:s}=e;return n=="ol"||n=="ul"?{tag:n,attributes:{class:s},children:[{tag:"li",children:t}]}:n=="li"?{tag:"ol",children:[{tag:n,attributes:{class:s},children:t}]}:null}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XD extends y{static get pluginName(){return"TableStyleSupport"}static get requires(){return[Vn]}init(){const e=this.editor;e.plugins.has("TableEditing")&&(this._styleUtils=e.plugins.get(Vn),this._tableUtils=this.editor.plugins.get("TableUtils"),this.listenTo(this._styleUtils,"isStyleEnabledForBlock",(t,[n,s])=>{this._isApplicable(n,s)&&(t.return=this._isStyleEnabledForBlock(n,s),t.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getAffectedBlocks",(t,[n,s])=>{this._isApplicable(n,s)&&(t.return=this._getAffectedBlocks(n,s),t.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"configureGHSDataFilter",(t,[{block:n}])=>{this.editor.plugins.get("DataFilter").loadAllowedConfig(n.filter(o=>o.element=="figcaption").map(o=>({name:"caption",classes:o.classes})))}))}_isApplicable(e,t){return["td","th"].includes(e.element)?t.name=="tableCell":["thead","tbody"].includes(e.element)?t.name=="table":!1}_isStyleEnabledForBlock(e,t){if(["td","th"].includes(e.element)){const n=this._tableUtils.getCellLocation(t),o=t.parent.parent,r=o.getAttribute("headingRows")||0,a=o.getAttribute("headingColumns")||0,c=n.row<r||n.column<a;return e.element=="th"?c:!c}if(["thead","tbody"].includes(e.element)){const n=t.getAttribute("headingRows")||0;return e.element=="thead"?n>0:n<this._tableUtils.getRows(t)}/* istanbul ignore next -- @preserve */return!1}_getAffectedBlocks(e,t){return this._isStyleEnabledForBlock(e,t)?[t]:null}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class QD extends y{static get pluginName(){return"LinkStyleSupport"}static get requires(){return[Vn,"GeneralHtmlSupport"]}init(){const e=this.editor;e.plugins.has("LinkEditing")&&(this._styleUtils=e.plugins.get(Vn),this._htmlSupport=this.editor.plugins.get("GeneralHtmlSupport"),this.listenTo(this._styleUtils,"isStyleEnabledForInlineSelection",(t,[n,s])=>{n.element=="a"&&(t.return=this._isStyleEnabled(n,s),t.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"isStyleActiveForInlineSelection",(t,[n,s])=>{n.element=="a"&&(t.return=this._isStyleActive(n,s),t.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getAffectedInlineSelectable",(t,[n,s])=>{if(n.element!="a")return;const o=this._getAffectedSelectable(n,s);o&&(t.return=o,t.stop())},{priority:"high"}))}_isStyleEnabled(e,t){const n=this.editor.model;if(t.isCollapsed)return t.hasAttribute("linkHref");for(const s of t.getRanges())for(const o of s.getItems())if((o.is("$textProxy")||n.schema.isInline(o))&&o.hasAttribute("linkHref"))return!0;return!1}_isStyleActive(e,t){const n=this.editor.model,s=this._htmlSupport.getGhsAttributeNameForElement(e.element);if(t.isCollapsed){if(t.hasAttribute("linkHref")){const o=t.getAttribute(s);if(this._styleUtils.hasAllClasses(o,e.classes))return!0}return!1}for(const o of t.getRanges())for(const r of o.getItems())if((r.is("$textProxy")||n.schema.isInline(r))&&r.hasAttribute("linkHref")){const a=r.getAttribute(s);return this._styleUtils.hasAllClasses(a,e.classes)}return!1}_getAffectedSelectable(e,t){const n=this.editor.model;if(t.isCollapsed){const o=t.getAttribute("linkHref");return gi(t.getFirstPosition(),"linkHref",o,n)}const s=[];for(const o of t.getRanges()){const r=n.createRange(Bf(o.start,"linkHref",!0,n),Bf(o.end,"linkHref",!1,n));for(const a of r.getItems())(a.is("$textProxy")||n.schema.isInline(a))&&a.hasAttribute("linkHref")&&s.push(this.editor.model.createRangeOn(a))}return ez(s)}}function Bf(i,e,t,n){const s=i.textNode||(t?i.nodeAfter:i.nodeBefore);if(!s||!s.hasAttribute(e))return i;const o=s.getAttribute(e);return ec(i,e,o,t,n)}function ez(i){for(let e=1;e<i.length;e++){const t=i[e-1].getJoined(i[e]);t&&i.splice(--e,2,t)}return i}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tz extends y{static get pluginName(){return"StyleEditing"}static get requires(){return["GeneralHtmlSupport",Vn,YD,XD,QD]}init(){const e=this.editor,t=e.plugins.get("DataSchema"),n=e.plugins.get("StyleUtils"),s=e.config.get("style.definitions"),o=n.normalizeConfig(t,s);e.commands.add("style",new GD(e,o)),n.configureGHSDataFilter(o)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nz extends y{static get pluginName(){return"Style"}static get requires(){return[tz,qD]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ll(i,e){const{modelAttribute:t,styleName:n,viewElement:s,defaultValue:o,reduceBoxSides:r=!1,shouldUpcast:a=()=>!0}=e;i.for("upcast").attributeToAttribute({view:{name:s,styles:{[n]:/[\s\S]+/}},model:{key:t,value:c=>{if(!a(c))return;const l=c.getNormalizedStyle(n),x=r?br(l):l;if(o!==x)return x}}})}function fc(i,e,t,n){i.for("upcast").add(s=>s.on("element:"+e,(o,r,a)=>{if(!r.modelRange)return;const c=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(f=>r.viewItem.hasStyle(f));if(!c.length)return;const l={styles:c};if(!a.consumable.test(r.viewItem,l))return;const x=[...r.modelRange.getItems({shallow:!0})].pop();a.consumable.consume(r.viewItem,l);const d={style:r.viewItem.getNormalizedStyle("border-style"),color:r.viewItem.getNormalizedStyle("border-color"),width:r.viewItem.getNormalizedStyle("border-width")},u={style:br(d.style),color:br(d.color),width:br(d.width)};u.style!==n.style&&a.writer.setAttribute(t.style,u.style,x),u.color!==n.color&&a.writer.setAttribute(t.color,u.color,x),u.width!==n.width&&a.writer.setAttribute(t.width,u.width,x)}))}function zs(i,e){const{modelElement:t,modelAttribute:n,styleName:s}=e;i.for("downcast").attributeToAttribute({model:{name:t,key:n},view:o=>({key:"style",value:{[s]:o}})})}function gr(i,e){const{modelAttribute:t,styleName:n}=e;i.for("downcast").add(s=>s.on(`attribute:${t}:table`,(o,r,a)=>{const{item:c,attributeNewValue:l}=r,{mapper:x,writer:d}=a;if(!a.consumable.consume(r.item,o.name))return;const u=[...x.toViewElement(c).getChildren()].find(f=>f.is("element","table"));l?d.setStyle(n,l,u):d.removeStyle(n,u)}))}function br(i){if(!i)return;const e=["top","right","bottom","left"];if(!e.every(o=>i[o]))return i;const n=i.top;return e.every(o=>i[o]===n)?n:i}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Me(i,e,t,n,s=1){e!=null&&s!==void 0&&s!==null&&e>s?n.setAttribute(i,e,t):n.removeAttribute(i,t)}function Ai(i,e,t={}){const n=i.createElement("tableCell",t);return i.insertElement("paragraph",n),i.insert(n,e),n}function hc(i,e){const t=e.parent.parent,n=parseInt(t.getAttribute("headingColumns")||"0"),{column:s}=i.getCellLocation(e);return!!n&&s<n}function pr(i,e,t){const{modelAttribute:n}=t;i.extend("tableCell",{allowAttributes:[n]}),Ll(e,{viewElement:/^(td|th)$/,...t}),zs(e,{modelElement:"tableCell",...t})}function di(i){const e=i.getSelectedElement();return e&&e.is("element","table")?e:i.getFirstPosition().findAncestor("table")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function iz(){return i=>{i.on("element:figure",(e,t,n)=>{if(!n.consumable.test(t.viewItem,{name:!0,classes:"table"}))return;const s=rz(t.viewItem);if(!s||!n.consumable.test(s,{name:!0}))return;n.consumable.consume(t.viewItem,{name:!0,classes:"table"});const o=n.convertItem(s,t.modelCursor),r=Be(o.modelRange.getItems());if(!r){n.consumable.revert(t.viewItem,{name:!0,classes:"table"});return}n.convertChildren(t.viewItem,n.writer.createPositionAt(r,"end")),n.updateConversionResult(r,t)})}}function sz(){return i=>{i.on("element:table",(e,t,n)=>{const s=t.viewItem;if(!n.consumable.test(s,{name:!0}))return;const{rows:o,headingRows:r,headingColumns:a}=az(s),c={};a&&(c.headingColumns=a),r&&(c.headingRows=r);const l=n.writer.createElement("table",c);if(n.safeInsert(l,t.modelCursor)){if(n.consumable.consume(s,{name:!0}),o.forEach(x=>n.convertItem(x,n.writer.createPositionAt(l,"end"))),n.convertChildren(s,n.writer.createPositionAt(l,"end")),l.isEmpty){const x=n.writer.createElement("tableRow");n.writer.insert(x,n.writer.createPositionAt(l,"end")),Ai(n.writer,n.writer.createPositionAt(x,"end"))}n.updateConversionResult(l,t)}})}}function oz(){return i=>{i.on("element:tr",(e,t)=>{t.viewItem.isEmpty&&t.modelCursor.index==0&&e.stop()},{priority:"high"})}}function Of(i){return e=>{e.on(`element:${i}`,(t,n,{writer:s})=>{if(!n.modelRange)return;const o=n.modelRange.start.nodeAfter,r=s.createPositionAt(o,0);if(n.viewItem.isEmpty){s.insertElement("paragraph",r);return}const a=Array.from(o.getChildren());if(a.every(c=>c.is("element","$marker"))){const c=s.createElement("paragraph");s.insert(c,s.createPositionAt(o,0));for(const l of a)s.move(s.createRangeOn(l),s.createPositionAt(c,"end"))}},{priority:"low"})}}function rz(i){for(const e of i.getChildren())if(e.is("element","table"))return e}function az(i){let e=0,t;const n=[],s=[];let o;for(const r of Array.from(i.getChildren())){if(r.name!=="tbody"&&r.name!=="thead"&&r.name!=="tfoot")continue;r.name==="thead"&&!o&&(o=r);const a=Array.from(r.getChildren()).filter(c=>c.is("element","tr"));for(const c of a)if(o&&r===o||r.name==="tbody"&&Array.from(c.getChildren()).length&&Array.from(c.getChildren()).every(l=>l.is("element","th")))e++,n.push(c);else{s.push(c);const l=cz(c);(!t||l<t)&&(t=l)}}return{headingRows:e,headingColumns:t||0,rows:[...n,...s]}}function cz(i){let e=0,t=0;const n=Array.from(i.getChildren()).filter(s=>s.name==="th"||s.name==="td");for(;t<n.length&&n[t].name==="th";){const s=n[t],o=parseInt(s.getAttribute("colspan")||"1");e=e+o,t++}return e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class me{constructor(e,t={}){this._jumpedToStartRow=!1,this._table=e,this._startRow=t.row!==void 0?t.row:t.startRow||0,this._endRow=t.row!==void 0?t.row:t.endRow,this._startColumn=t.column!==void 0?t.column:t.startColumn||0,this._endColumn=t.column!==void 0?t.column:t.endColumn,this._includeAllSlots=!!t.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const e=this._table.getChild(this._rowIndex);if(!e||this._isOverEndRow())return{done:!0,value:void 0};if(!e.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let t=null;const n=this._getSpanned();if(n)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(n.cell,n.row,n.column));else{const s=e.getChild(this._cellIndex);if(!s)return this._advanceToNextRow();const o=parseInt(s.getAttribute("colspan")||"1"),r=parseInt(s.getAttribute("rowspan")||"1");(o>1||r>1)&&this._recordSpans(s,r,o),this._shouldSkipSlot()||(t=this._formatOutValue(s)),this._nextCellAtColumn=this._column+o}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next()}skipRow(e){this._skipRows.add(e)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(e,t=this._row,n=this._column){return{done:!1,value:new lz(this,e,t,n)}}_shouldSkipSlot(){const e=this._skipRows.has(this._row),t=this._row<this._startRow,n=this._column<this._startColumn,s=this._endColumn!==void 0&&this._column>this._endColumn;return e||t||n||s}_getSpanned(){const e=this._spannedCells.get(this._row);return e&&e.get(this._column)||null}_recordSpans(e,t,n){const s={cell:e,row:this._row,column:this._column};for(let o=this._row;o<this._row+t;o++)for(let r=this._column;r<this._column+n;r++)(o!=this._row||r!=this._column)&&this._markSpannedCell(o,r,s)}_markSpannedCell(e,t,n){this._spannedCells.has(e)||this._spannedCells.set(e,new Map),this._spannedCells.get(e).set(t,n)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const e=this._getRowLength(0);for(let t=this._startRow;!this._jumpedToStartRow;t--)e===this._getRowLength(t)&&(this._row=t,this._rowIndex=t,this._jumpedToStartRow=!0)}_getRowLength(e){return[...this._table.getChild(e).getChildren()].reduce((n,s)=>n+parseInt(s.getAttribute("colspan")||"1"),0)}}class lz{constructor(e,t,n,s){this.cell=t,this.row=e._row,this.column=e._column,this.cellAnchorRow=n,this.cellAnchorColumn=s,this._cellIndex=e._cellIndex,this._rowIndex=e._rowIndex,this._table=e._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Lf(i,e){return(t,{writer:n})=>{const s=t.getAttribute("headingRows")||0,o=n.createContainerElement("table",null,[]),r=n.createContainerElement("figure",{class:"table"},o);s>0&&n.insert(n.createPositionAt(o,"end"),n.createContainerElement("thead",null,n.createSlot(a=>a.is("element","tableRow")&&a.index<s))),s<i.getRows(t)&&n.insert(n.createPositionAt(o,"end"),n.createContainerElement("tbody",null,n.createSlot(a=>a.is("element","tableRow")&&a.index>=s)));for(const{positionOffset:a,filter:c}of e.additionalSlots)n.insert(n.createPositionAt(o,a),n.createSlot(c));return n.insert(n.createPositionAt(o,"after"),n.createSlot(a=>a.is("element","tableRow")?!1:!e.additionalSlots.some(({filter:c})=>c(a)))),e.asWidget?dz(r,n):r}}function xz(){return(i,{writer:e})=>i.isEmpty?e.createEmptyElement("tr"):e.createContainerElement("tr")}function Mf(i={}){return(e,{writer:t})=>{const n=e.parent,s=n.parent,o=s.getChildIndex(n),r=new me(s,{row:o}),a=s.getAttribute("headingRows")||0,c=s.getAttribute("headingColumns")||0;let l=null;for(const x of r)if(x.cell==e){const u=x.row<a||x.column<c?"th":"td";l=i.asWidget?pl(t.createEditableElement(u),t):t.createContainerElement(u);break}return l}}function Ff(i={}){return(e,{writer:t})=>{if(!e.parent.is("element","tableCell")||!Ab(e))return null;if(i.asWidget)return t.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const n=t.createContainerElement("p");return t.setCustomProperty("dataPipeline:transparentRendering",!0,n),n}}}function Ab(i){return i.parent.childCount==1&&!uz(i)}function dz(i,e){return e.setCustomProperty("table",!0,i),ki(i,e,{hasSelectionHandle:!0})}function uz(i){return!i.getAttributeKeys().next().done}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fz extends q{refresh(){const e=this.editor.model,t=e.document.selection,n=e.schema;this.isEnabled=hz(t,n)}execute(e={}){const t=this.editor,n=t.model,s=t.plugins.get("TableUtils"),o=t.config.get("table.defaultHeadings.rows"),r=t.config.get("table.defaultHeadings.columns");e.headingRows===void 0&&o&&(e.headingRows=o),e.headingColumns===void 0&&r&&(e.headingColumns=r),n.change(a=>{const c=s.createTable(a,e);n.insertObject(c,null,null,{findOptimalPosition:"auto"}),a.setSelection(a.createPositionAt(c.getNodeByPath([0,0,0]),0))})}}function hz(i,e){const t=i.getFirstPosition().parent,n=t===t.root?t:t.parent;return e.checkChild(n,"table")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nf extends q{constructor(e,t={}){super(e),this.order=t.order||"below"}refresh(){const e=this.editor.model.document.selection,n=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=n}execute(){const e=this.editor,t=e.model.document.selection,n=e.plugins.get("TableUtils"),s=this.order==="above",o=n.getSelectionAffectedTableCells(t),r=n.getRowIndexes(o),a=s?r.first:r.last,c=o[0].findAncestor("table");n.insertRows(c,{at:s?a:a+1,copyStructureFromAbove:!s})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Df extends q{constructor(e,t={}){super(e),this.order=t.order||"right"}refresh(){const e=this.editor.model.document.selection,n=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=n}execute(){const e=this.editor,t=e.model.document.selection,n=e.plugins.get("TableUtils"),s=this.order==="left",o=n.getSelectionAffectedTableCells(t),r=n.getColumnIndexes(o),a=s?r.first:r.last,c=o[0].findAncestor("table");n.insertColumns(c,{columns:1,at:s?a:a+1})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zf extends q{constructor(e,t={}){super(e),this.direction=t.direction||"horizontally"}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length===1}execute(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?e.splitCellHorizontally(t,2):e.splitCellVertically(t,2)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Eb(i,e,t){const{startRow:n,startColumn:s,endRow:o,endColumn:r}=e,a=t.createElement("table"),c=o-n+1;for(let x=0;x<c;x++)t.insertElement("tableRow",a,"end");const l=[...new me(i,{startRow:n,endRow:o,startColumn:s,endColumn:r,includeAllSlots:!0})];for(const{row:x,column:d,cell:u,isAnchor:f,cellAnchorRow:m,cellAnchorColumn:b}of l){const p=x-n,C=a.getChild(p);if(!f)(m<n||b<s)&&Ai(t,t.createPositionAt(C,"end"));else{const _=t.cloneElement(u);t.append(_,C),Vb(_,x,d,o,r,t)}}return mz(a,i,n,s,t),a}function Sb(i,e,t=0){const n=[],s=new me(i,{startRow:t,endRow:e-1});for(const o of s){const{row:r,cellHeight:a}=o,c=r+a-1;r<e&&e<=c&&n.push(o)}return n}function Ib(i,e,t){const n=i.parent,s=n.parent,o=n.index,r=parseInt(i.getAttribute("rowspan")),a=e-o,c={},l=r-a;l>1&&(c.rowspan=l);const x=parseInt(i.getAttribute("colspan")||"1");x>1&&(c.colspan=x);const d=o,u=d+a,f=[...new me(s,{startRow:d,endRow:u,includeAllSlots:!0})];let m=null,b;for(const p of f){const{row:C,column:_,cell:R}=p;R===i&&b===void 0&&(b=_),b!==void 0&&b===_&&C===u&&(m=Ai(t,p.getPositionBefore(),c))}return Me("rowspan",a,i,t),m}function Pb(i,e){const t=[],n=new me(i);for(const s of n){const{column:o,cellWidth:r}=s,a=o+r-1;o<e&&e<=a&&t.push(s)}return t}function Rb(i,e,t,n){const s=parseInt(i.getAttribute("colspan")),o=t-e,r={},a=s-o;a>1&&(r.colspan=a);const c=parseInt(i.getAttribute("rowspan")||"1");c>1&&(r.rowspan=c);const l=Ai(n,n.createPositionAfter(i),r);return Me("colspan",o,i,n),l}function Vb(i,e,t,n,s,o){const r=parseInt(i.getAttribute("colspan")||"1"),a=parseInt(i.getAttribute("rowspan")||"1");if(t+r-1>s){const x=s-t+1;Me("colspan",x,i,o,1)}if(e+a-1>n){const x=n-e+1;Me("rowspan",x,i,o,1)}}function mz(i,e,t,n,s){const o=parseInt(e.getAttribute("headingRows")||"0");if(o>0){const a=o-t;Me("headingRows",a,i,s,0)}const r=parseInt(e.getAttribute("headingColumns")||"0");if(r>0){const a=r-n;Me("headingColumns",a,i,s,0)}}function mc(i,e){const t=e.getColumns(i),n=new Array(t).fill(0);for(const{column:o}of new me(i))n[o]++;const s=n.reduce((o,r,a)=>r?o:[...o,a],[]);if(s.length>0){const o=s[s.length-1];return e.removeColumns(i,{at:o}),!0}return!1}function gc(i,e){const t=[],n=e.getRows(i);for(let s=0;s<n;s++)i.getChild(s).isEmpty&&t.push(s);if(t.length>0){const s=t[t.length-1];return e.removeRows(i,{at:s}),!0}return!1}function Ml(i,e){mc(i,e)||gc(i,e)}function Bb(i,e){const t=Array.from(new me(i,{startColumn:e.firstColumn,endColumn:e.lastColumn,row:e.lastRow}));if(t.every(({cellHeight:o})=>o===1))return e.lastRow;const s=t[0].cellHeight-1;return e.lastRow+s}function Ob(i,e){const t=Array.from(new me(i,{startRow:e.firstRow,endRow:e.lastRow,column:e.lastColumn}));if(t.every(({cellWidth:o})=>o===1))return e.lastColumn;const s=t[0].cellWidth-1;return e.lastColumn+s}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tr extends q{constructor(e,t){super(e),this.direction=t.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,t=e.document,s=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(t.selection)[0],o=this.value,r=this.direction;e.change(a=>{const c=r=="right"||r=="down",l=c?s:o,x=c?o:s,d=x.parent;pz(x,l,a);const u=this.isHorizontal?"colspan":"rowspan",f=parseInt(s.getAttribute(u)||"1"),m=parseInt(o.getAttribute(u)||"1");a.setAttribute(u,f+m,l),a.setSelection(a.createRangeIn(l));const b=this.editor.plugins.get("TableUtils"),p=d.findAncestor("table");Ml(p,b)})}_getMergeableCell(){const t=this.editor.model.document,n=this.editor.plugins.get("TableUtils"),s=n.getTableCellsContainingSelection(t.selection)[0];if(!s)return;const o=this.isHorizontal?gz(s,this.direction,n):bz(s,this.direction,n);if(!o)return;const r=this.isHorizontal?"rowspan":"colspan",a=parseInt(s.getAttribute(r)||"1");if(parseInt(o.getAttribute(r)||"1")===a)return o}}function gz(i,e,t){const s=i.parent.parent,o=e=="right"?i.nextSibling:i.previousSibling,r=(s.getAttribute("headingColumns")||0)>0;if(!o)return;const a=e=="right"?i:o,c=e=="right"?o:i,{column:l}=t.getCellLocation(a),{column:x}=t.getCellLocation(c),d=parseInt(a.getAttribute("colspan")||"1"),u=hc(t,a),f=hc(t,c);return r&&u!=f?void 0:l+d===x?o:void 0}function bz(i,e,t){const n=i.parent,s=n.parent,o=s.getChildIndex(n);if(e=="down"&&o===t.getRows(s)-1||e=="up"&&o===0)return null;const r=parseInt(i.getAttribute("rowspan")||"1"),a=s.getAttribute("headingRows")||0,c=e=="down"&&o+r===a,l=e=="up"&&o===a;if(a&&(c||l))return null;const x=parseInt(i.getAttribute("rowspan")||"1"),d=e=="down"?o+x:o,u=[...new me(s,{endRow:d})],m=u.find(p=>p.cell===i).column,b=u.find(({row:p,cellHeight:C,column:_})=>_!==m?!1:e=="down"?p===d:d===p+C);return b&&b.cell?b.cell:null}function pz(i,e,t){Hf(i)||(Hf(e)&&t.remove(t.createRangeIn(e)),t.move(t.createRangeIn(i),t.createPositionAt(e,"end"))),t.remove(i)}function Hf(i){const e=i.getChild(0);return i.childCount==1&&e.is("element","paragraph")&&e.isEmpty}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wz extends q{refresh(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection),n=t[0];if(n){const s=n.findAncestor("table"),r=e.getRows(s)-1,a=e.getRowIndexes(t),c=a.first===0&&a.last===r;this.isEnabled=!c}else this.isEnabled=!1}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),n=t.getSelectionAffectedTableCells(e.document.selection),s=t.getRowIndexes(n),o=n[0],r=o.findAncestor("table"),a=t.getCellLocation(o).column;e.change(c=>{const l=s.last-s.first+1;t.removeRows(r,{at:s.first,rows:l});const x=_z(r,s.first,a,t.getRows(r));c.setSelection(c.createPositionAt(x,0))})}}function _z(i,e,t,n){const s=i.getChild(Math.min(e,n-1));let o=s.getChild(0),r=0;for(const a of s.getChildren()){if(r>t)return o;o=a,r+=parseInt(a.getAttribute("colspan")||"1")}return o}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vz extends q{refresh(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection),n=t[0];if(n){const s=n.findAncestor("table"),o=e.getColumns(s),{first:r,last:a}=e.getColumnIndexes(t);this.isEnabled=a-r<o-1}else this.isEnabled=!1}execute(){const e=this.editor.plugins.get("TableUtils"),[t,n]=Cz(this.editor.model.document.selection,e),s=t.parent.parent,o=[...new me(s)],r={first:o.find(c=>c.cell===t).column,last:o.find(c=>c.cell===n).column},a=yz(o,t,n,r);this.editor.model.change(c=>{const l=r.last-r.first+1;e.removeColumns(s,{at:r.first,columns:l}),c.setSelection(c.createPositionAt(a,0))})}}function yz(i,e,t,n){return parseInt(t.getAttribute("colspan")||"1")>1?t:e.previousSibling||t.nextSibling?t.nextSibling||e.previousSibling:n.first?i.reverse().find(({column:o})=>o<n.first).cell:i.reverse().find(({column:o})=>o>n.last).cell}function Cz(i,e){const t=e.getSelectionAffectedTableCells(i),n=t[0],s=t.pop(),o=[n,s];return n.isBefore(s)?o:o.reverse()}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kz extends q{refresh(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,n=e.getSelectionAffectedTableCells(t.document.selection),s=n.length>0;this.isEnabled=s,this.value=s&&n.every(o=>this._isInHeading(o,o.parent.parent))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),n=this.editor.model,s=t.getSelectionAffectedTableCells(n.document.selection),o=s[0].findAncestor("table"),{first:r,last:a}=t.getRowIndexes(s),c=this.value?r:a+1,l=o.getAttribute("headingRows")||0;n.change(x=>{if(c){const d=c>l?l:0,u=Sb(o,c,d);for(const{cell:f}of u)Ib(f,c,x)}Me("headingRows",c,o,x,0)})}_isInHeading(e,t){const n=parseInt(t.getAttribute("headingRows")||"0");return!!n&&e.parent.index<n}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tz extends q{refresh(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),n=t.getSelectionAffectedTableCells(e.document.selection),s=n.length>0;this.isEnabled=s,this.value=s&&n.every(o=>hc(t,o))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),n=this.editor.model,s=t.getSelectionAffectedTableCells(n.document.selection),o=s[0].findAncestor("table"),{first:r,last:a}=t.getColumnIndexes(s),c=this.value?r:a+1;n.change(l=>{if(c){const x=Pb(o,c);for(const{cell:d,column:u}of x)Rb(d,u,c,l)}Me("headingColumns",c,o,l,0)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Az=5,bc=40,Ez=2;/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Sz(i){const e=new Set;for(const t of i.document.differ.getChanges()){let n=null;switch(t.type){case"insert":n=["table","tableRow","tableCell"].includes(t.name)?t.position:null;break;case"remove":n=["tableRow","tableCell"].includes(t.name)?t.position:null;break;case"attribute":t.range.start.nodeAfter&&(n=["table","tableRow","tableCell"].includes(t.range.start.nodeAfter.name)?t.range.start:null);break}if(!n)continue;const s=n.nodeAfter&&n.nodeAfter.is("element","table")?n.nodeAfter:n.findAncestor("table");for(const o of i.createRangeOn(s).getItems())o.is("element","table")&&Eo(o)&&e.add(o)}return e}function Iz(i,e){return bc*100/Lb(i,e)}function Lb(i,e){const t=$f(i,"tbody",e)||$f(i,"thead",e),n=e.editing.view.domConverter.mapViewToDom(t);return pc(n)}function $f(i,e,t){return[...[...t.editing.mapper.toViewElement(i).getChildren()].find(o=>o.is("element","table")).getChildren()].find(o=>o.is("element",e))}function pc(i){const e=U.window.getComputedStyle(i);return e.boxSizing==="border-box"?parseFloat(e.width)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth):parseFloat(e.width)}function Pz(i,e){const t=e.getCellLocation(i).column,n=i.getAttribute("colspan")||1;return{leftEdge:t,rightEdge:t+n-1}}function pt(i){const e=Math.pow(10,Ez),t=typeof i=="number"?i:parseFloat(i);return Math.round(t*e)/e}function Rz(i,e,t){return i<=e?pt(e):i>=t?pt(t):pt(i)}function Vz(i,e){return Array(i).fill(e)}function uo(i){return i.map(e=>typeof e=="number"?e:parseFloat(e)).filter(e=>!Number.isNaN(e)).reduce((e,t)=>e+t,0)}function Fl(i){const e=i.map(s=>s==="auto"?s:parseFloat(s.replace("%","")));let t=Bz(e);const n=uo(t);return n!==100&&(t=t.map(s=>pt(s*100/n)).map((s,o,r)=>{if(!(o===r.length-1))return s;const c=uo(r);return pt(s+100-c)})),t.map(s=>s+"%")}function Bz(i){const e=i.filter(s=>s==="auto").length;if(e===0)return i.map(s=>pt(s));const t=uo(i),n=Math.max((100-t)/e,Az);return i.map(s=>s==="auto"?n:s).map(s=>pt(s))}function Oz(i){const e=U.window.getComputedStyle(i);return e.boxSizing==="border-box"?parseInt(e.width):parseFloat(e.width)+parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderWidth)}function Mb(i,e,t,n){for(let s=0;s<Math.max(t.length,i.length);s++){const o=i[s],r=t[s];r?o?n.setAttribute("columnWidth",r,o):n.appendElement("tableColumn",{columnWidth:r},e):n.remove(o)}}function Eo(i){if(i.is("element","tableColumnGroup"))return i;const e=i.getChildren();return Array.from(e).find(t=>t.is("element","tableColumnGroup"))}function So(i){const e=Eo(i);return e?Array.from(e.getChildren()):[]}function Lz(i){return So(i).map(e=>e.getAttribute("columnWidth"))}function Mz(i,e){return So(i).reduce((n,s)=>{const o=s.getAttribute("columnWidth"),r=s.getAttribute("colSpan");if(!r)return n.push(o),n;for(let a=0;a<r;a++)n.push(o);return e.removeAttribute("colSpan",s),n},[])}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class it extends y{static get pluginName(){return"TableUtils"}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(e){const t=e.parent,n=t.parent,s=n.getChildIndex(t),o=new me(n,{row:s});for(const{cell:r,row:a,column:c}of o)if(r===e)return{row:a,column:c};/* istanbul ignore next -- @preserve */}createTable(e,t){const n=e.createElement("table"),s=t.rows||2,o=t.columns||2;return g0(e,n,0,s,o),t.headingRows&&Me("headingRows",Math.min(t.headingRows,s),n,e,0),t.headingColumns&&Me("headingColumns",Math.min(t.headingColumns,o),n,e,0),n}insertRows(e,t={}){const n=this.editor.model,s=t.at||0,o=t.rows||1,r=t.copyStructureFromAbove!==void 0,a=t.copyStructureFromAbove?s-1:s,c=this.getRows(e),l=this.getColumns(e);if(s>c)throw new w("tableutils-insertrows-insert-out-of-range",this,{options:t});n.change(x=>{const d=e.getAttribute("headingRows")||0;if(d>s&&Me("headingRows",d+o,e,x,0),!r&&(s===0||s===c)){g0(x,e,s,o,l);return}const u=r?Math.max(s,a):s,f=new me(e,{endRow:u}),m=new Array(l).fill(1);for(const{row:b,column:p,cellHeight:C,cellWidth:_,cell:R}of f){const P=b+C-1,I=b<s&&s<=P,V=b<=a&&a<=P;I?(x.setAttribute("rowspan",C+o,R),m[p]=-_):r&&V&&(m[p]=_)}for(let b=0;b<o;b++){const p=x.createElement("tableRow");x.insert(p,e,s);for(let C=0;C<m.length;C++){const _=m[C],R=x.createPositionAt(p,"end");_>0&&Ai(x,R,_>1?{colspan:_}:void 0),C+=Math.abs(_)-1}}})}insertColumns(e,t={}){const n=this.editor.model,s=t.at||0,o=t.columns||1;n.change(r=>{const a=e.getAttribute("headingColumns");s<a&&r.setAttribute("headingColumns",a+o,e);const c=this.getColumns(e);if(s===0||c===s){for(const x of e.getChildren())x.is("element","tableRow")&&Wi(o,r,r.createPositionAt(x,s?"end":0));return}const l=new me(e,{column:s,includeAllSlots:!0});for(const x of l){const{row:d,cell:u,cellAnchorColumn:f,cellAnchorRow:m,cellWidth:b,cellHeight:p}=x;if(f<s){r.setAttribute("colspan",b+o,u);const C=m+p-1;for(let _=d;_<=C;_++)l.skipRow(_)}else Wi(o,r,x.getPositionBefore())}})}removeRows(e,t){const n=this.editor.model,s=t.rows||1,o=this.getRows(e),r=t.at,a=r+s-1;if(a>o-1)throw new w("tableutils-removerows-row-index-out-of-range",this,{table:e,options:t});n.change(c=>{const l={first:r,last:a},{cellsToMove:x,cellsToTrim:d}=Dz(e,l);if(x.size){const u=a+1;zz(e,u,x,c)}for(let u=a;u>=r;u--)c.remove(e.getChild(u));for(const{rowspan:u,cell:f}of d)Me("rowspan",u,f,c);Nz(e,l,c),mc(e,this)||gc(e,this)})}removeColumns(e,t){const n=this.editor.model,s=t.at,o=t.columns||1,r=t.at+o-1;n.change(a=>{Fz(e,{first:s,last:r},a);const c=So(e);for(let l=r;l>=s;l--){for(const{cell:x,column:d,cellWidth:u}of[...new me(e)])d<=l&&u>1&&d+u>l?Me("colspan",u-1,x,a):d===l&&a.remove(x);if(c[l]){const x=l===0?c[1]:c[l-1],d=parseFloat(c[l].getAttribute("columnWidth")),u=parseFloat(x.getAttribute("columnWidth"));a.remove(c[l]),a.setAttribute("columnWidth",d+u+"%",x)}}gc(e,this)||mc(e,this)})}splitCellVertically(e,t=2){const n=this.editor.model,o=e.parent.parent,r=parseInt(e.getAttribute("rowspan")||"1"),a=parseInt(e.getAttribute("colspan")||"1");n.change(c=>{if(a>1){const{newCellsSpan:l,updatedSpan:x}=Uf(a,t);Me("colspan",x,e,c);const d={};l>1&&(d.colspan=l),r>1&&(d.rowspan=r);const u=a>t?t-1:a-1;Wi(u,c,c.createPositionAfter(e),d)}if(a<t){const l=t-a,x=[...new me(o)],{column:d}=x.find(({cell:b})=>b===e),u=x.filter(({cell:b,cellWidth:p,column:C})=>{const _=b!==e&&C===d,R=C<d&&C+p>d;return _||R});for(const{cell:b,cellWidth:p}of u)c.setAttribute("colspan",p+l,b);const f={};r>1&&(f.rowspan=r),Wi(l,c,c.createPositionAfter(e),f);const m=o.getAttribute("headingColumns")||0;m>d&&Me("headingColumns",m+l,o,c)}})}splitCellHorizontally(e,t=2){const n=this.editor.model,s=e.parent,o=s.parent,r=o.getChildIndex(s),a=parseInt(e.getAttribute("rowspan")||"1"),c=parseInt(e.getAttribute("colspan")||"1");n.change(l=>{if(a>1){const x=[...new me(o,{startRow:r,endRow:r+a-1,includeAllSlots:!0})],{newCellsSpan:d,updatedSpan:u}=Uf(a,t);Me("rowspan",u,e,l);const{column:f}=x.find(({cell:b})=>b===e),m={};d>1&&(m.rowspan=d),c>1&&(m.colspan=c);for(const b of x){const{column:p,row:C}=b,_=C>=r+u,R=p===f,P=(C+r+u)%d===0;_&&R&&P&&Wi(1,l,b.getPositionBefore(),m)}}if(a<t){const x=t-a,d=[...new me(o,{startRow:0,endRow:r})];for(const{cell:m,cellHeight:b,row:p}of d)if(m!==e&&p+b>r){const C=b+x;l.setAttribute("rowspan",C,m)}const u={};c>1&&(u.colspan=c),g0(l,o,r+1,x,1,u);const f=o.getAttribute("headingRows")||0;f>r&&Me("headingRows",f+x,o,l)}})}getColumns(e){return[...e.getChild(0).getChildren()].reduce((n,s)=>{const o=parseInt(s.getAttribute("colspan")||"1");return n+o},0)}getRows(e){return Array.from(e.getChildren()).reduce((t,n)=>n.is("element","tableRow")?t+1:t,0)}createTableWalker(e,t={}){return new me(e,t)}getSelectedTableCells(e){const t=[];for(const n of this.sortRanges(e.getRanges())){const s=n.getContainedElement();s&&s.is("element","tableCell")&&t.push(s)}return t}getTableCellsContainingSelection(e){const t=[];for(const n of e.getRanges()){const s=n.start.findAncestor("tableCell");s&&t.push(s)}return t}getSelectionAffectedTableCells(e){const t=this.getSelectedTableCells(e);return t.length?t:this.getTableCellsContainingSelection(e)}getRowIndexes(e){const t=e.map(n=>n.parent.index);return this._getFirstLastIndexesObject(t)}getColumnIndexes(e){const t=e[0].findAncestor("table"),s=[...new me(t)].filter(o=>e.includes(o.cell)).map(o=>o.column);return this._getFirstLastIndexesObject(s)}isSelectionRectangular(e){if(e.length<2||!this._areCellInTheSameTableSection(e))return!1;const t=new Set,n=new Set;let s=0;for(const r of e){const{row:a,column:c}=this.getCellLocation(r),l=parseInt(r.getAttribute("rowspan"))||1,x=parseInt(r.getAttribute("colspan"))||1;t.add(a),n.add(c),l>1&&t.add(a+l-1),x>1&&n.add(c+x-1),s+=l*x}return $z(t,n)==s}sortRanges(e){return Array.from(e).sort(Hz)}_getFirstLastIndexesObject(e){const t=e.sort((o,r)=>o-r),n=t[0],s=t[t.length-1];return{first:n,last:s}}_areCellInTheSameTableSection(e){const t=e[0].findAncestor("table"),n=this.getRowIndexes(e),s=parseInt(t.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(n,s))return!1;const o=this.getColumnIndexes(e),r=parseInt(t.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(o,r)}_areIndexesInSameSection({first:e,last:t},n){const s=e<n,o=t<n;return s===o}}function g0(i,e,t,n,s,o={}){for(let r=0;r<n;r++){const a=i.createElement("tableRow");i.insert(a,e,t),Wi(s,i,i.createPositionAt(a,"end"),o)}}function Wi(i,e,t,n={}){for(let s=0;s<i;s++)Ai(e,t,n)}function Uf(i,e){if(i<e)return{newCellsSpan:1,updatedSpan:1};const t=Math.floor(i/e),n=i-t*e+t;return{newCellsSpan:t,updatedSpan:n}}function Fz(i,e,t){const n=i.getAttribute("headingColumns")||0;if(n&&e.first<n){const s=Math.min(n-1,e.last)-e.first+1;t.setAttribute("headingColumns",n-s,i)}}function Nz(i,{first:e,last:t},n){const s=i.getAttribute("headingRows")||0;if(e<s){const o=t<s?s-(t-e+1):e;Me("headingRows",o,i,n,0)}}function Dz(i,{first:e,last:t}){const n=new Map,s=[];for(const{row:o,column:r,cellHeight:a,cell:c}of new me(i,{endRow:t})){const l=o+a-1;if(o>=e&&o<=t&&l>t){const u=t-o+1,f=a-u;n.set(r,{cell:c,rowspan:f})}if(o<e&&l>=e){let u;l>=t?u=t-e+1:u=l-e+1,s.push({cell:c,rowspan:a-u})}}return{cellsToMove:n,cellsToTrim:s}}function zz(i,e,t,n){const o=[...new me(i,{includeAllSlots:!0,row:e})],r=i.getChild(e);let a;for(const{column:c,cell:l,isAnchor:x}of o)if(t.has(c)){const{cell:d,rowspan:u}=t.get(c),f=a?n.createPositionAfter(a):n.createPositionAt(r,0);n.move(n.createRangeOn(d),f),Me("rowspan",u,d,n),a=d}else x&&(a=l)}function Hz(i,e){const t=i.start,n=e.start;return t.isBefore(n)?-1:1}function $z(i,e){const t=Array.from(i.values()),n=Array.from(e.values()),s=Math.max(...t),o=Math.min(...t),r=Math.max(...n),a=Math.min(...n);return(s-o+1)*(r-a+1)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Uz extends q{refresh(){const e=this.editor.plugins.get(it),t=e.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=e.isSelectionRectangular(t)}execute(){const e=this.editor.model,t=this.editor.plugins.get(it);e.change(n=>{const s=t.getSelectedTableCells(e.document.selection),o=s.shift(),{mergeWidth:r,mergeHeight:a}=jz(o,s,t);Me("colspan",r,o,n),Me("rowspan",a,o,n);for(const l of s)Wz(l,o,n);const c=o.findAncestor("table");Ml(c,t),n.setSelection(o,"in")})}}function Wz(i,e,t){Wf(i)||(Wf(e)&&t.remove(t.createRangeIn(e)),t.move(t.createRangeIn(i),t.createPositionAt(e,"end"))),t.remove(i)}function Wf(i){const e=i.getChild(0);return i.childCount==1&&e.is("element","paragraph")&&e.isEmpty}function jz(i,e,t){let n=0,s=0;for(const l of e){const{row:x,column:d}=t.getCellLocation(l);n=jf(l,d,n,"colspan"),s=jf(l,x,s,"rowspan")}const{row:o,column:r}=t.getCellLocation(i),a=n-r,c=s-o;return{mergeWidth:a,mergeHeight:c}}function jf(i,e,t,n){const s=parseInt(i.getAttribute(n)||"1");return Math.max(t,e+s)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qz extends q{constructor(e){super(e),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),n=t.getSelectionAffectedTableCells(e.document.selection),s=t.getRowIndexes(n),o=n[0].findAncestor("table"),r=[];for(let a=s.first;a<=s.last;a++)for(const c of o.getChild(a).getChildren())r.push(e.createRangeOn(c));e.change(a=>{a.setSelection(r)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Gz extends q{constructor(e){super(e),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,n=e.getSelectionAffectedTableCells(t.document.selection),s=n[0],o=n.pop(),r=s.findAncestor("table"),a=e.getCellLocation(s),c=e.getCellLocation(o),l=Math.min(a.column,c.column),x=Math.max(a.column,c.column),d=[];for(const u of new me(r,{startColumn:l,endColumn:x}))d.push(t.createRangeOn(u.cell));t.change(u=>{u.setSelection(d)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Kz(i){i.document.registerPostFixer(e=>Jz(e,i))}function Jz(i,e){const t=e.document.differ.getChanges();let n=!1;const s=new Set;for(const o of t){let r=null;o.type=="insert"&&o.name=="table"&&(r=o.position.nodeAfter),(o.type=="insert"||o.type=="remove")&&(o.name=="tableRow"||o.name=="tableCell")&&(r=o.position.findAncestor("table")),eH(o)&&(r=o.range.start.findAncestor("table")),r&&!s.has(r)&&(n=Zz(r,i)||n,n=Yz(r,i)||n,s.add(r))}return n}function Zz(i,e){let t=!1;const n=Xz(i);if(n.length){t=!0;for(const s of n)Me("rowspan",s.rowspan,s.cell,e,1)}return t}function Yz(i,e){let t=!1;const n=Qz(i),s=[];for(const[c,l]of n.entries())!l&&i.getChild(c).is("element","tableRow")&&s.push(c);if(s.length){t=!0;for(const c of s.reverse())e.remove(i.getChild(c)),n.splice(c,1)}const o=n.filter((c,l)=>i.getChild(l).is("element","tableRow")),r=o[0];if(!o.every(c=>c===r)){const c=o.reduce((l,x)=>x>l?x:l,0);for(const[l,x]of o.entries()){const d=c-x;if(d){for(let u=0;u<d;u++)Ai(e,e.createPositionAt(i.getChild(l),"end"));t=!0}}}return t}function Xz(i){const e=parseInt(i.getAttribute("headingRows")||"0"),t=Array.from(i.getChildren()).reduce((s,o)=>o.is("element","tableRow")?s+1:s,0),n=[];for(const{row:s,cell:o,cellHeight:r}of new me(i)){if(r<2)continue;const c=s<e?e:t;if(s+r>c){const l=c-s;n.push({cell:o,rowspan:l})}}return n}function Qz(i){const e=new Array(i.childCount).fill(0);for(const{rowIndex:t}of new me(i,{includeAllSlots:!0}))e[t]++;return e}function eH(i){if(i.type!=="attribute")return!1;const e=i.attributeKey;return e==="headingRows"||e==="colspan"||e==="rowspan"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function tH(i){i.document.registerPostFixer(e=>nH(e,i))}function nH(i,e){const t=e.document.differ.getChanges();let n=!1;for(const s of t)s.type=="insert"&&s.name=="table"&&(n=iH(s.position.nodeAfter,i)||n),s.type=="insert"&&s.name=="tableRow"&&(n=Fb(s.position.nodeAfter,i)||n),s.type=="insert"&&s.name=="tableCell"&&(n=wc(s.position.nodeAfter,i)||n),(s.type=="remove"||s.type=="insert")&&sH(s)&&(n=wc(s.position.parent,i)||n);return n}function iH(i,e){let t=!1;for(const n of i.getChildren())n.is("element","tableRow")&&(t=Fb(n,e)||t);return t}function Fb(i,e){let t=!1;for(const n of i.getChildren())t=wc(n,e)||t;return t}function wc(i,e){if(i.childCount==0)return e.insertElement("paragraph",i),!0;const t=Array.from(i.getChildren()).filter(n=>n.is("$text"));for(const n of t)e.wrap(e.createRangeOn(n),"paragraph");return!!t.length}function sH(i){return i.position.parent.is("element","tableCell")?i.type=="insert"&&i.name=="$text"||i.type=="remove":!1}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function oH(i,e){const t=i.document.differ;for(const n of t.getChanges()){let s,o=!1;if(n.type=="attribute"){const l=n.range.start.nodeAfter;if(!l||!l.is("element","table")||n.attributeKey!="headingRows"&&n.attributeKey!="headingColumns")continue;s=l,o=n.attributeKey=="headingRows"}else(n.name=="tableRow"||n.name=="tableCell")&&(s=n.position.findAncestor("table"),o=n.name=="tableRow");if(!s)continue;const r=s.getAttribute("headingRows")||0,a=s.getAttribute("headingColumns")||0,c=new me(s);for(const l of c){const d=l.row<r||l.column<a?"th":"td",u=e.mapper.toViewElement(l.cell);u&&u.is("element")&&u.name!=d&&e.reconvertItem(o?l.cell.parent:l.cell)}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function rH(i,e){const t=i.document.differ,n=new Set;for(const s of t.getChanges()){const o=s.type=="attribute"?s.range.start.parent:s.position.parent;o.is("element","tableCell")&&n.add(o)}for(const s of n.values()){const o=Array.from(s.getChildren()).filter(r=>aH(r,e.mapper));for(const r of o)e.reconvertItem(r)}}function aH(i,e){if(!i.is("element","paragraph"))return!1;const t=e.toViewElement(i);return t?Ab(i)!==t.is("element","span"):!1}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Io extends y{static get pluginName(){return"TableEditing"}static get requires(){return[it]}constructor(e){super(e),this._additionalSlots=[]}init(){const e=this.editor,t=e.model,n=t.schema,s=e.conversion,o=e.plugins.get(it);n.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),n.register("tableRow",{allowIn:"table",isLimit:!0}),n.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),s.for("upcast").add(iz()),s.for("upcast").add(sz()),s.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:Lf(o,{asWidget:!0,additionalSlots:this._additionalSlots})}),s.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:Lf(o,{additionalSlots:this._additionalSlots})}),s.for("upcast").elementToElement({model:"tableRow",view:"tr"}),s.for("upcast").add(oz()),s.for("downcast").elementToElement({model:"tableRow",view:xz()}),s.for("upcast").elementToElement({model:"tableCell",view:"td"}),s.for("upcast").elementToElement({model:"tableCell",view:"th"}),s.for("upcast").add(Of("td")),s.for("upcast").add(Of("th")),s.for("editingDowncast").elementToElement({model:"tableCell",view:Mf({asWidget:!0})}),s.for("dataDowncast").elementToElement({model:"tableCell",view:Mf()}),s.for("editingDowncast").elementToElement({model:"paragraph",view:Ff({asWidget:!0}),converterPriority:"high"}),s.for("dataDowncast").elementToElement({model:"paragraph",view:Ff(),converterPriority:"high"}),s.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),s.for("upcast").attributeToAttribute({model:{key:"colspan",value:qf("colspan")},view:"colspan"}),s.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),s.for("upcast").attributeToAttribute({model:{key:"rowspan",value:qf("rowspan")},view:"rowspan"}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new fz(e)),e.commands.add("insertTableRowAbove",new Nf(e,{order:"above"})),e.commands.add("insertTableRowBelow",new Nf(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new Df(e,{order:"left"})),e.commands.add("insertTableColumnRight",new Df(e,{order:"right"})),e.commands.add("removeTableRow",new wz(e)),e.commands.add("removeTableColumn",new vz(e)),e.commands.add("splitTableCellVertically",new zf(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new zf(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new Uz(e)),e.commands.add("mergeTableCellRight",new tr(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new tr(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new tr(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new tr(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new Tz(e)),e.commands.add("setTableRowHeader",new kz(e)),e.commands.add("selectTableRow",new qz(e)),e.commands.add("selectTableColumn",new Gz(e)),Kz(t),tH(t),this.listenTo(t.document,"change:data",()=>{oH(t,e.editing),rH(t,e.editing)})}registerAdditionalSlot(e){this._additionalSlots.push(e)}}function qf(i){return e=>{const t=parseInt(e.getAttribute(i));return Number.isNaN(t)||t<=0?null:t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cH extends D{constructor(e){super(e);const t=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new Le,this.focusTracker=new Se,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(n,s)=>`${s} × ${n}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":t.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:t.to("label")}]}],on:{mousedown:t.to(n=>{n.preventDefault()}),click:t.to(()=>{this.fire("execute")})}}),this.on("boxover",(n,s)=>{const{row:o,column:r}=s.target.dataset;this.items.get((parseInt(o,10)-1)*10+(parseInt(r,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(n,s,o)=>{if(!o)return;const{row:r,column:a}=o.dataset;this.set({rows:parseInt(r),columns:parseInt(a)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),mo({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const e=this.rows,t=this.columns;this.items.map((n,s)=>{const o=Math.floor(s/10),r=s%10,a=o<e&&r<t;n.set("isOn",a)})}_createGridButton(e,t,n,s){const o=new G(e);return o.set({label:s,class:"ck-insert-table-dropdown-grid-box"}),o.extendTemplate({attributes:{"data-row":t,"data-column":n}}),o}_createGridCollection(){const e=[];for(let t=0;t<100;t++){const n=Math.floor(t/10),s=t%10,o=`${n+1} × ${s+1}`;e.push(this._createGridButton(this.locale,n+1,s+1,o))}return this.createCollection(e)}}const lH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',xH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',dH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uH extends y{static get pluginName(){return"TableUI"}init(){const e=this.editor,t=this.editor.t,s=e.locale.contentLanguageDirection==="ltr";e.ui.componentFactory.add("insertTable",o=>{const r=e.commands.get("insertTable"),a=Ne(o);a.bind("isEnabled").to(r),a.buttonView.set({icon:gb,label:t("Insert table"),tooltip:!0});let c;return a.on("change:isOpen",()=>{c||(c=new cH(o),a.panelView.children.add(c),c.delegate("execute").to(a),a.on("execute",()=>{e.execute("insertTable",{rows:c.rows,columns:c.columns}),e.editing.view.focus()}))}),a}),e.ui.componentFactory.add("tableColumn",o=>{const r=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:t("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:s?"insertTableColumnLeft":"insertTableColumnRight",label:t("Insert column left")}},{type:"button",model:{commandName:s?"insertTableColumnRight":"insertTableColumnLeft",label:t("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:t("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:t("Select column")}}];return this._prepareDropdown(t("Column"),lH,r,o)}),e.ui.componentFactory.add("tableRow",o=>{const r=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:t("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:t("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:t("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:t("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:t("Select row")}}];return this._prepareDropdown(t("Row"),xH,r,o)}),e.ui.componentFactory.add("mergeTableCells",o=>{const r=[{type:"button",model:{commandName:"mergeTableCellUp",label:t("Merge cell up")}},{type:"button",model:{commandName:s?"mergeTableCellRight":"mergeTableCellLeft",label:t("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:t("Merge cell down")}},{type:"button",model:{commandName:s?"mergeTableCellLeft":"mergeTableCellRight",label:t("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:t("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:t("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(t("Merge cells"),dH,r,o)})}_prepareDropdown(e,t,n,s){const o=this.editor,r=Ne(s),a=this._fillDropdownWithListOptions(r,n);return r.buttonView.set({label:e,icon:t,tooltip:!0}),r.bind("isEnabled").toMany(a,"isEnabled",(...c)=>c.some(l=>l)),this.listenTo(r,"execute",c=>{o.execute(c.source.commandName),c.source instanceof _o||o.editing.view.focus()}),r}_prepareMergeSplitButtonDropdown(e,t,n,s){const o=this.editor,r=Ne(s,Co),a="mergeTableCells",c=o.commands.get(a),l=this._fillDropdownWithListOptions(r,n);return r.buttonView.set({label:e,icon:t,tooltip:!0,isEnabled:!0}),r.bind("isEnabled").toMany([c,...l],"isEnabled",(...x)=>x.some(d=>d)),this.listenTo(r.buttonView,"execute",()=>{o.execute(a),o.editing.view.focus()}),this.listenTo(r,"execute",x=>{o.execute(x.source.commandName),o.editing.view.focus()}),r}_fillDropdownWithListOptions(e,t){const n=this.editor,s=[],o=new De;for(const r of t)fH(r,n,s,o);return Mn(e,o),s}}function fH(i,e,t,n){if(i.type==="button"||i.type==="switchbutton"){const s=i.model=new Rn(i.model),{commandName:o,bindIsOn:r}=i.model,a=e.commands.get(o);t.push(a),s.set({commandName:o}),s.bind("isEnabled").to(a),r&&s.bind("isOn").to(a,"value"),s.set({withText:!0})}n.add(i)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ui extends y{static get pluginName(){return"TableSelection"}static get requires(){return[it,it]}init(){const e=this.editor,t=e.model,n=e.editing.view;this.listenTo(t,"deleteContent",(s,o)=>this._handleDeleteContent(s,o),{priority:"high"}),this.listenTo(n.document,"insertText",(s,o)=>this._handleInsertTextEvent(s,o),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const e=this.editor.plugins.get(it),t=this.editor.model.document.selection,n=e.getSelectedTableCells(t);return n.length==0?null:n}getSelectionAsFragment(){const e=this.editor.plugins.get(it),t=this.getSelectedTableCells();return t?this.editor.model.change(n=>{const s=n.createDocumentFragment(),{first:o,last:r}=e.getColumnIndexes(t),{first:a,last:c}=e.getRowIndexes(t),l=t[0].findAncestor("table");let x=c,d=r;if(e.isSelectionRectangular(t)){const m={firstColumn:o,lastColumn:r,firstRow:a,lastRow:c};x=Bb(l,m),d=Ob(l,m)}const f=Eb(l,{startRow:a,startColumn:o,endRow:x,endColumn:d},n);return n.insert(f,s,0),s}):null}setCellSelection(e,t){const n=this._getCellsToSelect(e,t);this.editor.model.change(s=>{s.setSelection(n.cells.map(o=>s.createRangeOn(o)),{backward:n.backward})})}getFocusCell(){const n=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return n&&n.is("element","tableCell")?n:null}getAnchorCell(){const e=this.editor.model.document.selection,n=Be(e.getRanges()).getContainedElement();return n&&n.is("element","tableCell")?n:null}_defineSelectionConverter(){const e=this.editor,t=new Set;e.conversion.for("editingDowncast").add(s=>s.on("selection",(o,r,a)=>{const c=a.writer;n(c);const l=this.getSelectedTableCells();if(!l)return;for(const d of l){const u=a.mapper.toViewElement(d);c.addClass("ck-editor__editable_selected",u),t.add(u)}const x=a.mapper.toViewElement(l[l.length-1]);c.setSelection(x,0)},{priority:"lowest"}));function n(s){for(const o of t)s.removeClass("ck-editor__editable_selected",o);t.clear()}}_enablePluginDisabling(){const e=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const t=this.getSelectedTableCells();if(!t)return;e.model.change(n=>{const s=n.createPositionAt(t[0],0),o=e.model.schema.getNearestSelectionRange(s);n.setSelection(o)})}})}_handleDeleteContent(e,t){const n=this.editor.plugins.get(it),s=t[0],o=t[1],r=this.editor.model,a=!o||o.direction=="backward",c=n.getSelectedTableCells(s);c.length&&(e.stop(),r.change(l=>{const x=c[a?c.length-1:0];r.change(u=>{for(const f of c)r.deleteContent(u.createSelection(f,"in"))});const d=r.schema.getNearestSelectionRange(l.createPositionAt(x,0));s.is("documentSelection")?l.setSelection(d):s.setTo(d)}))}_handleInsertTextEvent(e,t){const n=this.editor,s=this.getSelectedTableCells();if(!s)return;const o=n.editing.view,r=n.editing.mapper,a=s.map(c=>o.createRangeOn(r.toViewElement(c)));t.selection=o.createSelection(a)}_getCellsToSelect(e,t){const n=this.editor.plugins.get("TableUtils"),s=n.getCellLocation(e),o=n.getCellLocation(t),r=Math.min(s.row,o.row),a=Math.max(s.row,o.row),c=Math.min(s.column,o.column),l=Math.max(s.column,o.column),x=new Array(a-r+1).fill(null).map(()=>[]),d={startRow:r,endRow:a,startColumn:c,endColumn:l};for(const{row:m,cell:b}of new me(e.findAncestor("table"),d))x[m-r].push(b);const u=o.row<s.row,f=o.column<s.column;return u&&x.reverse(),f&&x.forEach(m=>m.reverse()),{cells:x.flat(),backward:u||f}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hH extends y{static get pluginName(){return"TableClipboard"}static get requires(){return[ui,it]}init(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"copy",(n,s)=>this._onCopyCut(n,s)),this.listenTo(t,"cut",(n,s)=>this._onCopyCut(n,s)),this.listenTo(e.model,"insertContent",(n,[s,o])=>this._onInsertContent(n,s,o),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(e,t){const n=this.editor.plugins.get(ui);if(!n.getSelectedTableCells()||e.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection))return;t.preventDefault(),e.stop();const s=this.editor.data,o=this.editor.editing.view.document,r=s.toView(n.getSelectionAsFragment());o.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:r,method:e.name})}_onInsertContent(e,t,n){if(n&&!n.is("documentSelection"))return;const s=this.editor.model,o=this.editor.plugins.get(it);let r=this.getTableIfOnlyTableInContent(t,s);if(!r)return;const a=o.getSelectionAffectedTableCells(s.document.selection);if(!a.length){Ml(r,o);return}e.stop(),s.change(c=>{const l={width:o.getColumns(r),height:o.getRows(r)},x=mH(a,l,c,o),d=x.lastRow-x.firstRow+1,u=x.lastColumn-x.firstColumn+1,f={startRow:0,startColumn:0,endRow:Math.min(d,l.height)-1,endColumn:Math.min(u,l.width)-1};r=Eb(r,f,c);const m=a[0].findAncestor("table"),b=this._replaceSelectedCellsWithPasted(r,l,m,x,c);if(this.editor.plugins.get("TableSelection").isEnabled){const p=o.sortRanges(b.map(C=>c.createRangeOn(C)));c.setSelection(p)}else c.setSelection(b[0],0)})}_replaceSelectedCellsWithPasted(e,t,n,s,o){const{width:r,height:a}=t,c=bH(e,r,a),l=[...new me(n,{startRow:s.firstRow,endRow:s.lastRow,startColumn:s.firstColumn,endColumn:s.lastColumn,includeAllSlots:!0})],x=[];let d;for(const p of l){const{row:C,column:_}=p;_===s.firstColumn&&(d=p.getPositionBefore());const R=C-s.firstRow,P=_-s.firstColumn,I=c[R%a][P%r],V=I?o.cloneElement(I):null,A=this._replaceTableSlotCell(p,V,d,o);A&&(Vb(A,C,_,s.lastRow,s.lastColumn,o),x.push(A),d=o.createPositionAfter(A))}const u=parseInt(n.getAttribute("headingRows")||"0"),f=parseInt(n.getAttribute("headingColumns")||"0"),m=s.firstRow<u&&u<=s.lastRow,b=s.firstColumn<f&&f<=s.lastColumn;if(m){const p={first:s.firstColumn,last:s.lastColumn},C=_c(n,u,p,o,s.firstRow);x.push(...C)}if(b){const p={first:s.firstRow,last:s.lastRow},C=vc(n,f,p,o);x.push(...C)}return x}_replaceTableSlotCell(e,t,n,s){const{cell:o,isAnchor:r}=e;return r&&s.remove(o),t?(s.insert(t,n),t):null}getTableIfOnlyTableInContent(e,t){if(!e.is("documentFragment")&&!e.is("element"))return null;if(e.is("element","table"))return e;if(e.childCount==1&&e.getChild(0).is("element","table"))return e.getChild(0);const n=t.createRangeIn(e);for(const s of n.getItems())if(s.is("element","table")){const o=t.createRange(n.start,t.createPositionBefore(s));if(t.hasContent(o,{ignoreWhitespaces:!0}))return null;const r=t.createRange(t.createPositionAfter(s),n.end);return t.hasContent(r,{ignoreWhitespaces:!0})?null:s}return null}}function mH(i,e,t,n){const s=i[0].findAncestor("table"),o=n.getColumnIndexes(i),r=n.getRowIndexes(i),a={firstColumn:o.first,lastColumn:o.last,firstRow:r.first,lastRow:r.last},c=i.length===1;return c&&(a.lastRow+=e.height-1,a.lastColumn+=e.width-1,gH(s,a.lastRow+1,a.lastColumn+1,n)),c||!n.isSelectionRectangular(i)?pH(s,a,t):(a.lastRow=Bb(s,a),a.lastColumn=Ob(s,a)),a}function gH(i,e,t,n){const s=n.getColumns(i),o=n.getRows(i);t>s&&n.insertColumns(i,{at:s,columns:t-s}),e>o&&n.insertRows(i,{at:o,rows:e-o})}function bH(i,e,t){const n=new Array(t).fill(null).map(()=>new Array(e).fill(null));for(const{column:s,row:o,cell:r}of new me(i))n[o][s]=r;return n}function pH(i,e,t){const{firstRow:n,lastRow:s,firstColumn:o,lastColumn:r}=e,a={first:n,last:s},c={first:o,last:r};vc(i,o,a,t),vc(i,r+1,a,t),_c(i,n,c,t),_c(i,s+1,c,t,n)}function _c(i,e,t,n,s=0){return e<1?void 0:Sb(i,e,s).filter(({column:a,cellWidth:c})=>Nb(a,c,t)).map(({cell:a})=>Ib(a,e,n))}function vc(i,e,t,n){return e<1?void 0:Pb(i,e).filter(({row:r,cellHeight:a})=>Nb(r,a,t)).map(({cell:r,column:a})=>Rb(r,a,e,n))}function Nb(i,e,t){const n=i+e-1,{first:s,last:o}=t,r=i>=s&&i<=o,a=i<s&&n>=s;return r||a}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wH extends y{static get pluginName(){return"TableKeyboard"}static get requires(){return[ui,it]}init(){const t=this.editor.editing.view.document;this.listenTo(t,"arrowKey",(...n)=>this._onArrowKey(...n),{context:"table"}),this.listenTo(t,"tab",(...n)=>this._handleTabOnSelectedTable(...n),{context:"figure"}),this.listenTo(t,"tab",(...n)=>this._handleTab(...n),{context:["th","td"]})}_handleTabOnSelectedTable(e,t){const n=this.editor,o=n.model.document.selection.getSelectedElement();!o||!o.is("element","table")||(t.preventDefault(),t.stopPropagation(),e.stop(),n.model.change(r=>{r.setSelection(r.createRangeIn(o.getChild(0).getChild(0)))}))}_handleTab(e,t){const n=this.editor,s=this.editor.plugins.get(it),o=this.editor.plugins.get("TableSelection"),r=n.model.document.selection,a=!t.shiftKey;let c=s.getTableCellsContainingSelection(r)[0];if(c||(c=o.getFocusCell()),!c)return;t.preventDefault(),t.stopPropagation(),e.stop();const l=c.parent,x=l.parent,d=x.getChildIndex(l),u=l.getChildIndex(c),f=u===0;if(!a&&f&&d===0){n.model.change(C=>{C.setSelection(C.createRangeOn(x))});return}const m=u===l.childCount-1,b=d===s.getRows(x)-1;if(a&&b&&m&&(n.execute("insertTableRowBelow"),d===s.getRows(x)-1)){n.model.change(C=>{C.setSelection(C.createRangeOn(x))});return}let p;if(a&&m)p=x.getChild(d+1).getChild(0);else if(!a&&f){const C=x.getChild(d-1);p=C.getChild(C.childCount-1)}else p=l.getChild(u+(a?1:-1));n.model.change(C=>{C.setSelection(C.createRangeIn(p))})}_onArrowKey(e,t){const n=this.editor,s=t.keyCode,o=Xc(s,n.locale.contentLanguageDirection);this._handleArrowKeys(o,t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),e.stop())}_handleArrowKeys(e,t){const n=this.editor.plugins.get(it),s=this.editor.plugins.get("TableSelection"),o=this.editor.model,r=o.document.selection,a=["right","down"].includes(e),c=n.getSelectedTableCells(r);if(c.length){let x;return t?x=s.getFocusCell():x=a?c[c.length-1]:c[0],this._navigateFromCellInDirection(x,e,t),!0}const l=r.focus.findAncestor("tableCell");/* istanbul ignore if: paranoid check -- @preserve */if(!l)return!1;if(!r.isCollapsed)if(t){if(r.isBackward==a&&!r.containsEntireContent(l))return!1}else{const x=r.getSelectedElement();if(!x||!o.schema.isObject(x))return!1}return this._isSelectionAtCellEdge(r,l,a)?(this._navigateFromCellInDirection(l,e,t),!0):!1}_isSelectionAtCellEdge(e,t,n){const s=this.editor.model,o=this.editor.model.schema,r=n?e.getLastPosition():e.getFirstPosition();if(!o.getLimitElement(r).is("element","tableCell"))return s.createPositionAt(t,n?"end":0).isTouching(r);const a=s.createSelection(r);return s.modifySelection(a,{direction:n?"forward":"backward"}),r.isEqual(a.focus)}_navigateFromCellInDirection(e,t,n=!1){const s=this.editor.model,o=e.findAncestor("table"),r=[...new me(o,{includeAllSlots:!0})],{row:a,column:c}=r[r.length-1],l=r.find(({cell:_})=>_==e);let{row:x,column:d}=l;switch(t){case"left":d--;break;case"up":x--;break;case"right":d+=l.cellWidth;break;case"down":x+=l.cellHeight;break}const u=x<0||x>a,f=d<0&&x<=0,m=d>c&&x>=a;if(u||f||m){s.change(_=>{_.setSelection(_.createRangeOn(o))});return}d<0?(d=n?0:c,x--):d>c&&(d=n?c:0,x++);const b=r.find(_=>_.row==x&&_.column==d).cell,p=["right","down"].includes(t),C=this.editor.plugins.get("TableSelection");if(n&&C.isEnabled){const _=C.getAnchorCell()||e;C.setCellSelection(_,b)}else{const _=s.createPositionAt(b,p?0:"end");s.change(R=>{R.setSelection(_)})}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Db extends Jn{constructor(){super(...arguments),this.domEventType=["mousemove","mouseleave"]}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _H extends y{static get pluginName(){return"TableMouse"}static get requires(){return[ui,it]}init(){this.editor.editing.view.addObserver(Db),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const e=this.editor,t=e.plugins.get(it);let n=!1;const s=e.plugins.get(ui);this.listenTo(e.editing.view.document,"mousedown",(o,r)=>{const a=e.model.document.selection;if(!this.isEnabled||!s.isEnabled||!r.domEvent.shiftKey)return;const c=s.getAnchorCell()||t.getTableCellsContainingSelection(a)[0];if(!c)return;const l=this._getModelTableCellFromDomEvent(r);l&&Gf(c,l)&&(n=!0,s.setCellSelection(c,l),r.preventDefault())}),this.listenTo(e.editing.view.document,"mouseup",()=>{n=!1}),this.listenTo(e.editing.view.document,"selectionChange",o=>{n&&o.stop()},{priority:"highest"})}_enableMouseDragSelection(){const e=this.editor;let t,n,s=!1,o=!1;const r=e.plugins.get(ui);this.listenTo(e.editing.view.document,"mousedown",(a,c)=>{!this.isEnabled||!r.isEnabled||c.domEvent.shiftKey||c.domEvent.ctrlKey||c.domEvent.altKey||(t=this._getModelTableCellFromDomEvent(c))}),this.listenTo(e.editing.view.document,"mousemove",(a,c)=>{if(!c.domEvent.buttons||!t)return;const l=this._getModelTableCellFromDomEvent(c);l&&Gf(t,l)&&(n=l,!s&&n!=t&&(s=!0)),s&&(o=!0,r.setCellSelection(t,n),c.preventDefault())}),this.listenTo(e.editing.view.document,"mouseup",()=>{s=!1,o=!1,t=null,n=null}),this.listenTo(e.editing.view.document,"selectionChange",a=>{o&&a.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(e){const t=e.target,n=this.editor.editing.view.createPositionAt(t,0);return this.editor.editing.mapper.toModelPosition(n).parent.findAncestor("tableCell",{includeSelf:!0})}}function Gf(i,e){return i.parent.parent==e.parent.parent}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vH extends y{static get requires(){return[Io,uH,ui,_H,wH,hH,Yn]}static get pluginName(){return"Table"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function zb(i){const e=Hb(i);return e||wa(i)}function Hb(i){const e=i.getSelectedElement();return e&&$b(e)?e:null}function wa(i){const e=i.getFirstPosition();if(!e)return null;let t=e.parent;for(;t;){if(t.is("element")&&$b(t))return t;t=t.parent}return null}function $b(i){return!!i.getCustomProperty("table")&&Ke(i)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yH extends y{static get requires(){return[ns]}static get pluginName(){return"TableToolbar"}afterInit(){const e=this.editor,t=e.t,n=e.plugins.get(ns),s=e.config.get("table.contentToolbar"),o=e.config.get("table.tableToolbar");s&&n.register("tableContent",{ariaLabel:t("Table toolbar"),items:s,getRelatedElement:wa}),o&&n.register("table",{ariaLabel:t("Table toolbar"),items:o,getRelatedElement:Hb})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class CH extends D{constructor(e,t){super(e),this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=t,this.focusTracker=new Se,this._focusables=new dt,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new Le,this._stillTyping=!1,this.focusCycler=new ut({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(n,s,o)=>this._setInputValue(o))}render(){super.render(),[this.inputView,this.dropdownView.buttonView].forEach(e=>{this.focusTracker.add(e.element),this._focusables.add(e)}),this.keystrokes.listenTo(this.element)}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const e=this.locale,t=e.t,n=this.bindTemplate,s=this._createColorSelector(e),o=Ne(e),r=new D;return r.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:n.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",n.if("value","ck-hidden",a=>a!="")]}}]}),o.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),o.buttonView.children.add(r),o.buttonView.label=t("Color picker"),o.buttonView.tooltip=!0,o.panelPosition=e.uiLanguageDirection==="rtl"?"se":"sw",o.panelView.children.add(s),o.bind("isEnabled").to(this,"isReadOnly",a=>!a),o.on("change:isOpen",(a,c,l)=>{l&&(s.updateSelectedColors(),s.showColorGridsFragment())}),o}_createInputTextView(){const e=this.locale,t=new m6(e);return t.extendTemplate({on:{blur:t.bindTemplate.to("blur")}}),t.value=this.value,t.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(t),t.on("input",()=>{const n=t.element.value,s=this.options.colorDefinitions.find(o=>n===o.label);this._stillTyping=!0,this.value=s&&s.color||n}),t.on("blur",()=>{this._stillTyping=!1,this._setInputValue(t.element.value)}),t.delegate("input").to(this),t}_createColorSelector(e){const t=e.t,n=this.options.defaultColorValue||"",s=t(n?"Restore default":"Remove color"),o=new Tg(e,{colors:this.options.colorDefinitions,columns:this.options.columns,removeButtonLabel:s,colorPickerLabel:t("Color picker"),colorPickerViewConfig:this.options.colorPickerConfig===!1?!1:{...this.options.colorPickerConfig,hideInput:!0}});o.appendUI(),o.on("execute",(a,c)=>{if(c.source==="colorPickerSaveButton"){this.dropdownView.isOpen=!1;return}this.value=c.value||n,this.fire("input"),c.source!=="colorPicker"&&(this.dropdownView.isOpen=!1)});let r=this.value;return o.on("colorPicker:cancel",()=>{this.value=r,this.fire("input"),this.dropdownView.isOpen=!1}),o.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{r=this.value}),o.bind("selectedColor").to(this,"value"),o}_setInputValue(e){if(!this._stillTyping){const t=Kf(e),n=this.options.colorDefinitions.find(s=>t===Kf(s.color));n?this.inputView.value=n.label:this.inputView.value=e||""}}}function Kf(i){return i.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Nl=i=>i==="";function Dl(i){return{none:i("None"),solid:i("Solid"),dotted:i("Dotted"),dashed:i("Dashed"),double:i("Double"),groove:i("Groove"),ridge:i("Ridge"),inset:i("Inset"),outset:i("Outset")}}function Ub(i){return i('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function Wb(i){return i('The value is invalid. Try "10px" or "2em" or simply "2".')}function Hr(i){return i=i.trim().toLowerCase(),Nl(i)||dg(i)}function Hs(i){return i=i.trim(),Nl(i)||Gb(i)||ra(i)||ug(i)}function jb(i){return i=i.trim(),Nl(i)||Gb(i)||ra(i)}function qb(i,e){const t=new De,n=Dl(i.t);for(const s in n){const o={type:"button",model:new Rn({_borderStyleValue:s,label:n[s],role:"menuitemradio",withText:!0})};s==="none"?o.model.bind("isOn").to(i,"borderStyle",r=>e==="none"?!r:r===s):o.model.bind("isOn").to(i,"borderStyle",r=>r===s),t.add(o)}return t}function yc(i){const{view:e,icons:t,toolbar:n,labels:s,propertyName:o,nameToValue:r,defaultValue:a}=i;for(const c in s){const l=new G(e.locale);l.set({label:s[c],icon:t[c],tooltip:s[c]});const x=r?r(c):c;l.bind("isOn").to(e,o,d=>{let u=d;return d===""&&a&&(u=a),x===u}),l.on("execute",()=>{e[o]=x}),n.items.add(l)}}const $r=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function Ur(i){return(e,t,n)=>{const s=new CH(e.locale,{colorDefinitions:kH(i.colorConfig),columns:i.columns,defaultColorValue:i.defaultColorValue,colorPickerConfig:i.colorPickerConfig});return s.inputView.set({id:t,ariaDescribedById:n}),s.bind("isReadOnly").to(e,"isEnabled",o=>!o),s.bind("hasError").to(e,"errorText",o=>!!o),s.on("input",()=>{e.errorText=null}),e.bind("isEmpty","isFocused").to(s),s}}function Gb(i){const e=parseFloat(i);return!Number.isNaN(e)&&i===String(e)}function kH(i){return i.map(e=>({color:e.model,label:e.label,options:{hasBorder:e.hasBorder}}))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Et extends D{constructor(e,t={}){super(e);const n=this.bindTemplate;this.set("class",t.class||null),this.children=this.createCollection(),t.children&&t.children.forEach(s=>this.children.add(s)),this.set("_role",null),this.set("_ariaLabelledBy",null),t.labelView&&this.set({_role:"group",_ariaLabelledBy:t.labelView.id}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",n.to("class")],role:n.to("_role"),"aria-labelledby":n.to("_ariaLabelledBy")},children:this.children})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Jf={left:K.alignLeft,center:K.alignCenter,right:K.alignRight,justify:K.alignJustify,top:K.alignTop,middle:K.alignMiddle,bottom:K.alignBottom};class TH extends D{constructor(e,t){super(e),this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=t;const{borderStyleDropdown:n,borderWidthInput:s,borderColorInput:o,borderRowLabel:r}=this._createBorderFields(),{backgroundRowLabel:a,backgroundInput:c}=this._createBackgroundFields(),{widthInput:l,operatorLabel:x,heightInput:d,dimensionsLabel:u}=this._createDimensionFields(),{horizontalAlignmentToolbar:f,verticalAlignmentToolbar:m,alignmentLabel:b}=this._createAlignmentFields();this.focusTracker=new Se,this.keystrokes=new Le,this.children=this.createCollection(),this.borderStyleDropdown=n,this.borderWidthInput=s,this.borderColorInput=o,this.backgroundInput=c,this.paddingInput=this._createPaddingField(),this.widthInput=l,this.heightInput=d,this.horizontalAlignmentToolbar=f,this.verticalAlignmentToolbar=m;const{saveButtonView:p,cancelButtonView:C}=this._createActionButtons();this.saveButtonView=p,this.cancelButtonView=C,this._focusables=new dt,this._focusCycler=new ut({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new da(e,{label:this.t("Cell properties")})),this.children.add(new Et(e,{labelView:r,children:[r,n,o,s],class:"ck-table-form__border-row"})),this.children.add(new Et(e,{labelView:a,children:[a,c],class:"ck-table-form__background-row"})),this.children.add(new Et(e,{children:[new Et(e,{labelView:u,children:[u,l,x,d],class:"ck-table-form__dimensions-row"}),new Et(e,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new Et(e,{labelView:b,children:[b,f,m],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new Et(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),as({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{e.fieldView.focusCycler.on("forwardCycle",t=>{this._focusCycler.focusNext(),t.stop()}),e.fieldView.focusCycler.on("backwardCycle",t=>{this._focusCycler.focusPrevious(),t.stop()})}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableCellProperties,t={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},n=Ur({colorConfig:this.options.borderColors,columns:5,defaultColorValue:t.color,colorPickerConfig:this.options.colorPickerConfig}),s=this.locale,o=this.t,r=o("Style"),a=new Pt(s);a.text=o("Border");const c=Dl(o),l=new Ge(s,vg);l.set({label:r,class:"ck-table-form__border-style"}),l.fieldView.buttonView.set({ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),l.fieldView.buttonView.bind("label").to(this,"borderStyle",u=>c[u||"none"]),l.fieldView.on("execute",u=>{this.borderStyle=u.source._borderStyleValue}),l.bind("isEmpty").to(this,"borderStyle",u=>!u),Mn(l.fieldView,qb(this,t.style),{role:"menu",ariaLabel:r});const x=new Ge(s,Rt);x.set({label:o("Width"),class:"ck-table-form__border-width"}),x.fieldView.bind("value").to(this,"borderWidth"),x.bind("isEnabled").to(this,"borderStyle",nr),x.fieldView.on("input",()=>{this.borderWidth=x.fieldView.element.value});const d=new Ge(s,n);return d.set({label:o("Color"),class:"ck-table-form__border-color"}),d.fieldView.bind("value").to(this,"borderColor"),d.bind("isEnabled").to(this,"borderStyle",nr),d.fieldView.on("input",()=>{this.borderColor=d.fieldView.value}),this.on("change:borderStyle",(u,f,m,b)=>{nr(m)||(this.borderColor="",this.borderWidth=""),nr(b)||(this.borderColor=t.color,this.borderWidth=t.width)}),{borderRowLabel:a,borderStyleDropdown:l,borderColorInput:d,borderWidthInput:x}}_createBackgroundFields(){const e=this.locale,t=this.t,n=new Pt(e);n.text=t("Background");const s=Ur({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new Ge(e,s);return o.set({label:t("Color"),class:"ck-table-cell-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:n,backgroundInput:o}}_createDimensionFields(){const e=this.locale,t=this.t,n=new Pt(e);n.text=t("Dimensions");const s=new Ge(e,Rt);s.set({label:t("Width"),class:"ck-table-form__dimensions-row__width"}),s.fieldView.bind("value").to(this,"width"),s.fieldView.on("input",()=>{this.width=s.fieldView.element.value});const o=new D(e);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const r=new Ge(e,Rt);return r.set({label:t("Height"),class:"ck-table-form__dimensions-row__height"}),r.fieldView.bind("value").to(this,"height"),r.fieldView.on("input",()=>{this.height=r.fieldView.element.value}),{dimensionsLabel:n,widthInput:s,operatorLabel:o,heightInput:r}}_createPaddingField(){const e=this.locale,t=this.t,n=new Ge(e,Rt);return n.set({label:t("Padding"),class:"ck-table-cell-properties-form__padding"}),n.fieldView.bind("value").to(this,"padding"),n.fieldView.on("input",()=>{this.padding=n.fieldView.element.value}),n}_createAlignmentFields(){const e=this.locale,t=this.t,n=new Pt(e);n.text=t("Table cell text alignment");const s=new ts(e),o=e.contentLanguageDirection==="rtl";s.set({isCompact:!0,ariaLabel:t("Horizontal text alignment toolbar")}),yc({view:this,icons:Jf,toolbar:s,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:a=>{if(o){if(a==="left")return"right";if(a==="right")return"left"}return a},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const r=new ts(e);return r.set({isCompact:!0,ariaLabel:t("Vertical text alignment toolbar")}),yc({view:this,icons:Jf,toolbar:r,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:s,verticalAlignmentToolbar:r,alignmentLabel:n}}_createActionButtons(){const e=this.locale,t=this.t,n=new G(e),s=new G(e),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return n.set({label:t("Save"),icon:K.check,class:"ck-button-save",type:"submit",withText:!0}),n.bind("isEnabled").toMany(o,"errorText",(...r)=>r.every(a=>!a)),s.set({label:t("Cancel"),icon:K.cancel,class:"ck-button-cancel",withText:!0}),s.delegate("execute").to(this,"cancel"),{saveButtonView:n,cancelButtonView:s}}get _horizontalAlignmentLabels(){const e=this.locale,t=this.t,n=t("Align cell text to the left"),s=t("Align cell text to the center"),o=t("Align cell text to the right"),r=t("Justify cell text");return e.uiLanguageDirection==="rtl"?{right:o,center:s,left:n,justify:r}:{left:n,center:s,right:o,justify:r}}get _verticalAlignmentLabels(){const e=this.t;return{top:e("Align cell text to the top"),middle:e("Align cell text to the middle"),bottom:e("Align cell text to the bottom")}}}function nr(i){return i!=="none"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ii=ot.defaultPositions,Cc=[ii.northArrowSouth,ii.northArrowSouthWest,ii.northArrowSouthEast,ii.southArrowNorth,ii.southArrowNorthWest,ii.southArrowNorthEast,ii.viewportStickyNorth];function Kb(i,e){const t=i.plugins.get("ContextualBalloon"),n=i.editing.view.document.selection;let s;e==="cell"?wa(n)&&(s=Zb(i)):zb(n)&&(s=Jb(i)),s&&t.updatePosition(s)}function Jb(i){const e=i.model.document.selection,t=di(e),n=i.editing.mapper.toViewElement(t);return{target:i.editing.view.domConverter.mapViewToDom(n),positions:Cc}}function Zb(i){const e=i.editing.mapper,t=i.editing.view.domConverter,n=i.model.document.selection;if(n.rangeCount>1)return{target:()=>AH(n.getRanges(),i),positions:Cc};const s=Yb(n.getFirstPosition()),o=e.toViewElement(s);return{target:t.mapViewToDom(o),positions:Cc}}function Yb(i){return i.nodeAfter&&i.nodeAfter.is("element","tableCell")?i.nodeAfter:i.findAncestor("tableCell")}function AH(i,e){const t=e.editing.mapper,n=e.editing.view.domConverter,s=Array.from(i).map(o=>{const r=Yb(o.start),a=t.toViewElement(r);return new te(n.mapViewToDom(a))});return te.getBoundingRect(s)}const EH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ei(i){if(!i||!Ee(i))return i;const{top:e,right:t,bottom:n,left:s}=i;if(e==t&&t==n&&n==s)return e}function Si(i,e){const t=parseFloat(i);return Number.isNaN(t)||String(t)!==String(i)?i:`${t}${e}`}function Po(i,e={}){const t={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...i};return e.includeAlignmentProperty&&!t.alignment&&(t.alignment="center"),e.includePaddingProperty&&!t.padding&&(t.padding=""),e.includeVerticalAlignmentProperty&&!t.verticalAlignment&&(t.verticalAlignment="middle"),e.includeHorizontalAlignmentProperty&&!t.horizontalAlignment&&(t.horizontalAlignment=e.isRightToLeftContent?"right":"left"),t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const SH=500,Zf={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class IH extends y{static get requires(){return[fn]}static get pluginName(){return"TableCellPropertiesUI"}constructor(e){super(e),e.config.define("table.tableCellProperties",{borderColors:$r,backgroundColors:$r})}init(){const e=this.editor,t=e.t;this._defaultTableCellProperties=Po(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._balloon=e.plugins.get(fn),this.view=null,this._isReady=!1,e.ui.componentFactory.add("tableCellProperties",n=>{const s=new G(n);s.set({label:t("Cell properties"),icon:EH,tooltip:!0}),this.listenTo(s,"execute",()=>this._showView());const o=Object.values(Zf).map(r=>e.commands.get(r));return s.bind("isEnabled").toMany(o,"isEnabled",(...r)=>r.some(a=>a)),s})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const e=this.editor,t=e.config.get("table.tableCellProperties"),n=Js(t.borderColors),s=Ks(e.locale,n),o=Js(t.backgroundColors),r=Ks(e.locale,o),a=t.colorPicker!==!1,c=new TH(e.locale,{borderColors:s,backgroundColors:r,defaultTableCellProperties:this._defaultTableCellProperties,colorPickerConfig:a?t.colorPicker||{}:!1}),l=e.t;c.render(),this.listenTo(c,"submit",()=>{this._hideView()}),this.listenTo(c,"cancel",()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()}),c.keystrokes.set("Esc",(u,f)=>{this._hideView(),f()}),rs({emitter:c,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const x=Ub(l),d=Wb(l);return c.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle")),c.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:c.borderColorInput,commandName:"tableCellBorderColor",errorText:x,validator:Hr})),c.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:c.borderWidthInput,commandName:"tableCellBorderWidth",errorText:d,validator:jb})),c.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:c.paddingInput,commandName:"tableCellPadding",errorText:d,validator:Hs})),c.on("change:width",this._getValidatedPropertyChangeCallback({viewField:c.widthInput,commandName:"tableCellWidth",errorText:d,validator:Hs})),c.on("change:height",this._getValidatedPropertyChangeCallback({viewField:c.heightInput,commandName:"tableCellHeight",errorText:d,validator:Hs})),c.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:c.backgroundInput,commandName:"tableCellBackgroundColor",errorText:x,validator:Hr})),c.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment")),c.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment")),c}_fillViewFormFromCommandValues(){const e=this.editor.commands,t=e.get("tableCellBorderStyle");Object.entries(Zf).map(([n,s])=>{const o=this._defaultTableCellProperties[n]||"";return[n,e.get(s).value||o]}).forEach(([n,s])=>{(n==="borderColor"||n==="borderWidth")&&t.value==="none"||this.view.set(n,s)}),this._isReady=!0}_showView(){const e=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:Zb(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,t=e.editing.view.document;wa(t.selection)?this._isViewVisible&&Kb(e,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(t,n,s)=>{this._isReady&&this.editor.execute(e,{value:s,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:t,viewField:n,validator:s,errorText:o}=e,r=un(()=>{n.errorText=o},SH);return(a,c,l)=>{r.cancel(),this._isReady&&(s(l)?(this.editor.execute(t,{value:l,batch:this._undoStepBatch}),n.errorText=null):r())}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fn extends q{constructor(e,t,n){super(e),this.attributeName=t,this._defaultValue=n}refresh(){const e=this.editor,n=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e.model.document.selection);this.isEnabled=!!n.length,this.value=this._getSingleValue(n)}execute(e={}){const{value:t,batch:n}=e,s=this.editor.model,r=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(s.document.selection),a=this._getValueToSet(t);s.enqueueChange(n,c=>{a?r.forEach(l=>c.setAttribute(this.attributeName,a,l)):r.forEach(l=>c.removeAttribute(this.attributeName,l))})}_getAttribute(e){if(!e)return;const t=e.getAttribute(this.attributeName);if(t!==this._defaultValue)return t}_getValueToSet(e){if(e!==this._defaultValue)return e}_getSingleValue(e){const t=this._getAttribute(e[0]);return e.every(s=>this._getAttribute(s)===t)?t:void 0}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class PH extends Fn{constructor(e,t){super(e,"tableCellWidth",t)}_getValueToSet(e){if(e=Si(e,"px"),e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xb extends y{static get pluginName(){return"TableCellWidthEditing"}static get requires(){return[Io]}init(){const e=this.editor,t=Po(e.config.get("table.tableCellProperties.defaultProperties"));pr(e.model.schema,e.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:t.width}),e.commands.add("tableCellWidth",new PH(e,t.width))}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class RH extends Fn{constructor(e,t){super(e,"tableCellPadding",t)}_getAttribute(e){if(!e)return;const t=Ei(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(e){const t=Si(e,"px");if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class VH extends Fn{constructor(e,t){super(e,"tableCellHeight",t)}_getValueToSet(e){const t=Si(e,"px");if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class BH extends Fn{constructor(e,t){super(e,"tableCellBackgroundColor",t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OH extends Fn{constructor(e,t){super(e,"tableCellVerticalAlignment",t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class LH extends Fn{constructor(e,t){super(e,"tableCellHorizontalAlignment",t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class MH extends Fn{constructor(e,t){super(e,"tableCellBorderStyle",t)}_getAttribute(e){if(!e)return;const t=Ei(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class FH extends Fn{constructor(e,t){super(e,"tableCellBorderColor",t)}_getAttribute(e){if(!e)return;const t=Ei(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NH extends Fn{constructor(e,t){super(e,"tableCellBorderWidth",t)}_getAttribute(e){if(!e)return;const t=Ei(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(e){const t=Si(e,"px");if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Yf=/^(top|middle|bottom)$/,Xf=/^(left|center|right|justify)$/;class DH extends y{static get pluginName(){return"TableCellPropertiesEditing"}static get requires(){return[Io,Xb]}init(){const e=this.editor,t=e.model.schema,n=e.conversion;e.config.define("table.tableCellProperties.defaultProperties",{});const s=Po(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"});e.data.addStyleProcessorRules(hg),zH(t,n,{color:s.borderColor,style:s.borderStyle,width:s.borderWidth}),e.commands.add("tableCellBorderStyle",new MH(e,s.borderStyle)),e.commands.add("tableCellBorderColor",new FH(e,s.borderColor)),e.commands.add("tableCellBorderWidth",new NH(e,s.borderWidth)),pr(t,n,{modelAttribute:"tableCellHeight",styleName:"height",defaultValue:s.height}),e.commands.add("tableCellHeight",new VH(e,s.height)),e.data.addStyleProcessorRules(uS),pr(t,n,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:s.padding}),e.commands.add("tableCellPadding",new RH(e,s.padding)),e.data.addStyleProcessorRules(gl),pr(t,n,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",defaultValue:s.backgroundColor}),e.commands.add("tableCellBackgroundColor",new BH(e,s.backgroundColor)),HH(t,n,s.horizontalAlignment),e.commands.add("tableCellHorizontalAlignment",new LH(e,s.horizontalAlignment)),$H(t,n,s.verticalAlignment),e.commands.add("tableCellVerticalAlignment",new OH(e,s.verticalAlignment))}}function zH(i,e,t){const n={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};i.extend("tableCell",{allowAttributes:Object.values(n)}),fc(e,"td",n,t),fc(e,"th",n,t),zs(e,{modelElement:"tableCell",modelAttribute:n.style,styleName:"border-style"}),zs(e,{modelElement:"tableCell",modelAttribute:n.color,styleName:"border-color"}),zs(e,{modelElement:"tableCell",modelAttribute:n.width,styleName:"border-width"})}function HH(i,e,t){i.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),e.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:n=>({key:"style",value:{"text-align":n}})}),e.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":Xf}},model:{key:"tableCellHorizontalAlignment",value:n=>{const s=n.getStyle("text-align");return s===t?null:s}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:Xf}},model:{key:"tableCellHorizontalAlignment",value:n=>{const s=n.getAttribute("align");return s===t?null:s}}})}function $H(i,e,t){i.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),e.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:n=>({key:"style",value:{"vertical-align":n}})}),e.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":Yf}},model:{key:"tableCellVerticalAlignment",value:n=>{const s=n.getStyle("vertical-align");return s===t?null:s}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:Yf}},model:{key:"tableCellVerticalAlignment",value:n=>{const s=n.getAttribute("valign");return s===t?null:s}}})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class UH extends y{static get pluginName(){return"TableCellProperties"}static get requires(){return[DH,IH]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ii extends q{constructor(e,t,n){super(e),this.attributeName=t,this._defaultValue=n}refresh(){const t=this.editor.model.document.selection,n=di(t);this.isEnabled=!!n,this.value=this._getValue(n)}execute(e={}){const t=this.editor.model,n=t.document.selection,{value:s,batch:o}=e,r=di(n),a=this._getValueToSet(s);t.enqueueChange(o,c=>{a?c.setAttribute(this.attributeName,a,r):c.removeAttribute(this.attributeName,r)})}_getValue(e){if(!e)return;const t=e.getAttribute(this.attributeName);if(t!==this._defaultValue)return t}_getValueToSet(e){if(e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class WH extends Ii{constructor(e,t){super(e,"tableBackgroundColor",t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jH extends Ii{constructor(e,t){super(e,"tableBorderColor",t)}_getValue(e){if(!e)return;const t=Ei(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qH extends Ii{constructor(e,t){super(e,"tableBorderStyle",t)}_getValue(e){if(!e)return;const t=Ei(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class GH extends Ii{constructor(e,t){super(e,"tableBorderWidth",t)}_getValue(e){if(!e)return;const t=Ei(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(e){const t=Si(e,"px");if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KH extends Ii{constructor(e,t){super(e,"tableWidth",t)}_getValueToSet(e){if(e=Si(e,"px"),e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JH extends Ii{constructor(e,t){super(e,"tableHeight",t)}_getValueToSet(e){if(e=Si(e,"px"),e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ZH extends Ii{constructor(e,t){super(e,"tableAlignment",t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const YH=/^(left|center|right)$/,XH=/^(left|none|right)$/;class QH extends y{static get pluginName(){return"TablePropertiesEditing"}static get requires(){return[Io]}init(){const e=this.editor,t=e.model.schema,n=e.conversion;e.config.define("table.tableProperties.defaultProperties",{});const s=Po(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});e.data.addStyleProcessorRules(hg),e$(t,n,{color:s.borderColor,style:s.borderStyle,width:s.borderWidth}),e.commands.add("tableBorderColor",new jH(e,s.borderColor)),e.commands.add("tableBorderStyle",new qH(e,s.borderStyle)),e.commands.add("tableBorderWidth",new GH(e,s.borderWidth)),t$(t,n,s.alignment),e.commands.add("tableAlignment",new ZH(e,s.alignment)),Qf(t,n,{modelAttribute:"tableWidth",styleName:"width",defaultValue:s.width}),e.commands.add("tableWidth",new KH(e,s.width)),Qf(t,n,{modelAttribute:"tableHeight",styleName:"height",defaultValue:s.height}),e.commands.add("tableHeight",new JH(e,s.height)),e.data.addStyleProcessorRules(gl),n$(t,n,{modelAttribute:"tableBackgroundColor",styleName:"background-color",defaultValue:s.backgroundColor}),e.commands.add("tableBackgroundColor",new WH(e,s.backgroundColor))}}function e$(i,e,t){const n={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};i.extend("table",{allowAttributes:Object.values(n)}),fc(e,"table",n,t),gr(e,{modelAttribute:n.color,styleName:"border-color"}),gr(e,{modelAttribute:n.style,styleName:"border-style"}),gr(e,{modelAttribute:n.width,styleName:"border-width"})}function t$(i,e,t){i.extend("table",{allowAttributes:["tableAlignment"]}),e.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment"},view:n=>({key:"style",value:{float:n==="center"?"none":n}}),converterPriority:"high"}),e.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:XH}},model:{key:"tableAlignment",value:n=>{let s=n.getStyle("float");return s==="none"&&(s="center"),s===t?null:s}}}).attributeToAttribute({view:{attributes:{align:YH}},model:{name:"table",key:"tableAlignment",value:n=>{const s=n.getAttribute("align");return s===t?null:s}}})}function n$(i,e,t){const{modelAttribute:n}=t;i.extend("table",{allowAttributes:[n]}),Ll(e,{viewElement:"table",...t}),gr(e,t)}function Qf(i,e,t){const{modelAttribute:n}=t;i.extend("table",{allowAttributes:[n]}),Ll(e,{viewElement:/^(table|figure)$/,shouldUpcast:s=>!(s.name=="table"&&s.parent.name=="figure"),...t}),zs(e,{modelElement:"table",...t})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const i$={left:K.objectLeft,center:K.objectCenter,right:K.objectRight};class s$ extends D{constructor(e,t){super(e),this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=t;const{borderStyleDropdown:n,borderWidthInput:s,borderColorInput:o,borderRowLabel:r}=this._createBorderFields(),{backgroundRowLabel:a,backgroundInput:c}=this._createBackgroundFields(),{widthInput:l,operatorLabel:x,heightInput:d,dimensionsLabel:u}=this._createDimensionFields(),{alignmentToolbar:f,alignmentLabel:m}=this._createAlignmentFields();this.focusTracker=new Se,this.keystrokes=new Le,this.children=this.createCollection(),this.borderStyleDropdown=n,this.borderWidthInput=s,this.borderColorInput=o,this.backgroundInput=c,this.widthInput=l,this.heightInput=d,this.alignmentToolbar=f;const{saveButtonView:b,cancelButtonView:p}=this._createActionButtons();this.saveButtonView=b,this.cancelButtonView=p,this._focusables=new dt,this._focusCycler=new ut({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new da(e,{label:this.t("Table properties")})),this.children.add(new Et(e,{labelView:r,children:[r,n,o,s],class:"ck-table-form__border-row"})),this.children.add(new Et(e,{labelView:a,children:[a,c],class:"ck-table-form__background-row"})),this.children.add(new Et(e,{children:[new Et(e,{labelView:u,children:[u,l,x,d],class:"ck-table-form__dimensions-row"}),new Et(e,{labelView:m,children:[m,f],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new Et(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),as({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{e.fieldView.focusCycler.on("forwardCycle",t=>{this._focusCycler.focusNext(),t.stop()}),e.fieldView.focusCycler.on("backwardCycle",t=>{this._focusCycler.focusPrevious(),t.stop()})}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableProperties,t={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},n=Ur({colorConfig:this.options.borderColors,columns:5,defaultColorValue:t.color,colorPickerConfig:this.options.colorPickerConfig}),s=this.locale,o=this.t,r=o("Style"),a=new Pt(s);a.text=o("Border");const c=Dl(o),l=new Ge(s,vg);l.set({label:r,class:"ck-table-form__border-style"}),l.fieldView.buttonView.set({ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),l.fieldView.buttonView.bind("label").to(this,"borderStyle",u=>c[u||"none"]),l.fieldView.on("execute",u=>{this.borderStyle=u.source._borderStyleValue}),l.bind("isEmpty").to(this,"borderStyle",u=>!u),Mn(l.fieldView,qb(this,t.style),{role:"menu",ariaLabel:r});const x=new Ge(s,Rt);x.set({label:o("Width"),class:"ck-table-form__border-width"}),x.fieldView.bind("value").to(this,"borderWidth"),x.bind("isEnabled").to(this,"borderStyle",ir),x.fieldView.on("input",()=>{this.borderWidth=x.fieldView.element.value});const d=new Ge(s,n);return d.set({label:o("Color"),class:"ck-table-form__border-color"}),d.fieldView.bind("value").to(this,"borderColor"),d.bind("isEnabled").to(this,"borderStyle",ir),d.fieldView.on("input",()=>{this.borderColor=d.fieldView.value}),this.on("change:borderStyle",(u,f,m,b)=>{ir(m)||(this.borderColor="",this.borderWidth=""),ir(b)||(this.borderColor=t.color,this.borderWidth=t.width)}),{borderRowLabel:a,borderStyleDropdown:l,borderColorInput:d,borderWidthInput:x}}_createBackgroundFields(){const e=this.locale,t=this.t,n=new Pt(e);n.text=t("Background");const s=Ur({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new Ge(e,s);return o.set({label:t("Color"),class:"ck-table-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:n,backgroundInput:o}}_createDimensionFields(){const e=this.locale,t=this.t,n=new Pt(e);n.text=t("Dimensions");const s=new Ge(e,Rt);s.set({label:t("Width"),class:"ck-table-form__dimensions-row__width"}),s.fieldView.bind("value").to(this,"width"),s.fieldView.on("input",()=>{this.width=s.fieldView.element.value});const o=new D(e);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const r=new Ge(e,Rt);return r.set({label:t("Height"),class:"ck-table-form__dimensions-row__height"}),r.fieldView.bind("value").to(this,"height"),r.fieldView.on("input",()=>{this.height=r.fieldView.element.value}),{dimensionsLabel:n,widthInput:s,operatorLabel:o,heightInput:r}}_createAlignmentFields(){const e=this.locale,t=this.t,n=new Pt(e);n.text=t("Alignment");const s=new ts(e);return s.set({isCompact:!0,ariaLabel:t("Table alignment toolbar")}),yc({view:this,icons:i$,toolbar:s,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:n,alignmentToolbar:s}}_createActionButtons(){const e=this.locale,t=this.t,n=new G(e),s=new G(e),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return n.set({label:t("Save"),icon:K.check,class:"ck-button-save",type:"submit",withText:!0}),n.bind("isEnabled").toMany(o,"errorText",(...r)=>r.every(a=>!a)),s.set({label:t("Cancel"),icon:K.cancel,class:"ck-button-cancel",withText:!0}),s.delegate("execute").to(this,"cancel"),{saveButtonView:n,cancelButtonView:s}}get _alignmentLabels(){const e=this.locale,t=this.t,n=t("Align table to the left"),s=t("Center table"),o=t("Align table to the right");return e.uiLanguageDirection==="rtl"?{right:o,center:s,left:n}:{left:n,center:s,right:o}}}function ir(i){return i!=="none"}const o$='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const r$=500,eh={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class a$ extends y{static get requires(){return[fn]}static get pluginName(){return"TablePropertiesUI"}constructor(e){super(e),this.view=null,e.config.define("table.tableProperties",{borderColors:$r,backgroundColors:$r})}init(){const e=this.editor,t=e.t;this._defaultTableProperties=Po(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._balloon=e.plugins.get(fn),e.ui.componentFactory.add("tableProperties",n=>{const s=new G(n);s.set({label:t("Table properties"),icon:o$,tooltip:!0}),this.listenTo(s,"execute",()=>this._showView());const o=Object.values(eh).map(r=>e.commands.get(r));return s.bind("isEnabled").toMany(o,"isEnabled",(...r)=>r.some(a=>a)),s})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const e=this.editor,t=e.config.get("table.tableProperties"),n=Js(t.borderColors),s=Ks(e.locale,n),o=Js(t.backgroundColors),r=Ks(e.locale,o),a=t.colorPicker!==!1,c=new s$(e.locale,{borderColors:s,backgroundColors:r,defaultTableProperties:this._defaultTableProperties,colorPickerConfig:a?t.colorPicker||{}:!1}),l=e.t;c.render(),this.listenTo(c,"submit",()=>{this._hideView()}),this.listenTo(c,"cancel",()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()}),c.keystrokes.set("Esc",(u,f)=>{this._hideView(),f()}),rs({emitter:c,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const x=Ub(l),d=Wb(l);return c.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle")),c.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:c.borderColorInput,commandName:"tableBorderColor",errorText:x,validator:Hr})),c.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:c.borderWidthInput,commandName:"tableBorderWidth",errorText:d,validator:jb})),c.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:c.backgroundInput,commandName:"tableBackgroundColor",errorText:x,validator:Hr})),c.on("change:width",this._getValidatedPropertyChangeCallback({viewField:c.widthInput,commandName:"tableWidth",errorText:d,validator:Hs})),c.on("change:height",this._getValidatedPropertyChangeCallback({viewField:c.heightInput,commandName:"tableHeight",errorText:d,validator:Hs})),c.on("change:alignment",this._getPropertyChangeCallback("tableAlignment")),c}_fillViewFormFromCommandValues(){const e=this.editor.commands,t=e.get("tableBorderStyle");Object.entries(eh).map(([n,s])=>{const o=n,r=this._defaultTableProperties[o]||"";return[o,e.get(s).value||r]}).forEach(([n,s])=>{(n==="borderColor"||n==="borderWidth")&&t.value==="none"||this.view.set(n,s)}),this._isReady=!0}_showView(){const e=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:Jb(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,t=e.editing.view.document;zb(t.selection)?this._isViewVisible&&Kb(e,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(t,n,s)=>{this._isReady&&this.editor.execute(e,{value:s,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:t,viewField:n,validator:s,errorText:o}=e,r=un(()=>{n.errorText=o},r$);return(a,c,l)=>{r.cancel(),this._isReady&&(s(l)?(this.editor.execute(t,{value:l,batch:this._undoStepBatch}),n.errorText=null):r())}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class c$ extends y{static get pluginName(){return"TableProperties"}static get requires(){return[QH,a$]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function l$(i){i.document.registerPostFixer(e=>x$(e,i))}function x$(i,e){const t=e.document.differ.getChanges();let n=!1;for(const s of t){if(s.type!="insert")continue;const o=s.position.parent;if(o.is("element","table")||s.name=="table"){const r=s.name=="table"?s.position.nodeAfter:o,a=Array.from(r.getChildren()).filter(l=>l.is("element","caption")),c=a.shift();if(!c)continue;for(const l of a)i.move(i.createRangeIn(l),c,"end"),i.remove(l);c.nextSibling&&(i.move(i.createRangeOn(c),r,"end"),n=!0),n=!!a.length||n}}return n}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function th(i){return!!i&&i.is("element","table")}function kc(i){for(const e of i.getChildren())if(e.is("element","caption"))return e;return null}function d$(i){const e=di(i);return e?kc(e):null}function u$(i){const e=i.parent;return i.name=="figcaption"&&e&&e.is("element","figure")&&e.hasClass("table")?{name:!0}:i.name=="caption"&&e&&e.is("element","table")?{name:!0}:null}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class f$ extends q{refresh(){const e=this.editor,t=di(e.model.document.selection);this.isEnabled=!!t,this.isEnabled?this.value=!!kc(t):this.value=!1}execute({focusCaptionOnShow:e=!1}={}){this.editor.model.change(t=>{this.value?this._hideTableCaption(t):this._showTableCaption(t,e)})}_showTableCaption(e,t){const n=this.editor.model,s=di(n.document.selection),a=this.editor.plugins.get("TableCaptionEditing")._getSavedCaption(s)||e.createElement("caption");n.insertContent(a,s,"end"),t&&e.setSelection(a,"in")}_hideTableCaption(e){const t=this.editor.model,n=di(t.document.selection),s=this.editor.plugins.get("TableCaptionEditing"),o=kc(n);s._saveCaption(n,o),t.deleteContent(e.createSelection(o,"on"))}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class h$ extends y{static get pluginName(){return"TableCaptionEditing"}constructor(e){super(e),this._savedCaptionsMap=new WeakMap}init(){const e=this.editor,t=e.model.schema,n=e.editing.view,s=e.t;t.isRegistered("caption")?t.extend("caption",{allowIn:"table"}):t.register("caption",{allowIn:"table",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleTableCaption",new f$(this.editor)),e.conversion.for("upcast").elementToElement({view:u$,model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(o,{writer:r})=>th(o.parent)?r.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(o,{writer:r})=>{if(!th(o.parent))return null;const a=r.createEditableElement("figcaption");return r.setCustomProperty("tableCaption",!0,a),a.placeholder=s("Enter table caption"),ol({view:n,element:a,keepOnFocus:!0}),pl(a,r)}}),l$(e.model)}_getSavedCaption(e){const t=this._savedCaptionsMap.get(e);return t?he.fromJSON(t):null}_saveCaption(e,t){this._savedCaptionsMap.set(e,t.toJSON())}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class m$ extends y{static get pluginName(){return"TableCaptionUI"}init(){const e=this.editor,t=e.editing.view,n=e.t;e.ui.componentFactory.add("toggleTableCaption",s=>{const o=e.commands.get("toggleTableCaption"),r=new G(s);return r.set({icon:K.caption,tooltip:!0,isToggleable:!0}),r.bind("isOn","isEnabled").to(o,"value","isEnabled"),r.bind("label").to(o,"value",a=>n(a?"Toggle caption off":"Toggle caption on")),this.listenTo(r,"execute",()=>{if(e.execute("toggleTableCaption",{focusCaptionOnShow:!0}),o.value){const a=d$(e.model.document.selection),c=e.editing.mapper.toViewElement(a);if(!c)return;t.scrollToTheSelection(),t.change(l=>{l.addClass("table__caption_highlighted",c)})}e.editing.view.focus()}),r})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class g$ extends y{static get pluginName(){return"TableCaption"}static get requires(){return[h$,m$]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class b$ extends q{refresh(){this.isEnabled=!0}execute(e={}){const{model:t,plugins:n}=this.editor;let{table:s=t.document.selection.getSelectedElement(),columnWidths:o,tableWidth:r}=e;o&&(o=Array.isArray(o)?o:o.split(",")),t.change(a=>{r?a.setAttribute("tableWidth",r,s):a.removeAttribute("tableWidth",s);const c=n.get("TableColumnResizeEditing").getColumnGroupElement(s);if(!o&&!c)return;if(!o)return a.remove(c);const l=Fl(o);if(c)Array.from(c.getChildren()).forEach((x,d)=>a.setAttribute("columnWidth",l[d],x));else{const x=a.createElement("tableColumnGroup");l.forEach(d=>a.appendElement("tableColumn",{columnWidth:d},x)),a.append(x,s)}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function p$(i){return e=>e.on("element:colgroup",(t,n,s)=>{const o=n.modelCursor.findAncestor("table"),r=Eo(o);if(!r)return;const a=So(r),c=i.getColumns(o);let l=Mz(r,s.writer);l=Array.from({length:c},(x,d)=>l[d]||"auto"),(l.length!=a.length||l.includes("auto"))&&Mb(a,r,Fl(l),s.writer)},{priority:"low"})}function w$(){return i=>i.on("insert:table",(e,t,n)=>{const s=n.writer,o=t.item,r=n.mapper.toViewElement(o),a=r.is("element","table")?r:Array.from(r.getChildren()).find(l=>l.is("element","table"));Eo(o)?s.addClass("ck-table-resized",a):s.removeClass("ck-table-resized",a)},{priority:"low"})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _$ extends y{static get requires(){return[Io,it]}static get pluginName(){return"TableColumnResizeEditing"}constructor(e){super(e),this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(bt()),this._tableUtilsPlugin=e.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(t,n,s)=>{const o=s?"removeClass":"addClass";e.editing.view.change(r=>{for(const a of e.editing.view.document.roots)r[o]("ck-column-resize_disabled",e.editing.view.document.getRoot(a.rootName))})})}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const e=this.editor,t=e.plugins.get("TableColumnResize");e.plugins.get("TableEditing").registerAdditionalSlot({filter:o=>o.is("element","tableColumnGroup"),positionOffset:0});const s=new b$(e);e.commands.add("resizeTableWidth",s),e.commands.add("resizeColumnWidths",s),this.bind("_isResizingAllowed").to(e,"isReadOnly",t,"isEnabled",s,"isEnabled",(o,r,a)=>!o&&r&&a)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(e){return Eo(e)}getTableColumnElements(e){return So(e)}getTableColumnsWidths(e){return Lz(e)}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth"]}),this.editor.model.schema.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),this.editor.model.schema.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0})}_registerPostFixer(){const t=this.editor.model;t.document.registerPostFixer(o=>{let r=!1;for(const a of Sz(t)){const c=this.getColumnGroupElement(a),l=this.getTableColumnElements(c),x=this.getTableColumnsWidths(c);let d=Fl(x);d=n(d,a,this),!Zi(x,d)&&(Mb(l,c,d,o),r=!0)}return r});function n(o,r,a){const c=a._tableUtilsPlugin.getColumns(r);if(c-o.length===0)return o;const x=o.map(u=>Number(u.replace("%",""))),d=s(a.editor.model.document.differ,r);for(const u of d){const f=c-x.length;if(f===0)continue;const m=f>0,b=a._tableUtilsPlugin.getCellLocation(u).column;if(m){const p=Iz(r,a.editor),C=Vz(f,p);x.splice(b,0,...C)}else{const p=x.splice(b,Math.abs(f));x[b]+=uo(p)}}return x.map(u=>u+"%")}function s(o,r){const a=new Set;for(const c of o.getChanges())if(c.type=="insert"&&c.position.nodeAfter&&c.position.nodeAfter.name=="tableCell"&&c.position.nodeAfter.getAncestors().includes(r))a.add(c.position.nodeAfter);else if(c.type=="remove"){const l=c.position.nodeBefore||c.position.nodeAfter;l.name=="tableCell"&&l.getAncestors().includes(r)&&a.add(l)}return a}}_registerConverters(){const t=this.editor.conversion;t.for("upcast").attributeToAttribute({view:{name:"figure",key:"style",value:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:n=>n.getStyle("width")}}),t.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:n=>({name:"figure",key:"style",value:{width:n}})}),t.elementToElement({model:"tableColumnGroup",view:"colgroup"}),t.elementToElement({model:"tableColumn",view:"col"}),t.for("downcast").add(w$()),t.for("upcast").add(p$(this._tableUtilsPlugin)),t.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:n=>{const s=n.getStyle("width");return!s||!s.endsWith("%")&&!s.endsWith("pt")?"auto":s}}}),t.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),t.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:n=>({key:"style",value:{width:n}})})}_registerResizingListeners(){const e=this.editor.editing.view;e.addObserver(Db),e.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(U.window.document,"mousemove",mi(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(U.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_onMouseDownHandler(e,t){const n=t.target;if(!n.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;const s=this.editor,o=s.editing.mapper.toModelElement(n.findAncestor("figure"));if(!s.model.canEditAt(o))return;t.preventDefault(),e.stop();const r=l(o,this._tableUtilsPlugin,s),a=n.findAncestor("table"),c=s.editing.view;Array.from(a.getChildren()).find(u=>u.is("element","colgroup"))||c.change(u=>{x(u,r,a)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(t,r),c.change(u=>d(u,a,this._resizingData));function l(u,f,m){const b=Array(f.getColumns(u)),p=new me(u);for(const C of p){const _=m.editing.mapper.toViewElement(C.cell),R=m.editing.view.domConverter.mapViewToDom(_),P=Oz(R);(!b[C.column]||P<b[C.column])&&(b[C.column]=pt(P))}return b}function x(u,f,m){const b=u.createContainerElement("colgroup");for(let p=0;p<f.length;p++){const C=u.createEmptyElement("col"),_=`${pt(f[p]/uo(f)*100)}%`;u.setStyle("width",_,C),u.insert(u.createPositionAt(b,"end"),C)}u.insert(u.createPositionAt(m,0),b)}function d(u,f,m){const b=m.widths.viewFigureWidth/m.widths.viewFigureParentWidth;u.addClass("ck-table-resized",f),u.addClass("ck-table-column-resizer__active",m.elements.viewResizer),u.setStyle("width",`${pt(b*100)}%`,f.findAncestor("figure"))}}_onMouseMoveHandler(e,t){if(!this._isResizingActive)return;if(!this._isResizingAllowed){this._onMouseUpHandler();return}const{columnPosition:n,flags:{isRightEdge:s,isTableCentered:o,isLtrContent:r},elements:{viewFigure:a,viewLeftColumn:c,viewRightColumn:l},widths:{viewFigureParentWidth:x,tableWidth:d,leftColumnWidth:u,rightColumnWidth:f}}=this._resizingData,m=-u+bc,b=s?x-d:f-bc,p=(r?1:-1)*(s&&o?2:1),C=Rz((t.clientX-n)*p,Math.min(m,0),Math.max(b,0));C!==0&&this.editor.editing.view.change(_=>{const R=pt((u+C)*100/d);if(_.setStyle("width",`${R}%`,c),s){const P=pt((d+C)*100/x);_.setStyle("width",`${P}%`,a)}else{const P=pt((f-C)*100/d);_.setStyle("width",`${P}%`,l)}})}_onMouseUpHandler(){if(!this._isResizingActive)return;const{viewResizer:e,modelTable:t,viewFigure:n,viewColgroup:s}=this._resizingData.elements,o=this.editor,r=o.editing.view,a=this.getColumnGroupElement(t),c=Array.from(s.getChildren()).filter(b=>b.is("view:element")),l=a?this.getTableColumnsWidths(a):null,x=c.map(b=>b.getStyle("width")),d=!Zi(l,x),u=t.getAttribute("tableWidth"),f=n.getStyle("width"),m=u!==f;(d||m)&&(this._isResizingAllowed?o.execute("resizeTableWidth",{table:t,tableWidth:`${pt(f)}%`,columnWidths:x}):r.change(b=>{if(l)for(const p of c)b.setStyle("width",l.shift(),p);else b.remove(s);m&&(u?b.setStyle("width",u,n):b.removeStyle("width",n)),!l&&!u&&b.removeClass("ck-table-resized",[...n.getChildren()].find(p=>p.name==="table"))})),r.change(b=>{b.removeClass("ck-table-column-resizer__active",e)}),this._isResizingActive=!1,this._resizingData=null}_getResizingData(e,t){const n=this.editor,s=e.domEvent.clientX,o=e.target,r=o.findAncestor("td")||o.findAncestor("th"),a=n.editing.mapper.toModelElement(r),c=a.findAncestor("table"),l=Pz(a,this._tableUtilsPlugin).rightEdge,x=this._tableUtilsPlugin.getColumns(c)-1,d=l===x,u=!c.hasAttribute("tableAlignment"),f=n.locale.contentLanguageDirection!=="rtl",m=r.findAncestor("table"),b=m.findAncestor("figure"),p=[...m.getChildren()].find(k=>k.is("element","colgroup")),C=p.getChild(l),_=d?void 0:p.getChild(l+1),R=pc(n.editing.view.domConverter.mapViewToDom(b.parent)),P=pc(n.editing.view.domConverter.mapViewToDom(b)),I=Lb(c,n),V=t[l],A=d?void 0:t[l+1];return{columnPosition:s,flags:{isRightEdge:d,isTableCentered:u,isLtrContent:f},elements:{viewResizer:o,modelTable:c,viewFigure:b,viewColgroup:p,viewLeftColumn:C,viewRightColumn:_},widths:{viewFigureParentWidth:R,viewFigureWidth:P,tableWidth:I,leftColumnWidth:V,rightColumnWidth:A}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(e=>{e.on("insert:tableCell",(t,n,s)=>{const o=n.item,r=s.mapper.toViewElement(o),a=s.writer;a.insert(a.createPositionAt(r,"end"),a.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class v$ extends y{static get requires(){return[_$,Xb]}static get pluginName(){return"TableColumnResize"}}const y$='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M8 0H3a2 2 0 0 0-2 2v15a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2ZM2.5 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5V2Z"/><path clip-rule="evenodd" d="M13 0h5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2Zm0 1.5a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 .5-.5V2a.5.5 0 0 0-.5-.5h-5Z"/><path clip-rule="evenodd" d="M13 10h5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2Zm0 1.5a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 .5-.5v-5a.5.5 0 0 0-.5-.5h-5Z"/></svg>',Qb=["string","data","insertContent","htmlProcessor","editor","toModel","execute","function"];(function(i,e){(function(n){for(;--n;)i.push(i.shift())})(++e)})(Qb,126);const sn=function(i,e){return i=i-0,Qb[i]};class C$ extends q{[sn("0x0")](e){const{model:t}=this[sn("0x6")];let n;switch(typeof e){case sn("0x2"):n=e;break;case sn("0x1"):n=e()}typeof n=="string"&&t.change(()=>{const s=this[sn("0x6")][sn("0x3")][sn("0x5")].toView(n),o=this[sn("0x6")].data[sn("0x7")](s);t[sn("0x4")](o)})}}const ep=["destroy","init","get","info","template-trial-license-key-reached-limit-changes","editor","templateLicenseKeyTrialLimit:operations","template-invalid-license-key","_licenseKeyCheckInterval","add","templateLicenseKeyTrial","commands","templateLicenseKeyValid","pluginName","templateLicenseKeyInvalid","You are using the trial version of CKEditor 5 template plugin with limited usage. Make sure you will not use it in the production environment."];(function(i,e){(function(n){for(;--n;)i.push(i.shift())})(++e)})(ep,192);const Ue=function(i,e){return i=i-0,ep[i]};class k$ extends y{static get[Ue("0xd")](){return"TemplateEditing"}constructor(e){super(e),this[Ue("0x8")]=null}[Ue("0x1")](){const{editor:e}=this;e[Ue("0xb")][Ue("0x9")]("insertTemplate",new C$(e)),this.licenseKey=e.config[Ue("0x2")]("licenseKey");const t=this[Ue("0x5")];this._licenseKeyCheckInterval=setInterval(()=>{let n;for(const s in t){const o=s,r=t[o];if(Ue("0xa")===r||r==="templateLicenseKeyInvalid"||r==="templateLicenseKeyValid"||Ue("0x6")===r){delete t[o],n=r;break}}if(Ue("0xe")===n)throw clearInterval(this[Ue("0x8")]),new w(Ue("0x7"),null);if(n==="templateLicenseKeyTrial"&&console[Ue("0x3")](Ue("0xf")),Ue("0x6")===n)throw clearInterval(this[Ue("0x8")]),new w(Ue("0x4"),null);Ue("0xc")===n&&clearInterval(this[Ue("0x8")])},1e3)}[Ue("0x0")](){this[Ue("0x8")]&&clearInterval(this._licenseKeyCheckInterval)}}const tp=["_resetFiltering","size","sort","length","isMatching","filter","buttonView","get","items","addMany","clear","originalIndex","map","highlightText","title","isVisible","forEach"];(function(i,e){(function(n){for(;--n;)i.push(i.shift())})(++e)})(tp,132);const fe=function(i,e){return i=i-0,tp[i]};class T$ extends aa{[fe("0x9")](e){if(!e)return this[fe("0x4")]();const t=new Map,n=this[fe("0xc")][fe("0x10")](s=>{const o=s[fe("0xa")][fe("0x8")](e);return s[fe("0x2")]=!!o,s[fe("0xa")][fe("0x0")](o?e:null),o&&t.set(s,o),s}).sort(nh)[fe("0x6")](function(s){return function(o,r){const a=s.get(o),c=s[fe("0xb")](r);return a&&!c?-1:c&&!a?1:a||c?a[fe("0x1")]&&!c.title?-1:!a[fe("0x1")]&&c.title?1:0:0}}(t));return this[fe("0xc")][fe("0xe")](),this[fe("0xc")][fe("0xd")](n),{resultsCount:t[fe("0x5")],totalItemsCount:this[fe("0xc")][fe("0x7")]}}_resetFiltering(){const e=this[fe("0xc")][fe("0x10")](t=>t).sort(nh);return e[fe("0x3")](t=>{t[fe("0x2")]=!0,t[fe("0xa")][fe("0x0")](null)}),this[fe("0xc")].clear(),this.items.addMany(e),{resultsCount:e[fe("0x7")],totalItemsCount:e[fe("0x7")]}}}function nh(i,e){return i.originalIndex-e[fe("0xf")]}var np=["originalIndex","buttonView"];(function(i,e){var t=function(n){for(;--n;)i.push(i.shift())};t(++e)})(np,492);var ih=function(i,e){i=i-0;var t=np[i];return t};class A$ extends ca{constructor(e,t){super(e),this[ih("0x0")]=t,this[ih("0x1")]=null}}const E$=`<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45">
  <path fill="#F0F0F0" d="M2 0h41s2 0 2 2v41s0 2 -2 2h-41s-2 0 -2 -2v-41s0 -2 2 -2" />
  <path fill="#D5D5D5" d="M11 10h10s1 0 1 1v24s0 1 -1 1h-10s-1 0 -1 -1v-24s0 -1 1 -1" />
  <path fill="#D5D5D5" d="M25 10h10s1 0 1 1v10s0 1 -1 1h-10s-1 0 -1 -1v-10s0 -1 1 -1" />
  <path fill="#D5D5D5" d="M25 24h10s1 0 1 1v10s0 1 -1 1h-10s-1 0 -1 -1v-10s0 -1 1 -1" />
</svg>
`,ip=["isColorInherited","match","render","templateDefinition","span","children","extendTemplate","setTemplate","add","element","destroy","locale","textPartView","option","set","iconView","titleView","isMatching","ck-template-form__text-part","highlightText","descriptionView","push","text","title","labelView","description","div"];(function(i,e){(function(n){for(;--n;)i.push(i.shift())})(++e)})(ip,399);const Q=function(i,e){return i=i-0,ip[i]};class S$ extends G{constructor(e,t){super(e),this[Q("0x9")]=t,this.textPartView=null;const{icon:n=E$}=t;this[Q("0x14")]({withText:!0,icon:n}),this[Q("0xc")]({attributes:{role:Q("0x13")}}),this[Q("0x15")][Q("0x6")]=!1}[Q("0x8")](){super[Q("0x8")](),this.textPartView=new I$(this[Q("0x11")],this.templateDefinition,this[Q("0x3")][Q("0xf")].id),this[Q("0xb")].remove(this.labelView),this.children[Q("0xe")](this.textPartView)}[Q("0x10")](){super[Q("0x10")](),this[Q("0x3")][Q("0x10")]()}[Q("0x17")](e){const{title:t,description:n}=this[Q("0x9")],s=!!t.match(e),o=!(!n||!n[Q("0x7")](e));return s||o?{title:s,description:o}:null}[Q("0x19")](e){this[Q("0x12")][Q("0x19")](e)}}class I$ extends D{constructor(e,t,n){super(e),this[Q("0x2")]=t[Q("0x2")],this[Q("0x4")]=t[Q("0x4")],this[Q("0x16")]=new ru,this[Q("0x16")][Q("0x1")]=this.title,this[Q("0x16")][Q("0xc")]({tag:Q("0xa"),attributes:{class:["ck-button__label"],id:n}});const s=[this[Q("0x16")]];this[Q("0x4")]&&(this[Q("0x1a")]=new ru,this[Q("0x1a")][Q("0x1")]=this.description,this.descriptionView.extendTemplate({tag:"p",attributes:{class:["ck-template-form__description"]}}),s[Q("0x0")](this[Q("0x1a")])),this[Q("0xd")]({tag:Q("0x5"),attributes:{class:["ck",Q("0x18")]},children:s})}highlightText(e){this[Q("0x16")][Q("0x19")](e),this[Q("0x4")]&&this.descriptionView[Q("0x19")](e)}}class P$ extends y{static get pluginName(){return"TemplateUI"}init(){const{editor:e}=this,{t}=e,n=e.config.get("template.definitions")||[];e.ui.componentFactory.add("insertTemplate",s=>{const o=Ne(s),r=this._createTemplateListView(s,n),a=new Ig(s,{filteredView:r,queryView:{label:t("Search template")},class:"ck-template-form",infoView:{text:{notFound:{primary:l=>t('No templates were found matching "%0".',l),secondary:t("Please try a different phrase or check the spelling.")},noSearchableItems:{primary:t("No templates available.")}}}}),c=e.commands.get("insertTemplate");return o.bind("isEnabled").to(c),o.panelView.children.add(a),o.buttonView.set({label:t("Insert template"),icon:y$,tooltip:!0}),o.on("change:isOpen",(l,x,d)=>{d||a.reset()}),o})}afterInit(){(function(e){function t(s,o,r){const a={};a[n([110,117,109,98,101,114,79,102,82,111,117,110,100,115])]={16:10,24:12,32:14},a[n([114,99,111,110])]=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],a[n([83])]=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],a[n([84,49])]=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],a[n([84,50])]=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],a[n([84,51])]=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],a[n([84,52])]=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],a[n([85,49])]=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],a[n([85,50])]=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],a[n([85,51])]=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],a[n([85,52])]=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];const c=new Uint8Array(16);for(let _=15;_>=0;--_)c[_]=r%256,r=parseInt(r/256);let l=null,x=16;const d=new Uint8Array(o),u=[],f=[];C();for(let _=0;_<s[n([108,101,110,103,116,104])];_++)x===16&&(l=p(c),x=0,b(c)),s[_]^=l[x++];return s;function m(_){const R=[];for(let P=0;P<_[n([108,101,110,103,116,104])];P+=4)R[n([112,117,115,104])](_[P]<<24|_[P+1]<<16|_[P+2]<<8|_[P+3]);return R}function b(_){for(let R=15;R>=0;R--){if(_[R]!==255){_[R]++;break}_[R]=0}}function p(_){const R=u[n([108,101,110,103,116,104])]-1,P=[0,0,0,0];let I=m(_);for(let k=0;k<4;k++)I[k]^=u[0][k];for(let k=1;k<R;k++){for(let M=0;M<4;M++)P[M]=a[n([84,49])][I[M]>>24&255]^a[n([84,50])][I[(M+1)%4]>>16&255]^a[n([84,51])][I[(M+2)%4]>>8&255]^a[n([84,52])][255&I[(M+3)%4]]^u[k][M];I=P[n([115,108,105,99,101])]()}const V=new Uint8Array(16);let A;for(let k=0;k<4;k++)A=u[R][k],V[4*k]=255&(a[n([83])][I[k]>>24&255]^A>>24),V[4*k+1]=255&(a[n([83])][I[(k+1)%4]>>16&255]^A>>16),V[4*k+2]=255&(a[n([83])][I[(k+2)%4]>>8&255]^A>>8),V[4*k+3]=255&(a[n([83])][255&I[(k+3)%4]]^A);return V}function C(){const _=a[n([110,117,109,98,101,114,79,102,82,111,117,110,100,115])][d[n([108,101,110,103,116,104])]];for(let F=0;F<=_;F++)u[n([112,117,115,104])]([0,0,0,0]),f[n([112,117,115,104])]([0,0,0,0]);const R=4*(_+1),P=d[n([108,101,110,103,116,104])]/4,I=m(d);let V;for(let F=0;F<P;F++)V=F>>2,u[V][F%4]=I[F],f[_-V][F%4]=I[F];let A,k=0,M=P;for(;M<R;){A=I[P-1],I[0]^=a[n([83])][A>>16&255]<<24^a[n([83])][A>>8&255]<<16^a[n([83])][255&A]<<8^a[n([83])][A>>24&255]^a[n([114,99,111,110])][k]<<24,k+=1;for(let J=1;J<P/2;J++)I[J]^=I[J-1];A=I[P/2-1],I[P/2]^=a[n([83])][255&A]^a[n([83])][A>>8&255]<<8^a[n([83])][A>>16&255]<<16^a[n([83])][A>>24&255]<<24;for(let J=P/2+1;J<P;J++)I[J]^=I[J-1];let F,N,xe=0;for(;xe<P&&M<R;)F=M>>2,N=M%4,u[F][N]=I[xe],f[_-F][N]=I[xe++],M++}for(let F=1;F<_;F++)for(let N=0;N<4;N++)A=f[F][N],f[F][N]=a[n([85,49])][A>>24&255]^a[n([85,50])][A>>16&255]^a[n([85,51])][A>>8&255]^a[n([85,52])][255&A]}}function n(s){return s.map(o=>String.fromCharCode(o)).join("")}(s=>{function o(){const h=[{[n([105,100])]:1,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([67,111,109,109,101,110,116,115]),[n([112,108,117,103,105,110,78,97,109,101])]:n([67,111,109,109,101,110,116,115,82,101,112,111,115,105,116,111,114,121]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([108,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([99,104,101,99,107,65,108,115,111])]:[{[n([105,100])]:2,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([84,114,97,99,107,32,67,104,97,110,103,101,115]),[n([112,108,117,103,105,110,78,97,109,101])]:n([84,114,97,99,107,67,104,97,110,103,101,115,69,100,105,116,105,110,103]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([108,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101,70,111,114,84,114,97,99,107,67,104,97,110,103,101,115]),[n([111,112,116,105,111,110,115])]:{[n([97,105,119,115,103,105,99])]:!0,[n([97,105,116,99,100,103,105,108])]:!0,[n([97,105,114,118,105,105,108])]:!0}}],[n([111,112,116,105,111,110,115])]:{[n([97,105,119,115,103,105,99])]:!0,[n([97,105,116,99,100,103,105,108])]:!0,[n([97,105,114,118,105,105,108])]:!0}},{[n([105,100])]:3,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([80,97,103,105,110,97,116,105,111,110]),[n([112,108,117,103,105,110,78,97,109,101])]:n([80,97,103,105,110,97,116,105,111,110,76,111,111,107,117,112]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([112,97,103,105,110,97,116,105,111,110,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101])},{[n([105,100])]:4,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([82,101,118,105,115,105,111,110,32,72,105,115,116,111,114,121]),[n([112,108,117,103,105,110,78,97,109,101])]:n([82,101,118,105,115,105,111,110,115,82,101,112,111,115,105,116,111,114,121]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([108,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101,70,111,114,82,101,118,105,115,105,111,110,72,105,115,116,111,114,121]),[n([111,112,116,105,111,110,115])]:{[n([97,105,119,115,103,105,99])]:!0,[n([97,105,116,99,100,103,105,108])]:!0,[n([97,105,114,118,105,105,108])]:!0}},{[n([105,100])]:5,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([68,111,99,117,109,101,110,116,32,79,117,116,108,105,110,101]),[n([112,108,117,103,105,110,78,97,109,101])]:n([68,111,99,117,109,101,110,116,79,117,116,108,105,110,101,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([100,111,99,117,109,101,110,116,79,117,116,108,105,110,101,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:6,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([70,111,114,109,97,116,32,80,97,105,110,116,101,114]),[n([112,108,117,103,105,110,78,97,109,101])]:n([70,111,114,109,97,116,80,97,105,110,116,101,114,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([102,111,114,109,97,116,80,97,105,110,116,101,114,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:7,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([83,108,97,115,104,32,67,111,109,109,97,110,100]),[n([112,108,117,103,105,110,78,97,109,101])]:n([83,108,97,115,104,67,111,109,109,97,110,100,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([115,108,97,115,104,67,111,109,109,97,110,100,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:8,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([84,97,98,108,101,32,111,102,32,67,111,110,116,101,110,116,115]),[n([112,108,117,103,105,110,78,97,109,101])]:n([84,97,98,108,101,79,102,67,111,110,116,101,110,116,115,69,100,105,116,105,110,103]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([116,97,98,108,101,79,102,67,111,110,116,101,110,116,115,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:9,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([84,101,109,112,108,97,116,101]),[n([112,108,117,103,105,110,78,97,109,101])]:n([84,101,109,112,108,97,116,101,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([116,101,109,112,108,97,116,101,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:10,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([80,97,115,116,101,32,102,114,111,109,32,79,102,102,105,99,101,32,69,110,104,97,110,99,101,100]),[n([112,108,117,103,105,110,78,97,109,101])]:n([80,97,115,116,101,70,114,111,109,79,102,102,105,99,101,69,110,104,97,110,99,101,100,73,110,108,105,110,101,114]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([112,97,115,116,101,70,114,111,109,79,102,102,105,99,101,69,110,104,97,110,99,101,100,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101]),[n([111,112,116,105,111,110,115])]:{[n([102,103,105])]:12}},{[n([105,100])]:11,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([65,73,32,65,115,115,105,115,116,97,110,116]),[n([112,108,117,103,105,110,78,97,109,101])]:n([65,73,65,115,115,105,115,116,97,110,116,85,73]),[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]:n([97,105,76,105,99,101,110,115,101,75,101,121]),[n([104,97,110,100,108,101,114])]:n([99,104,101,99,107,76,105,99,101,110,115,101])},{[n([105,100])]:12,[n([102,101,97,116,117,114,101,78,97,109,101])]:n([80,114,111,100,117,99,116,105,118,105,116,121,32,112,97,99,107])}];return v(h),h;function g(E){return 1<<E-1}function v(E){E[n([102,111,114,69,97,99,104])](O=>{O[n([112,101,114,109,105,115,115,105,111,110,77,97,115,107])]=g(O[n([105,100])]),r(O)&&O[n([99,104,101,99,107,65,108,115,111])]&&v(O[n([99,104,101,99,107,65,108,115,111])])})}}function r(h){return n([112,108,117,103,105,110,78,97,109,101])in h}const a=[1,85,78,115,198,255,50,112,83,87,161],c=[127,34,6,211,167,86,146,199,132,160,18];function l(h){const g=[29,221,175,90,231,133,239,240,75,180];return x(h,new Uint8Array([...a,...g,...c]))}function x(h,g){const v=d(h),E=Array[n([102,114,111,109])](wn(v)),O=E[n([112,111,112])](),Z=E[n([112,111,112])]();return Qt(t(E,g,Z+256*O))}function d(h){const g=atob(h),[v,E]=g[n([115,112,108,105,116])](n([45]));try{if(atob(E))return atob(v)}catch{}return g}function u(h){try{const g=l(h),v=JSON[n([112,97,114,115,101])](g),E=parseInt(v[n([49])]),O=v[n([50])]||"",Z=parseInt(v[n([51])]),He=parseInt(v[n([52])])||0,we=parseInt(v[n([53])])||0;return{[n([112,114,111,100,117,99,116,78,97,109,101])]:O,[n([97,108,108,111,119,101,100,80,108,117,103,105,110,115])]:He,[n([101,120,112,105,114,97,116,105,111,110,68,97,116,101])]:E,[n([105,115,84,114,105,97,108])]:Z,[n([105,115,73,110,116,101,114,110,97,108])]:we}}catch{return null}}const f=o(),m={[n([99,104,101,99,107,76,105,99,101,110,115,101])]:V,[n([99,104,101,99,107,76,105,99,101,110,115,101,70,111,114,84,114,97,99,107,67,104,97,110,103,101,115])]:A,[n([99,104,101,99,107,76,105,99,101,110,115,101,70,111,114,82,101,118,105,115,105,111,110,72,105,115,116,111,114,121])]:k},b=s[n([99,111,110,115,116,114,117,99,116,111,114])][n([112,108,117,103,105,110,78,97,109,101])],p=n([99,111,110,116,101,120,116])in s?s.context:s.editor,C=n([52,48,52,54,50,50,51,48]),_=n([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57]),R=p.config.get(n([108,105,99,101,110,115,101,75,101,121])),P=f[n([102,105,108,116,101,114])](r)[n([102,105,110,100])](h=>h[n([112,108,117,103,105,110,78,97,109,101])]===b);function I(h,g){m[g[n([104,97,110,100,108,101,114])]](h,g),g[n([99,104,101,99,107,65,108,115,111])]&&g[n([99,104,101,99,107,65,108,115,111])][n([102,105,108,116,101,114])](v=>W(p,v[n([112,108,117,103,105,110,78,97,109,101])]))[n([102,111,114,69,97,99,104])](v=>I(h,v))}function V(h,g){F(M(h,g),g)}function A(h,g){function v(E,O){try{if(W(p,n([84,114,97,99,107,67,104,97,110,103,101,115,69,100,105,116,105,110,103]))&&E){const Z=z(p,n([84,114,97,99,107,67,104,97,110,103,101,115,69,100,105,116,105,110,103]))[n([95,101,120,101,99,117,116,101,83,117,103,103,101,115,116,105,111,110])];if(parseInt(Z)/2>E[n([101,120,112,105,114,97,116,105,111,110,68,97,116,101])])return N(O[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}return M(E,O)}catch{return N(O[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}}F(v(h,g),g)}function k(h,g){const v=c[0]*a[1],E=c[0]*a[2],O=c[2]*a[2];W(p,n([87,101,98,83,111,99,107,101,116,71,97,116,101,119,97,121]))&&z(p,n([87,101,98,83,111,99,107,101,116,71,97,116,101,119,97,121]))[n([115,116,97,116,101])]==n([99,111,110,110,101,99,116,101,100])&&(window[xe()]=O);function Z(T,$){try{return ft()?N($[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([86,97,108,105,100])):M(T,$)}catch{return N($[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}}function He(T,$){if(T==$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))rt();else if(T==$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108])){const ke=we();ke&&Ie(ke,$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]);const Ve=en();window[n([115,101,116,84,105,109,101,111,117,116])](()=>{Ie(n([116,105,109,101]),$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])])},Ve);const Xe=z(p,n([82,101,118,105,115,105,111,110,115,82,101,112,111,115,105,116,111,114,121]))[n([95,114,101,118,105,115,105,111,110,115])];Xe[n([108,101,110,103,116,104])]>=7?Ie(n([114,101,118,105,115,105,111,110,115]),$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]):Xe.on(n([97,100,100]),()=>{Xe[n([108,101,110,103,116,104])]>=7&&Ie(n([114,101,118,105,115,105,111,110,115]),$[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])])})}}function we(){if(!W(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114])))return!1;for(const T in window)if(Number.isNaN(Number(T))){if(window[T]===v)return n([116,105,109,101]);if(window[T]===E)return n([114,101,118,105,115,105,111,110,115])}return!1}function ft(){if(!W(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114])))return!1;for(const T in window)if(Number.isNaN(Number(T))&&window[T]===O)return!0;return!1}function Ie(T,$){rt(),N($+n([84,114,105,97,108,76,105,109,105,116,58])+T),window[xe()]=T===n([116,105,109,101])?v:E}function en(){let T=c[6]*a[8]*a[6];return W(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))&&(T/=10),T}function rt(){const T=p;function $(){W(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))&&(z(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))[n([117,110,98,105,110,100])](n([105,115,69,110,97,98,108,101,100])),z(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))[n([105,115,69,110,97,98,108,101,100])]=!1,z(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))[n([117,112,100,97,116,101])]=oe,z(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))[n([115,97,118,101,82,101,118,105,115,105,111,110])]=oe,T[n([109,111,100,101,108])][n([99,104,97,110,103,101])]=oe,T[n([109,111,100,101,108])][n([101,110,113,117,101,117,101,67,104,97,110,103,101])]=oe,T[n([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](n([109,111,100,101,108]))),W(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))&&(z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([117,110,98,105,110,100])](n([105,115,69,110,97,98,108,101,100])),z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([105,115,69,110,97,98,108,101,100])]=!1,z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([99,111,109,112,97,114,101])]=oe,z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([95,103,101,116,68,105,102,102])]=oe)}T[n([115,116,97,116,101])]==n([114,101,97,100,121])?$():T[n([111,110,99,101])](n([114,101,97,100,121]),()=>{if(W(T,n([82,101,118,105,115,105,111,110,84,114,97,99,107,101,114]))&&$(),W(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))){const $e=z(T,n([82,101,118,105,115,105,111,110,115,82,101,112,111,115,105,116,111,114,121])),ke=$e.getRevision(0),Ve=$e.getEarlierVisibleRevision(ke[n([105,100])]);z(T,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114]))[n([99,111,109,112,97,114,101])](ke[n([105,100])],Ve?Ve[n([105,100])]:null,1).then(()=>$())}})}He(Z(h,g),g)}function M(h,g){try{return pn(g)?N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([86,97,108,105,100])):h&&bn(h[n([97,108,108,111,119,101,100,80,108,117,103,105,110,115])],g)?h[n([105,115,73,110,116,101,114,110,97,108])]&&!window[n([111,112,101,110])][n([99,108,111,115,101,100])]||parseInt(C)/2>h[n([101,120,112,105,114,97,116,105,111,110,68,97,116,101])]?N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100])):h[n([105,115,84,114,105,97,108])]?N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108])):N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([86,97,108,105,100])):N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}catch{return N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100]))}}function F(h,g){if(p instanceof ds){const v=p;h==g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100])?J(v):h==g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108])&&window[n([115,101,116,84,105,109,101,111,117,116])](()=>{J(v),N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108,76,105,109,105,116,58,116,105,109,101]))},c[6]*a[8]*a[6]),v[n([101,100,105,116,111,114,115])][n([111,110])](n([97,100,100]),(E,O)=>{h!=g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100])&&h!=g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108,76,105,109,105,116,58,116,105,109,101])&&h!=g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108,76,105,109,105,116,58,111,112,101,114,97,116,105,111,110,115])||ze(O)})}else{const v=p;h==g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([73,110,118,97,108,105,100])?ze(v):h==g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108])&&v[n([111,110])](n([114,101,97,100,121]),()=>{let E=0;v[n([109,111,100,101,108])][n([111,110])](n([97,112,112,108,121,79,112,101,114,97,116,105,111,110]),(O,Z)=>{Z[0][n([105,115,68,111,99,117,109,101,110,116,79,112,101,114,97,116,105,111,110])]&&E++,E===504&&(ze(v),N(g[n([108,105,99,101,110,115,101,83,116,97,116,117,115,80,114,101,102,105,120])]+n([84,114,105,97,108,76,105,109,105,116,58,111,112,101,114,97,116,105,111,110,115])),O[n([111,102,102])]())},{priority:n([104,105,103,104,101,115,116])})})}}function N(h){const g=xe();return p[g]=h,h}function xe(){const h=String(window[n([112,101,114,102,111,114,109,97,110,99,101])][n([110,111,119])]())[n([114,101,112,108,97,99,101])](n([46]),"");let g="";for(let v=0;v<h[n([108,101,110,103,116,104])];v+=2){let E=parseInt(h[n([115,117,98,115,116,114,105,110,103])](v,v+2));E>=_[n([108,101,110,103,116,104])]&&(E-=_[n([108,101,110,103,116,104])]),g+=_[E]}return g}function J(h){for(const g of h[n([101,100,105,116,111,114,115])])ze(g);z(h,n([67,111,109,109,101,110,116,115,82,101,112,111,115,105,116,111,114,121]))[n([115,119,105,116,99,104,82,101,97,100,79,110,108,121])](!0),z(h,n([67,111,109,109,101,110,116,115,82,101,112,111,115,105,116,111,114,121]))[n([115,119,105,116,99,104,82,101,97,100,79,110,108,121])]=oe}function ze(h){function g(){h[n([109,111,100,101,108])][n([99,104,97,110,103,101])]=oe,h[n([109,111,100,101,108])][n([101,110,113,117,101,117,101,67,104,97,110,103,101])]=oe,h[n([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](n([109,111,100,101,108]))}h[n([115,116,97,116,101])]==n([114,101,97,100,121])?g():h[n([111,110,99,101])](n([114,101,97,100,121]),()=>g())}function oe(){return null}function bn(h,g){const v=!!(h&g[n([112,101,114,109,105,115,115,105,111,110,77,97,115,107])]),E=Xt(h,g);return v||E}function Xt(h,g){const v=(g[n([111,112,116,105,111,110,115])]||{})[n([102,103,105])]||null;if(!v)return!1;const E=f[n([102,105,110,100])](O=>O[n([105,100])]===v);return!!E&&!!(h&E[n([112,101,114,109,105,115,115,105,111,110,77,97,115,107])])}function pn(h){if(!W(p,h[n([112,108,117,103,105,110,78,97,109,101])]))return!0;const g=h[n([111,112,116,105,111,110,115])]||{},v=g[n([97,105,119,115,103,105,99])]||!1,E=g[n([97,105,116,99,100,103,105,108])]||!1,O=g[n([97,105,114,118,105,105,108])]||!1;return W(p,n([87,101,98,83,111,99,107,101,116,71,97,116,101,119,97,121]))&&z(p,n([87,101,98,83,111,99,107,101,116,71,97,116,101,119,97,121]))[n([115,116,97,116,101])]==n([99,111,110,110,101,99,116,101,100])&&v||W(p,n([84,114,97,99,107,67,104,97,110,103,101,115,68,97,116,97,71,101,116,116,101,114]))&&z(p,n([84,114,97,99,107,67,104,97,110,103,101,115,68,97,116,97,71,101,116,116,101,114]))[n([114,101,115,117,108,116])]==n([101,110,100])&&E?!0:!(!W(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114,73,110,116,101,103,114,97,116,105,111,110]))||z(p,n([82,101,118,105,115,105,111,110,86,105,101,119,101,114,73,110,116,101,103,114,97,116,105,111,110]))[n([114,101,115,117,108,116])]!=n([101,110,100])||!O)}function W(h,g){return h[n([112,108,117,103,105,110,115])][n([104,97,115])](g)}function z(h,g){return h[n([112,108,117,103,105,110,115])][n([103,101,116])](g)}function Qt(h){let g="";for(const v of h)g+=String[n([102,114,111,109,67,104,97,114,67,111,100,101])](v);return g}function wn(h){const g=new Uint8Array(h[n([108,101,110,103,116,104])]);for(let v=0;v<h[n([108,101,110,103,116,104])];v++)g[v]=h[n([99,104,97,114,67,111,100,101,65,116])](v);return g}P&&I(u(R),P)})(e)})(this)}_createTemplateListView(e,t){const{editor:n}=this,s=new T$(e);return s.extendTemplate({attributes:{class:["ck-template-list"]}}),s.items.addMany(t.map((o,r)=>{const a=new A$(e,r),c=new S$(e,o);return a.buttonView=c,a.children.add(c),a.buttonView.on("execute",l=>{n.execute("insertTemplate",l.source.templateDefinition.data),n.editing.view.focus()}),a})),s}}var sp=["requires"];(function(i,e){var t=function(n){for(;--n;)i.push(i.shift())};t(++e)})(sp,156);var R$=function(i,e){i=i-0;var t=sp[i];return t};class V$ extends y{static get[R$("0x0")](){return[k$,P$]}static get pluginName(){return"Template"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function op(i){if(i.is("$text")||i.is("$textProxy"))return i.data;const e=i;let t="",n=null;for(const s of e.getChildren()){const o=op(s);n&&n.is("element")&&(t+=`
`),t+=o,n=s}return t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class B$ extends y{constructor(e){super(e),this.set("characters",0),this.set("words",0),Object.defineProperties(this,{characters:{get(){return this.characters=this._getCharacters(this._getText())}},words:{get(){return this.words=this._getWords(this._getText())}}}),this.set("_wordsLabel",void 0),this.set("_charactersLabel",void 0),this._config=e.config.get("wordCount")||{},this._outputView=void 0,this._wordsMatchRegExp=ee.features.isRegExpUnicodePropertySupported?new RegExp("([\\p{L}\\p{N}]+\\S?)+","gu"):/([a-zA-Z0-9À-ž]+\S?)+/gu}static get pluginName(){return"WordCount"}init(){this.editor.model.document.on("change:data",mi(this._refreshStats.bind(this),250)),typeof this._config.onUpdate=="function"&&this.on("update",(t,n)=>{this._config.onUpdate(n)}),Un(this._config.container)&&this._config.container.appendChild(this.wordCountContainer)}destroy(){this._outputView&&(this._outputView.element.remove(),this._outputView.destroy()),super.destroy()}get wordCountContainer(){const e=this.editor,t=e.t,n=e.config.get("wordCount.displayWords"),s=e.config.get("wordCount.displayCharacters"),o=gt.bind(this,this),r=[];return this._outputView||(this._outputView=new D,(n||n===void 0)&&(this.bind("_wordsLabel").to(this,"words",a=>t("Words: %0",a)),r.push({tag:"div",children:[{text:[o.to("_wordsLabel")]}],attributes:{class:"ck-word-count__words"}})),(s||s===void 0)&&(this.bind("_charactersLabel").to(this,"characters",a=>t("Characters: %0",a)),r.push({tag:"div",children:[{text:[o.to("_charactersLabel")]}],attributes:{class:"ck-word-count__characters"}})),this._outputView.setTemplate({tag:"div",attributes:{class:["ck","ck-word-count"]},children:r}),this._outputView.render()),this._outputView.element}_getText(){let e="";for(const t of this.editor.model.document.getRoots())e!==""&&(e+=`
`),e+=op(t);return e}_getCharacters(e){return e.replace(/\n/g,"").length}_getWords(e){return(e.match(this._wordsMatchRegExp)||[]).length}_refreshStats(){const e=this._getText(),t=this.words=this._getWords(e),n=this.characters=this._getCharacters(e);this.fire("update",{words:t,characters:n})}}const O$={class:"modal-content"},L$={class:"card"},M$={class:"card-container"},F$={class:"m-6 p-6 has-text-centered"},N$={class:"is-size-2 has-text-weight-bold"},D$={class:"navbar"},z$={class:"navbar-item"},H$={class:"is-size-1 editor-title"},$$={__name:"ContentEditor",props:{recordId:{type:String,required:!0},apiUrl:{type:String,required:!0},accessToken:{type:String,required:!0}},setup(i){const e=i,t=wr(()=>[{color:"hsl(0,0%,65%)",name:"Medium Grey"},{color:"hsl(214,73%,58%)",name:"Blue 1"},{color:"hsl(205,32%,39%)",name:"Slate Blue"},{color:"hsl(0,0%,100%)",name:"White"},{color:"hsl(0,0%,84%)",name:"off-white"},{color:"hsl(199,66%,56%)",name:"Blue 2"},{color:"hsl(209,34%,51%)",name:"Slate Blue Light"},{color:"hsl(29,28%,55%)",name:"Brown"},{color:"hsl(19,36%,45%)",name:"Bronze"},{color:"hsl(207,25%,23%)",name:"Slate Blue Dark"},{color:"hsl(0,0%,17%)",name:"Dark Grey"},{color:"hsl(36,49%,64%)",name:"Light Brown"},{color:"hsl(20,40%,51%)",name:"High Bronze"},{color:"hsl(213,21%,36%)",name:"Slate Blue Medium"},{color:"hsl(0,0,27)",name:"Dark Grey"}]),n=`${e.apiUrl}/services/data/v58.0/sobjects/memorandumcontent__c/${e.recordId}`,s=d4.component,o=ua,r={plugins:[tV,SV,sV,tO,yO,jR,UV,tL,ZO,OO,jO,ZV,RB,cL,hL,cV,RL,LL,lM,vM,yM,sM,AM,SM,nF,lF,TF,AF,KF,pa,NN,cD,fD,Kg,DL,RD,uV,ND,vb,Tb,DD,kb,Cb,yb,nz,gV,_V,vH,g$,UH,v$,c$,yH,V$,kV,B$],fontBackgroundColor:{colors:t.value},fontColor:{colors:t.value},fontFamily:{options:["default","Poppins","Passenger Display Regular","Passenger Display Bold","Passenger Display Bold Italic","Passenger Display Extra Bold","Passenger Display Extra Bold Italic","Passenger Display Extra Light","Passenger Display Extra Light Italic"]},fontSize:{options:[9,10,11,12,14,16,18,20,24,32,48,60]},image:{toolbar:["imageTextAlternative","toggleImageCaption","imageStyle:inline","imageStyle:block","imageStyle:side","linkImage"]},mediaEmbed:{previewsInData:!0,toolbar:[{name:"imageStyle:icons",title:"Alignment",items:["imageStyle:margin-left","imageStyle:margin-right","imageStyle:inline"],defaultItem:"imageStyle:margin-left"}]},simpleUpload:{uploadUrl:"https://us-central1-cloud-functions-test-397013.cloudfunctions.net/image-host"},style:{definitions:[{name:"Heading",element:"p",classes:["heading"]}]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableCellProperties","tableProperties"],tableProperties:{borderColors:t.value,backgroundColors:t.value},tableCellProperties:{borderColors:t.value,backgroundColors:t.value}},template:{definitions:[{title:"15 Row Table",description:"A Table with 3 columns and 15 rows.",data:'<figure class="table"><table><tbody><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure>'},{title:"20 Row Table",description:"A Table with 3 columns and 20 rows.",data:'<figure class="table"><table><tbody><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure>'},{title:"Executive Summary",description:"Two column layout for Executive Summary Information.",data:'<figure class="table" style="width:100%;"><table><tbody><tr><td style="vertical-align:top;width:50%;"><figure class="table" style="width:95%;"><table><tbody><tr><td style="padding:.5rem;vertical-align:top;"><span style="color:hsl(252,31%,47%);font-family:Poppins;font-size:24px;">BUSINESS DESCRIPTION</span></td></tr><tr><td style="padding:.5rem;vertical-align:top;"><p style="text-align:justify;">Bacon ipsum dolor amet pork chop tri-tip cupim meatloaf, pig drumstick tenderloin pork. Sirloin chicken strip steak, jowl salami short ribs pastrami t-bone capicola pork loin rump. Capicola doner cupim t-bone, shoulder venison porchetta spare ribs sirloin alcatra meatloaf andouille pig. Meatball swine landjaeger leberkas ribeye pastrami, ball tip jowl ham hock.</p></td></tr><tr><td style="padding:.5rem;vertical-align:top;"><span style="color:hsl(252,31%,47%);font-family:Poppins;font-size:24px;">HEADQUARTERS</span></td></tr><tr><td style="padding:.5rem;vertical-align:top;">Tampa, FL, United States</td></tr><tr><td style="padding:.5rem;vertical-align:top;"><span style="color:hsl(252,31%,47%);font-family:Poppins;font-size:24px;">WEBSITE</span></td></tr><tr><td style="padding:.5rem;vertical-align:top;"><a href="https://www.benchmarkinternational.com">https://www.benchmarkinternational.com</a></td></tr><tr><td><figure class="table" style="width:100.24%;"><table class="ck-table-resized" style="background-color:hsl(0,2%,90%);"><colgroup><col style="width:4.83%;"><col style="width:95.17%;"></colgroup><tbody><tr><td style="padding:.5rem;vertical-align:top;" colspan="2"><span style="color:hsl(252,31%,47%);font-family:Poppins;font-size:24px;">KEY FEATURES</span></td></tr><tr><td style="padding:.5rem;vertical-align:top;">&nbsp;</td><td style="padding:.5rem;vertical-align:top;"><ul><li>Flank salami burgdoggen shank drumstick.</li><li>Ball tip boudin cupim tongue pork chop salami rump ham.</li><li>Doner frankfurter landjaeger ball tip short loin.</li><li>Chuck porchetta meatloaf, frankfurter rump short loin strip steak bresaola swine doner t-bone.</li></ul></td></tr></tbody></table></figure></td></tr></tbody></table></figure></td><td style="vertical-align:top;width:50%;"><figure class="table" style="width:95%;"><table><tbody><tr><td style="padding:.5rem;vertical-align:top;"><span style="color:hsl(252,31%,47%);font-family:Poppins;font-size:24px;">MARKETS SERVED</span></td></tr><tr><td style="padding:.5rem;vertical-align:top;"><p style="text-align:justify;">Landjaeger picanha drumstick short loin, buffalo chuck pork chop salami capicola beef hamburger. Boudin shoulder meatball, flank pancetta biltong fatback beef ribs leberkas spare ribs ball tip. Salami picanha landjaeger meatball, chuck pork chop cupim sirloin.&nbsp;</p></td></tr><tr><td style="padding:.5rem;vertical-align:top;"><span style="color:hsl(252,31%,47%);font-family:Poppins;font-size:24px;">REAL ESTATE</span></td></tr><tr><td style="padding:.5rem;vertical-align:top;"><p style="text-align:justify;">Jowl venison short loin t-bone hamburger pork chop ball tip pastrami doner tenderloin cow sausage pork loin tail boudin. Sirloin filet mignon hamburger jerky pork chop chislic turducken beef ribs brisket kielbasa ham chuck pork belly burgdoggen. Turkey tail shank, swine filet mignon jowl biltong cow salami ball tip pork loin tri-tip ham shankle alcatra.</p></td></tr><tr><td style="padding:.5rem;vertical-align:top;"><span style="color:hsl(252,31%,47%);font-family:Poppins;font-size:24px;">OWNERSHIP</span></td></tr><tr><td style="padding:.5rem;vertical-align:top;"><p style="text-align:justify;">Landjaeger picanha drumstick short loin, buffalo chuck pork chop salami capicola beef hamburger. Boudin shoulder meatball, flank pancetta biltong fatback beef ribs leberkas spare ribs ball tip.</p></td></tr><tr><td><figure class="table" style="width:100.12%;"><table class="ck-table-resized" style="background-color:hsl(0,2%,90%);"><colgroup><col style="width:4.83%;"><col style="width:95.17%;"></colgroup><tbody><tr><td style="padding:.5rem;vertical-align:top;" colspan="2"><span style="color:hsl(252,31%,47%);font-family:Poppins;font-size:24px;">OPPORTUNITIES</span></td></tr><tr><td style="padding:.5rem;vertical-align:top;">&nbsp;</td><td style="padding:.5rem;vertical-align:top;"><ul><li><strong>Expansion: </strong>Expand operations geographically to reach new markets across the US and internationally</li><li><strong>AI: </strong>Continue developing an AI-driven content and marketing service for the existing client base</li><li><strong>Additional Services: </strong>Further pursue the high demand fractional marketing services</li><li><strong>New Partner Services: </strong>Develop HubSpot premium services to better serve the company’s current HubSpot clientele</li></ul></td></tr></tbody></table></figure></td></tr></tbody></table></figure><p>&nbsp;</p></td></tr></tbody></table></figure>'},{title:"Highlight Box",description:"A table that serves as a highlight box.",data:`<figure class="table" style="width:13.73%;"><table class="ck-table-resized" style="border:.15rem solid hsl(207,25%,23%);"><colgroup><col style="width:13.93%;"><col style="width:86.07%;"></colgroup><thead><tr><th style="background-color:hsl(207,25%,23%);" colspan="2"><p style="text-align:center;"><span style="color:hsl(0,0%,100%);font-family:'Passenger Display Bold';font-size:24px;">Title</span></p></th></tr></thead><tbody><tr><td style="width:5%;">&nbsp;</td><td style="width:95%;"><ul><li><span style="font-family:Poppins;font-size:12px;">Turducken sed buffalo nulla, prosciutto boudin dolore fatback.</span></li><li><span style="font-family:Poppins;font-size:12px;">Bacon ipsum dolor amet irure ex flank t-bone, quis buffalo tail pariatur rump aliqua drumstick frankfurter corned beef non.</span></li><li><span style="font-family:Poppins;font-size:12px;">Duis anim dolor officia id.</span></li></ul></td></tr></tbody></table></figure>`},{title:"Two Column Layout - Evenly Distributed",description:"A table that serves as a two column layout with each column being evenly distributed.",data:'<figure class="table" style="width:100%;"><table><tbody><tr><td style="vertical-align:top;width:50%;">&nbsp;</td><td style="vertical-align:top;width:50%;">&nbsp;</td></tr></tbody></table></figure>'},{title:"Two column Layout - 60/40",description:"A table that serves as a two-column layout with the first column taking 60% of the size and the second column having 40% size.",data:'<figure class="table" style="width:100%;"><table><tbody><tr><td style="width:60%;">&nbsp;</td><td style="width:40%;">&nbsp;</td></tr></tbody></table></figure>'},{title:"Three column Layout - Evenly Distributed",description:"A table that serves as a three column layout with each column being evenly distributed.",data:'<figure class="table" style="width:100%;"><table><tbody><tr><td style="vertical-align:top;width:33%;">&nbsp;</td><td style="vertical-align:top;width:33%;">&nbsp;</td><td style="vertical-align:top;width:33%;">&nbsp;</td></tr></tbody></table></figure>'}]},toolbar:["style","alignment","bold","italic","underline","strikethrough","subscript","superscript","removeFormat","formatPainter","|","fontBackgroundColor","fontColor","fontSize","fontFamily","|","link","bulletedList","numberedList","selectAll","|","horizontalLine","outdent","indent","|","imageUpload","htmlEmbed","blockQuote","insertTable","mediaEmbed","insertTemplate","specialCharacters","undo","redo","findAndReplace"],licenseKey:"MktzKzlWWDEvSTdoOXV6TkhtY0RVVm0wMWlldTNtYzNPR2Y1dEVmWlJSaW9yQmhrcWRZQlJrb1RTUnl0LU1qQXlNekV4TWpFPQ=="},a=Ts(""),c=Ts(""),l=Ts("Saving..."),x=Ts(!1);function d(){x.value=!0,Yl.patch(n,{Body__c:a.value},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`}}).then(b=>{b.status<300&&(l.value="Save Complete",setTimeout(u,2e3))}).catch(b=>{console.log("There was an error updating the record: %s",JSON.stringify(b,null,"	"))})}function u(){x.value=!1}function f(){window.close()}function m(){console.log(a.value)}return Tc(()=>{let{recordId:b,apiUrl:p,accessToken:C}=e;b!=null&&p!==null&&C!==null?Yl.get(n,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`}}).then(_=>{var R,P,I,V;a.value=((R=_.data)==null?void 0:R.Body__c)!==void 0&&((P=_.data)==null?void 0:P.Body__c)!==null?(I=_.data)==null?void 0:I.Body__c:"",c.value=(V=_.data)==null?void 0:V.Name}):(l.value="Unable to Retrieve Record.",x.value=!0)}),(b,p)=>(Ps(),_r(sh,null,[Ye("div",{class:ah({modal:!0,"is-active":x.value})},[Ye("div",{class:"modal-background",onClick:u}),Ye("div",O$,[Ye("div",L$,[Ye("div",M$,[Ye("div",F$,[Ye("span",N$,b0(l.value),1)])])])])],2),Ye("nav",D$,[Ye("div",z$,[Ye("h2",H$,b0(c.value),1)]),Ye("div",{class:"navbar-end"},[Ye("button",{class:"navbar-item button is-info is-medium mr-3",onClick:d},"Save"),Ye("button",{class:"navbar-item button is-medium is-danger",onClick:f},"Close"),Ye("button",{class:"navbar-item button is-medium is-warning",onClick:m},"Debug")])]),rh($s(s),{editor:$s(o),modelValue:a.value,"onUpdate:modelValue":p[0]||(p[0]=C=>a.value=C),config:r},null,8,["editor","modelValue"])],64))}},U$={key:1,class:"modal"},W$=Ye("div",{class:"modal-background"},null,-1),j$=Ye("div",{class:"modal-content"},[Ye("div",{class:"box has-text-centered"},[Ye("p",{class:"is-size-2"},"No Record ID provided.")])],-1),q$=[W$,j$],fU={__name:"EditorView",setup(i){const e=z7(),t=H7(),n=$7(),s=wr(()=>{var r,a;return((r=e.params)==null?void 0:r.recordId)!==void 0&&((a=e.params)==null?void 0:a.recordId)!==null}),o=wr(()=>{var r,a;return Array.isArray((r=e.params)==null?void 0:r.recordId)?(a=e.params)==null?void 0:a.recordId[0]:""});return Tc(()=>{console.log("onBeforeMount executed."),n.isAuthenticated||t.push({name:"home",params:e.params})}),(r,a)=>(Ps(),_r("div",null,[s.value?(Ps(),oh($$,{key:0,"record-id":o.value,"api-url":$s(n).apiUrl,"access-token":$s(n).bearerToken},null,8,["record-id","api-url","access-token"])):(Ps(),_r("div",U$,q$))]))}};export{fU as default};
